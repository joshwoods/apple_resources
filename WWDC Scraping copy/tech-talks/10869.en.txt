---
Title:  Family Sharing for in-app purchases
Year:   2020
Web:    https://nonstrict.eu/wwdcindex/tech-talks/10869/

[!] This transcript was generated using Whisper, it has known transcription errors.
---

Thank you all for joining today’s session. We’re excited to introduce you to Family Sharing for in-app purchases. First, let’s introduce ourselves. I’m Bryan Eisenstadt, and I’m on the App Store Monetization team. And I’m David Wendland, a Global Technical Advocate with the App Store Commerce team. Today, I’ll be giving you an overview of Family Sharing for in-app purchases, then David will discuss engineering and implementation of the feature.

So let’s get started with the feature overview. So what exactly is Family Sharing for in-app purchases? As a reminder, Family Sharing is a powerful tool that makes it easy for customers to share their digital purchases with their family members across all of their Apple devices. Since its launch in 2014, Family Sharing has become an important part of the Apple ecosystem, bringing content and services to more customers and more devices than ever before.

As part of Apple’s ongoing investment in Family Sharing, we’re excited to roll out an update that expands these capabilities to StoreKit. And that’s what today’s session is all about: getting started with Family Sharing for in-app purchases. We’re excited to share that you can now enable Family Sharing for auto-renewable subscriptions and non-consumable in-app purchases.

In addition to being available for both subscriptions and non-consumables, Family Sharing enables purchase sharing with up to five family members included in a customer's family group. As a developer, you can choose to implement Family Sharing on existing SKUs or create new ones specifically for Family Sharing. Family Sharing is easy to implement within App Store Connect, as David will discuss in-depth later on in this presentation. Family Sharing provides a streamlined, convenient user experience and can help you attract subscribers, encourage paid subscriptions, increase user engagement, and improve retention. So let's talk about that a bit more with why Family Sharing.

Family Sharing for in-app purchases can help with four key areas of your business: subscriber growth, increased engagement, and reduction in churn, which all add up to a higher customer lifetime value. To help illustrate how these metrics work together, let’s look at an example. Family Sharing can be a compelling feature in Acquisition Driver to grow your subscriber base and acquire customers, like Michael shown here, to your product.

Once you’ve acquired Michael as a subscriber, he can seamlessly extend his subscription to the four other members of his family with Family Sharing, multiplying the number of customer touchpoints to your service and app by five times. And with five members of the family now engaging with your product, a compelling content offering combined with effective engagement marketing can keep them coming back to your app. And with more users getting value from your product and service, the overall effect can be to help reduce churn.

and customers love Family Sharing too. Previously, customers had the ability to share in-app purchases on the App Store with family members, but never services through in-app purchases. So we’re excited to introduce that to you today. Second, Family Sharing has been engineered alongside iOS 14 to offer customers a seamless and easy-to-use out-of-box experience. The user experience is consistent across devices and apps. Next, Family Sharing is built with privacy in mind and eliminates the need for password sharing. Each family member receives their own entitlement to a purchase.

And finally, Family Sharing adds value to your in-app purchases by offering purchasers up to six entitlements instead of one. This gives families the opportunity to take better advantage of purchases, extending the number of people with access to them, and giving each family member the ability to personalize their app experience.

Now that we’ve explained what Family Sharing is and the benefits to implementing it, let’s talk about how customers and developers make the most of the feature. In order to begin using Family Sharing for in-app purchases, customers must create a family group. One adult in a household can do so by inviting up to five of their family members to join using their Apple IDs. Each family member uses their own account so their experience stays personalized and private. Once a family group is created, each family member gets instant access to the group subscriptions and content that is eligible for sharing.

Let’s take a look at how customers manage their subscription sharing preferences within the Settings app. This is the Manage Subscriptions page, where customers can view all of the products they’re currently subscribed to. The Share New Subscriptions toggle at the top of the page allows them to choose whether or not they’re automatically sharing family sharing-enabled SKUs moving forward. This toggle is turned on by default in iOS 14, but customers can choose to opt out at any time.

Selecting any of the listed apps will allow you to edit purchases and choose whether Family Sharing is turned on or off for a specific subscription. The initial setting is based on the Share New Subscriptions preference in the image on the left. This is also where customers will need to come in order to opt into Family Sharing in the event it becomes available for an existing subscription.

Now let’s review the steps family groups would need to take to share their Family Shared Subscriptions. For any new purchases of Family Shared Subscriptions, Family Sharing is enabled automatically. For any existing subscriptions a customer has that become available for Family Sharing, the original purchaser has to opt into sharing within settings.

This is to ensure the customer fully acknowledges the updates to their subscription's terms. Managing sharing preferences is slightly different for non-consumables. Here you see the Family Sharing purchase sharing screen, which includes the Share Purchases with Family toggle, which must be turned on in order to share non-consumables with family members.

Family Sharing of non-consumables is automatically enabled for both new and existing purchases as long as purchase sharing is enabled in iCloud, the family is sharing purchases, and the app is not hidden from purchase history. Family members will automatically have access to the content of new purchases, but when Family Sharing becomes available on existing purchases, family members will have to select the Restore Purchase button in order to unlock the content that has newly become available to them.

While we highly encourage you to message the availability of Family Sharing through your own marketing channels, there are two use cases where the App Store will message customers directly. Purchasers will receive a push notification when Family Sharing becomes available on an existing subscription SKU. Push notifications will also be deployed to customers that purchase a new Family Sharing-enabled SKU but have turned off the Share New Subscriptions master toggle within the Manage Subscriptions page. In both cases, the push notifications will link customers to the Edit Subscription page for that app, where they can choose to share it with the rest of their family group.

Now let’s talk about some of the ways to make your family sharing functionality as discoverable and engaging as possible. App Store Connect makes it easy to turn on family sharing for all of your customers. Consider including the functionality in your onboarding flow to clearly communicate the ability to share your subscription with your family members as part of the overall service value proposition. It’s also possible to offer Family Sharing as a separate subscription tier. As you can see here, the purchase flow clearly differentiates between the available tiers and includes a link out to the Family Sharing overview page at the bottom of the screen.

If you do choose to offer Family Sharing as a higher tier of service, remember to group the higher tier with the individual tier or tiers in App Store Connect. This will allow you to offer upgrade messaging such as the in-app messaging shown here, which highlights the value of upgrading an individual subscriber's plan to the family tier.

After a new family subscriber completes their purchase, consider marketing the functionality to remind them to encourage their family members to take advantage of the service, as shown here on the left. On the right, you can see a message for the family members, communicating that they now have access to the subscription. In a little bit, David will walk you through how to recognize a family member and unlock access seamlessly so they can start enjoying your service right away.

Here’s a live example from Night Sky. They’re offering Family Sharing to all their customers on an existing SKU. On the left, you can see how they’ve clearly highlighted Family Sharing within their signup flow and promote that it��s available at no extra cost. And on the right, you can see they’ve given the feature a dedicated page within their post-purchase subscriber onboarding carousel that encourages new plan owners to take advantage of the benefit.

So let's quickly recap a few items to keep in mind when reviewing implementation plans with your team. First, consider the incremental value family sharing could provide to your in-app purchases and how you could use the feature to bring new subscribers to your service. Next, decide whether you'll enable family sharing on a new or existing SKU. And finally, work with your product growth and or marketing teams to create merchandising that helps you encourage new subscribers and increase engagement with your service through family sharing.

I'll now hand it over to David to discuss engineering and implementation. Thank you, Bryan. Hi, everyone. I’m Dave Wenlend on the App Store Commerce team, based in Cupertino. As a global technical advocate, I have the opportunity today to share with you some engineering and implementation details to consider when adopting Family Sharing for in-app purchases.

We have three sections to cover. We’ll start with enabling Family Sharing per product in App Store Connect. Then I’ll discuss how your app will be able to entitle service for our purchasers, family members, and I’ll finish up with updates to StoreKit and Server Notifications for Family Sharing. So let’s begin with enabling Family Sharing.

So visit App Store Connect and navigate to the subscription or non-consumable product that you wish to enable. You’ll see a new section labeled Family Sharing, and to start, tap Turn On. A confirmation dialog will be shown. Once you tap confirm, your product will be family shareable for all your customers' new and existing purchases within a few hours. Now we do want to emphasize that once enabled for a given product, it cannot be reverted. Reason being is that customers may have based their purchasing decision on this functionality.

Once enabled in App Store Connect, StoreKit will now return the property "Is Family Shareable" for any products that you have enabled. As shown earlier by Bryan, this allows you to dynamically control family sharing specific UI within your app on iOS 14 or later. Here’s sample code of how your app could use the new property in the SK Product Object. The Is Family Shareable property is a simple Boolean allowing you to identify and merchandise family shareable products with custom UI or copy, just like the example Bryan showed earlier with Night Sky. Now let’s dive deeper into how Family Sharing works for the family members.

The great news is, Family Sharing works the same way your server and app are familiar with. Your app should already handle these family transactions without making any changes, server-side or client-side. Because automatically, family shareable purchases are available to all members of the family. So when your application is launched, you will see a transaction in the payment queue, just like a normal purchase. Thus allowing you to validate each family member's app receipt for access using their own Apple ID.

With our assumption that your app will work for family members without any changes, let’s review some key best practices that ensures your application delivers an optimal experience in all scenarios. To start, it’s critical to initialize your SK Payment Transaction Observer at launch and keep it alive while your application is active. This will ensure your application never misses a transaction. This is also important for other scenarios such as Ask to Buy, PSD2, or subscription offer codes where a transaction may be finalized outside of your app.

Next, before merchandising any product to your customers, it is a best practice to ensure you know the customer status first. By retrieving the app receipt and validating it with our verify receipt endpoint, you can determine if they have past purchases that you need to entitle or if they are a new customer so you can merchandise to them appropriately. With these two best practices, you can reduce customer escalations, minimize refunds, and negative reviews, ultimately improving the overall customer experience.

Now let’s illustrate what a new purchase looks like for family members and their devices. The purchaser initiates a purchase on their device, just like normal. As this product is family shareable, transactions will be created for each family member. If you are following our best practices, your application will see these new transactions upon launch or in real time in the payment queue, in which you can validate and entitle service like any other transaction. One thing to note, we have implemented a delay for the family transactions to allow the purchaser time to disable sharing if they so choose to.

Let’s take the same illustration, but for an existing subscription purchase. As mentioned earlier, for existing purchases, Family Sharing is not enabled by default. The purchaser would need to enable Family Sharing from the Manage Subscriptions page for each existing subscription. Once enabled, the transactions for each family member would be created shortly thereafter.

The App Receipt has received a new field: In-App Ownership Type. This will allow you to distinguish between the purchaser and family members. As Bryan shared earlier, if your application wanted to have a custom onboarding experience for family members, this is something you could use. Or this could be helpful if you wanted to identify a customer who has the ability to manage the subscription. Then you’d use the type Purchased. The value can be found within the transaction objects of the Latest Receipt Info array.

Next up, handling subscriber events. There are unique scenarios to be aware of, as there are times you may need to revoke access from a family member, such as when the purchaser has disabled Family Sharing completely, or perhaps the purchaser has received a refund for the subscription or non-consumable product.

Finally, it may be the case that either the family member or the purchaser is no longer part of the family unit. To account for these scenarios, we have some updates in iOS 14 and to App Store Server Notifications. We’ve updated our StoreKit framework with a new method called Did Revoke Entitlements for Product Identifiers. This callback is a signal that some entitlements may have changed for this customer and you should verify their status.

In addition, we’ve introduced a new server notification type called Revoke. This real-time server-to-server notification is exclusive for family members. So when you receive either of these callbacks, it’s important to reestablish the correct entitlements, meaning it’s important to iterate through the entire receipt, as these customers may have had multiple entitlements. So if one has been revoked, there may be another transaction entitling the customer. So by doing so, in those cases, you would ensure no service interruption.

Let’s briefly review the server notification types we have today and note which apply. Also, if you have not already added your server endpoint in App Store Connect, you can do so at any time. Some do apply to all in-app purchase types, and once enabled, you will receive them for sandbox and production transactions.

Thus, once your engineering schedule allows, you can take advantage of them one type at a time. The first four notifications do not apply to family members. As noted earlier, the revoke notification is only sent for family members for the scenarios covered, but this does apply to both non-consumaples and auto-renewable subscriptions.

Now, the Did Fail to Renew and Did Recover notifications are relevant for both. In these cases, they are sent for each family member and you will want to ensure you are updating their status appropriately, as the whole family enters and exits the billing retry state. Additionally, if you have Billing Grace Period enabled in App Store Connect, then these notifications would include the Grace Period Expires Date field.

The last four notifications will be coming out later this year, so be sure to follow Apple Developer News for updates at developer.apple.com/news. Until then, you can use the in-app ownership type to identify them and leverage our Verify Receipt endpoint to get the latest status, to account for subscriber downgrades, upgrades, renewals, or customers disabling auto-renew.

And here’s an update in Sales and Trends. With the subscription report, you may have questions such as how many paid subscriptions do I have by product, or how many customers have access, including family members. You’ll see we’ve added a new subscribers column to the subscription report. This additional column will provide you the count of customers who have access to the subscription, including the primary subscriber and the entitled family members. Note that this field is only populated if the record represents more than three active subscriptions.

To close out, consider enabling Family Sharing functionality with either your new or existing products. Do clearly communicate family sharing availability and the value proposition. And remember, family sharing provides customer privacy and reduces credential sharing. And lastly, please follow our best practices by initializing Transaction Observer on App Launch and verify customer status before merchandising your products. Thank you for watching and we can't wait to see how you use Family Sharing for in-app purchases to grow your business. For more information about Family Sharing, please visit the Apple Developer site.
