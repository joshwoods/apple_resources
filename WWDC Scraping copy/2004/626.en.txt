---
Title:  Xserve Deployment
Year:   2004
Web:    https://nonstrict.eu/wwdcindex/wwdc2004/626/

[!] This transcript was generated using Whisper, it has known transcription errors.
---

Okay, good afternoon. My name's Doug Brooks. I'm product manager for server hardware at Apple, and this session is XServe Deployment. If we take a look, two years ago, actually at this conference, Steve Jobs gave us a little teaser trailer of a new product announcement that turned out to be announced the following week in Cupertino. And that announcement turned out to be Xserve.

So Xserve as a product line is just about two years old, and it introduced, you know, Apple technology. You know, phenomenal at the time, G4 processing power, great networking and storage capabilities, headless management, remote management capabilities in an Apple 1U form factor. Not only great technology, we happen to kind of think it looks good as well. But since then, we've come a long way. I mean, if you think about two years ago, we just embarked on this journey.

And you think of where we've come from a hardware and a software perspective, it's quite a bit. Obviously, we've introduced what we like to now call the slot load Xserve, kind of the speed bump to the product. The cluster node bringing a streamlined configuration. The Xserve configuration for clustering and more compute centered applications, kind of removing the things that you don't need for nontraditional server applications. And of course, most recently, the Xserve G5 in January bringing G5 power and technology into this 1U form factor.

A big jump from there in just two years. And of course on the software side, just amazing innovation. I like to think the original Xserve, if you think about it, shipped with Mac OS 10.1.5. And since then, of course, Jaguar, Panther, and of course this week hearing about new features in Tiger, just continuing to add to the pace of innovation on the server software side.

And of course, Xserve RAID bringing phenomenal capacity and performance and a fiber channel attached storage device, really breaking the price barrier for protected high performance storage. And also when you look at things like XSAN introduced, be shipping this fall, bringing a SAN file system to Mac OS X with really excellent storage and shared storage capability. It's going to really change the way storage can be deployed on Mac OS X server.

And finally, third parties. We've had phenomenal third party adoption in the server and enterprise space over the last two years. More and more developers bringing their products and their technologies to Mac OS X. It's an exciting growth in these kinds of solutions and kind of ways you can deploy Xserve.

And so we see customer adoption really taking off, especially with the Xserve G5 bringing this power and technology into the form factor. Really see customers very excited and doing great new things with Xserve. Again, a lot of that has to do with the G5 processor, bringing that computational capability, that bandwidth, that throughput into that architecture. But we also think it goes beyond that and look at the whole architecture as a whole, really bringing balance of performance, storage, and networking. Along with remote management and monitoring capabilities into just a really well-rounded package.

And of course we've had lots of great quotes and reviews and this is one of the ones that just came out recently which I really love. It was a review in VAR business against a Windows 2003 server and I think the last line really sums it up. Too impressive to pass up. Just one of my favorite reviews recently. So just phenomenal reception of Xserve in this space. And of course probably one of the best, just it's really, really fast. So this is a review of Xserve G5 in computer world just recently.

So what are we going to talk about today? Well, first of all, kind of the quick why XServe. Touched a little bit on that. Touched very quickly on just XServe G5. And then really going to the deployment side of this product, taking a look at planning requirements, deployment strategies. We're also going to hear from some customers, including Apple's own IS&T group, a little bit on how they have deployed XServe.

And along the way, hopefully pick up some practices and guidelines that may help you as you're looking at the XServe deployment. So why XServe? Well, again, you know, we really think with XServe we've really kind of broken the mold of servers in this space. Really bringing a great mix of processing power, networking, IO, storage, all into a phenomenal 1U form factor with great value and great capabilities of Mac OS X Server.

And again, the G5 really has raise the bar in capabilities for Xserve, really bringing 64-bit computing power that we're continuing to tap into with Mac OS X Server. And a phenomenal architecture. With Xserve G5, we've really redesigned the architecture inside the box to really bring higher throughput, higher bandwidth into the system.

It's not just about the G5 processor. It's about more memory bandwidth, ECC memory capabilities, PCIX capabilities, serial ATA hard drives, phenomenal networking bandwidth. And not just bandwidth, but new features like VLAN capability and more hardware checksumming capabilities in the chipset itself. Just really bringing a really server-based approach into this architecture.

and other really important fact and we'll touch on this a little bit more in the planning segment but With the G5, we really have a great advantage in that for the processor, the amount of power and heat that it outputs is significantly lower than the competition. And, you know, I like to joke, you can put an Xserve anywhere.

You can put it in your office, you can put it on a shelf, you can put it really a single Xserve just about anywhere. But when you start putting several of these on a single power circuit in an enclosed room, you start to have to really begin to factor out into your equation the environmental impacts of that.

I had a couple extra servers in my office over the weekend planning for some of the demos in this session, and I had my door all closed up. Coming in over the weekend, the room was quite warm. It just wasn't built for the kind of cooling that's required to move air through this number of machines. And that's just with the lower power and heat output of Xserve.

I also want to take a moment to really comment on the thermal design of the architecture. This is something we take when we design these systems very, very seriously. This is a very, very rigorous design in the thermal and the cooling system. We're very much purist in this respect. It's a pure front-to-back airflow, very intelligently monitored fans and systems.

We're leveraging the same technology that was first introduced in the Power Mac G5 with intelligent thermal monitoring with thermal zones. And while we don't have independent thermal zones, we have a tremendous amount of monitoring and data coming off this logic board to be able to control how fast the fans should move. And we're very much purist in this respect.

It's a pure front-to-back airflow, very intelligently monitored fans and systems. We're leveraging the same technology that was first introduced in the Power Mac G5 with intelligent thermal monitoring with thermal zones. And while we don't have independent thermal zones, we have a tremendous amount of monitoring and data coming off this logic board to be able to control how fast the fans should move.

should run and make sure everything's cooled to optimum efficiency for best performance. If you heard a customer comment in one of the HPC sections, who just installed a cluster of 64 machines, when he first came into the room, he thought, "Oh, my God, these things were really loud," and it turned out there were two Dell servers in the corner that he left on. Turning them off, it was much quieter, and that was a 64-machine cluster. So we're pretty pleased that for the power and air that we're moving through this machine, it is as quiet, if not quieter, than the slot-load G4.

This is a look at power efficiency. And this, again, is a huge advantage as we look at this. The processor in the XServe G5 is spec'd at about 55 watts. So as we look at competing processors, we see literally twice the power performance going through those systems. And more power means more cost. You've got to pay for that power. It means more cooling required. You've got to pull the heat out of the room. And kind of the corollary to thermal, the heat of the system, is reliability because thermal management goes directly into the reliability of the system.

Another thing about the XServe G5 is one of the key differentiators about the XServe is that this system is designed from the ground up as a server platform. And that means not only really striving at not just processor performance but IO performance, but it also means monitoring and management. And with XServe, I like to joke it's one of the most instrumented 1U servers in the industry. We have, last count, I think it was 38 sensors on the logic board, including 10 temperature sensors, 8 fan sensors, voltage and current sensors throughout the system.

We're literally monitoring temperature of the incoming ambient air through the front of the machine. We're measuring the processor temperature, the core temperature, the memory temperature, the power supply temperature, the PCI temperature, which gives you outgoing air temperature as well. It's just a very well monitored server, and it gives you a lot of insight. Not only into how the server itself is running, but the general air flow in your server environment. If the ambient air alone is coming in and is too warm, you're going to know right away there's an air flow situation, cooling situations in your data center.

And of course this data is wrapped up into our monitoring tools. Server Monitor really providing point and click access into the data coming off of XServe G5 and able to monitor one or multiple servers, get email alerts, kind of the quick look. Green is good, yellow is a warning condition, red's an error condition. Being able to take advantage of things like smart technology, being able to do pre-failure analysis on the hard drives is a key feature in Server Monitor.

We've enriched Server Monitor quite a bit with the new data that we're now capturing off the XServe G5. So for example, one of the new tabs in Server Monitor is the memory tab, which provides detailed error reporting on ECC error counts. And we actually provide that information by individual DIMM. So you can actually see what individual DIMM might be flagging ECC errors, should you see any.

And of course, Xserve of course comes with Mac OS X Server. So right out of the box, unlimited client license and our server configuration, a broad range of server services right out of the box. Been able to handle a vast majority of traditional server capabilities with everything you need. and of course with Tiger coming we have new capabilities that are being brought to the platform.

And of course you've heard all this week about Tiger so I'm not going to need to go into any more of it here. But I will highlight one or two key features that I think is going to be useful as we look forward with Xserve deployment with Tiger server.

So let's go into a little bit about planning, a little about some of the key things that should be of concern when you're looking at deploying Xserves, even before you start kind of screwing and gluing the machines together and connecting them up to your network. So the first thing I want to touch on is physical requirements.

Being a rack-based system, there are different things that should be accounted for and things that can be looked at. So let's start with that. So racking is probably one of the most basic things, probably one of the things you might take for granted, but it's kind of interesting to look at some Xserve in the scope of industry trends.

The continual convergence in the server space toward thinner and thinner servers is causing changes in the way systems are racked. We tend to see a lot more systems put into a smaller amount of space, more room for cable routing and things become very, very important. Now with Xserve, we've designed it to provide a pretty wide range of racking capabilities, but the reality is it's a 28-deep-inch enclosure. We recommend a 30- or deeper-inch rack if you're doing a four-post rack. It does support two-post racks, of course, with Xserve RAID. Not exactly something you'll mount in a two-post rack at about 100 pounds a piece, so really four-post racks are ideal for that.

and of course we provide all the hardware needed right in the box to mount those systems both in English and metric threads in the box. A couple of really important things to consider, even more so with XServe G5 is that we're moving a tremendous amount of air through the system. XServe G5 we've doubled the CFM through the box than the XServe G4 is. So a pure front to back air flow is really, really important.

You don't want to put too many units in small racks like this that have an enclosed front. You want to make sure you have proper air flow coming in through the front of the machine and out through the back. That becomes really, really important. The other thing, if you're planning deployments with PDUs, power distribution units going up the back of the rack, you really want to look at deeper racks.

The new kind of data center trend is becoming moving from 30 to 36 inches deep. These tend to be the more popular racks you see in data centers that are being put in now. And those have the extra room you might need for PDU deployment. The other thing that's important to begin to think about if you're deploying more than a few of these is weight.

XServe itself is, you know, it's a dense server. It's about 30 pounds a pop. But when you put a lot of these in a rack, that's a lot of pounds per square foot that you need to think about. And if you add XServe RAIDs to that, that even adds more weight per square foot.

At Apple, we have a cluster that we're installing. It's a 32-node cluster in our executive briefing center. It's in a single rack. And when we met with the facilities people about installing it, the first thing they had to do is pull out the blueprints of the building and make sure we were over a beam so that the floor could support it.

It's actually something that you might not think about. But with the densities that are happening in servers today, that becomes an interesting thought. There's a great section. One of the kind of bibles for enterprise. Enterprise data center planning is actually a book by Sun called Sun Enterprise Data Center Methodology.

It's in their blueprint series. And they talk about planning for server deployments. And they tell a story about bringing in an E10K, which is their big kind of mainframe SMP box. And it weighs a couple thousand pounds. And they say if you wouldn't drive a BMW 3 Series up on top of the race floor in your data center, you wouldn't want to bring one of these boxes in. So it's the kind of things that you probably don't think about the floor being able to support this. But it's a great book. is something that starts to need to be thought about.

The other thing that kind of goes along with racking is good cable management. And again, with the density and the airflow requirements, these all go hand in hand with good cable management. This is a picture of an XServe deployment, not exactly fully cable managed. Another little story, I was talking to a customer who had installed the cable management arms in the back of their machine and saw that the airflow or the machines ran cooler when the cables were properly managed.

And they thought for sure the cable management arm was part of the cooling solution of the XServe. And actually, it just turns out to be a benefit of improved cable management, being able to have air flow through the system much better. So keep in mind, cable management is an important aspect of that. You don't want to be blocking a lot of rear panel room with cables and things.

And with multiple network cables and power cables and fiber channel cables and all the other cables that you might be running out of the back of the machine, in a one-use space, that's a lot of cables that need to go somewhere. So, again, good racking also means good cable management.

The other thing is just kind of the core requirements. Now, I'll reference you to a knowledge base article. We publish all this information in our knowledge base. If you go to info.apple.com and search for Xserve and BT, you'll see all this data published there in kind of gory detail.

Xserve is very, very efficient in its power and cooling, but yet you do need to account for it. These are some numbers for the various Xserve configurations. We provide numbers based on stock configuration as well as fully loaded. Fully loaded meaning, you know, three hard drives running full complement of memory in the system. And you can see numbers anywhere from about 130 watts to somewhere in the 290 watts of power consumption.

And so, you know, it's a lot of work. It's somewhere between 400 to 900 BTUs an hour in that range of power consumption and heat output calculated by the Xserve. The power supply is officially rated at 4 amps, although in typical usage considerations, you'll have a hard time finding it go above about 2.2 amps in real-world power consumption after you bypass startup current.

As a matter of fact, the compute node is very, very efficient for the compute power it delivers at full processor load. memory since that system tends to be configured really just as processor in memory. You know, 1.8 amps is pretty, pretty common for that system. So all this information we publish very explicitly in our knowledge base, and I'll point you to that for further details.

Let's take a look now at system configuration. How do I configure these systems? What kind of things should I be considering? Pretty common things, but one of the first and most basic things is how many processors. So when we sell our systems, we have two main server configurations, a single processor and a dual processor. There's some memory differences between the two, but the real differentiation between the two systems and the two price points is number of processors.

And since the processors aren't upgradable later, that's one of the first decisions that you'll have to make. Now, what's interesting about the G5 is it has so much performance. The single processor system now can solve a much broader range of tasks. It's actually a very, very powerful system for general purpose server activities. What's interesting, though, is I've talked to a lot of customers who begin migrating from older servers, particular G3s or early G4 models, up to Xserve G5s.

And they're being able to consolidate systems. You know, three or four blue and white G3s into one Xserve. And so, you know, having the processing power to back that up, the storage throughput, the networking throughput, compared to what those systems are capable of, you have that flexibility. And, again, since we can't add a second processor later, for situations where you want that flexibility, that freedom of growth later, you know, having that second processor is ideal. The other thing is. You know, the storage. Now, Xserve G5, one of the differences between that and the G4 is a change from four drives to three.

And that was done mainly to improve air flow and meet the thermal requirements that we had to meet for the Xserve G5. Now, the implications are that with the larger serial ATA drives that we're working with, the actual net capacity is still 750 gigabytes. You know, nearly three-quarters of a terabyte in a one U form factor. There's actually a tremendous amount of storage there. What it really changes, though. Is the way you deploy your RAID configurations. So, with software RAID built in, you can do mirroring and striping built into the system.

And we'll talk more about RAID in a little bit. And then we offer 80 gigabyte hard drives for basic boot drives. And so, between three drives, you have a number of configurations. And, of course, you always have the ability to go out the back through fiber channel to XServe RAID, which gives you a lot more flexibility.

You have more RAID level options. More capacity options. A lot of flexibility through fiber channel. The ability to add XSAN initially or later on. And, of course, one of the big benefits is you can have with XServe RAID is you can have multiple servers attaching to the same XServe RAID unit.

So, as a simple example here, we have four XServes connecting through a fiber channel switch to a single XServe RAID that we've partitioned and sliced so that each has their own little private volume on a shared XServe RAID. So, again, for the XServe RAID, we have a lot of flexibility.

So, again, for certain levels of storage, this might actually be a better solution than stuffing more storage inside an XServe itself. As a matter of fact, having independence of your data independent of the server itself gives you tremendous flexibility as you redeploy servers, change their roles, migrate services from one server to another.

This gives you tremendous flexibility as you look at those options. I also wanted to talk a little bit about the cluster node configuration. Now, as I mentioned up front, the cluster node configuration was really -- I think it was a little bit more complicated than it was in the previous slides.

But it was a little bit more complicated than it was in the previous slides. So, again, for certain levels of storage, this might actually be a better solution than stuffing more storage inside an XServe itself. So, again, as I mentioned up front, the cluster node configuration was really designed and tailored for compute applications. You know, traditional clusters, high-performance computing clusters and things like that. But what's interesting is that it does have a role for other kind of roles beyond just clusters.

You know, keeping in mind that the compute node is a dual processor system with a single hard drive, it becomes really interesting as kind of the appliance version of XServe. It's really great for static services like things like VPN servers. Network services. Things where you don't need storage, but you might want the processing power and the networking capability that it provides. Now, one thing you do have to keep in mind is that it ships with a 10-user license in Mac OS X. So, you know, you're probably not going to deploy this as a file server. And it's really not the role there.

And by the time you add that license, you may decide just to go up to the full server configuration. But for a number of other applications, especially network services, application services, where the limitation on the number of file user connections has no impact, all the other OS X services are fully unlimited.

So, again, I use -- this is a great VPN server, for example. And the 10-user license has no impact on that kind of role. So that's something also that you can keep in mind because you can get a dual processor system for a lot lower price and take advantage of that. and take advantage of those features if it's appropriate.

The other thing about these systems is that you have much greater RAM capability. And for applications that really appreciate RAM, you have a lot more headroom in the Xserve G5. With Panther Server, again, we can put up to 8 gigabytes of RAM. It's ECC RAM, so you have that protection there. And for applications that will take advantage of that RAM, you have that capability. And of course, with Tiger Server, being able to bring 64-bit user space applications and to allocate much larger memory, we get even more capabilities as we look down the road toward Tiger.

Another thing I want to talk a little bit about is networking. Now with Xserve G5, we now have dual copper gigabit Ethernet ports right on the back of the machine. They're very high performance gigabit Ethernet ports with a number of key capabilities. They have very large packet buffers. They have the ability to do jumbo frames.

We've added VLAN capabilities into the operating system for VLAN operations. And so the bandwidth that we're able to provide out of the machine is much, much greater. And of course, you can add multiple port Ethernet cards. We have a single port available from Apple, multiple port cards from other third parties. SmallTree Communications in particular has a number of cards that are available. And so we're very excited to see that coming to Tiger is network link aggregation. So you'll see that in Tiger Server.

I think that's going to give you a lot more bandwidth out of XServe G5 and be able to take these two ports and provide more bandwidth. And of course you can also configure it in a failover configuration. So that will be available to you when Tiger Server is available. Of course that solution is available today for Panther from a third party. SmallTree also has that software as an add-on. So for people looking for that capability now, you do have a way to add that on to the operating system.

And finally, a number of options that are available directly from Apple, most particularly some of the new I/O cards, PCIX SCSI card, for example, dual channel Ultra 320 card, particularly handy for SCSI-based raids that you may have in your architecture already, and also very popular for backup devices in particular.

I want to talk a little bit about load and usage. So this is a little bit of a table out of a knowledge base article, again, that we published on our support site. And again, I'll point you to that article for the nitty gritty details. This is a list of tested and theoretical limits in the operating system.

We've got a lot of people asking about scaling guidelines and how many users can I put on an Xserve. And the reality is that's a really hard problem to answer without knowing a whole bunch of variables about your network architecture, about the kind of data that they're moving back and forth, the frequency of IO operations and things like that. So this table provides kind of a baseline, kind of the minimum, maximum capabilities in the operating system as the big guidelines.

And then beyond that, there have been a number of kind of informal rules of thumb. There are a number of rules of thumb that have emerged that can help provide some further guidance on that. And I wanted to provide a few here that I wanted to point at.

From a file server perspective, you know, one of the things that really has heavy impact on the number of users that a single server can support is the network architecture, the bandwidth, and the size of files that are being moved on and off the server. For example, you know, a user moving Word files, saving Word files occasionally is a lot different from a user moving, you know, 40 gigabyte Photoshop images back and forth.

With home directories becoming more and more popular, that also has a little higher load on the server, and that's something to calculate into in mind as well. Also, the move toward more centralized directory services is something to take a look at as you're setting up directory servers. The number of users who are online. authenticating concurrently become a factor that you need to take a look at.

What's interesting with XServe G5 is that we've seen some pretty phenomenal scalability on Netboot servers. We've seen the ability to put a lot higher number of machines on Netboot and some tests that we've been able to do. Still, that depends heavily on the level of performance and the networking that you're looking for. But we've had deployments where we've put as many as 150 iMac clients on a single XServe. And not that that's a recommended configuration, but to know that it scales that high is pretty phenomenal.

The other thing is QuickTime streaming. QuickTime streaming is another one where you really need to be able to look at the size of media that you're streaming, the bandwidth that you're able to provide. You're almost always limited by the network bandwidth outgoing before the server will be the limiting factor.

So let's move on and talk a little bit more about deployment. So we've moved from planning on to actual deployment. So again, kind of the first thing is, again, looking at the most common uses that Xserve is deployed upon. And again, if you look at the list, these are the services that are, again, built right into Mac OS X Server.

You know, the interesting thing about this class of server is that, you know, by far the most typical uses are things like file and print, network services, mail services, web services, email services. And we just have phenomenal network services built right into the operating system. And this is, of course, some of the most popular deployments used with Xserve.

A couple of important things. I get asked a lot about software installation when you get a brand new Xserve. Do I need to go ahead and reformat it right out of the box? The configuration that ships in the factory after the whole factory process is actually the exact same thing that you get right on the hard drive. But the reality is most system administrators really prefer to reload the operating system and know exactly how it's configured.

The other thing is the impact of having to reconfigure the drives for the software RAID levels that you're looking for will require reinstallation as well. We're going to talk a little bit about headless administration and setup assistant in just a minute. But with the remote setup tools, you actually have a very robust way to completely setup and get your server right out of the box without ever needing to hook up a keyboard and a monitor. And these are tools that we've worked really hard to make sure that we're able to do that. Thank you. And of course, software update provides an easy way to get your server up to date with the latest security updates, software updates that are available directly from Apple.

The other thing is when you're deploying multiple servers, it's very common to image a single server and clone that onto other machines. With the removable drive modules built in, that becomes really, really easy with the capabilities right in the operating system. And of course with front panel target disk mode being available to you, you can literally just with a short firewire cable clone one complete server installation to a second server right using front panel firewire. So that becomes very handy.

So speaking of front panel mode, I wanted to provide a latest update on this. One of the new capabilities in Xserve G5, we've actually added a new capability to the front panel mode. So by holding down the front panel button on the system identifier button on the front of Xserve, we can perform almost all the operations you used to be able to perform by holding down special keys, snag keys, zapping the PRAM, target disk mode, things like that.

This is also referenced in a knowledge base article on our website as well. So obviously things like net boot and capabilities like that, boot from CD, target disk mode are available. You'll see though on Xserve G5 we added a new one, option number 8. We reserved that one for future use and this is it. We've added a diagnostics mode built right into the Xserve. And so by selecting a diagnostics mode, you can actually have the system boot up over the network.

So we've added a new one called Xserve Remote Diagnostics. It's a new feature on Xserve G5 called Xserve Remote Diagnostics. And it's particularly handy if you have a larger installation of Xserves. What you need to do is set up a net boot server, turn on the net boot feature, and put the diagnostics and activate the diagnostics image on that Xserve.

and David The diagnostics tools are based directly on the tools we use in the factory when testing our own machines. They're extremely thorough and some of the most robust tests that are available. As a matter of fact, some of the tests that we use for testing the CPU and the memory are absolutely phenomenal.

There have been papers written on the algorithms used that we use to do things like testing memory. And so those tests are available to you now directly through these remote diagnostics tools. And so by holding down the front panel, you can put the machine into a diagnostics mode.

If this machine's in a known running state and you just want to test it, by using the command line tool, you can go in and activate it and it will boot in diagnostics mode and then return to the known operating system when complete. If it is in an unknown state, you know, you've got a machine, you don't know if it's working right, doesn't seem to be booting right, you can use that front panel mode to trigger it. And then trigger this from a machine on your same subnet to run the client to run those diagnostics tools. What's really interesting about these tools is that there's a configuration file.

We provide out of the box two diagnostic tests, a short test and a long test. And one's kind of a quick peek at the key functions and one's a much deeper test. These are text files that you can configure and you can configure these to run very specific tests.

If you're really interesting, you've got a new batch of memory, you can run a new batch of memory and you just want to run the memory tests over and over to test the integrity of your memory. You have that ability just to help tell the test, create a custom file that runs just memory tests and really burn that memory in as you've added to the system. So very flexible and this is something that we are really excited to get into the system.

So, I wanted to talk a little bit more about remote management and headless operations. One of the big things that we did with the XServe G5 is that we made the video card optional. And there's been a little bit of issue with that. People who are used to having that video card there in the XServe G4.

This is something that we've been working to and we're finally at the point where we believe the remote management tools are really robust enough to give you a number of ways to manage the system. Now, obviously for people who want the video card and want to be able to use it, for example, if KVM switches on your network, it's an easy option to add to your system.

But we've also worked very hard on things like the remote management tools, the remote setup assistant to make sure that you can do everything that you need to do through those tools. So, out of the box, you have the ability without ever hooking up a keyboard or a mouse to be able to rack the system, power it up on your network and set it up remotely. So, that's a really good way to get started. And then, of course, you can also use the remote setup tools.

As a matter of fact, with some of the new capabilities that were introduced last year in Panther Server, you can take advantage of tools like auto server setup, where from a configuration file either on a thing like an iPod, a USB key, or even an LDAP server, if you're setting up a large number of machines, the machines can go to that reference file, configure themselves automatically, The other thing that becomes interesting is Apple Remote Desktop for that remote screen sharing presence where you want to really have that GUI management perspective but want to be able to hit it remotely.

Apple Remote Desktop really becomes a great tool to use here, especially the new version of Apple Remote Desktop version 2. It gives you a number of new capabilities. You can almost think of this as a virtual KVM switch. So from a PowerBook anywhere, you can connect remotely into your XServe and manage it.

As a matter of fact, with the VNC capabilities, you could even manage your XServe with a GUI session from a PC running VNC. So this becomes very, very powerful. That plus the ability to run shell scripts and push out software to a large number of machines make it a really attractive way to manage XServes. And it's something you might want to consider adding to your remote management tools. We'll do a demo in a little bit and we'll be using Apple Remote Desktop.

What's neat about what we've done in the Xserve setup is we've added Apple Remote Desktop right in the remote setup assistant. So when you're walking through the setup tools by turning on one checkbox, you can automatically enable Apple Remote Desktop for the system administrator user that you create when you go through the setup assistant. So from there on out, you can manage the system completely through Apple Remote Desktop.

and of course for the command line users, we have really made a lot of effort in Panther to add more command line tools, to upgrade the man pages and really make command line a very robust way to manage the system. So for command line users who want to script and automate things and really take advantage of the management tools at that level, that becomes a very equal way to manage the system. As a matter of fact, a lot of people, you might not be aware of this, but we actually provide off our install CDs, boot CD1, when you boot up that CD, SSH is actually enabled.

So you can actually install the operating system and manage it from the CD at that time while booted from the CD. The username is root, of course, because it's a single user on the CD and the password, just like the remote setup assistant, is the first eight digits of the CD. So that becomes an access method as well.

I want to point out there's a phenomenal command line administration guide that's available from the server website. And if you're a command line user and want to know all the subtle nuances of some of the unique Mac OS X commands, tools that might be a little bit different from other Unix distributions, if you're coming from a Linux or a Solaris environment and want to become adept at some of the unique tools that are available on Mac OS X, highly recommend the command line user administration guide. It's just one of many, many documentation pieces that we make available on our website for download. But it really goes into the depths of the command line tools.

So again, with the remote management tools that we provide in the operating system, server monitor for monitoring the hardware and providing in-depth view into Xserve itself, server admin and work group manager, all these tools can be managed remotely from another Mac OS X client. They work over an encrypted and authenticated link and provide just a great remote management experience. So with that, I'd like to introduce Greg Smith, who's going to come up and help me with a demo here.

So we actually have two Xserves here on stage. And we're going to pull up Server Monitor and take a look at some of the new values that we make available in Server Monitor. So looking at the first server here, we have an info tab, and we can kind of get all the high-level information about this system. We see here that we have a dual 2 gigahertz system. We have the serial number available. One button gets you a complete Apple system profile report, which is a great tool for asset management.

Some of the unique things that are in the new version for XServe G5 are the memory tab. As I mentioned, with XServe G5, we now have ECC memory in the system. We're actually tracking ECC memory errors by individual DIMM in the system. So should you ever see ECC error counts, and they should almost always be zero, but you'll be able to see exactly what DIMM is causing those problems. And, of course, they're automatically corrected on the fly, so you don't have to necessarily worry about them, but you'll be able to understand what's happening with that individual DIMM.

The power tab has added a tremendous amount of more information. We have many more sensors on the board. We're able to monitor voltages of many core ASICs in the systems, voltages coming off the power supplies. And one of the ones I really like is the power pop-up, which provides real-time calculated power of the two CPUs and watts. So we're able to calculate voltage and power coming right into the CPU. So if you pull in the power supply there, go to processor power.

At the top there, Greg, on the power supply tab, go to power. There we go. We'll actually see in real time the wattage being consumed by the dual processors in the system. So you mentioned, remember the earlier graph that I mentioned that the processors are typically about 55-watt max processors.

Well, in idle, as they're sitting here, they're barely in the teens, you know, just sitting around idling. So, again, very efficient on power. Other tabs that are interesting are the temperature tab. We have 10 temperature sensors. We can see the inlet temperatures in the systems coming in. If you go to blowers, we'll see the real-time fan speeds in all the system.

and David If you go to the blower tab there, Greg, you'll see the different blower speeds that are in the system. Now, one of the things you may notice on this system is that we have a yellow light on the hard drive. So if we click on that, we'll go instantly to the drive tab and you'll see that we're running RAID here. The system is actually booted from a software RAID mirror in the system. So we have two drives in the system that were mirrored together.

We actually failed one intentionally. You can see the rate status is shown as degraded. So why don't we explore that a little further if we go into Apple Remote Desktop and go into a remote control session on that machine. We can actually launch Disk Utility and find out a little bit more about what's happening with that system.

If we click on the boot mirror, we'll see on the RAID tab that we have a drive missing. We actually lost a drive in the mirror. It's continuing to operate normally. What's interesting, though, is now we need to solve that problem. Now, in previous versions of OS X, we actually had to boot from the CD and rebuild that mirror offline. Well, one of the new features that shipped in 10.3.2 that we got in for Xserve G5 is the ability to rebuild a mirror online while it's running. So if we go ahead and drag that spare drive in the system, go ahead and add it, and click Rebuild.

and David What we'll actually do is the rebuild process now lives in the driver and it will actually go ahead and begin rebuilding that drive. Now it's an 80 gig drive, it's going to take about 30 minutes or so to rebuild. But what's interesting about this is that we don't even need to be running disk utility. We could actually quit out of disk utility while that rebuild begins. and David Notice our system is still running. We're starting that rebuild online. And we can actually begin copying data, if we'd want to, copy data to that drive. Showing that the drive is still fully operational.

If we go ahead and launch Disk Utility. A little hard screening the screen, right? So while that copy is going ahead, we'll go back into disk utility. Even though we quit out of it before, you'll actually see that that rebuild is continuing to take place. So while we're copying data, we're serving data, the system's still online. and David M. Schaffer will be here. I hope the copy and the RAID continue to operate in parallel there.

So for raid mirroring, I think we got you covered with great online rebuilding of that system. So that's the first XServe. We actually happen to have a second XServe in that rack. And it has a little option in it called the hardware raid card. So when we introduced XServe in January, we announced that we're going to offer a hardware RAID card. It's a PCI card that has a serial ATA controller on it and a processor to provide hardware RAID. It actually provides 0, 1, and 5 capabilities, 64 meg of RAID controller cache, and a backup battery.

And I'm very pleased to say that the software just went final on it. And so we're actually able to demo that to you today. So the command line, the tool to manage the hardware RAID card is a command line tool. So it will be accessed and configured through the command line.

And so by SSHing into the machine remotely, we can actually take a look at the machine. We have a system here that has three internal hard drives. They're 250 gigabyte hard drives. And so we can see the three volumes that are available. We actually, again, failed a drive here to show that it's degraded, but it continues to operate normally.

If we go ahead and look at the configuration itself, one of the unique features of the hardware RAID card is it allows you to create multiple logical volumes. So what we did is we created a 50 gigabyte boot volume that's RAID 5 protected and roughly a 450 gigabyte volume that's on the same physical drives but it's almost like a separate partition. And that's around a 450 gigabyte volume there. And we have both those volumes available now.

And again, we're in the process of rebuilding those because it's RAID 5 protected. We have that protection available with the RAID 5 system. So we're very excited about that and we'll be able to get that shipping very, very shortly. is real and coming to an XServe near you. Thank you, Greg. We can go back to slides.

Last thing I wanted to talk about in the deployment section was a little bit on backup. Now, there was a whole backup session here at the conference this year and hopefully you had an opportunity to attend that. One of the big things that we're seeing with backup is backup continues to be a huge challenge in server deployment. The reality is that more and more data is being kept online for a variety of reasons, including legal compliance reasons.

There's more data being shurned, right, when you're working with large files or working with large content. The amount of data that needs to be backed up on a delta basis is becoming much larger. And the reality is that there are no down times in server operation anymore, right? It's a 24 by 7 internet access world. There's always someone accessing your website, always someone accessing your data. So the fact is that the backup windows, the opportunities for backup are shrinking.

The other really hard reality is that, and I remember years ago, I used to back up my entire 40 gig hard drive on a 40 gig, 40 megabyte hard drive, excuse me, 40 megabyte hard drive on a single 40 megabyte tape. It was really easy just to back up everything. The fact is these large, large hard drives just aren't keeping up, or the tape capacities are just not keeping up with these large, large hard drives.

And the fact is while RAID provides tremendous data protection, matter of fact, looking at the solutions that we just looked at here, RAID is not backup. Even a mirror, if you get a virus or some kind of corruption that appears, it happens on both drives. So RAID is not backup.

Great news is that we're seeing a tremendous number of industry solutions being available on the platform. And again, if you were able to attend the backup session today, you're seeing a number of enterprise solutions available for anything from single server local backup to work group backup to enterprise backup being available to you on Mac OS X. As a matter of fact, the number of clients and server solutions continues to grow. And we're seeing more and more options available to you.

The main thing I wanted to just touch on is the growing trend toward disk-to-disk backup. So with the capacity that our servers are able to hold today, alternative backup strategies are becoming very important. And being able to do things like disk-to-disk backup, staging server backup to disk for performance and speed and quick accessibility, as well as adding capabilities like disk-to-disk to tape is a trend that's not going away. We're seeing more and more software add this capability.

We're seeing more and more software add this capability, which is becoming very, very attractive. The low price point of storage, especially solutions like XR-RAID become very, very attractive for this class of backup. So it gives you a way to provide massive backup at very, very high rates of speed. Something to consider as you look at large backup requirements.

Another thing I wanted to touch on is high availability. If you've heard in some of the sessions this week, Tiger Server will add some new availability options to the server operating system. In Panther, we continue to have IP failover capabilities to provide a script-driven failover operation between key services running on your server. These are particularly ideal for static services, so not things like file services, but more things like streaming services and web services.

These are built right into the operating system and give you a great capability. If we look at it from a diagram standpoint, you can have a master server and a backup server with a heartbeat between the two, such that if one interface should fail, the services would fall over to the secondary server. Because it's all script-driven, you have the ability to reprioritize load or even terminate load that you may not want to keep around in that situation. It gives you a very flexible way to... to manage those services.

What's interesting, our tools like rsync, now the IP failover architecture itself doesn't move data, but with added services like rsync, you have the ability to replicate data between services, between servers themselves. As a fact, you can use it for two-way replication so that you have failover both ways between two servers, as an example here.

What's also very interesting is that as we see technologies like XSAN come to the market later this year, it's going to give you a number of new ways to be able to scale out services across multiple servers. So being able to provide much higher availability across a higher number of servers for higher performance allows you to think kind of differently in the way you deploy your servers and your storage in a large environment.

Okay, so we talked a little bit about XServe deployment. What I would now like to do is introduce two guest speakers who are going to talk a little bit about their deployments. First customer I'd like to introduce is Eric Senf from F&W Publishing. He's going to talk to you a little bit about how he's using XServe. Eric.

Thank you. I'm Eric Senf. I'm the system support team leader and network engineer at F&W Publications. During the last year, it's been very exciting some of the technology opportunities that we've had with, or some of the opportunities we've had with this new Apple technology. We're one of the oldest and fastest growing special interest publishers in the world right now. We publish nearly 60 magazines.

We've got a huge book operation and our portfolio is continuing to grow. Because of this, this is placing a load on storage server growth across the enterprise. We've got operations currently in Cincinnati, Iowa, Wisconsin, Devon, England, Boston, Denver, New York, Savannah, and Herndon, Virginia and growing. About 1100 employees total.

Across these 10 locations we've currently got about 75 servers. We only have on-site IT presence at two of these facilities. We rely very, very heavily on remote management and administration. We've also got a highly heterogeneous Windows 2000 Active Directory based environment. We're running Exchange, SQL Server, which we're doing heavy database publishing from. We've got Suns, AS400s, and we're running the Oracle Financial System. We're about two-thirds PC, about a third Mac. Two-thirds of our Macs have been moved to OS X. We've got about 10 terabytes of online data right now, and that's growing at a very rapid pace.

The first application that we've got with the XServe has been in an enterprise file print service sector. Right now in our Iola, Wisconsin office we have a single Apple XServe and XRAID. We're running OS X Server 10.3. We're configured to do both AFP and SMB file services. The neat thing about this is we're fully integrated with our multi-domain, multi-site Windows 2000 based Active Directory.

Services that we're providing, we've currently got over one terabyte of production critical data on these systems. It's continually being accessed by over 100 users. We're backing these systems up using Windows, a Windows 2003 backup server running Veritas Backup Exec 9. and our pre-press director is currently begging us to move the rest of his production data over to these servers.

The benefits that we're getting from this, this is drastically less expensive per gigabyte than any other solution that we've had. We've got higher performance than any other platform that we've used. We're seeing real world, probably five to 800% performance increase in this migration at about a third of the cost.

This has also brought another interesting aspect into our organization. This is the fastest server currently in our environment to backup. Now again, we are using a Windows 2003 backup server running Veritas Backup Exec 9 and their agent on the XServe to do our backups. So it's integrated in with the rest of our enterprise backup solution. One volume alone that we were struggling with was our book production volume in Wisconsin. We cut an almost 24-hour backup window down to 8 hours once we'd moved the data over to the XServe.

Another exciting thing that we've been doing with XSERVs because of their really low cost and high performance from a CPU standpoint is enterprise spam and antivirus filtering. We've got two Apple XServes with a gig of RAM running OS X Server 3.3 or 10.3.3. We're using one of the leading open source antivirus solutions and we're also using an open source anti-spam solution called ASSP.

We are geographically diverse and load balanced with our servers. The services that are currently being provided from this are enterprise wide antivirus and spam screening for multiple email domains doing hundreds of thousands of messages per week. And as everyone knows with all the wonderful joys of email, those loads are continually going up.

Some of the benefits that we've gotten from this is it is a stable, high performance, open source platform. Small one-use server footprint so we're not putting large appliances or configurations in our data center. And this is tens of thousands of dollars less than any other vendor solution that we considered and evaluated since it's based on open source software and leveraging the performance of Apple's servers.

In summary, bringing the Xserves into our heterogeneous IT environment has improved performance and reduced cost. Again, everything that we brought this in, saving tens of thousands of dollars on email screening, 5-800% performance increase at a third of the cost. It's really impacting our IT bottom line. We're continuing with further deployments, remote office deployments of the servers because of ease of administration remotely.

But one of the things we're most excited about are the new features that Tiger are going to bring. With the ACLs, or active-based security on the file system, failover clustering, and cross-platform file locking, this is giving us an opportunity to take not only our publishing and production data, but our business data, and move this and consolidate this down onto Xserves and use this as our enterprise-wide file print server solution.

Thank you, Eric. So I'd now like to introduce Richard Moon. You've heard a lot about this week. If you may have heard reference to servers in the sky around .Mac services, you may be wondering where those systems are kept and operated. And Richard is responsible for data center operations and our ICT group. He's going to talk to us a little bit about Xserve deployment there.

I'm here to talk about the RxServe deployment. I'll tell you a little bit about our ICT environment at Apple. Just give you a brief. We have a large data center. We, ICT for Apple, does all the infrastructure support for all of Apple globally. We have three major regions, Europe, US, and Asia.

Our US data center supports SAP, CRM, the Apple retail stores, Apple store online, iTunes, music store, and the .Mac globally. We have small server rooms in Cork, that's for Europe, and in Singapore for Asia. And these just support small, they support email and language specific things for the regions, as well as maybe like VPN and that type of thing.

I'm going to steal Eric's line. We definitely were asked to drink our own champagne. It's a much better term than something about dog food. Currently we have about 300 Xserves deployed and about 18 XRAIDs deployed in our data center. Here's some of the uses that we're using for web servers, web applications servers, DNS, FTP, VPN, home directories using AFP, NFS servers, SNMP mail relay servers, email broadcast servers, so things like that. Emails are coming from E-News, iTunes, New Music Tuesdays. Those are coming from Xserves. Messaging servers, Java application servers.

and David So the biggest challenge, the biggest migration for us off of the, in the data center, so in our data center we have a lot of AIX, IBM AIX hosts and Solaris environment for a production data center. Our first gain for the XServe, migrated XServe was off of the Sun hardware. This has been a substantial savings for Apple. The performance from going to a Sun to XServe has been amazing. We have a lot of servers, web servers are running virtually idle. The speed is excellent. And this was a, we were really surprised, we over architected the environment.

We weren't sure of what the performance would be like and the stability in that. So we do all our web servers and web objects in clusters, sitting behind a load balancer. So if we were to lose an XServe, we, the business wouldn't be impacted. We do have to have maximum uptime. And then we were very surprised with the speed and the uptime.

And we actually are, have done, started deploying many web servers on a cluster because of the performance and the XServe can handle it with ease. In the past, XServes for us, because we run a lot of Java applications on XServe, our limitation was on the memory. And with the XServe, we had to run a lot of Java applications. And with the G5 XServe, that's not going to be a problem. Our standard configuration, because we are standards based, you know, because we have a data center, is to run dual CPU, at the time it was all four drives, varying with two gigs of memory.

So moving forward with the G5 XServe, we're going to be deploying dual G5 CPUs with two gigs of memory and eight gigs of memory as a standard configuration. And then that way, any Java applications that require a lot of memory or any, you know, a lot of memory, we're going to be able to run them.

And then we're going to be able to run them on a lot of different devices. And then we're going to be able to run them on a lot of different devices. And then we're going to be able or any applications that do require a lot of member footprint, will migrate to those. Yeah, sorry.

[Transcript missing]

This is a current photo of the Xserves in our data center. We call it the Xrow for it's on display because we do a lot of tours and that. And actually we're migrating off of this. All these Xservers are going to move into a new area, a new part of the data center. And we're actually going to go upon recommendations to hot and cold rows.

So the fronts of the Xserves or even other data center equipment will actually face out for all the cool air to come in. And then go through the back and then the air will rise and go up out the back. So that's a recommendation that we're taking advantage of. And this is another close up view of our deployment.

So how we're managing monitoring is, so our primary tool for the data center is HP OpenView ITO. They currently don't have an ITO agent, but we were easily able to get that brought into our monitoring tools. We just run a Perl script that is able to grab, gather the information, the same information if you're using ITO on other platforms, supported platforms.

And then we also take advantage of all the Apple server applications like server monitor, remote desktop, RAID admin tools are very, very useful. And those with ITO, we're able to monitor the systems closely. In our production data center, we use Tivoli Storage Manager for backup and recovery. We worked with Tivoli to beta test and make their software much better.

And so now there is an agent for. The agent for OS X on Xserve. And that's what we have. Our view of the Xserve or any server in the data center would be we want to treat everything the same way. And we treat OS X as any other Unix platform.

So in summary, we've been extremely pleased with the performance of the Xserve. We were really caught off guard at how well it was going to perform. I'll take a step back here. So we currently have about 24 Xserves in a cabinet. And the reason why we decided to do that, not to go with a full rack, because some issues with power and space.

But then we used to have a lot of towers as well in the past, the G3s and G4 towers. And you could get eight in a cabinet. So we wanted to save a lot of, make a substantial leap and save a lot of foot space by going to 24 to a cabinet. So you get a three to one ratio there.

This coming year, we're planning to add about 80 to 100 Xserves. We're going to add between 60 and 80 XRAIDs as well, because the storage is cost effective and very useful. We have a lot of projects that I couldn't list because we're still in the process of migrating those from other platforms to the Xserve. So the number is just going to grow.

And I also want you to know, whenever you go to Apple.com or store.apple.com or even the developer conference here, all that is served by Xserve. And lastly, I just want to make sure that everybody takes advantage of filing bugs. And the team does a really good job of keeping track of those and working on your issues. And they're definitely listening. Thank you.

[Transcript missing]
