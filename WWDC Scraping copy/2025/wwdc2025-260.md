# Wwdc2025 260

## Transcript

More Videos

Streaming is available in most browsers,and in the Developer app.

About

Summary

Transcript

Develop for Shortcuts and Spotlight with App IntentsLearn about how building App Intents that make actions available and work best with the new features in Shortcuts and Spotlight on Mac. We'll show you how your actions combine in powerful ways with the new Apple Intelligence actions available in the Shortcuts app. We'll deep-dive into how the new “Use Model” action works, and how it interacts with your app's entities. And we'll discuss how to use the App Intents APIs to make your actions available in Spotlight.Chapters0:00 -Introduction1:16 -Use Model11:40 -Spotlight on Mac17:18 -Automations on MacResourcesApp IntentsApp ShortcutsDonating ShortcutsHuman Interface Guidelines: App ShortcutsSoup Chef: Accelerating App Interactions with ShortcutsHD VideoSD VideoRelated VideosWWDC23Design Shortcuts for SpotlightSpotlight your app with App Shortcuts

Learn about how building App Intents that make actions available and work best with the new features in Shortcuts and Spotlight on Mac. We'll show you how your actions combine in powerful ways with the new Apple Intelligence actions available in the Shortcuts app. We'll deep-dive into how the new “Use Model” action works, and how it interacts with your app's entities. And we'll discuss how to use the App Intents APIs to make your actions available in Spotlight.

0:00 -Introduction

1:16 -Use Model

11:40 -Spotlight on Mac

17:18 -Automations on Mac

App Intents

App Shortcuts

Donating Shortcuts

Human Interface Guidelines: App Shortcuts

Soup Chef: Accelerating App Interactions with Shortcuts

HD VideoSD Video

HD Video

SD Video

Design Shortcuts for Spotlight

Spotlight your app with App Shortcuts

Search this video…Hi, I’m Ayaka and I’m a member of the Shortcuts team.Welcome to Develop for Shortcuts and Spotlight with App Intents.The App Intents framework gives your app’s features more visibilityacross our platforms, by letting people use core functionalityfrom your app in places like Shortcuts and Spotlight.The Shortcuts app lets people connect different apps and their actions together,to make the everyday a bit more fast and fluid.You can use Shortcuts to automate repetitive tasksand connect to other functionality from different apps.For example, to save a recipe from Safari to a note in the Notes app.This year, we’re bringing the power of Apple Intelligence into Shortcutsto make weaving these actions together easier, and even a bit more fun.You can also now run Shortcuts actions, including your app’s actions,right from Spotlight on Mac.Today, we’ll cover how you can adopt App Intents to make your app work greatwith both Shortcuts and Spotlight.We’ll start by introducing the new Use Model action,which allows people to use Apple Intelligence modelsin their shortcuts.We’ll then do a deep dive into how this action works,along with new ways to run Shortcuts from Spotlight and Automations on Mac.Let's get started.This is the new Use Model action.It’s one of the many new Intelligent actionswe added to Shortcuts this year.Alongside actions for Image Playground, Writing Tools, and more.With this new action, tasks that used to be tedious,like parsing text or formatting data,are now as simple as writing just a few words.You can choose a large server-based model on Private Cloud Computeto handle complex requests while protecting your privacy,or the on-device model to handle simple requestswithout the need for a network connection.You can also choose ChatGPT if you want to tap intoits broad world knowledge and expertise.For example, you can use a model to filter calendar eventsfor the ones that are related to a specific trip,summarize content on the web, for example, to get the Word of the Day,and even keep you up to date on San Francisco’s food sceneby asking ChatGPT what’s the latest.Here’s an example shortcut that uses a model.It’s a simple one that helps me organize the notes I take at work every day.It first gets the notes that I’ve created today,loops through them, and uses the model with the request,“Is this note related to developing features for the Shortcuts app?”If the response is yes,it adds it to my Shortcuts Projects folder.Here, because I’m using the output from the model and an if action,which expects a Boolean input,the runtime will automatically generate a Boolean output type.Instead of returning text like,“Yes, this note seems to be about developing features for the Shortcuts app”which is helpful but a bit verbose and of the wrong type,the model returns a yes or no Boolean response,which I can then pass into the If action.If you need more control, you can always explicitly chooseone of these built-in output types.For example, you might want to do this when testing out the actionfor a flow you have in mindbefore you know what action you want to connect the output into.Today, I want us to take a closer look at Text, Dictionary,and Content from your apps,and go over what you as a developer should do to make surethat the output from the model connects well with what your app accepts as input.Let’s start with Text.Text is the bread and butter of language models.At the surface, it might seem like the simplest and most humble option,but there’s actually a lot of complexity and richness to it.Literally.That’s because models often respond with Rich Text.For example, some portions of the response may be Bold or Italic.It might even contain a list or a table like this.If your app supports Rich Text content, now is the time to make sureyour app intents use the attributed string typefor text parameters where appropriate.An attributed string is a combination of characters, ranges, and a dictionary,that together define how the text should be rendered.By supporting Attributed string input,the output from the model can connect seamlessly and losslessly into your app.Let's see that in action.I have a shortcut here that uses ChatGPT to create a diary entry templatefor me to use in the Bear app.I’m asking the model to include a mood logging tablefor the morning, afternoon, and evening,and some space for reflecting on that day’s highlights.The shortcut then takes the output from the model and passes itto the Create Note action from the Bear app.Let me show you how this works by running it.And there is my new diary entry for today.It includes rich text formatting, like bolding important info,and it also includes the mood logging table like I requested.Highlights for today?How about “Recorded WWDC talk!”?Anyway, I’ll finish this journaling session later.Because the Bear app’s Create Note app intent supports Attributed string,it was able to take the Rich Text output from the modeland present it losslessly in their app.If you want to learn more about supporting Attributed strings in your app,you’ll want to check out the “What’s New in Foundation” videoand the Rich Text “Code-along” session.Next, let's take a look at Dictionary.The Dictionary output type is useful when you need multiple pieces of data returnedfrom a single request in a structured format.For example, I might want to create a shortcut that looksat all the files in my invoices folder,extracts information like vendor, amount, and date from each itemand adds it as a row to a spreadsheet so I can better track my finances.To do this, I can use the model to extract that infoand tell exactly how I want the output Dictionary to be formatted.I can then use the values from the Dictionary in subsequent actions,like adding a row to a spreadsheet.Thanks to language models, I’m able to take unstructured datalike the contents of a PDF, and transform it into exactly the structure I needto connect it to another action.Finally, let’s take a look at Content from your apps.Content from your apps are represented as app entities, defined by you,using the App Intents Framework.For example, a Calendar app might provide entities for Calendars and Events.If App Intents are the actions or verbs from your app,App Entities are the nouns.You can pass App Entities into the model too.If you pass in a list of entities like calendar events into the request,you’ll be presented with an extra option: The app entity type that you passed in.For example, if I pass in a list of calendar events,I can ask the model to filter the calendar eventsto only the ones related to a specific trip.Under the hood, the action passes a JSON representationof your entity to the model,so you’ll want to make sure to expose any informationyou want it to be able to reason over, in the entity definition.First, all entity properties exposed to Shortcuts will be converted to a string,and included in the JSON representation.The name provided in the type display representationwill also be included, to hint to the model what this entity represents,like a Calendar Event.Lastly, the title and subtitle provided in the entity’s display representationwill be included.Let's take a look at an example.In the simplified representation of a Calendar Event,the title of the event, start date, and end date will be included,as well as the type name provided by the type display representation,and the title and subtitle provided in the display representation.These strings defined on your entities are also displayed in the Shortcuts appwhen inspecting the properties of an entitythat’s being passed into another action,so you’ll want to verify that they look good there too.Now that we know how to structure the entities,let’s make sure there’s a way to get these entities to pass into the model.In this case, the calendar entities to filter.In Shortcuts, the most common way to get entities is through a Find action.This type of action allows people to get entities from your appby using their properties as filters, like the start date of an event,or the calendar that it belongs to.You can create a Find action by implementing your own queriesthat conform to the Enumerable Entity Queryand Entity Property Query protocols.Or, if you already donate your app entities to Core Spotlightby adopting the Indexed Entity protocol,you can adopt new APIs to associate your App Entity’s propertiesto their corresponding Spotlight attribute keysfor the system to automatically generate a Find action.Let’s take a look at our Event Entity example from earlier.Here, I’ve already conformed Event Entity to the Indexed Entity protocol.The title, subtitle, and image from the display representationwill automatically be associated with their respective Spotlight attribute keys.In order to associate properties from your entityto the corresponding attribute key on the Spotlight Entity,you can use the new indexing key parameter.Here, the event title property is being associatedwith the event title Spotlight attribute key.There are some cases wherethere isn’t an existing, corresponding attribute key.In those cases, you can use the custom indexing key parameteron the property to specify a custom key, like I did here with the notes property.And this is the Find action that will be availablein the Shortcuts app, based on that Indexed Entity.You can also check out the App Intents Travel Tracking Appavailable on “developer.apple.com” for another example.That’s everything you need to know about how to structure your app entitiesand provide them to the model.Now, let’s take a look at another thing people can do with the Use Model action.This action provides an option to “follow up” on the requestso they can go back and forth with the model to get the output just rightbefore passing it to the next action.Let me show you how I've been using this.As someone who’s been trying to cook more,I have a shortcut that lets me quickly extract the list of ingredientsfrom a recipe using a model, and put it in my Grocery List in the Things app.By turning on the Follow Up toggle,I get the option to follow up on my initial request and make adjustments.For example, I can ask the model to make modificationsto the recipe before saving the ingredients.Now, let’s go take a look at a pizza recipeI’ve had my eyes on in Safari.Here’s a recipe for some Neapolitan style pizzathat a friend shared with me.This looks really good.So let me run my shortcut to save the ingredients in my Grocery List.Alright, so it looks like I’ll need 400g of zero zero flour,100g of whole wheat flour, some yeast, salt.Okay, this looks great.I’m actually having a pizza party, so I’m going to want to make some extra.Here because I had Follow Up enabled,I’m presented with a text field to follow up.I’m going to request: “Double the recipe”.All right, so now I need;800g of zero zero flour, 200g of whole wheat flour.Okay, this looks perfect!And here are the ingredients for my pizza party, in the Things app.And that’s your new Use Model action.Now let’s take a look at Spotlight on Mac.Spotlight lets you search for apps and documents across the system.This year, you can now run actions from your appdirectly from Spotlight on Mac!Your apps can show actions in Spotlight by adopting App Intents,just like what you do for Shortcuts.The best practices for how to design app intents for Shortcutsapplies directly to Spotlight, including writing a great parameter summary.A parameter summary is a short, natural language representationof what the app intent does, including the parameters it needs to run.That same parameter summary is shown in the Shortcuts Editorwhen you create a shortcut.Spotlight is all about running things quickly.To do that, people need to be able to provide all the informationyour intent needs to run directly in Spotlight.Let me go over how to do that.First, the parameter summary,which is what people will see in Spotlight UI,must contain all required parameters that don’t have a default value.If you have an intent that doesn’t have any parameters like that,you don’t need to provide a parameter summary.Spotlight can fall back to showing the title of the intent instead.Secondly, you’ll want to make surethat the intent is not hidden from Shortcuts in Spotlight.For example by setting “is discoverable”  to falseor setting “assistant only” to truein your intent implementation.If you already adopted an intent for widget configurationthat doesn’t have a perform method,that will also not show up in Spotlight.Let's take a look at a few examples.I have an intent here called Create Event Intentthat people can use to create a new calendar event.It currently has three parameters, a title, start date, and end date.This intent will show up in Spotlight because all of its required parametersare present in the parameter summary.However, if I add a new Notes parameter as a required parameterwithout a default value and don’t add it to the parameter summary,the intent will no longer show up in Spotlight.But if I update the notes parameter to be optional,the intent will again show up in Spotlight.Alternatively, I could keep the parameter requiredand provide a default value, like an empty string in this case.For best practices on designing parameter summaries,like choosing which parameters to make optional,be sure to check out the Design App Intentsfor system experiences video.Once you’ve gotten your intent to show up in Spotlight,you’ll now want to optimize the user experience.This includes supporting suggestions, search by typing,and providing background and foreground running options.Let's take a look.When someone searches for and selects your intent in Spotlight,they need to fill out the required parameters before running the intent.In order to make this interaction quick,you should provide suggestions for how to fill in these parameters.There are a couple of protocols you can implement to do this.You can implement Suggested Entities as a part of the Entity Query protocol,or all entities as a part of the Enumerable Entity Query protocol.You should use suggested entities when there is a subset of a largeor otherwise unbounded list of entities you want to suggest,for example, a list of calendar events in the coming day,instead of all events, past and present.All entities is great if the list of entities is smaller and bounded,for example, a list of timezones.You can also tag on-screen content by settingthe App Entity Identifier propertyon NS user Activityto provide suggestions based on what contentor entity that is currently active.For example, the detail view of a specific calendar event.For more details on that API, check out the session;“Exploring New Advances in App Intents.”Lastly, your intent can also adopt the Predictable Intent protocolso Spotlight can surface suggestions based on how that intent is used.Next, let's consider the experiencewhen someone starts typing into a parameter field.If you already implemented suggestions, you’ll automatically getbasic search and filtering functionality for the suggestions you provide.But in cases where there are more entities beyond the suggestionsthat someone might want to select,you should add deeper search support by implementing queries.You can implement the Entity String Query protocolor implement Indexed Entity as we walked through earlier.You can find an example implementation of Entity String Queryin the App Intents Sample Code app available on “developer.apple.com”.And for details on how to implement Indexed Entity,check out the “What’s new in App Intents” talk from 2024.Next, let’s consider the experience of running the action.In the example of creating an event, sometimes people want the actionto run entirely in the background for a quick in and out,but in other cases, it’s nice to see the created event in the app itself.To support both types of experiences,you can separate your intents where appropriateinto background and foreground intents.For example,we could have a “create event” intent be a background intent,so that people can create calendar events in the background without opening the app.We can also have an “open event” intent that takes the app into the foregroundby opening a specific event, which is a useful action on its own.We can then pair these two intents togetherby having the background intent return the foreground intent as an Opens Intent.In this case, the Create Event Intentcan return an Open Event Intent as an Opens Intent.For more details on this, check out the “Dive into App Intents” video.And that's Spotlight on Mac.Now let’s put the spotlight on Automations.This year, we’re bringing personal automations to the Mac,with new automation types like folder and external drive automationsbuilt specifically for Mac,along with automation types you might already be familiar with from iOS,like Time of Day and Bluetooth.For example,I can now make it so that my invoice processing shortcut from earlier,runs every time I add a new invoice to a specific folderinstead of having to run it manually.As long as your intent is available on macOS,they will also be available to use in Shortcuts to runas a part of Automations on Mac.This includes iOS apps that are installable on macOS.That adds Spotlight and Automations on Macto the many ways you can run Shortcuts,including action button, control center, and much more.And with the addition of new intelligent actions like Use Model,the possibilities for how your app’s actions can be usedacross the system are endless.Let's wrap up with some next steps.First, expose content from your app as entities that work great in Shortcuts,including the new Use Model action.That means exposing find actionsand making sure the entities expose key properties that you would wanta model to be able to reason over.Next, use attributed strings to allow Rich Text to be passed into your apps,like what we saw with the Bear app demo.Last but not least, optimize your intents for Spotlight on Macand make sure they look great in Shortcuts too.Thanks for watching.

Hi, I’m Ayaka and I’m a member of the Shortcuts team.Welcome to Develop for Shortcuts and Spotlight with App Intents.The App Intents framework gives your app’s features more visibilityacross our platforms, by letting people use core functionalityfrom your app in places like Shortcuts and Spotlight.

The Shortcuts app lets people connect different apps and their actions together,to make the everyday a bit more fast and fluid.You can use Shortcuts to automate repetitive tasksand connect to other functionality from different apps.For example, to save a recipe from Safari to a note in the Notes app.This year, we’re bringing the power of Apple Intelligence into Shortcutsto make weaving these actions together easier, and even a bit more fun.You can also now run Shortcuts actions, including your app’s actions,right from Spotlight on Mac.Today, we’ll cover how you can adopt App Intents to make your app work greatwith both Shortcuts and Spotlight.We’ll start by introducing the new Use Model action,which allows people to use Apple Intelligence modelsin their shortcuts.We’ll then do a deep dive into how this action works,along with new ways to run Shortcuts from Spotlight and Automations on Mac.Let's get started.

This is the new Use Model action.It’s one of the many new Intelligent actionswe added to Shortcuts this year.Alongside actions for Image Playground, Writing Tools, and more.With this new action, tasks that used to be tedious,like parsing text or formatting data,are now as simple as writing just a few words.You can choose a large server-based model on Private Cloud Computeto handle complex requests while protecting your privacy,or the on-device model to handle simple requestswithout the need for a network connection.You can also choose ChatGPT if you want to tap intoits broad world knowledge and expertise.For example, you can use a model to filter calendar eventsfor the ones that are related to a specific trip,summarize content on the web, for example, to get the Word of the Day,and even keep you up to date on San Francisco’s food sceneby asking ChatGPT what’s the latest.Here’s an example shortcut that uses a model.It’s a simple one that helps me organize the notes I take at work every day.It first gets the notes that I’ve created today,loops through them, and uses the model with the request,“Is this note related to developing features for the Shortcuts app?”If the response is yes,it adds it to my Shortcuts Projects folder.Here, because I’m using the output from the model and an if action,which expects a Boolean input,the runtime will automatically generate a Boolean output type.Instead of returning text like,“Yes, this note seems to be about developing features for the Shortcuts app”which is helpful but a bit verbose and of the wrong type,the model returns a yes or no Boolean response,which I can then pass into the If action.

If you need more control, you can always explicitly chooseone of these built-in output types.For example, you might want to do this when testing out the actionfor a flow you have in mindbefore you know what action you want to connect the output into.Today, I want us to take a closer look at Text, Dictionary,and Content from your apps,and go over what you as a developer should do to make surethat the output from the model connects well with what your app accepts as input.Let’s start with Text.

Text is the bread and butter of language models.At the surface, it might seem like the simplest and most humble option,but there’s actually a lot of complexity and richness to it.Literally.That’s because models often respond with Rich Text.For example, some portions of the response may be Bold or Italic.It might even contain a list or a table like this.If your app supports Rich Text content, now is the time to make sureyour app intents use the attributed string typefor text parameters where appropriate.An attributed string is a combination of characters, ranges, and a dictionary,that together define how the text should be rendered.By supporting Attributed string input,the output from the model can connect seamlessly and losslessly into your app.Let's see that in action.I have a shortcut here that uses ChatGPT to create a diary entry templatefor me to use in the Bear app.I’m asking the model to include a mood logging tablefor the morning, afternoon, and evening,and some space for reflecting on that day’s highlights.The shortcut then takes the output from the model and passes itto the Create Note action from the Bear app.Let me show you how this works by running it.

And there is my new diary entry for today.It includes rich text formatting, like bolding important info,and it also includes the mood logging table like I requested.Highlights for today?How about “Recorded WWDC talk!”?Anyway, I’ll finish this journaling session later.

Because the Bear app’s Create Note app intent supports Attributed string,it was able to take the Rich Text output from the modeland present it losslessly in their app.

If you want to learn more about supporting Attributed strings in your app,you’ll want to check out the “What’s New in Foundation” videoand the Rich Text “Code-along” session.Next, let's take a look at Dictionary.The Dictionary output type is useful when you need multiple pieces of data returnedfrom a single request in a structured format.For example, I might want to create a shortcut that looksat all the files in my invoices folder,extracts information like vendor, amount, and date from each itemand adds it as a row to a spreadsheet so I can better track my finances.To do this, I can use the model to extract that infoand tell exactly how I want the output Dictionary to be formatted.I can then use the values from the Dictionary in subsequent actions,like adding a row to a spreadsheet.Thanks to language models, I’m able to take unstructured datalike the contents of a PDF, and transform it into exactly the structure I needto connect it to another action.Finally, let’s take a look at Content from your apps.

Content from your apps are represented as app entities, defined by you,using the App Intents Framework.For example, a Calendar app might provide entities for Calendars and Events.If App Intents are the actions or verbs from your app,App Entities are the nouns.You can pass App Entities into the model too.If you pass in a list of entities like calendar events into the request,you’ll be presented with an extra option: The app entity type that you passed in.For example, if I pass in a list of calendar events,I can ask the model to filter the calendar eventsto only the ones related to a specific trip.Under the hood, the action passes a JSON representationof your entity to the model,so you’ll want to make sure to expose any informationyou want it to be able to reason over, in the entity definition.

First, all entity properties exposed to Shortcuts will be converted to a string,and included in the JSON representation.The name provided in the type display representationwill also be included, to hint to the model what this entity represents,like a Calendar Event.Lastly, the title and subtitle provided in the entity’s display representationwill be included.Let's take a look at an example.

In the simplified representation of a Calendar Event,the title of the event, start date, and end date will be included,as well as the type name provided by the type display representation,and the title and subtitle provided in the display representation.

These strings defined on your entities are also displayed in the Shortcuts appwhen inspecting the properties of an entitythat’s being passed into another action,so you’ll want to verify that they look good there too.Now that we know how to structure the entities,let’s make sure there’s a way to get these entities to pass into the model.In this case, the calendar entities to filter.In Shortcuts, the most common way to get entities is through a Find action.This type of action allows people to get entities from your appby using their properties as filters, like the start date of an event,or the calendar that it belongs to.You can create a Find action by implementing your own queriesthat conform to the Enumerable Entity Queryand Entity Property Query protocols.Or, if you already donate your app entities to Core Spotlightby adopting the Indexed Entity protocol,you can adopt new APIs to associate your App Entity’s propertiesto their corresponding Spotlight attribute keysfor the system to automatically generate a Find action.Let’s take a look at our Event Entity example from earlier.

Here, I’ve already conformed Event Entity to the Indexed Entity protocol.

The title, subtitle, and image from the display representationwill automatically be associated with their respective Spotlight attribute keys.

In order to associate properties from your entityto the corresponding attribute key on the Spotlight Entity,you can use the new indexing key parameter.Here, the event title property is being associatedwith the event title Spotlight attribute key.

There are some cases wherethere isn’t an existing, corresponding attribute key.In those cases, you can use the custom indexing key parameteron the property to specify a custom key, like I did here with the notes property.

And this is the Find action that will be availablein the Shortcuts app, based on that Indexed Entity.You can also check out the App Intents Travel Tracking Appavailable on “developer.apple.com” for another example.That’s everything you need to know about how to structure your app entitiesand provide them to the model.Now, let’s take a look at another thing people can do with the Use Model action.This action provides an option to “follow up” on the requestso they can go back and forth with the model to get the output just rightbefore passing it to the next action.Let me show you how I've been using this.As someone who’s been trying to cook more,I have a shortcut that lets me quickly extract the list of ingredientsfrom a recipe using a model, and put it in my Grocery List in the Things app.By turning on the Follow Up toggle,I get the option to follow up on my initial request and make adjustments.For example, I can ask the model to make modificationsto the recipe before saving the ingredients.Now, let’s go take a look at a pizza recipeI’ve had my eyes on in Safari.

Here’s a recipe for some Neapolitan style pizzathat a friend shared with me.This looks really good.So let me run my shortcut to save the ingredients in my Grocery List.

Alright, so it looks like I’ll need 400g of zero zero flour,100g of whole wheat flour, some yeast, salt.Okay, this looks great.I’m actually having a pizza party, so I’m going to want to make some extra.

Here because I had Follow Up enabled,I’m presented with a text field to follow up.I’m going to request: “Double the recipe”.

All right, so now I need;800g of zero zero flour, 200g of whole wheat flour.Okay, this looks perfect!And here are the ingredients for my pizza party, in the Things app.And that’s your new Use Model action.Now let’s take a look at Spotlight on Mac.

Spotlight lets you search for apps and documents across the system.This year, you can now run actions from your appdirectly from Spotlight on Mac!Your apps can show actions in Spotlight by adopting App Intents,just like what you do for Shortcuts.The best practices for how to design app intents for Shortcutsapplies directly to Spotlight, including writing a great parameter summary.A parameter summary is a short, natural language representationof what the app intent does, including the parameters it needs to run.

That same parameter summary is shown in the Shortcuts Editorwhen you create a shortcut.Spotlight is all about running things quickly.To do that, people need to be able to provide all the informationyour intent needs to run directly in Spotlight.Let me go over how to do that.

First, the parameter summary,which is what people will see in Spotlight UI,must contain all required parameters that don’t have a default value.If you have an intent that doesn’t have any parameters like that,you don’t need to provide a parameter summary.Spotlight can fall back to showing the title of the intent instead.Secondly, you’ll want to make surethat the intent is not hidden from Shortcuts in Spotlight.For example by setting “is discoverable”  to falseor setting “assistant only” to truein your intent implementation.

If you already adopted an intent for widget configurationthat doesn’t have a perform method,that will also not show up in Spotlight.Let's take a look at a few examples.

I have an intent here called Create Event Intentthat people can use to create a new calendar event.It currently has three parameters, a title, start date, and end date.This intent will show up in Spotlight because all of its required parametersare present in the parameter summary.However, if I add a new Notes parameter as a required parameterwithout a default value and don’t add it to the parameter summary,the intent will no longer show up in Spotlight.But if I update the notes parameter to be optional,the intent will again show up in Spotlight.

Alternatively, I could keep the parameter requiredand provide a default value, like an empty string in this case.

For best practices on designing parameter summaries,like choosing which parameters to make optional,be sure to check out the Design App Intentsfor system experiences video.Once you’ve gotten your intent to show up in Spotlight,you’ll now want to optimize the user experience.

This includes supporting suggestions, search by typing,and providing background and foreground running options.Let's take a look.

When someone searches for and selects your intent in Spotlight,they need to fill out the required parameters before running the intent.In order to make this interaction quick,you should provide suggestions for how to fill in these parameters.There are a couple of protocols you can implement to do this.

You can implement Suggested Entities as a part of the Entity Query protocol,or all entities as a part of the Enumerable Entity Query protocol.

You should use suggested entities when there is a subset of a largeor otherwise unbounded list of entities you want to suggest,for example, a list of calendar events in the coming day,instead of all events, past and present.All entities is great if the list of entities is smaller and bounded,for example, a list of timezones.

You can also tag on-screen content by settingthe App Entity Identifier propertyon NS user Activityto provide suggestions based on what contentor entity that is currently active.For example, the detail view of a specific calendar event.For more details on that API, check out the session;“Exploring New Advances in App Intents.”Lastly, your intent can also adopt the Predictable Intent protocolso Spotlight can surface suggestions based on how that intent is used.Next, let's consider the experiencewhen someone starts typing into a parameter field.If you already implemented suggestions, you’ll automatically getbasic search and filtering functionality for the suggestions you provide.But in cases where there are more entities beyond the suggestionsthat someone might want to select,you should add deeper search support by implementing queries.

You can implement the Entity String Query protocolor implement Indexed Entity as we walked through earlier.

You can find an example implementation of Entity String Queryin the App Intents Sample Code app available on “developer.apple.com”.And for details on how to implement Indexed Entity,check out the “What’s new in App Intents” talk from 2024.Next, let’s consider the experience of running the action.In the example of creating an event, sometimes people want the actionto run entirely in the background for a quick in and out,but in other cases, it’s nice to see the created event in the app itself.

To support both types of experiences,you can separate your intents where appropriateinto background and foreground intents.For example,we could have a “create event” intent be a background intent,so that people can create calendar events in the background without opening the app.We can also have an “open event” intent that takes the app into the foregroundby opening a specific event, which is a useful action on its own.We can then pair these two intents togetherby having the background intent return the foreground intent as an Opens Intent.In this case, the Create Event Intentcan return an Open Event Intent as an Opens Intent.

For more details on this, check out the “Dive into App Intents” video.And that's Spotlight on Mac.Now let’s put the spotlight on Automations.This year, we’re bringing personal automations to the Mac,with new automation types like folder and external drive automationsbuilt specifically for Mac,along with automation types you might already be familiar with from iOS,like Time of Day and Bluetooth.For example,I can now make it so that my invoice processing shortcut from earlier,runs every time I add a new invoice to a specific folderinstead of having to run it manually.As long as your intent is available on macOS,they will also be available to use in Shortcuts to runas a part of Automations on Mac.This includes iOS apps that are installable on macOS.

That adds Spotlight and Automations on Macto the many ways you can run Shortcuts,including action button, control center, and much more.

And with the addition of new intelligent actions like Use Model,the possibilities for how your app’s actions can be usedacross the system are endless.Let's wrap up with some next steps.First, expose content from your app as entities that work great in Shortcuts,including the new Use Model action.That means exposing find actionsand making sure the entities expose key properties that you would wanta model to be able to reason over.

Next, use attributed strings to allow Rich Text to be passed into your apps,like what we saw with the Bear app demo.

Last but not least, optimize your intents for Spotlight on Macand make sure they look great in Shortcuts too.Thanks for watching.

0:00 -IntroductionThe App Intents framework enhances app visibility across Apple platforms, enabling people to integrate app features into Shortcuts and Spotlight. 

The Shortcuts app automates tasks by connecting apps, and Apple Intelligence is now integrated to simplify shortcut creation. You can adopt App Intents to make your apps work with Shortcuts and Spotlight; new features include running Shortcuts from Spotlight on Mac and utilizing Apple Intelligence models in shortcuts.1:16 -Use ModelThe new Use Model action in Shortcuts streamlines complex tasks using language models. People can choose from server-based, on-device, or ChatGPT models for various requests, such as filtering calendar events, summarizing web content, or organizing notes. 

The action can generate different output types, including Text, Dictionary, and Content from apps. Text output can be rich, so ensure your apps support attributed strings to preserve formatting. Dictionary output is useful for structured data, enabling tasks like extracting information from invoices and adding it to spreadsheets. Content from apps allows people to work with app entities defined using the App Intents Framework, facilitating seamless integration between different apps and the language models.

The Shortcuts app's 'Find' action is commonly used to retrieve entities based on their properties. You can implement 'Find' actions by conforming to specific protocols or by associating app entity properties with Core Spotlight attribute keys.

The 'Use Model' action allows people to interact with the model's output. For example, someone can extract ingredients from a recipe, then use the 'Follow Up' feature to modify the request, such as doubling the recipe, before saving the ingredients to a grocery list app.11:40 -Spotlight on MacSpotlight on Mac is a powerful search feature that enables people to locate apps and documents across their system. This update introduces the ability to run actions directly from Spotlight, enhancing user efficiency. You can achieve this in your apps by adopting App Intents, which allow apps to display actions in Spotlight. 

To optimize the user experience, follow these best practices:

Provide suggestions for filling in parameters.
Implement search functionality.
Support both background and foreground running options. 
Pair background intents with foreground intents to provide a seamless user flow.17:18 -Automations on MacThis Mac update introduces personal automations, enabling people to create shortcuts triggered by specific events like folder changes or Bluetooth connections. These automations can use existing iOS shortcuts and intents from macOS apps, enhancing system-wide efficiency. 

Optimize your apps for Spotlight and Shortcuts, allowing for richer text integration and more intelligent actions.

0:00 -Introduction

The App Intents framework enhances app visibility across Apple platforms, enabling people to integrate app features into Shortcuts and Spotlight. 

The Shortcuts app automates tasks by connecting apps, and Apple Intelligence is now integrated to simplify shortcut creation. You can adopt App Intents to make your apps work with Shortcuts and Spotlight; new features include running Shortcuts from Spotlight on Mac and utilizing Apple Intelligence models in shortcuts.

The App Intents framework enhances app visibility across Apple platforms, enabling people to integrate app features into Shortcuts and Spotlight. 

The Shortcuts app automates tasks by connecting apps, and Apple Intelligence is now integrated to simplify shortcut creation. You can adopt App Intents to make your apps work with Shortcuts and Spotlight; new features include running Shortcuts from Spotlight on Mac and utilizing Apple Intelligence models in shortcuts.

1:16 -Use Model

The new Use Model action in Shortcuts streamlines complex tasks using language models. People can choose from server-based, on-device, or ChatGPT models for various requests, such as filtering calendar events, summarizing web content, or organizing notes. 

The action can generate different output types, including Text, Dictionary, and Content from apps. Text output can be rich, so ensure your apps support attributed strings to preserve formatting. Dictionary output is useful for structured data, enabling tasks like extracting information from invoices and adding it to spreadsheets. Content from apps allows people to work with app entities defined using the App Intents Framework, facilitating seamless integration between different apps and the language models.

The Shortcuts app's 'Find' action is commonly used to retrieve entities based on their properties. You can implement 'Find' actions by conforming to specific protocols or by associating app entity properties with Core Spotlight attribute keys.

The 'Use Model' action allows people to interact with the model's output. For example, someone can extract ingredients from a recipe, then use the 'Follow Up' feature to modify the request, such as doubling the recipe, before saving the ingredients to a grocery list app.

The new Use Model action in Shortcuts streamlines complex tasks using language models. People can choose from server-based, on-device, or ChatGPT models for various requests, such as filtering calendar events, summarizing web content, or organizing notes. 

The action can generate different output types, including Text, Dictionary, and Content from apps. Text output can be rich, so ensure your apps support attributed strings to preserve formatting. Dictionary output is useful for structured data, enabling tasks like extracting information from invoices and adding it to spreadsheets. Content from apps allows people to work with app entities defined using the App Intents Framework, facilitating seamless integration between different apps and the language models.

The Shortcuts app's 'Find' action is commonly used to retrieve entities based on their properties. You can implement 'Find' actions by conforming to specific protocols or by associating app entity properties with Core Spotlight attribute keys.

The 'Use Model' action allows people to interact with the model's output. For example, someone can extract ingredients from a recipe, then use the 'Follow Up' feature to modify the request, such as doubling the recipe, before saving the ingredients to a grocery list app.

11:40 -Spotlight on Mac

Spotlight on Mac is a powerful search feature that enables people to locate apps and documents across their system. This update introduces the ability to run actions directly from Spotlight, enhancing user efficiency. You can achieve this in your apps by adopting App Intents, which allow apps to display actions in Spotlight. 

To optimize the user experience, follow these best practices:

Provide suggestions for filling in parameters.
Implement search functionality.
Support both background and foreground running options. 
Pair background intents with foreground intents to provide a seamless user flow.

Spotlight on Mac is a powerful search feature that enables people to locate apps and documents across their system. This update introduces the ability to run actions directly from Spotlight, enhancing user efficiency. You can achieve this in your apps by adopting App Intents, which allow apps to display actions in Spotlight. 

To optimize the user experience, follow these best practices:

Provide suggestions for filling in parameters.
Implement search functionality.
Support both background and foreground running options. 
Pair background intents with foreground intents to provide a seamless user flow.

17:18 -Automations on Mac

This Mac update introduces personal automations, enabling people to create shortcuts triggered by specific events like folder changes or Bluetooth connections. These automations can use existing iOS shortcuts and intents from macOS apps, enhancing system-wide efficiency. 

Optimize your apps for Spotlight and Shortcuts, allowing for richer text integration and more intelligent actions.

This Mac update introduces personal automations, enabling people to create shortcuts triggered by specific events like folder changes or Bluetooth connections. These automations can use existing iOS shortcuts and intents from macOS apps, enhancing system-wide efficiency. 

Optimize your apps for Spotlight and Shortcuts, allowing for richer text integration and more intelligent actions.

## Code Samples

