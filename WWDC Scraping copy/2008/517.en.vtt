WEBVTT

00:00:21.290 --> 00:00:22.570
Good morning.

00:00:22.690 --> 00:00:23.650
My name is Armin Briegele.

00:00:23.780 --> 00:00:27.480
I'd like to welcome you to
Managing Clients and Preferences

00:00:27.480 --> 00:00:29.830
with Mac OS X and Leopard Server.

00:00:29.950 --> 00:00:30.920
That's quite a mouthful.

00:00:31.140 --> 00:00:34.760
I wanted to call the
session the joy of MCX.

00:00:37.620 --> 00:00:38.640
My name's Armin Briegele.

00:00:38.640 --> 00:00:41.900
I'm a solutions architect
for Apple Education.

00:00:41.900 --> 00:00:45.490
And that means I get to travel
around the country and sell my ideas.

00:00:45.490 --> 00:00:48.710
Other people's ideas as mine,
which is always a good job.

00:00:50.270 --> 00:00:51.660
So why are we here?

00:00:51.720 --> 00:00:53.600
Why are you here?

00:00:53.600 --> 00:00:58.050
If you have to manage a lot of Macs,
and personally I think a lot of

00:00:58.120 --> 00:01:00.720
Macs is anything beyond three.

00:01:02.410 --> 00:01:05.800
If you find yourself re-imaging
or reinstalling those regularly

00:01:06.330 --> 00:01:11.600
because the users mess them up
and you just need to repair them,

00:01:11.600 --> 00:01:13.700
and the quickest way,
instead of finding out

00:01:13.700 --> 00:01:16.260
what is actually wrong,
is just to re-image them.

00:01:16.260 --> 00:01:18.810
If you use Remote Desktop a
lot of the time,

00:01:18.810 --> 00:01:24.360
and I love Remote Desktop,
but I think there's better tools in

00:01:24.360 --> 00:01:26.560
addition to Remote Desktop to use this.

00:01:27.500 --> 00:01:31.400
And if you get these calls all the time,
and I know you do because I've got them,

00:01:31.400 --> 00:01:34.730
the users accidentally messed up
their settings and are lost and

00:01:34.730 --> 00:01:36.480
don't know what to do anymore.

00:01:36.520 --> 00:01:42.050
I once got the call of a very
distressed user who said,

00:01:42.060 --> 00:01:44.260
I deleted the internet!

00:01:47.170 --> 00:01:50.450
And it took us a while to
figure out what was going on,

00:01:50.450 --> 00:01:55.100
and in the end we found out that she had
dragged the Safari icon off the dock.

00:01:55.100 --> 00:02:00.090
And couldn't find the internet anymore.

00:02:01.070 --> 00:02:03.060
Probably to admire the poof,
I don't know.

00:02:03.060 --> 00:02:06.160
By the way,
if you ever encounter this call,

00:02:06.160 --> 00:02:10.790
the correct answer is, oh, it was you.

00:02:18.600 --> 00:02:19.900
So we'll talk about MCX.

00:02:19.980 --> 00:02:21.830
And in case you've been
wondering what that means,

00:02:21.880 --> 00:02:24.490
MCX is Managed Client for Mac OS X.

00:02:24.560 --> 00:02:28.730
Another big mouthful,
so I'll be using MCX all the time.

00:02:29.290 --> 00:02:33.360
We will also talk about launch
restrictions and how you can

00:02:33.360 --> 00:02:37.100
limit applications to keep
the users out of trouble.

00:02:37.460 --> 00:02:41.080
We will talk about preference manifests,
what they are, how they help you,

00:02:41.240 --> 00:02:44.430
why they're a good thing,
and why you have to file bugs

00:02:44.920 --> 00:02:48.970
to your favorite application for
the developer to provide one.

00:02:49.470 --> 00:02:53.120
And if we don't run out of time,
we will show some actual

00:02:53.120 --> 00:02:56.560
applications and some neat use
cases that hopefully go beyond

00:02:56.560 --> 00:02:59.120
what you find in the documentation.

00:03:00.700 --> 00:03:06.530
I will talk about control and
restrictions and limiting the user a lot,

00:03:06.530 --> 00:03:10.220
because that's what
managing clients is about.

00:03:10.410 --> 00:03:15.480
But before I do that,
I want to give one caveat,

00:03:15.480 --> 00:03:19.920
and I use this as little as necessary.

00:03:22.400 --> 00:03:24.740
The controls should support
and guide the users,

00:03:24.740 --> 00:03:25.460
not hinder them.

00:03:25.460 --> 00:03:27.170
Build fences, not walls.

00:03:27.200 --> 00:03:30.300
I work in education,
especially in education,

00:03:30.300 --> 00:03:32.800
people see that they
can limit the students,

00:03:32.800 --> 00:03:35.640
and sometimes I think they
go completely over the top.

00:03:35.730 --> 00:03:39.080
The idea of these controls is to
build a consistent environment

00:03:39.530 --> 00:03:43.360
so that the users will find their
way around wherever they are,

00:03:43.370 --> 00:03:47.240
no matter which machine they log into,
no matter which version

00:03:47.240 --> 00:03:50.350
of the OS they log into,
so they can't accidentally

00:03:50.350 --> 00:03:52.060
delete the internet.

00:03:52.300 --> 00:03:57.160
Maintaining more controls also, very,
very practically, means more work for us,

00:03:57.160 --> 00:03:58.090
the admins.

00:03:58.090 --> 00:04:01.170
You want to restrict that,
so don't go over the top with that.

00:04:01.240 --> 00:04:03.830
You can introduce conflicts
in your management,

00:04:03.830 --> 00:04:06.070
and tracking those down
can be very tricky,

00:04:06.150 --> 00:04:08.470
though we will show you some tools today.

00:04:09.840 --> 00:04:13.290
And don't try to use technology
as the solution for what

00:04:13.530 --> 00:04:14.960
basically is a social problem.

00:04:15.160 --> 00:04:18.300
Again, especially in education
with the students,

00:04:18.320 --> 00:04:19.790
but I think it's true everywhere.

00:04:19.800 --> 00:04:26.430
It might be more applicable and
actually a better approach to deploy

00:04:26.430 --> 00:04:30.470
and enforce acceptable use policies,
use a social solution

00:04:30.640 --> 00:04:32.800
to a social problem.

00:04:32.800 --> 00:04:36.350
That said,
let's go and control the users.

00:04:37.530 --> 00:04:39.880
So what is MCX?

00:04:39.910 --> 00:04:41.100
Managed Clients for OS X.

00:04:41.100 --> 00:04:41.610
I said that.

00:04:41.700 --> 00:04:45.040
Basically, it's the preferences,
the preferences that each and every

00:04:45.040 --> 00:04:49.900
application uses on Mac OS X hosted
in a central place on the server,

00:04:49.900 --> 00:04:52.700
a central point of
administration for those.

00:04:52.700 --> 00:04:54.680
And it will be in the directory.

00:04:54.680 --> 00:05:00.210
And with those, you can override,
complement, or preset the local

00:05:00.250 --> 00:05:02.550
preferences of a user.

00:05:04.520 --> 00:05:06.960
If you're... Just a
quick question in here.

00:05:06.960 --> 00:05:07.600
Who's coming?

00:05:07.600 --> 00:05:08.580
Who's new to the platform?

00:05:08.580 --> 00:05:11.000
Not that many.

00:05:11.000 --> 00:05:12.780
Who's familiar with the Windows world?

00:05:14.960 --> 00:05:16.160
Wonderful.

00:05:16.250 --> 00:05:17.630
Think group policies.

00:05:17.660 --> 00:05:19.160
They don't work the same.

00:05:19.160 --> 00:05:21.700
They're not exactly the same,
but they have the same

00:05:21.700 --> 00:05:24.420
idea and the same goal.

00:05:24.420 --> 00:05:27.480
So mentally replace
group policies with MCX.

00:05:29.520 --> 00:05:33.200
The local preferences live
in home library preferences,

00:05:33.270 --> 00:05:34.520
most of them at least.

00:05:34.570 --> 00:05:37.080
And they start in what
we call the plist format.

00:05:37.130 --> 00:05:39.440
And they have the
application domain name,

00:05:39.690 --> 00:05:44.240
which is basically
internet URL turned around.

00:05:44.690 --> 00:05:47.240
For example, com.apple.doc.

00:05:47.240 --> 00:05:49.900
And then .plist, that's my file.

00:05:49.910 --> 00:05:51.410
If you look into that,
there's an application

00:05:51.430 --> 00:05:54.230
called PList Editor,
which you get with the developer

00:05:54.230 --> 00:05:56.690
tools to look at those.

00:05:56.790 --> 00:06:00.150
And you can see that this
has a specific anatomy.

00:06:00.320 --> 00:06:06.030
I get a key value or key name,
which has a type and a value.

00:06:06.340 --> 00:06:07.560
And I get a list of those.

00:06:07.770 --> 00:06:10.580
Some of these might be
arrays and other things.

00:06:13.460 --> 00:06:14.890
Actually, these are XML files.

00:06:14.890 --> 00:06:18.670
So if you open them in a text editor,
you get to see this.

00:06:18.870 --> 00:06:21.390
And again, you see the list,
you see the key value,

00:06:21.700 --> 00:06:23.290
and you see the actual value.

00:06:23.320 --> 00:06:26.110
Well, this is not quite true,
to be honest.

00:06:26.110 --> 00:06:29.890
For performance reasons,
I think ever since Panther,

00:06:29.940 --> 00:06:33.090
we've been storing plists
in a binary format,

00:06:33.090 --> 00:06:35.580
so the access for them is faster.

00:06:36.460 --> 00:06:39.800
And to see the raw XML,
you have to convert them first

00:06:39.800 --> 00:06:41.700
using the plutil command.

00:06:41.700 --> 00:06:45.800
And then you can open them in TextEdit
or your favorite text application.

00:06:45.800 --> 00:06:49.250
Some third-party text
editors do this step for you.

00:06:52.350 --> 00:06:54.640
There's a command line
tool that goes with this,

00:06:54.690 --> 00:06:56.670
and if you've been
trawling Mac OS X hints or

00:06:56.670 --> 00:07:00.350
similar pages for hacks,
then you've probably encountered

00:07:00.510 --> 00:07:04.490
the defaults command,
which is a really useful tool for this.

00:07:04.500 --> 00:07:08.150
So there's a read command, defaults read,
you give the application

00:07:08.160 --> 00:07:11.340
domain and the key name,
and it will give you the value.

00:07:11.340 --> 00:07:14.540
And there's an equivalent,
which is write.

00:07:14.570 --> 00:07:17.660
Again, you give the application
domain the key name,

00:07:17.660 --> 00:07:22.700
the type, and the value,
and that way you can set the value

00:07:22.700 --> 00:07:24.420
without messing with the XML files.

00:07:24.440 --> 00:07:27.490
And a picture is worth
more than a thousand words.

00:07:27.490 --> 00:07:30.320
A demo is certainly worth a lot more,
and with that,

00:07:30.510 --> 00:07:34.220
I will ask Tony Graham to come up
to the stage and show you this.

00:07:34.240 --> 00:07:36.380
Thanks.

00:07:39.510 --> 00:07:40.840
So how many new to the platform?

00:07:40.840 --> 00:07:42.060
There was one person out there?

00:07:42.060 --> 00:07:42.700
Where are you?

00:07:42.700 --> 00:07:46.700
The rest of you probably know
that preferences for applications

00:07:46.700 --> 00:07:47.780
are stored in your home folder.

00:07:47.780 --> 00:07:49.300
In this case, I'm the administrator.

00:07:49.300 --> 00:07:55.080
In my library folder, under Preferences,
are most of the preference files

00:07:55.080 --> 00:07:57.250
for the applications I use.

00:07:57.330 --> 00:08:00.320
And typically,
especially applications that use

00:08:00.320 --> 00:08:03.460
Mac OS X's Cocoa frameworks for
reading and writing preferences.

00:08:03.850 --> 00:08:08.200
I think after you see some of the
stuff today discussed and demonstrated,

00:08:08.200 --> 00:08:10.290
you'll see why it's to your
advantage as a user and

00:08:10.290 --> 00:08:14.380
administrator for your application
developers to use that system.

00:08:14.380 --> 00:08:17.430
I have a simple application
installed on this computer.

00:08:17.440 --> 00:08:18.640
It's called Manifestation.

00:08:18.640 --> 00:08:21.430
And if I launch it,
it gives me a few settings,

00:08:21.550 --> 00:08:23.470
a few options for settings.

00:08:23.520 --> 00:08:27.040
So this is the kind of thing you
probably find yourself setting a lot.

00:08:27.290 --> 00:08:31.190
Serial numbers for applications,
maybe a slider of some kind,

00:08:31.200 --> 00:08:33.760
and then perhaps turning off the feature.

00:08:33.790 --> 00:08:35.560
And then perhaps turning off the
feature of an application to check

00:08:35.690 --> 00:08:36.860
for software updates automatically.

00:08:36.860 --> 00:08:39.580
These serial numbers generally are...

00:08:40.650 --> 00:08:46.350
Quite a bear to remember,
so I'd like to keep them in a text file.

00:08:48.300 --> 00:08:50.580
Let's enter the serial
number now for manifestation.

00:08:50.580 --> 00:08:56.520
And the idea here is you don't want
perhaps the user on first launch

00:08:56.520 --> 00:09:00.040
to be presented with this dialog,
so let's set it, let's preset it.

00:09:00.100 --> 00:09:03.530
Let's set the volume slider to four,
and we've already said I don't want to

00:09:03.530 --> 00:09:05.590
check for updates when it's launched.

00:09:05.630 --> 00:09:09.840
So if we quit the application and look
in my preferences folder sorted by date,

00:09:09.840 --> 00:09:13.720
you'll see now that my simple
application has a preference file.

00:09:13.720 --> 00:09:19.530
And if I try and open that in TextEdit,
which was my...

00:09:20.410 --> 00:09:21.620
Previous favorite way to do this.

00:09:21.620 --> 00:09:25.280
You'll see that that binary file is
getting in the way of you editing those,

00:09:25.280 --> 00:09:27.640
although some of the
strings will show up.

00:09:27.730 --> 00:09:31.990
So let's close that and show
you that some third-party text

00:09:31.990 --> 00:09:34.640
editors will do the right thing.

00:09:34.640 --> 00:09:35.890
Text Wrangler is one of them.

00:09:35.900 --> 00:09:36.880
BBEdit is another.

00:09:36.880 --> 00:09:42.200
So dragging these binary preferences
to one of those text editors will

00:09:42.200 --> 00:09:44.900
let you see the format of the XML.

00:09:44.900 --> 00:09:47.240
And I can go through
here and change this to,

00:09:47.240 --> 00:09:49.120
let's say, 5, for example.

00:09:49.740 --> 00:09:52.060
So editing the preference
file while the application is

00:09:52.060 --> 00:09:53.590
not live is generally safe.

00:09:53.680 --> 00:09:56.770
I'll save that and quit.

00:09:56.830 --> 00:10:00.810
And if I relaunch Manifestation,
it should have a volume setting of 5.

00:10:02.530 --> 00:10:06.680
Armin mentioned the Property List Editor,
and you'll get this if you install

00:10:06.800 --> 00:10:08.940
the developer tools on your system.

00:10:08.940 --> 00:10:11.390
And the beauty of using
Property List Editor,

00:10:11.400 --> 00:10:13.940
which will open these by
default if you have it,

00:10:13.940 --> 00:10:17.460
and if you double-click on it,
is that you can walk the preference

00:10:17.470 --> 00:10:19.960
tree here using disclosure triangles.

00:10:19.960 --> 00:10:23.750
It's a little bit easier to
read than your text editor,

00:10:23.750 --> 00:10:26.950
and you can edit
preferences here as well.

00:10:27.540 --> 00:10:31.160
So we'll save that change, quit,
and relaunch manifestation,

00:10:31.160 --> 00:10:33.380
and sure enough,
the volume is set to six.

00:10:35.480 --> 00:10:36.970
Now,
for those of you who want to automate

00:10:37.060 --> 00:10:41.740
this or who prefer the command line,
there are tools for that as well,

00:10:41.740 --> 00:10:45.060
and the defaults command is
probably the most popular one.

00:10:49.200 --> 00:10:52.260
Let's do com.your, you know what,
I can never remember that,

00:10:52.260 --> 00:10:55.610
so let's just drag that guy in here.

00:10:55.620 --> 00:10:58.600
One of the things you're gonna
need to remember is generally

00:10:58.650 --> 00:11:02.380
the .p list is left off of your

00:11:03.940 --> 00:11:05.220
defaults read commands.

00:11:05.220 --> 00:11:07.350
So by hitting that now,
I can see what the

00:11:07.410 --> 00:11:10.130
setting is and I can...

00:11:13.770 --> 00:11:17.270
Play that with a write command.

00:11:17.350 --> 00:11:20.090
And let's set the volume to two.

00:11:21.800 --> 00:11:24.030
There we go.

00:11:24.060 --> 00:11:24.480
All right.

00:11:24.520 --> 00:11:27.560
And then finally,
Armin mentioned that for those of

00:11:27.560 --> 00:11:30.430
you who do prefer to use something
like TextEdit to edit these files,

00:11:30.440 --> 00:11:33.630
there is a PLUtil command to do that.

00:11:34.070 --> 00:11:42.150
And it will modify that preference file,
turn it into the old-style text format,

00:11:42.150 --> 00:11:42.150
and that will then allow you...

00:11:45.100 --> 00:12:10.400
[Transcript missing]

00:12:15.200 --> 00:12:17.450
So working locally works great
if you have a single Mac.

00:12:17.630 --> 00:12:20.820
So I have my single Mac,
I have my plist files on

00:12:20.820 --> 00:12:22.620
that for several things.

00:12:22.690 --> 00:12:26.400
But if I have more than one Mac,
this gets really tedious.

00:12:26.400 --> 00:12:29.630
I mean, as a last fix,
you could use something like

00:12:29.630 --> 00:12:33.240
Apple Remote Desktop to blast out a
default command to fix something quickly.

00:12:33.240 --> 00:12:38.740
But imagine you have lots and lots of
Macs and different flavors of Macs.

00:12:38.960 --> 00:12:44.940
You probably want to manage the mobile
Macs differently than the desktop Macs.

00:12:45.100 --> 00:12:48.230
And you probably have different
user groups in your organization

00:12:48.250 --> 00:12:50.200
that you want to manage differently.

00:12:50.200 --> 00:12:53.510
And then keeping track of the plist
files on the client is really,

00:12:53.570 --> 00:12:54.600
really tedious.

00:12:54.600 --> 00:12:59.540
So you need a central place
to store all of these files.

00:12:59.540 --> 00:13:02.890
And you probably want a way to store
different files for different groups

00:13:02.970 --> 00:13:04.680
of computers and groups of users.

00:13:04.680 --> 00:13:07.220
And in Mac OS X,
that place is the directory

00:13:07.220 --> 00:13:09.070
service in Open Directory.

00:13:09.080 --> 00:13:13.340
And because Open Directory is
this great flexible framework,

00:13:14.080 --> 00:13:17.240
you could store it in a non-Apple
directory service as well.

00:13:17.240 --> 00:13:19.190
I won't go into the detail for this.

00:13:19.200 --> 00:13:23.170
There are sessions that talk about
directory services and how to integrate.

00:13:23.180 --> 00:13:25.440
There's one on Friday.

00:13:25.440 --> 00:13:29.180
And also,
there's a lab that you can go to.

00:13:29.180 --> 00:13:33.770
And there are also great sessions
on ADC from previous years,

00:13:33.820 --> 00:13:36.730
developers conferences,
that you should look and

00:13:36.730 --> 00:13:38.070
learn about integrating.

00:13:40.520 --> 00:13:45.940
The tool you use to manipulate
the preferences in the directory

00:13:45.980 --> 00:13:48.140
service is Workgroup Manager.

00:13:49.650 --> 00:13:51.010
And we provide a UI to that.

00:13:51.140 --> 00:13:55.540
And you just saw plist editor to
work with the local plist files.

00:13:55.540 --> 00:13:58.880
And surprise, it looks very similar.

00:13:58.880 --> 00:13:59.980
I have the same anatomy.

00:13:59.980 --> 00:14:01.380
I have my key name.

00:14:01.380 --> 00:14:02.840
I have my type.

00:14:02.900 --> 00:14:04.340
I have my value.

00:14:04.340 --> 00:14:08.570
And I have something new,
which is the MCX domain,

00:14:08.570 --> 00:14:13.220
or the permanence of my
setting in the directory.

00:14:13.270 --> 00:14:16.500
Because if you manage it
centrally for a lot of users,

00:14:16.500 --> 00:14:20.210
you might want to do different
things than just setting a value.

00:14:20.730 --> 00:14:22.660
There are basically four
things that you can do.

00:14:22.660 --> 00:14:25.440
The first one is do nothing,
which is always good.

00:14:25.440 --> 00:14:29.980
So if you set the
MCX domain to none or never,

00:14:29.980 --> 00:14:32.720
it will be unmanaged or never set.

00:14:32.720 --> 00:14:36.420
The user has full control
over this particular value.

00:14:36.420 --> 00:14:39.810
You can set it to once,
which means if the value

00:14:39.810 --> 00:14:43.460
is unset on the client,
it will be preset with your

00:14:43.460 --> 00:14:47.200
value from the directory service,
rather than the default value

00:14:47.200 --> 00:14:50.830
that the application developer
thought was a smart thing.

00:14:50.860 --> 00:14:52.460
Best example is Safari.

00:14:52.460 --> 00:14:55.350
Apple, of course,
thinks the Apple start page

00:14:55.350 --> 00:14:57.030
is a good starting page.

00:14:57.030 --> 00:14:59.210
You might think differently.

00:14:59.210 --> 00:15:02.560
You want to set it to your
organization's homepage or start page,

00:15:02.610 --> 00:15:04.040
so you can preset this.

00:15:04.040 --> 00:15:09.390
As soon as the user changes this,
though... To his preferred start page,

00:15:10.060 --> 00:15:13.710
your setting gets overwritten.

00:15:14.040 --> 00:15:16.640
The third setting is often,
and this is not available

00:15:16.640 --> 00:15:17.880
in the graphical interface.

00:15:17.880 --> 00:15:21.360
This is only available in
the plist style details view.

00:15:21.360 --> 00:15:24.710
And this is...

00:15:25.200 --> 00:15:29.710
For use with applications that kind of
don't really work perfectly with this,

00:15:29.710 --> 00:15:32.310
some applications get really
unhappy if they can't change the

00:15:32.310 --> 00:15:33.840
default while they're running.

00:15:33.840 --> 00:15:38.130
Once means it's set every
time the user logs in.

00:15:38.140 --> 00:15:40.760
Every time the user logs in,
it gets reset to whatever you

00:15:40.760 --> 00:15:42.280
set in the directory service.

00:15:42.410 --> 00:15:43.910
Afterwards, the user can change it.

00:15:43.980 --> 00:15:50.560
Next time he logs in and out,
it gets reset to what you think is great.

00:15:50.610 --> 00:15:51.620
That means often.

00:15:51.620 --> 00:15:55.380
And then finally, there's always,
which this is set,

00:15:55.490 --> 00:15:56.460
the user can't change it.

00:15:56.610 --> 00:15:58.410
It's forced from the directory service.

00:15:58.460 --> 00:16:02.320
And if the application reacts
nicely to the information it can

00:16:02.320 --> 00:16:07.060
get from the directory service,
it should gray out the control in the UI.

00:16:07.060 --> 00:16:10.180
And you can see down here,
if you look in Workgroup Manager,

00:16:10.180 --> 00:16:13.090
you have the three choices, never once,
no always.

00:16:13.140 --> 00:16:15.520
And they go with three of these settings.

00:16:18.100 --> 00:16:22.550
Again, the preferences in the directory
service are stored as XML data

00:16:22.880 --> 00:16:29.280
in attributes in the MCX settings
attribute in the directory service.

00:16:29.280 --> 00:16:31.910
And you can go into the
inspector and look at that.

00:16:31.920 --> 00:16:35.070
Before Leopard,
we had to edit it in there,

00:16:35.070 --> 00:16:37.360
and that was really painful.

00:16:41.370 --> 00:16:45.780
We also added commands to DSCL,
which is the command line tool to

00:16:45.780 --> 00:16:47.190
interface with the directory service.

00:16:47.200 --> 00:16:50.560
And you can go in and read the raw XML.

00:16:50.560 --> 00:16:53.840
You can just go into the database,
look for a user,

00:16:53.840 --> 00:16:57.470
and read the MCX settings attribute,
and this will spew out tons of

00:16:57.550 --> 00:16:59.620
XML if you're managing this user.

00:16:59.620 --> 00:17:02.840
Again,
the raw XML really isn't that much fun,

00:17:02.840 --> 00:17:05.180
so we added some command line tools.

00:17:05.180 --> 00:17:09.780
There's an MCX read,
which works like the default command.

00:17:10.290 --> 00:17:12.960
So I have a search path.

00:17:13.060 --> 00:17:17.550
I have to point the command to an
object in the directory service.

00:17:17.560 --> 00:17:19.120
I have my application domain.

00:17:19.120 --> 00:17:21.180
I have my key name.

00:17:21.180 --> 00:17:24.900
And it will return me the MCX domain.

00:17:24.900 --> 00:17:27.180
In this case, this is managed always.

00:17:27.180 --> 00:17:29.630
And the value.

00:17:31.780 --> 00:17:35.110
And same as the defaults command,
I have an MCX set,

00:17:35.110 --> 00:17:38.030
which is the equivalent
to defaults write.

00:17:38.180 --> 00:17:41.300
I have to work directly on
the LDAP server in this case

00:17:41.710 --> 00:17:44.700
to get the right permission,
and usually I would have to authenticate.

00:17:44.750 --> 00:17:46.840
I left that out in the slides.

00:17:47.120 --> 00:17:51.400
And again, I have the application domain,
the key name, and the value.

00:17:51.490 --> 00:17:56.060
Note that setting the value
to zero or false is different

00:17:56.140 --> 00:17:59.020
than unsetting the management.

00:17:59.760 --> 00:18:04.160
And because you probably want
to unset the management a lot,

00:18:04.170 --> 00:18:06.980
depending on what you do,
that's something we use very frequently.

00:18:07.020 --> 00:18:10.420
There's a shortcut for that,
so you can use MCX delete

00:18:10.420 --> 00:18:12.300
to unset the management.

00:18:12.900 --> 00:18:16.400
One really great tool that
we've added is MCX Export.

00:18:16.600 --> 00:18:18.960
So if you're testing this,
and please test this,

00:18:18.960 --> 00:18:23.850
not on the live users,
these settings can get very complex.

00:18:23.990 --> 00:18:27.240
And once you've got it set up on
your test group and you want to

00:18:27.300 --> 00:18:31.990
migrate it to the production group,
that used to be a very painful process.

00:18:32.000 --> 00:18:37.490
You had to basically either go and
copy the raw XML or do it by hand.

00:18:37.500 --> 00:18:42.040
And there's now an MCX Export command
that will basically export

00:18:42.360 --> 00:18:44.000
the XML into a file.

00:18:44.000 --> 00:18:47.600
And then there's an equivalent
MCX Import that will take a plist

00:18:47.820 --> 00:18:50.690
file and import it onto another
object if you want to archive

00:18:50.710 --> 00:18:54.300
your settings and restore them.

00:18:54.300 --> 00:18:59.400
There's more MCX commands to DSCL,
and there's an MCX Help command

00:18:59.540 --> 00:19:01.000
to list all of them.

00:19:01.000 --> 00:19:05.470
For some reason, they didn't make it into
the man page in Leopard.

00:19:05.560 --> 00:19:07.400
All of this command line hacking
really makes you appreciate this.

00:19:07.400 --> 00:19:09.900
So you can see the graphical interface.

00:19:09.900 --> 00:19:14.330
We try to provide settings for
the most common tasks in the

00:19:14.330 --> 00:19:19.900
graphical interface so you don't
have to mess around with these.

00:19:19.900 --> 00:19:23.450
And again, I will ask Tony to show these.

00:19:30.010 --> 00:19:32.700
So if we want to manage these
preferences from a directory

00:19:32.710 --> 00:19:35.530
instead of on each local machine,
we can stuff them in a place

00:19:35.540 --> 00:19:37.070
where the user can't modify them.

00:19:37.080 --> 00:19:39.480
Those preference files are
in your local home folder,

00:19:39.480 --> 00:19:41.300
and you have read and
write access to those,

00:19:41.310 --> 00:19:42.150
and you can change them.

00:19:42.280 --> 00:19:45.750
But if you stuff them in a directory
using something like Open Directory or

00:19:45.750 --> 00:19:50.130
another directory service,
you can put them in a place,

00:19:50.190 --> 00:19:53.350
attach access controls to it,

00:19:53.820 --> 00:19:58.110
and prevent people from changing
settings that you want to enforce.

00:19:58.300 --> 00:20:02.000
So in this open directory setup,
let's go ahead and authenticate

00:20:02.000 --> 00:20:04.290
as the directory administrator.

00:20:09.920 --> 00:20:15.540
I've got a number of users,
as well as some groups,

00:20:15.540 --> 00:20:18.790
and the groups have
users attached to them.

00:20:20.050 --> 00:20:22.930
I've got computers,
and then I've also got lists of

00:20:22.930 --> 00:20:24.260
computers or computer groups.

00:20:24.260 --> 00:20:26.980
And I can go through and pick a user.

00:20:26.980 --> 00:20:30.460
Let's pick on Joel today
and click on Preferences.

00:20:30.460 --> 00:20:33.100
And at this point,
WorkRoot Manager has a bunch

00:20:33.160 --> 00:20:36.140
of preset graphical options for
things that you can control.

00:20:36.140 --> 00:20:39.310
I can, for example,
go into the dock and say I always want

00:20:39.310 --> 00:20:43.740
to control Joel's dock experience,
and I specifically do not

00:20:43.860 --> 00:20:47.020
want him to run dashboard,
or at least not have

00:20:47.020 --> 00:20:48.540
dashboard on the dock.

00:20:50.790 --> 00:20:54.040
So if we apply those settings,
a bit of XML,

00:20:54.040 --> 00:20:57.250
which is essentially identical to
what you saw in the preference file,

00:20:57.350 --> 00:20:59.740
got stuffed into a field
in his user record.

00:20:59.740 --> 00:21:04.030
And you can see that user record by
going into the Workgroup Manager's

00:21:04.030 --> 00:21:08.140
preferences and enabling this
All Records tab and Inspector.

00:21:08.140 --> 00:21:10.680
It's not on by default,
but when you turn it on,

00:21:10.690 --> 00:21:13.990
you'll get a warning,
and then you'll see this bullseye.

00:21:14.300 --> 00:21:16.590
And the bull's eye allows
you to go and do things like,

00:21:16.590 --> 00:21:19.850
I want to select my users,
and do you remember who I set?

00:21:19.890 --> 00:21:20.340
Was it Joel?

00:21:20.340 --> 00:21:25.000
So I can go into Joel's user record,
and here is where his short name is,

00:21:25.000 --> 00:21:30.210
and password, not password,
sort of short name, long name,

00:21:30.220 --> 00:21:32.060
his preferred shell,
all of the things that

00:21:32.110 --> 00:21:33.180
describe his user account.

00:21:33.180 --> 00:21:36.350
But in here also are the MCX settings,
this field right here.

00:21:36.350 --> 00:21:40.130
If you double-click on
it and do a select all...

00:21:40.930 --> 00:21:45.080
and copy that and paste
it into a text editor.

00:21:45.090 --> 00:21:48.540
You'll see it's, in essence,
a combination of all of these various

00:21:48.830 --> 00:21:54.210
preferences that would have ordinarily
been on that local file system.

00:21:54.420 --> 00:21:57.490
So we can go through and change
all of these things through

00:21:57.490 --> 00:22:01.480
this interface if you like,
or we can go, let's get Joel again,

00:22:01.480 --> 00:22:02.660
and preferences.

00:22:02.660 --> 00:22:05.880
If you look in the Details tab
in WorkRootManager,

00:22:05.880 --> 00:22:08.570
you'll see the various
settings that you've set,

00:22:08.630 --> 00:22:12.590
double-click on them, and as Armin said,
you've got more of a disclosure

00:22:12.600 --> 00:22:14.360
triangle option to set it often.

00:22:14.360 --> 00:22:17.260
Let's say you want this thing,
every time he logs in,

00:22:17.260 --> 00:22:19.250
to be set a certain way,
he can change it all he

00:22:19.250 --> 00:22:22.180
wants during his session,
but as soon as he logs back in,

00:22:22.260 --> 00:22:25.290
it's reset to the way you like it,
just stuff it in the often.

00:22:25.300 --> 00:22:27.500
We'll set it to always,
and I can go through and change

00:22:27.570 --> 00:22:28.780
a number of settings here.

00:22:28.780 --> 00:22:30.990
This is the dock setting.

00:22:33.230 --> 00:22:36.390
We're going to do some work
with John here as soon as

00:22:36.390 --> 00:22:38.790
I can see him alphabetically.

00:22:39.060 --> 00:22:41.380
Found him, not alphabetically.

00:22:41.480 --> 00:22:44.750
And let's make a couple of
changes to John's experience.

00:22:44.810 --> 00:22:46.570
Let's go to the doc.

00:22:46.810 --> 00:22:52.230
And if you know John like I know John,
you know that the only thing

00:22:52.230 --> 00:22:55.020
he really does is play games.

00:22:55.020 --> 00:22:55.020
And

00:22:55.330 --> 00:22:56.660
and do Unix, right?

00:22:56.660 --> 00:22:59.700
So let's let him have access
to the chess application,

00:22:59.700 --> 00:23:00.480
right?

00:23:00.600 --> 00:23:03.080
And again, when I say access,
I really mean just having it on the dock.

00:23:03.080 --> 00:23:05.040
For some people, that's the same thing.

00:23:05.040 --> 00:23:07.290
In John's case,

00:23:09.390 --> 00:23:09.940
All right, great.

00:23:09.980 --> 00:23:12.150
So we've got Terminal.

00:23:12.250 --> 00:23:13.180
We'll apply those settings.

00:23:13.200 --> 00:23:15.820
And if I log in as John,

00:23:21.910 --> 00:23:24.610
We should see, oh, I forgot one thing.

00:23:24.620 --> 00:23:26.110
Did you guys see what I forgot?

00:23:26.120 --> 00:23:30.520
Notice that Chess and Terminal
are in fact on the dock here,

00:23:30.570 --> 00:23:33.510
but so are all of the other things that
John has been goofing around doing.

00:23:33.550 --> 00:23:36.810
So let's get back into Workgroup Manager.

00:23:41.290 --> 00:23:45.870
And uncheck this box that says let
the user have their own things too,

00:23:45.950 --> 00:23:46.280
right?

00:23:46.280 --> 00:23:49.260
So you're just going to
take away that capability.

00:23:49.400 --> 00:23:51.170
So again,
we can go through in Preferences

00:23:51.200 --> 00:23:53.900
and Details and see all those
settings and double-click them here,

00:23:53.900 --> 00:23:56.540
and we can edit them in this
user interface if we like.

00:23:58.160 --> 00:24:01.920
Now, Apple has provided a number
of these interfaces for you,

00:24:01.930 --> 00:24:05.420
but there are applications that you may
want to manage that are not in here,

00:24:05.420 --> 00:24:06.460
and you can import those.

00:24:06.460 --> 00:24:09.600
So by clicking on the Details tab
here and clicking Plus,

00:24:09.600 --> 00:24:14.940
I can go through to my, in this case,
my home folder, under what library,

00:24:14.940 --> 00:24:15.960
right?

00:24:15.960 --> 00:24:17.910
And then Preferences.

00:24:17.920 --> 00:24:22.650
And my application was called what?

00:24:26.000 --> 00:24:31.000
dot your company, right,
dot manifestation dot plist.

00:24:31.000 --> 00:24:35.790
Now I'm gonna import this into the
always section of John's user record.

00:24:36.490 --> 00:24:39.460
So now I can double-click on
this setting and I can say,

00:24:39.480 --> 00:24:42.240
in John's case,
I for sure want to have that

00:24:42.300 --> 00:24:45.730
serial number preset for him,
but I also want to set the volume.

00:24:45.730 --> 00:24:49.210
Let's do that to 10.

00:24:52.300 --> 00:24:53.090
Now, I can't go to 11.

00:24:53.100 --> 00:24:53.690
That's too loud.

00:24:53.700 --> 00:24:57.400
Right?

00:24:57.400 --> 00:25:04.730
So if we set that to 10 and
go log in as John again,

00:25:04.740 --> 00:25:09.090
you know, I can already tell John's going
to have trouble with this because

00:25:09.090 --> 00:25:11.050
I didn't put it in his doc,
so we're going to have to find it.

00:25:11.060 --> 00:25:12.400
It's in the Applications folder, right?

00:25:12.400 --> 00:25:16.470
So if I launch Manifestation,
and let's try and drag it to the doc.

00:25:16.560 --> 00:25:17.860
No, it's not going to let me.

00:25:17.900 --> 00:25:18.410
All right, fine.

00:25:18.500 --> 00:25:21.920
But it will let me launch it,
and sure enough, it did set it to 10.

00:25:22.200 --> 00:25:27.760
No, as you suggested, 11 is one louder,
so let's take it all the way up.

00:25:31.160 --> 00:25:34.190
And then, let's relaunch it.

00:25:34.240 --> 00:25:38.800
Oh, wait a second, no, it's not safe,
right?

00:25:38.800 --> 00:25:41.540
11 is not safe, it's one louder,
it's just too loud.

00:25:41.540 --> 00:25:44.920
All right, so John's been forbidden
from cranking the volume up.

00:25:44.920 --> 00:25:47.050
And what's nice about this is
this is an application that

00:25:47.060 --> 00:25:49.860
wasn't designed by Apple,
no UI was provided by Apple,

00:25:49.930 --> 00:25:54.880
but you were able to import those
preferences and provide those.

00:25:54.880 --> 00:25:59.190
And remember that you may use this
to control someone's behavior,

00:25:59.190 --> 00:26:02.260
but you may also use it just to
provide a base to start from.

00:26:02.290 --> 00:26:05.320
So you may use this to make sure that
everyone's serial number is preset and

00:26:05.320 --> 00:26:10.310
the volume is where you wanna start from,
but put it in the once setting.

00:26:10.400 --> 00:26:12.310
So they get that to begin
with and then do let them

00:26:12.310 --> 00:26:13.700
change it to suit their tastes.

00:26:16.970 --> 00:26:19.340
All right, so that's the UI.

00:26:19.340 --> 00:26:24.450
The command line options
are nice as well.

00:26:26.440 --> 00:26:34.710
Let's take a look at, as Armin said,
there's a DSCL MCX read option.

00:26:36.510 --> 00:26:39.560
So let's take a look and see what
John's preferences look like.

00:26:39.560 --> 00:26:40.720
I'm gonna use DSCL.

00:26:40.800 --> 00:26:43.260
I'm going to point it at
my Open Directory master,

00:26:43.260 --> 00:26:45.480
which happens to be
this system right now.

00:26:45.690 --> 00:26:47.340
I'm gonna tell it to use MCX read.

00:26:47.340 --> 00:26:49.270
I have to tell it which
record I wanna read.

00:26:49.320 --> 00:26:52.240
In this case, it's John's user record.

00:26:52.240 --> 00:26:55.650
And then I want the particular
application domain that I want to see.

00:26:55.660 --> 00:26:57.590
So if I hit that, you'll see,
sure enough,

00:26:57.680 --> 00:27:00.360
he's set to 11 and the value is 1.

00:27:00.370 --> 00:27:03.440
And there's an equivalent set to that.

00:27:03.530 --> 00:27:05.580
So let's do that.

00:27:06.980 --> 00:27:08.960
And here we're going to
say check for updates.

00:27:08.960 --> 00:27:11.450
All right,
did I have it set to zero before?

00:27:11.460 --> 00:27:14.540
Yeah, so that application is always gonna
check for updates on the Internet.

00:27:14.540 --> 00:27:16.750
I'm gonna set it to zero.

00:27:17.540 --> 00:27:20.290
Put in my directory
administrator password,

00:27:20.310 --> 00:27:23.990
and then pop open Workgroup Manager.

00:27:26.100 --> 00:27:28.440
And if we go back into
the inspector here,

00:27:28.440 --> 00:27:31.420
you should see that's
now been set to false.

00:27:31.490 --> 00:27:33.220
So any way you like it,
whether you script it,

00:27:33.270 --> 00:27:35.440
whether you go in through the GUI,
it does the same thing.

00:27:35.440 --> 00:27:36.660
It stuffs those in the user records.

00:27:36.680 --> 00:27:39.080
You can do the same thing with groups.

00:27:39.180 --> 00:27:41.690
Stuff those in group records,
stuff them in computer records.

00:27:41.700 --> 00:27:43.650
They tend to overlap at that point.

00:27:43.660 --> 00:27:46.750
You can, in some cases,
run into conflicts.

00:27:46.790 --> 00:27:48.530
I think Armin's going to talk
about that more in a little bit.

00:27:48.820 --> 00:27:52.770
And then one other set of tools
that you want to be aware of is

00:27:52.890 --> 00:27:55.340
the MCX import and export set.

00:27:55.340 --> 00:27:58.610
So let's see if we can--

00:27:58.700 --> 00:28:01.070
dump John's preferences to a text file.

00:28:01.300 --> 00:28:04.100
And I think Armin showed you
the syntax for this as well.

00:28:04.100 --> 00:28:06.780
As mcx export,
we're gonna do an output file,

00:28:06.780 --> 00:28:10.840
and I'm gonna put that on my desktop,
and I'm gonna call it johnsprefs.plist.

00:28:10.990 --> 00:28:15.750
And I specifically want just the
settings for this one application.

00:28:16.200 --> 00:28:18.120
So now I have a plist
file on the desktop.

00:28:18.220 --> 00:28:20.920
When I double-click it,
it should look familiar by now.

00:28:20.920 --> 00:28:24.090
All those same settings.

00:28:25.710 --> 00:28:29.600
So I now have a local copy of that,
and the beauty of using MCX import

00:28:29.600 --> 00:28:34.750
to do that is I can then reverse
that and say I want to...

00:28:38.090 --> 00:28:45.000
Let's import those settings
to Joel's record from the file

00:28:45.000 --> 00:28:47.340
that I've saved on my desktop.

00:28:55.200 --> 00:28:59.220
So if we go into Joel's record now,
we should see the same

00:28:59.220 --> 00:29:04.600
settings set now for Joel.

00:29:04.600 --> 00:29:08.200
So if you have gone through
and established a large number

00:29:08.200 --> 00:29:10.780
of managed client settings
on an Open Directory master,

00:29:10.780 --> 00:29:12.920
and you want to migrate
those to another server,

00:29:12.990 --> 00:29:16.080
for example, or back them up,
you can use MCX import and export

00:29:16.080 --> 00:29:18.490
to dump all that stuff out,
re-import it.

00:29:18.520 --> 00:29:21.290
Or if you've attached, for example,
let's say you picked a lab and you said,

00:29:21.300 --> 00:29:23.880
all of the computers in this
room can print to these printers,

00:29:24.120 --> 00:29:26.020
and you want to do it
again for another lab,

00:29:26.020 --> 00:29:27.860
you don't have to go through
and check all those boxes,

00:29:27.860 --> 00:29:29.930
just dump it and re-import it.

00:29:30.040 --> 00:29:32.340
And I think that's it for now.

00:29:32.340 --> 00:29:32.840
Back to Armin.

00:29:41.390 --> 00:29:44.110
So Tony has already mentioned
that there's many places,

00:29:44.310 --> 00:29:48.580
many objects in the directory that
you can store MCX settings in.

00:29:48.600 --> 00:29:50.350
You can store it in user groups.

00:29:50.460 --> 00:29:54.280
You can store it in computer groups,
which is a new feature in Leopard.

00:29:54.280 --> 00:29:59.210
You can store it for individual
computers and for individual users.

00:29:59.280 --> 00:30:02.480
We demo with individual users
because it's nice to make fun.

00:30:02.480 --> 00:30:07.210
You probably don't want to go to the
individual records down too much.

00:30:07.260 --> 00:30:10.560
You probably will be working most of
the time on the group level for the

00:30:10.560 --> 00:30:12.640
user groups and the computer groups.

00:30:12.650 --> 00:30:17.890
Another new feature in Leopard is that
if a user is a member of multiple groups,

00:30:17.970 --> 00:30:21.750
and I guess most are,
it will actually take the settings

00:30:21.750 --> 00:30:26.520
from multiple groups and try to
merge them in a sensible way.

00:30:26.520 --> 00:30:29.740
Of course, once you start managing
on different levels,

00:30:29.740 --> 00:30:31.430
you will run into conflicts.

00:30:31.600 --> 00:30:34.230
And there's a hierarchy to these.

00:30:34.240 --> 00:30:39.850
So in general, the hierarchy goes from
bottom to top in this case.

00:30:39.860 --> 00:30:44.430
So computer groups supersede user groups.

00:30:44.460 --> 00:30:47.260
Individual computers
supersede computer groups.

00:30:47.260 --> 00:30:50.840
And the user settings will
supersede everything else that will

00:30:50.840 --> 00:30:52.800
give you the complete priority.

00:30:52.880 --> 00:30:56.080
However,
it's even more complicated than that.

00:30:58.210 --> 00:31:01.100
We can nest groups as well,
a feature we added in Tiger,

00:31:01.100 --> 00:31:01.690
which is great.

00:31:01.790 --> 00:31:02.780
It's really, really useful.

00:31:02.780 --> 00:31:06.390
That makes things so
much more complicated.

00:31:06.440 --> 00:31:09.510
And on top of that,
you can nest computer groups.

00:31:09.620 --> 00:31:15.240
Again, a very, very powerful tool,
but it just makes the conflict settings.

00:31:16.700 --> 00:31:18.220
So much more confusing.

00:31:18.380 --> 00:31:24.200
Within groups or computer groups,
same thing, there's another hierarchy.

00:31:24.200 --> 00:31:28.280
And the hierarchy is that the children
will supersede the parent settings,

00:31:28.280 --> 00:31:30.920
and they will supersede the
grandparents if you have any.

00:31:30.970 --> 00:31:34.350
If the groups are on the same level,
we will actually choose the

00:31:34.400 --> 00:31:36.480
alphabetical first group first.

00:31:36.480 --> 00:31:37.780
We had to do some choice.

00:31:39.770 --> 00:31:44.540
If anything else fails, denies,
will wins, over-allows.

00:31:44.540 --> 00:31:48.080
And all of this is different
for those settings which

00:31:48.080 --> 00:31:50.980
aren't check marks or values,
but which are lists,

00:31:50.980 --> 00:31:52.430
like the doc settings.

00:31:52.430 --> 00:31:55.300
Those will be concatenated and merged.

00:31:55.300 --> 00:31:58.820
So the one thing you have to
take out of this is don't mess

00:31:59.030 --> 00:32:00.900
around too much with this.

00:32:00.900 --> 00:32:06.680
The rules are there, but the chances of
messing up are really big.

00:32:07.010 --> 00:32:10.300
So in case of, let's say,
the doc settings, if I have different doc

00:32:10.300 --> 00:32:13.410
settings for different groups,
say the chess club gets the chess

00:32:13.410 --> 00:32:17.590
application and the designers
get Photoshop and Illustrator,

00:32:17.590 --> 00:32:21.520
and a user is a member of both,
they will be merged,

00:32:21.520 --> 00:32:25.130
which is what you want to be,
what you want to expect.

00:32:25.260 --> 00:32:29.340
And it will actually take all of
the icons from all of the levels

00:32:29.340 --> 00:32:33.710
where I can manage and merge them
into one preset combined doc.

00:32:36.750 --> 00:32:37.860
Yeah, you want to debug this.

00:32:37.970 --> 00:32:39.800
You will have to debug
this once you've set it up.

00:32:39.890 --> 00:32:42.880
And we actually provide a bunch of
tools that will allow you to debug this.

00:32:42.880 --> 00:32:45.570
One of them, surprisingly,
is System Profiler.

00:32:45.570 --> 00:32:47.810
In System Profiler,
we have a new setting,

00:32:47.810 --> 00:32:51.380
which is called Manage Client,
and you can actually go in there.

00:32:51.380 --> 00:32:52.700
It's a little hard to see here.

00:32:53.360 --> 00:32:56.860
It will show you all the
composited MCX settings out

00:32:56.860 --> 00:33:01.090
of the directory service,
and it will show you the source from

00:33:01.090 --> 00:33:04.140
which object did this setting come from.

00:33:04.200 --> 00:33:11.110
If you're expecting that my
account gets an auto-hide value

00:33:11.570 --> 00:33:16.220
of false from the group object,
but you forgot that you once set

00:33:16.260 --> 00:33:20.560
it on the individual user object,
you can actually see here where

00:33:20.560 --> 00:33:22.550
the information comes from.

00:33:24.050 --> 00:33:28.200
There's also a command line tool,
MCX Query, which basically does the same.

00:33:28.200 --> 00:33:30.980
MCX Query has one big advantage, though.

00:33:30.980 --> 00:33:33.640
It doesn't have to run for the
current user or the current

00:33:33.640 --> 00:33:35.170
group or the current machine.

00:33:35.180 --> 00:33:40.560
You can enter any object or any
combination of objects in the directory

00:33:40.560 --> 00:33:46.480
service tree and have the compositor
run and give you the output without

00:33:46.890 --> 00:33:51.080
actually having to log in as the
user to see how that's working.

00:33:51.520 --> 00:33:54.460
And again,
by now you know how the output works,

00:33:54.560 --> 00:33:56.420
and it will also show
you not only the value,

00:33:56.420 --> 00:33:59.710
but where it comes from,
which object it comes from.

00:33:59.750 --> 00:34:01.410
And again, Tony will show that.

00:34:07.920 --> 00:34:09.990
All right,
so if we're in Workgroup Manager,

00:34:10.050 --> 00:34:13.110
you'll see that there
are a number of settings.

00:34:14.240 --> 00:34:16.750
That are kind of either-or settings,
and you'll see some

00:34:16.750 --> 00:34:18.020
settings that are additive.

00:34:18.080 --> 00:34:19.400
Let's start with some additive ones.

00:34:19.400 --> 00:34:22.140
So let's, for example,
go to the groups and say,

00:34:22.170 --> 00:34:25.880
all engineers are going to
have the following preferences.

00:34:26.030 --> 00:34:30.180
Let's, again, deal with the doc,
and we'll always manage

00:34:30.240 --> 00:34:33.630
their preferences,
and we'll say they're gonna get,

00:34:33.780 --> 00:34:34.640
what should the engineers get?

00:34:34.660 --> 00:34:36.710
Terminal?

00:34:36.780 --> 00:34:42.190
That's in the wrong place, all right,
what else?

00:34:44.130 --> 00:34:46.700
Terminal and Console, okay, yeah, good.

00:34:46.720 --> 00:34:48.480
Those two are perfect.

00:34:48.480 --> 00:34:51.020
If we apply these settings,
anyone who's in the engineers

00:34:51.110 --> 00:34:54.080
group should get Terminal
and Console on their dock.

00:34:54.080 --> 00:34:57.020
And to make things clear,
I'm gonna uncheck this,

00:34:57.020 --> 00:35:00.500
allow them to have their
own thing checkbox,

00:35:00.500 --> 00:35:02.960
just so you can see
these things in action.

00:35:02.960 --> 00:35:07.450
If we also go into the field employees,
for example, and manage them,

00:35:09.810 --> 00:35:12.080
What should field employees have?

00:35:12.100 --> 00:35:14.140
Careful now, what's that?

00:35:14.180 --> 00:35:14.980
Mail?

00:35:14.980 --> 00:35:15.620
Makes sense.

00:35:15.620 --> 00:35:17.780
And chess, right?

00:35:17.780 --> 00:35:19.800
'Cause we're working from home,
so you really don't

00:35:19.800 --> 00:35:21.190
know what we're doing.

00:35:21.660 --> 00:35:22.700
Right.

00:35:22.740 --> 00:35:26.380
And at this point,
if you're in the field employees group,

00:35:26.420 --> 00:35:28.360
you should just have
those two applications.

00:35:28.430 --> 00:35:33.110
So let's take a look
and see what John has.

00:35:36.460 --> 00:35:40.310
Now remember that this is additive,
so he's got the things that I set

00:35:40.310 --> 00:35:43.900
on his user record and the things
I set for his group record.

00:35:43.900 --> 00:35:47.350
And if we managed his computer in a pool,
he'd also have those as well.

00:35:47.360 --> 00:35:48.730
So let's log out.

00:35:58.310 --> 00:36:02.440
And if we go into John's record now,
sorry, the groups, and take a look,

00:36:02.570 --> 00:36:06.650
there is an Employees group,
and the Employees group consists

00:36:06.650 --> 00:36:09.070
of engineers and field employees.

00:36:09.080 --> 00:36:12.450
Let's go to the engineers,
and let's add John to

00:36:12.450 --> 00:36:14.140
the engineers group.

00:36:20.790 --> 00:36:24.370
And take my word for it,
if we log in as John, you're going to see

00:36:24.540 --> 00:36:26.820
engineers and field settings.

00:36:26.820 --> 00:36:30.090
What we want to do, though,
at this point is let's show the

00:36:30.090 --> 00:36:34.490
difference between additive stuff,
like lists, and Boolean things.

00:36:34.520 --> 00:36:39.010
So if we go to Preferences for
Engineers and go to Finder Settings,

00:36:39.010 --> 00:36:43.460
I can say under Commands,
I want to always manage these commands,

00:36:43.510 --> 00:36:48.290
and I want to make sure that
engineers cannot restart or shut down.

00:36:50.340 --> 00:36:52.440
That's cheating.

00:36:52.440 --> 00:36:55.380
And we'll go to the field employees.

00:36:56.260 --> 00:36:58.490
and we'll allow them to
restart and shut down.

00:36:58.680 --> 00:37:02.940
Now based on, this is the pop quiz,
based on what Armin said,

00:37:02.940 --> 00:37:07.360
what would you expect John's account
to have on a Boolean conflict

00:37:07.460 --> 00:37:09.760
like this between two groups?

00:37:10.770 --> 00:37:12.180
No restart, shutdown, raise your hands.

00:37:12.200 --> 00:37:14.640
Restart and shutdowns, raise your hands.

00:37:14.660 --> 00:37:16.640
Okay, we'll see what happens.

00:37:29.370 --> 00:37:31.120
So is it what you expect?

00:37:31.140 --> 00:37:31.960
Yeah.

00:37:31.960 --> 00:37:34.300
But we can still log off.

00:37:34.300 --> 00:37:38.000
So let's do that and take
a look at some tools.

00:37:38.000 --> 00:37:39.890
Actually,
let's go back in there because Armin

00:37:39.890 --> 00:37:44.730
made a very astute observation,
which is the Apple System Profiler

00:37:44.810 --> 00:37:47.680
can help you figure out why he
got the settings that he got.

00:37:47.780 --> 00:37:51.280
If we go into About This Mac and
choose More Info,

00:37:51.320 --> 00:37:53.390
and Apple System Profiler will launch.

00:37:53.630 --> 00:37:55.440
There's the Manage Client Setting.

00:37:55.490 --> 00:37:57.750
And if we go down to,
this one actually goes into

00:37:57.760 --> 00:37:59.660
the Login Window Settings,
believe it or not.

00:37:59.680 --> 00:38:03.780
It'll actually tell you where
you got the setting that you got.

00:38:07.450 --> 00:38:11.430
But that will only show you the settings
for that user while they're logged in,

00:38:11.430 --> 00:38:14.310
and you probably don't have the time.

00:38:14.650 --> 00:38:16.250
to do that for each user as
you're troubleshooting it.

00:38:16.310 --> 00:38:20.870
So there's a command line tool
called MCX Query that can help you.

00:38:24.100 --> 00:38:25.820
And let's take a look and
see what that looks like.

00:38:26.000 --> 00:38:30.340
Let's dump John's settings.

00:38:30.340 --> 00:38:33.900
I can specify from the command
line which user and which group

00:38:33.950 --> 00:38:35.870
I want and output that to a file.

00:38:35.880 --> 00:38:40.120
This one's gonna go on the desktop and
it's gonna be called John D Management.

00:38:40.120 --> 00:38:42.110
I'll throw that away.

00:38:42.390 --> 00:38:45.220
And this is actually more
of a text file style,

00:38:45.220 --> 00:38:47.250
although you have some options
to how this data is presented.

00:38:47.300 --> 00:38:52.530
Let's do the same thing
for a user called Dave O.,

00:39:00.900 --> 00:39:03.240
He has nothing because that
particular group has no settings.

00:39:03.240 --> 00:39:14.530
So I'm gonna cheat and go into,
Engineers, no, let's go into that user.

00:39:17.850 --> 00:39:19.150
Okay, what can we do to Dave today?

00:39:19.160 --> 00:39:22.760
I know.

00:39:26.470 --> 00:39:27.490
No, no, no, this is even better.

00:39:27.500 --> 00:39:32.260
All the way down and
position it on the right.

00:39:32.330 --> 00:39:33.440
There we go.

00:39:33.440 --> 00:39:35.380
All right.

00:39:38.240 --> 00:39:40.080
So now we've got Dave's settings.

00:39:40.350 --> 00:39:43.980
There's a text file showing
those values that I just set.

00:39:44.250 --> 00:39:48.370
And Armin had a handy
tip for comparing these.

00:39:48.440 --> 00:39:51.900
I mean, as you're comparing these text
files and setting lots of settings,

00:39:51.900 --> 00:39:54.730
it's going to be difficult
to see how they line up.

00:39:55.010 --> 00:39:58.640
There is a developer tool called
File Merge that developers can

00:39:58.640 --> 00:40:00.680
use to see differences in code.

00:40:00.680 --> 00:40:02.560
You can actually route these.

00:40:02.760 --> 00:40:05.280
See if I can find my...

00:40:06.500 --> 00:40:09.070
You guys see it?

00:40:09.130 --> 00:40:10.580
Second one?

00:40:10.810 --> 00:40:11.560
From the bottom.

00:40:11.560 --> 00:40:12.440
From the bottom, that one, thanks.

00:40:12.580 --> 00:40:17.090
So this one is going to take two files,
and the OpenDiff command line tool

00:40:17.100 --> 00:40:20.880
will take two files and send them
to the graphical file merge tool.

00:40:20.880 --> 00:40:23.010
So if I do that,

00:40:26.090 --> 00:40:28.410
You get, I mean, it's sort of cheating,
but you get kind of a

00:40:28.410 --> 00:40:30.480
graphical display about the
differences between these files,

00:40:30.480 --> 00:40:33.740
and differences are highlighted in blue,
so you can see things like, you know,

00:40:33.870 --> 00:40:35.950
and you have to be able
to decode these settings,

00:40:35.960 --> 00:40:37.970
obviously,
but sort of a handy way to view the

00:40:38.270 --> 00:40:39.840
differences between those files.

00:40:39.840 --> 00:40:43.380
There we go.

00:40:43.560 --> 00:40:43.980
Back to Armin.

00:40:53.060 --> 00:40:55.150
For most users,
removing something from the

00:40:55.150 --> 00:40:58.120
dock is good enough to restrict
them from launching it.

00:40:58.400 --> 00:41:02.640
However, we do have a more powerful way
of doing that in Leopard now.

00:41:02.640 --> 00:41:05.680
And basically,
application launch restrictions let

00:41:05.900 --> 00:41:07.820
you decide who gets to launch what.

00:41:07.880 --> 00:41:14.190
And to really enforce that,
we now digitally sign applications.

00:41:14.210 --> 00:41:17.550
Most Apple applications that
are installed in Leopard

00:41:17.560 --> 00:41:19.510
already have the signature.

00:41:21.350 --> 00:41:24.580
But if you have a third-party application
that you would like to control,

00:41:24.580 --> 00:41:26.060
and you just drag it
into Workgroup Manager,

00:41:26.060 --> 00:41:31.220
Workgroup Manager will actually
prompt you to add that signature.

00:41:31.220 --> 00:41:33.780
And it will add a file
called Code Resources,

00:41:33.780 --> 00:41:38.360
which is a text list of all the files in
the application's bundle with a digital

00:41:38.360 --> 00:41:43.920
signature for each of those files,
to the bundle of that application.

00:41:43.920 --> 00:41:46.740
You're physically changing the
application bundle on the disk.

00:41:48.070 --> 00:41:52.760
That means, if you want this to take
effect on all of your clients,

00:41:52.760 --> 00:41:56.310
you need to distribute
this Code Resources file,

00:41:56.310 --> 00:42:00.460
this digital signature,
somehow to all of your clients.

00:42:00.460 --> 00:42:03.280
If you want to use application
launch restrictions,

00:42:03.280 --> 00:42:07.150
you have to think about this very,
very early in your rollout process.

00:42:07.230 --> 00:42:10.530
Otherwise, it will be just a pain
to take care of it later.

00:42:10.540 --> 00:42:13.350
You probably want to do
this on the machine that you

00:42:13.420 --> 00:42:15.170
build your final image from.

00:42:17.100 --> 00:42:19.920
If anything in the
application bundle changes,

00:42:19.920 --> 00:42:24.190
the digital signature of that file
won't match the digital signature in

00:42:24.190 --> 00:42:28.380
the list of all the digital signatures,
and the launch permission for

00:42:28.380 --> 00:42:30.700
that application will be revoked.

00:42:30.820 --> 00:42:34.190
The user will get an information,
you can't launch this application,

00:42:34.190 --> 00:42:35.330
it doesn't match the signature.

00:42:35.420 --> 00:42:37.360
And they will probably call you.

00:42:37.890 --> 00:42:42.130
So if you roll out updates,
you need to re-sign the application

00:42:42.210 --> 00:42:46.460
and make sure that all of the updates
that reach the customer or the

00:42:46.460 --> 00:42:50.780
user will get the same signature,
the one that the directory

00:42:50.780 --> 00:42:51.670
services knows of.

00:42:55.700 --> 00:42:57.800
Because this is a very
complicated process,

00:42:57.840 --> 00:43:00.480
it's very secure,
but also a very complicated process,

00:43:00.480 --> 00:43:03.180
we also added a different way
of managing launch restrictions,

00:43:03.180 --> 00:43:05.480
and that is by folder.

00:43:05.480 --> 00:43:08.540
So you could generally say,
I've got my image locked down,

00:43:08.540 --> 00:43:11.340
I have control over it,
anything that's in the

00:43:11.340 --> 00:43:14.230
applications folder,
the user can launch,

00:43:14.230 --> 00:43:16.420
which is our example down here.

00:43:16.420 --> 00:43:18.320
But then you probably
think about it and say,

00:43:18.320 --> 00:43:21.340
wait, there's some stuff in application
utilities that I really don't

00:43:21.340 --> 00:43:22.550
want the user to launch.

00:43:23.320 --> 00:43:26.050
So we also have a blacklist
or a disallow list,

00:43:26.050 --> 00:43:29.070
and you can say, well,
applications folder is fine,

00:43:29.080 --> 00:43:31.970
but applications utility isn't,
application server isn't.

00:43:33.310 --> 00:43:36.790
And since most applications are folders,
you can actually add individual

00:43:36.790 --> 00:43:39.960
applications into here,
which works really great.

00:43:39.960 --> 00:43:42.930
And as all lists,
you can manage this on different

00:43:42.970 --> 00:43:46.320
levels and different groups,
and these will be merged.

00:43:46.510 --> 00:43:50.280
If you set one disallow folder,

00:43:51.050 --> 00:43:54.840
You have to set an allow folder,
otherwise the user won't

00:43:54.840 --> 00:43:56.000
be able to launch anything.

00:43:56.000 --> 00:43:58.140
As soon as you set anything
in the launch restrictions,

00:43:58.140 --> 00:44:02.010
only those applications
that you explicitly allow

00:44:02.010 --> 00:44:04.170
will be allowed to launch.

00:44:04.180 --> 00:44:08.940
If you use a mix of permissions
by folder and digital signatures,

00:44:08.940 --> 00:44:13.840
applications that are signed and
permitted to the user will be able to

00:44:13.980 --> 00:44:17.100
launch no matter where they are stored.

00:44:20.940 --> 00:44:24.000
There's some applications
that don't behave quite well.

00:44:24.000 --> 00:44:27.910
I will use Firefox as an example,
though recent updates of Firefox have

00:44:27.910 --> 00:44:31.900
been working much better,
and I have big hopes for Firefox 3.

00:44:31.900 --> 00:44:37.320
But they will actually modify the
application bundle while they're running.

00:44:37.320 --> 00:44:38.390
So,

00:44:38.830 --> 00:44:41.440
And that will obviously invalidate
their signature if you sign them.

00:44:41.480 --> 00:44:44.810
And that means you can't
launch or use any signatures.

00:44:47.940 --> 00:44:51.570
The way around this is to set
the allow folder to the root

00:44:51.570 --> 00:44:54.430
of the application bundle,
and then you also have to set the

00:44:54.430 --> 00:44:58.450
privileges correctly so the user
can actually modify the files that

00:44:58.470 --> 00:45:02.740
he needs to modify so that the
application can successfully run.

00:45:02.740 --> 00:45:06.090
But this opens a security hole,
because if the user is really,

00:45:06.090 --> 00:45:09.420
really crafty, believe me,
I work for K-12 educations,

00:45:09.420 --> 00:45:15.200
the students are really, really crafty,
they will copy a third-party application,

00:45:15.290 --> 00:45:17.530
an unallowed application.

00:45:17.540 --> 00:45:21.090
into that particular folder
where they have write permissions

00:45:21.200 --> 00:45:22.780
and launch it from there.

00:45:22.840 --> 00:45:28.760
So if you set write permissions to any
subfolder in an allowed launch folder,

00:45:28.760 --> 00:45:33.720
you will have to set that
path to a disallow folder.

00:45:35.520 --> 00:45:37.160
So beware of traps there.

00:45:37.250 --> 00:45:40.240
If you want to use this to
really lock down the experience,

00:45:40.240 --> 00:45:42.620
there's some traps.

00:45:43.880 --> 00:45:48.060
A really useful tool once you've
signed the bundles and you have to

00:45:48.060 --> 00:45:51.710
redistribute them is PackageMaker,
because it can basically watch what

00:45:51.750 --> 00:45:54.860
changes and build a package of the
changes and distribute that out.

00:45:54.980 --> 00:45:58.700
And Apple Remote Desktop,
if you want to do it after the fact,

00:45:58.700 --> 00:46:02.250
or you do it on your original image,
and then you distribute

00:46:02.710 --> 00:46:04.130
those out with your image.

00:46:07.460 --> 00:46:11.280
Another great tool in this
area are preference manifests.

00:46:11.340 --> 00:46:13.500
So we saw that the
graphical interface is nice.

00:46:13.620 --> 00:46:15.340
That's something that's
comfortable to use.

00:46:15.400 --> 00:46:18.970
But you will get to the limits
of the graphical interface very,

00:46:19.030 --> 00:46:20.220
very quickly.

00:46:20.250 --> 00:46:22.900
Editing XML-- no,
we don't want to do that.

00:46:22.930 --> 00:46:26.910
Really,
a lot of problems can arise from there.

00:46:27.360 --> 00:46:30.980
The detail view is a big help,
but you still have to manage

00:46:30.980 --> 00:46:32.980
a lot of stuff individually.

00:46:32.980 --> 00:46:34.690
And basically, you have to guess.

00:46:34.930 --> 00:46:38.100
In unsupported applications,
you have to guess what

00:46:38.100 --> 00:46:39.700
this setting means.

00:46:39.750 --> 00:46:44.770
Most keys are a little explanatory,
but sometimes you have to

00:46:44.830 --> 00:46:47.930
set up combinations of keys
to make things really work.

00:46:48.130 --> 00:46:49.710
Just changing one setting doesn't help.

00:46:49.800 --> 00:46:53.600
You have to change a group of
settings to the right things.

00:46:54.290 --> 00:46:56.310
And this is where preference
manifests comes in.

00:46:56.320 --> 00:46:58.640
Preference manifests are
provided by the developer,

00:46:58.720 --> 00:47:02.220
they're part of the application,
and they are basically a list

00:47:02.230 --> 00:47:05.510
explaining the preference settings.

00:47:05.520 --> 00:47:09.220
And if a preference manifest
is present in an application,

00:47:09.220 --> 00:47:12.960
Workgroup Manager will pick those up,
and it will give you

00:47:12.960 --> 00:47:16.880
a list of preferences,
as shown in this case,

00:47:16.880 --> 00:47:21.500
and tell you what they do,
and what values make sense.

00:47:23.360 --> 00:47:26.900
And again,
I'd ask Tony to actually show that.

00:47:32.700 --> 00:47:33.200
Great.

00:47:33.200 --> 00:47:36.290
So the idea here is to get
developers to include preference

00:47:36.290 --> 00:47:37.690
manifests with their application.

00:47:37.690 --> 00:47:42.200
I don't have one with the
application that Armin wrote,

00:47:42.200 --> 00:47:45.150
so I guess I know who
to talk to about that,

00:47:45.150 --> 00:47:45.880
right?

00:47:46.520 --> 00:47:49.390
I think I probably set it for John,
so let's take a look at John in

00:47:49.390 --> 00:47:51.220
Preferences under Details.

00:47:51.220 --> 00:47:55.100
But what you'll see is that
the preferences that are there,

00:47:55.100 --> 00:47:56.640
the variables were pretty well-defined.

00:47:56.640 --> 00:47:58.110
Check for updates, serial number, volume.

00:47:58.120 --> 00:48:00.660
You don't have a guarantee that
the developer is going to use such

00:48:00.710 --> 00:48:04.560
easy-to-read preference values,
so a manifest can be kind of handy.

00:48:04.560 --> 00:48:08.080
And there are a number of
applications that do have manifests.

00:48:08.080 --> 00:48:10.520
Let's see if we can see what happens.

00:48:10.520 --> 00:48:14.670
If we go to the library folder
in Preferences and try and

00:48:14.670 --> 00:48:17.750
find my Safari preferences.

00:48:17.760 --> 00:48:20.120
I may not have them.

00:48:22.400 --> 00:48:22.930
There we go.

00:48:22.930 --> 00:48:24.620
There's the Safari plist.

00:48:24.790 --> 00:48:30.060
So if you recall,
I imported a plist before for

00:48:30.060 --> 00:48:31.680
the manifestation application.

00:48:31.680 --> 00:48:34.620
Let's stick this in the often section.

00:48:36.720 --> 00:48:38.600
So I just did that again with Safari.

00:48:38.600 --> 00:48:43.780
Did I click the wrong one?

00:48:43.960 --> 00:48:45.490
There we go.

00:48:48.570 --> 00:48:51.460
Right, address bar includes Google,
true or false.

00:48:51.500 --> 00:48:53.330
Address bar preferences were converted,
true or false.

00:48:53.340 --> 00:48:55.070
Some of these you're gonna mess with,
some of them you're

00:48:55.070 --> 00:48:56.100
not going to mess with.

00:48:56.230 --> 00:48:57.370
There's one that looks good.

00:48:57.620 --> 00:49:00.780
Homepage preference,
you can set that to your own.

00:49:01.310 --> 00:49:04.380
Apple's engineering team has
actually included a number of

00:49:04.380 --> 00:49:13.030
preferences inside an application
on your system in /system/library,

00:49:13.030 --> 00:49:16.800
and I think it's in core services.

00:49:16.880 --> 00:49:21.350
And if you scroll through there,

00:49:24.350 --> 00:49:27.160
Look for the managed client application.

00:49:27.160 --> 00:49:32.640
This, among other things,
has a bundle of preference manifests

00:49:32.710 --> 00:49:35.050
for a ton of applications that
are included with the system.

00:49:35.050 --> 00:49:37.920
So rather than each application
having the preference manifest,

00:49:37.930 --> 00:49:40.280
some of them are just all
bundled in one place here.

00:49:40.290 --> 00:49:43.680
And if you import those now,
you get more sensible

00:49:43.680 --> 00:49:45.700
descriptions for things.

00:49:45.700 --> 00:49:50.720
I can go in, for example,
and say iTunes settings, always.

00:49:50.720 --> 00:49:52.500
Let's get a new key in there.

00:49:53.800 --> 00:49:58.370
And let's restrict explicit
content and set that to true.

00:49:58.370 --> 00:50:02.160
So this, if applied to a computer list,
could set all of the

00:50:02.350 --> 00:50:06.460
computers in a computer lab,
for example, to not use explicit content.

00:50:06.460 --> 00:50:09.380
And again, the beauty of this is,
rather than going through when

00:50:09.680 --> 00:50:12.910
you're building an image and checking
every conceivable checkbox and

00:50:12.910 --> 00:50:16.100
then saving that out to an image
and deploying it and then realizing

00:50:16.100 --> 00:50:19.430
that you forgot that one checkbox,
stick this in a directory server,

00:50:19.430 --> 00:50:23.080
bind your clients to the directory,
and they will be able to use it.

00:50:23.100 --> 00:50:26.570
and they will pick those
values out of there.

00:50:29.150 --> 00:50:32.340
So there's some other handy ones in here.

00:50:32.430 --> 00:50:35.770
Did they talk about folder direction
in the home directories session?

00:50:35.880 --> 00:50:37.170
Good.

00:50:37.390 --> 00:50:38.750
So this is kind of a handy thing.

00:50:38.760 --> 00:50:42.840
To be able to take a variable
substitution for your home folder,

00:50:42.840 --> 00:50:44.500
rather than having that
be in a user record,

00:50:44.610 --> 00:50:47.830
for example, you could embed that right
within their managed preferences

00:50:47.940 --> 00:50:50.280
for a computer list or a group.

00:50:50.330 --> 00:50:52.460
Setting screen savers,
how many of you have set the

00:50:52.490 --> 00:50:56.320
QuickTime Pro key on more than
one computer on this same network?

00:50:56.320 --> 00:50:58.260
Yeah,
so these are the kinds of things you

00:50:58.260 --> 00:51:03.440
can look at as magnifying your power,
checking a box in one place,

00:51:03.440 --> 00:51:06.220
and spreading it throughout
all of your systems.

00:51:08.410 --> 00:51:11.020
There's one other that I think
Armin wanted me to show,

00:51:11.020 --> 00:51:16.660
and that was, was it in the Finder,
Armin?

00:51:20.700 --> 00:51:22.460
And there it is right there,
sidebar settings.

00:51:22.460 --> 00:51:27.220
So some of you have asked, for example,
to, let's get a new key.

00:51:28.210 --> 00:51:31.590
Set up custom URLs or
define how the finder shows,

00:51:31.590 --> 00:51:36.180
whether it shows network machines on
your network and that sort of thing.

00:51:36.180 --> 00:51:39.860
Set those centrally and control all
the machines on your network that way.

00:51:39.860 --> 00:51:43.390
I think that's it for now.

00:51:43.390 --> 00:51:44.360
Back to Arm.

00:51:53.350 --> 00:51:56.080
As you saw in our small example,
not all developers go to the

00:51:56.080 --> 00:51:57.340
effort to provide the manifest.

00:51:57.340 --> 00:52:00.860
So please,
with your favorite applications,

00:52:00.960 --> 00:52:04.240
if you don't see that
they provide the manifest,

00:52:04.240 --> 00:52:09.350
ask the developers, file bugs with them,
say this will make our life

00:52:09.350 --> 00:52:14.150
so much easier and we have
3,000 licenses or whatever,

00:52:14.170 --> 00:52:16.650
so that they know about this.

00:52:17.690 --> 00:52:18.680
This is the link.

00:52:18.730 --> 00:52:21.790
You can read it yourself,
but basically this is the link for

00:52:21.790 --> 00:52:25.970
the developers on how to provide
manifests and why to provide manifests

00:52:25.970 --> 00:52:27.810
and why they're a good thing.

00:52:29.630 --> 00:52:31.260
So we showed some neat tricks.

00:52:31.260 --> 00:52:35.600
The main starting point for this
is to take the application and

00:52:35.600 --> 00:52:38.590
import it into Workgroup Manager.

00:52:38.600 --> 00:52:43.020
We put a bunch of these files
into system library core services,

00:52:43.180 --> 00:52:47.630
manageclient.app,
which will provide you a huge list

00:52:47.820 --> 00:52:56.380
of preferences that you can use and
explore and play around with and preset.

00:52:56.380 --> 00:52:57.960
You can manage the finder sidebar.

00:52:57.960 --> 00:53:02.640
You can disable the automatic lookup
so you see all the Macs in your lab.

00:53:02.790 --> 00:53:04.820
You can disable that.

00:53:05.520 --> 00:53:10.410
You can preset certain volumes
or file shares of certain

00:53:10.710 --> 00:53:12.560
locations in the sidebar.

00:53:12.560 --> 00:53:15.310
Basically,
everything that's in the preference

00:53:15.510 --> 00:53:20.380
control in Finder sidebar,
you can control through the details view.

00:53:20.380 --> 00:53:25.500
You can preset registration
keys for QuickTime and iWork.

00:53:25.600 --> 00:53:28.670
So if you have a volume
license for either of those,

00:53:28.670 --> 00:53:31.740
you can preset those through
the directory service.

00:53:33.640 --> 00:53:37.800
You can disable iTunes features,
which is very valuable

00:53:37.800 --> 00:53:41.210
in education settings,
where you want to use iTunes because

00:53:41.210 --> 00:53:46.890
of the podcasting functionality,
but you don't want them browsing the

00:53:46.890 --> 00:53:52.360
iTunes store or sharing their libraries,
because Heyman's second rule

00:53:52.380 --> 00:53:56.700
says that students will use every
possible means to communicate with

00:53:56.700 --> 00:53:58.990
each other and turn it into a chat.

00:53:59.520 --> 00:54:02.710
We had one school where the
students started changing

00:54:02.710 --> 00:54:05.490
their iTunes library names,
and suddenly we had

00:54:05.500 --> 00:54:09.180
iTunes libraries like,
the answer to question three is C.

00:54:15.060 --> 00:54:18.480
So you can disable that.

00:54:18.500 --> 00:54:21.910
They found something else afterwards.

00:54:22.860 --> 00:54:24.080
We can do folder redirection.

00:54:24.080 --> 00:54:29.400
In Tiger, it requires login hooks,
and it's now built into the MCX settings,

00:54:29.400 --> 00:54:33.040
and you can take the caches folder
on a network home directory setting

00:54:33.040 --> 00:54:37.670
and redirect it to a local folder
instead of moving all the small

00:54:37.670 --> 00:54:40.120
cache files over the network.

00:54:42.820 --> 00:54:45.620
There are a lot of related sessions.

00:54:45.700 --> 00:54:49.070
There's the overview session,
Managing Mac OS X with Netboot Managed

00:54:49.180 --> 00:54:52.190
Clients and Apple Remote Desktop,
which talks how this works

00:54:52.190 --> 00:54:54.940
together with other tools that
we provide for management.

00:54:54.940 --> 00:54:58.370
MCX is certainly not the only one.

00:54:59.600 --> 00:55:02.660
There is a session that talks
about authorization services.

00:55:02.660 --> 00:55:07.170
Sometimes the granularity
of MCX isn't deep enough.

00:55:07.350 --> 00:55:11.640
Sometimes you want to control
whether the user gets administrative

00:55:12.120 --> 00:55:13.900
privileges for a certain task.

00:55:13.900 --> 00:55:17.510
You control that through sudo
and the authorization process.

00:55:17.600 --> 00:55:19.250
It's quite complicated.

00:55:19.300 --> 00:55:21.700
They will talk about
that in this session.

00:55:21.700 --> 00:55:24.520
And then we have the Managed
Client Lab on Thursday.

00:55:28.610 --> 00:55:32.500
So MCX controls the Mac OS X preference
model in a central database

00:55:32.690 --> 00:55:34.960
through the directory,
and you can basically control

00:55:34.960 --> 00:55:38.790
everything that lives in a plist file,
even if we don't provide a

00:55:38.790 --> 00:55:40.120
graphical interface for it.

00:55:40.210 --> 00:55:43.490
We have the details view and
the command line tools that let

00:55:43.490 --> 00:55:47.200
you control everything that's
in that file or in that folder.

00:55:48.740 --> 00:55:52.730
If you want to use application launch
restrictions and application signing,

00:55:52.920 --> 00:55:55.250
it's a very, very powerful tool,
but you have to start

00:55:55.250 --> 00:55:58.070
planning about this very,
very early in your deployment process

00:55:58.070 --> 00:56:00.540
and during the maintenance as well.

00:56:00.540 --> 00:56:03.590
And please ask all of your
developers for manifests,

00:56:03.740 --> 00:56:06.220
and any developers that
are here in this room,

00:56:06.220 --> 00:56:08.020
please provide manifests.