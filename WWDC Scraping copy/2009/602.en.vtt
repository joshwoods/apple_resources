WEBVTT

00:00:13.769 --> 00:00:15.669
>> Good afternoon, Ladies and Gentlemen.

00:00:15.669 --> 00:00:23.259
Welcome to Session 602 about configuration
profiles, creation, and deployment.

00:00:23.260 --> 00:00:26.320
My name is Stan, and my question
is are you in the right room.

00:00:26.320 --> 00:00:30.690
We were talking about it -- there's going to
be two kinds of people coming to this session.

00:00:30.690 --> 00:00:34.149
Those are who are IT professionals and those who are lost.

00:00:34.149 --> 00:00:38.250
So if you're an IT professional, this is the place to be.

00:00:38.250 --> 00:00:40.450
Otherwise, I guess you can wait for the beer bash here.

00:00:40.450 --> 00:00:42.230
It's nice and cozy.

00:00:42.229 --> 00:00:45.359
I have one question before I start.

00:00:45.359 --> 00:00:52.539
Who has been to the same session a year ago, because we have
some things that are the same, some things that are new.

00:00:52.539 --> 00:00:54.429
Okay, so about half.

00:00:54.429 --> 00:00:56.079
Half is new.

00:00:56.079 --> 00:01:01.379
So what are you going to learn.

00:01:01.380 --> 00:01:06.519
We'll be talking about what we call managed
configuration, configuration profiles on the phone.

00:01:06.519 --> 00:01:09.969
What are configuration profiles, what can you use them for.

00:01:09.969 --> 00:01:18.810
We'll be talking a little bit about a profile format,
how to create a profile, and how to deploy them.

00:01:18.810 --> 00:01:21.689
So what are configuration profiles.

00:01:21.689 --> 00:01:27.519
They are small XML files that host a lot
of settings that can configure the phone.

00:01:27.519 --> 00:01:31.959
They are typically used for things that would
be considered cumbersome to set up on the phone,

00:01:31.959 --> 00:01:38.229
where you don't want your average user in
the company configuring the VPN and what not.

00:01:38.230 --> 00:01:42.790
They can also enforce a specific
set of policies on the phone,

00:01:42.790 --> 00:01:47.460
the type and length of the PNG
code, auto lock time, et cetera.

00:01:47.459 --> 00:01:51.179
They can do all of this securely,
especially now in iPhone 3.0.

00:01:51.180 --> 00:01:52.860
We'll be talking about that more.

00:01:52.859 --> 00:01:54.780
This is not to be confused with provisioning profiles.

00:01:54.780 --> 00:01:56.650
There is nothing in common with provisioning profiles.

00:01:56.650 --> 00:02:02.410
There was a session about that earlier, so if you're
looking for provisioning profiles you're at the wrong place.

00:02:02.409 --> 00:02:09.060
So in version 3.0 of iPhone configuration
profiles configure many things, more things.

00:02:09.060 --> 00:02:12.360
There's some things that we have
improved and some things that are new.

00:02:12.360 --> 00:02:15.670
I'll go over this quickly, because a
lot of it is the same as last year.

00:02:15.669 --> 00:02:18.679
First of all, Microsoft Exchange.

00:02:18.680 --> 00:02:21.950
You all know what Microsoft Exchange is good for.

00:02:21.949 --> 00:02:27.039
E-mail, calendaring, address book,
and also security enforcement.

00:02:27.039 --> 00:02:29.849
Lots of policies get pushed down from Exchange.

00:02:29.849 --> 00:02:35.939
Now in 3.0, also the camera off, more policies
that I'm not going to talk about in great detail.

00:02:35.939 --> 00:02:39.180
And we also have cert-based authentication

00:02:39.180 --> 00:02:45.550
so that you can send the whole profile
with everything ready to go to the user.

00:02:45.550 --> 00:02:55.160
We have passcode policies and restrictions, you define a
set of passcode policies, they're applied in conjunction

00:02:55.159 --> 00:03:01.370
with the EAS policies, they're merged together so
that multiple profiles each can specify a policy,

00:03:01.370 --> 00:03:04.319
and then the most strict will be applied.

00:03:04.319 --> 00:03:08.939
And the merging goes as follows -- imagine
you have one profile or one EAS account

00:03:08.939 --> 00:03:12.469
that specifies I want six characters passcode.

00:03:12.469 --> 00:03:15.569
I want the passcode to expire in 60 days or 30 days.

00:03:15.569 --> 00:03:21.709
The other one says, you know, just four characters
is fine, but you have to have two special characters.

00:03:21.710 --> 00:03:28.460
The merge profile -- the merge policy
is going to be as listed below.

00:03:28.460 --> 00:03:30.280
Credentials.

00:03:30.280 --> 00:03:34.750
You can install profiles -- you can
use profiles to install certificates

00:03:34.750 --> 00:03:39.960
or you can install raw PKCS#1 and
#12 certificates on the phone.

00:03:39.960 --> 00:03:45.930
That way your organization can install
signing certificates on the phone

00:03:45.930 --> 00:03:48.510
to be used for your own profiles and what not else.

00:03:48.509 --> 00:03:52.479
Also for authentication identity, such as for EAS.

00:03:52.479 --> 00:03:57.599
We'll be talking about that more in great detail.

00:03:57.599 --> 00:03:59.199
VPN configuration.

00:03:59.199 --> 00:04:07.319
You know what VPN is, various protocols,
and now in 3.0 we support also proxies.

00:04:07.319 --> 00:04:11.979
We have Wi-Fi settings.

00:04:11.979 --> 00:04:23.029
All the leaps, peeps, beeps, and what else, eeps --
and basically anything that you can think of, 802.1x.

00:04:24.250 --> 00:04:26.009
Application access restrictions.

00:04:26.009 --> 00:04:29.480
We have added some new policies,
most specifically Camera Off.

00:04:29.480 --> 00:04:33.450
That has been requested by many companies
to be able to turn off the camera.

00:04:33.449 --> 00:04:37.259
That can be specified both by in a profile and by Exchange.

00:04:38.329 --> 00:04:40.240
Mail settings.

00:04:41.420 --> 00:04:44.330
Host, protocol, all that good stuff.

00:04:44.329 --> 00:04:47.289
And now you can embed the account password as well.

00:04:47.290 --> 00:04:50.270
Not just in the e-mail accounts, also in any --

00:04:50.269 --> 00:04:54.939
well, many other payloads would
logically allow you to specify a password.

00:04:54.939 --> 00:04:57.050
We can do that now because they're encrypted.

00:04:57.050 --> 00:05:02.350
So you're not actually transferring the passcode
in the clear, we'll talk more about that later.

00:05:02.350 --> 00:05:05.760
And APN settings.

00:05:05.759 --> 00:05:08.980
My favorite, you either know what
it is, or you don't want to know.

00:05:08.980 --> 00:05:12.850
You also don't want to play with it if you don't
know, because it will turn off your data access

00:05:12.850 --> 00:05:15.310
on the phone, which is typically considered bad.

00:05:15.310 --> 00:05:21.100
Now in 3.0, you can allow -- specify an HDV proxy.

00:05:21.100 --> 00:05:21.720
Web clips.

00:05:21.720 --> 00:05:26.260
One of those things that came actually as a
suggestion from our customers here at last year's WWDC.

00:05:26.259 --> 00:05:29.490
Web clip, you know, is in Safari.

00:05:29.490 --> 00:05:36.400
You press a plus button and you create a shortcut on your
Springboard desktop for the page your currently have open.

00:05:36.399 --> 00:05:39.909
So now you can push that as part of a profile.

00:05:39.910 --> 00:05:44.470
You can make them optionally nonremovable,
and it's useful, for instance,

00:05:44.470 --> 00:05:47.950
to go to your company's IT web site and what not.

00:05:47.949 --> 00:05:50.569
SCEP settings.

00:05:50.569 --> 00:05:58.339
Now we're going to go talk more about that later, but
in SCEP service, you specify basically two things.

00:05:58.339 --> 00:06:04.709
The URL of the service, name, and then also
the input to the certificate signing request.

00:06:04.709 --> 00:06:09.019
We'll be talking about that more, where that's being used.

00:06:09.019 --> 00:06:12.919
And then your good old friends, LDAP, CalDav, and CalSub.

00:06:12.920 --> 00:06:14.110
So LDAP, you know what it is.

00:06:14.110 --> 00:06:23.580
It's a DirectoryService that's being used for
completion in your mail, Address book, and what not.

00:06:23.579 --> 00:06:32.219
CalDav, it's the OS X Server's Calendaring solution,
it's for wireless synchronization, an SD engineer who works

00:06:32.220 --> 00:06:37.380
on that particular feature, says it is a lot of fun.

00:06:37.379 --> 00:06:40.850
And finally we have CalSub.

00:06:40.850 --> 00:06:45.780
Calendar subscription, that's -- you can
download those calendars from Apple or Google,

00:06:45.779 --> 00:06:49.719
you can optionally authenticate with user name and password.

00:06:49.720 --> 00:06:53.360
So those are the combined features in 3.0.

00:06:53.360 --> 00:06:59.600
Now we're going to be talking to great length about details.

00:06:59.600 --> 00:07:03.240
So the profile contents are flexible.

00:07:03.240 --> 00:07:07.939
Profile can configure any single
component, what we talked before,

00:07:07.939 --> 00:07:14.139
or basically virtually any combination of,
you know, APN and VPN at the same time.

00:07:14.139 --> 00:07:19.500
That's for convenience and also for a carrot and stick
approach, so I give you access to the cert-based VPN.

00:07:19.500 --> 00:07:24.459
But at the same time you also have
to comply to my password rules.

00:07:24.459 --> 00:07:30.370
Now as an improvement to last year's
slide show, we now have a donkey.

00:07:30.370 --> 00:07:32.030
Carrot and stick.

00:07:32.029 --> 00:07:37.299
So you give the user something he or she
wants, and you made him obey by your rules,

00:07:37.300 --> 00:07:43.210
like for a travelling salesman,
no explicit music and what not.

00:07:44.350 --> 00:07:45.689
Content restrictions.

00:07:45.689 --> 00:07:46.750
So there are some restrictions.

00:07:46.750 --> 00:07:50.509
You can't really combine everything
you want, there are some rules on that.

00:07:50.509 --> 00:07:57.469
So you can have only one passcode policy per profile,
you can have only one application access per profile.

00:07:57.470 --> 00:07:59.720
Only one removal password per profile.

00:07:59.720 --> 00:08:01.460
We'll talk more about that later.

00:08:01.459 --> 00:08:08.689
And you can only have one EAS account globally on the
phone, whether you enter it manually or in a profile.

00:08:08.689 --> 00:08:10.779
It's also all or nothing.

00:08:10.779 --> 00:08:16.719
So you can install a profile as a whole, and
you can remove a profile only as a whole.

00:08:16.720 --> 00:08:20.770
So if for some reason a profile can't
install, because there's some errors,

00:08:20.769 --> 00:08:22.819
nothing of the profile will get installed.

00:08:22.819 --> 00:08:27.579
So again, you're dealing with the
complete package of the carrot and stick.

00:08:27.579 --> 00:08:31.279
The password -- the profile removal is also regulated

00:08:31.279 --> 00:08:37.429
so you can optionally make it password
protected, or just flat-out make it impossible.

00:08:37.429 --> 00:08:45.849
Be advised that's typically rude, and it might be
flat-out illegal if the user actually owns the phone.

00:08:45.850 --> 00:08:49.600
If your corporation owns the phone,
you know, it's your phone.

00:08:49.600 --> 00:08:53.860
But the user owns the phone, it might not be really legal.

00:08:54.970 --> 00:09:02.870
So now going to security and authentication,
authenticity, you can sign a profile so that it --

00:09:02.870 --> 00:09:08.120
the user can see whether it comes from somebody
they could trust or just any XML editor.

00:09:08.120 --> 00:09:09.779
So we have three types of profiles.

00:09:09.779 --> 00:09:15.019
There's signed and verified, so they can
be traced through a well-known route.

00:09:15.019 --> 00:09:19.220
You have they are signed, but you
know, I just make up the certificate.

00:09:19.220 --> 00:09:21.110
Or they are unsigned.

00:09:21.110 --> 00:09:27.550
So the user sees right away based
on the badge how trustworthy it is.

00:09:27.549 --> 00:09:36.549
Basically, it's the same signing as we use in OS X,
and we have about 600 root certs that can be traced to.

00:09:36.549 --> 00:09:42.500
So now new in 3.0, profiles can be encrypted,
obviously one of the most requested features

00:09:42.500 --> 00:09:46.879
that if somebody intercepts a profile it's like gibberish.

00:09:48.340 --> 00:09:52.450
They can be and they should be always
signed, even if they are not encrypted.

00:09:52.450 --> 00:09:55.860
All encrypted profiles are also signed.

00:09:55.860 --> 00:10:02.750
And that means that you can insert
sensitive information in your profiles.

00:10:02.750 --> 00:10:08.590
You can put e-mail passwords in there, you can
put EAS certificates, authentication certificates,

00:10:08.590 --> 00:10:13.470
VPN and authentication certificates into
the profile, because they're encrypted.

00:10:13.470 --> 00:10:20.120
So -- and if you omit some information
iPhone is still going to ask you for that.

00:10:20.120 --> 00:10:21.220
So there's some caveats.

00:10:21.220 --> 00:10:24.029
There's still no dependency analysis
when removing a profile.

00:10:24.029 --> 00:10:28.789
So if you remove a piece of information
such as a certificate in one profile,

00:10:28.789 --> 00:10:33.439
it might render a different profile unusable.

00:10:33.440 --> 00:10:40.280
There is still no conflict resolution installing a
profile that overlaps with a previously installed profile,

00:10:40.279 --> 00:10:43.939
will typically lead to an installation
error, and the profile cannot be installed.

00:10:43.940 --> 00:10:47.870
And there's no expiration date for profiles, per se.

00:10:47.870 --> 00:10:50.960
Certificates still have expiration dates.

00:10:50.960 --> 00:10:55.310
So it's possible that, like, a piece of
the profile, the certificate will expire.

00:10:55.309 --> 00:11:00.009
But the profile in itself will not.

00:11:00.009 --> 00:11:04.419
So the profile format is the same
as last year, except we enriched it.

00:11:04.419 --> 00:11:06.429
It's standard XML.

00:11:06.429 --> 00:11:11.049
It's the same DTD as in OS X platforms.

00:11:11.049 --> 00:11:14.579
And the format is really, really simple.

00:11:14.580 --> 00:11:19.060
We use the same keywords all over the
place, and the specification is published.

00:11:19.059 --> 00:11:23.679
Now how do you create the profile.

00:11:23.679 --> 00:11:27.509
Well, you can do it by hand or you
can use iPhone Configuration Utility.

00:11:27.509 --> 00:11:30.929
Which now new is for OS X and native for Windows.

00:11:30.929 --> 00:11:36.739
We no longer have the web iPCU, we
now have a native one for Windows.

00:11:36.740 --> 00:11:43.299
The iPhone Configuration Utility serves as a curator
for all of your configuration and provisioning profiles

00:11:43.299 --> 00:11:48.189
and applications and many other things,
creates configuration profiles very easily.

00:11:48.190 --> 00:11:50.890
It encrypts and signs them.

00:11:50.889 --> 00:11:57.699
And interesting for IT people, it also allows
you to download the console for debugging.

00:11:57.700 --> 00:12:03.860
For instance, when a program doesn't install, it can attach
it to iPCU, and the console is going to tell you why.

00:12:03.860 --> 00:12:07.669
It does many other things, but we're
not going to go into those here.

00:12:07.669 --> 00:12:15.360
So on that note, I would like to invite Chris Skogen
who will show you -- will give you a demo of iPCU.

00:12:15.360 --> 00:12:18.080
Okay, so you need --

00:12:18.080 --> 00:12:20.730
[ Applause ]

00:12:20.730 --> 00:12:21.909
>> Thanks Stan.

00:12:21.909 --> 00:12:28.199
I'm going to give you a really quick demo, tour, of iPCU,
or iPhone Configuration Utility as it's formally known.

00:12:28.200 --> 00:12:33.240
Before I get started, since we are all IT
professionals, I'd like to see a show of hands

00:12:33.240 --> 00:12:36.909
for how many people use Windows on their desktop every day.

00:12:36.909 --> 00:12:43.659
It's okay, you're amongst friend, you know, nobody's
going to -- so this will be kind of a first for this demo.

00:12:43.659 --> 00:12:46.740
We are actually going to do the demo on Windows.

00:12:46.740 --> 00:12:54.840
So as we're looking at iPCU, it
has a pretty typical Mac interface.

00:12:54.840 --> 00:13:03.670
On the left side, over here, we have a source list and it
contains the different types of sources for our library.

00:13:03.669 --> 00:13:09.069
Over here on the right is then the Detail
View for the sources that are in that library.

00:13:09.070 --> 00:13:15.900
And then the bottom pane is our detail or editor
pane for each of the things we are looking at.

00:13:15.899 --> 00:13:20.490
Starting at the top of the library
if I click on the devices source,

00:13:20.490 --> 00:13:25.480
you will see a list of devices that
this iPCU has seen connected to it.

00:13:25.480 --> 00:13:32.340
It can show you the name of the device,
serial number, identifiers, owner's name,

00:13:32.340 --> 00:13:38.090
and in the bottom detail you get a summary of
the device with identifier software version.

00:13:38.090 --> 00:13:45.030
And it will also show you configuration profiles
that are known to be installed on that device,

00:13:45.029 --> 00:13:49.189
it will show you provisioning profiles that
are known to be installed on that device,

00:13:49.190 --> 00:13:54.310
and it will also show you applications that
are known to be installed on that device.

00:13:54.309 --> 00:13:56.419
You may wonder how we get a device in there.

00:13:56.419 --> 00:14:00.860
It's as simple as connecting it
to the computer, just like iTunes.

00:14:00.860 --> 00:14:08.789
And you'll notice in the left-hand source list in a second,
you'll see the device pop up, just like iTunes or Xcode.

00:14:08.789 --> 00:14:13.649
And in the device record list up here
we now have a green light on that record

00:14:13.649 --> 00:14:16.289
to tell us that that device is currently connected.

00:14:16.289 --> 00:14:23.110
If I click on the device itself I get a
slightly different look to the editor.

00:14:23.110 --> 00:14:28.889
I also get configuration profiles, summary
information, provisioning profiles, applications.

00:14:28.889 --> 00:14:33.189
But then there's the console log that Stan was mentioning.

00:14:33.190 --> 00:14:39.480
And I can see everything that happened on that device's
console, and I can select them and save them off.

00:14:39.480 --> 00:14:47.139
After the device list we'll take a
look at the provisioning profiles.

00:14:47.139 --> 00:14:53.330
Now provisioning profiles are the files that are used
to make your device able to run a given application.

00:14:53.330 --> 00:14:56.250
And I have a couple of demo files here.

00:14:56.250 --> 00:14:58.870
All I do is drag them.

00:15:02.070 --> 00:15:08.379
Now the provisioning profile editor will show me
the expiration date, the application identifier

00:15:08.379 --> 00:15:16.340
that the profile is for, and then in the bottom, it
will show me any phones that I have in my library,

00:15:16.340 --> 00:15:19.550
and it will show me whether or not I
have installed that profile on the phone.

00:15:19.549 --> 00:15:22.009
In this case, Lucy's phone does not have this profile.

00:15:22.009 --> 00:15:30.200
Now if it was a matter of wanting to install that
profile I would go back to the connected device,

00:15:30.200 --> 00:15:33.730
go to provisioning profiles on this
tab, and there's my Install button.

00:15:33.730 --> 00:15:37.600
So that's how I go ahead and install
a provisioning profile on a device.

00:15:37.600 --> 00:15:42.440
And of course with provisioning profiles are applications.

00:15:42.440 --> 00:15:45.550
And I can add a few applications to this library.

00:15:45.549 --> 00:15:48.789
Just by dragging and dropping.

00:15:48.789 --> 00:15:58.429
And again, this editor will show me devices
that I know of and then it will show me whether

00:15:58.429 --> 00:16:01.529
or not this application is on that device.

00:16:01.529 --> 00:16:04.179
And it's similar to provisioning profiles again.

00:16:04.179 --> 00:16:07.489
I can click on the connected device.

00:16:07.490 --> 00:16:10.649
Go to Applications, and go ahead
and install that application.

00:16:10.649 --> 00:16:17.159
In a demo in a little bit we're going to show you
installing configuration profiles on the device,

00:16:17.159 --> 00:16:24.019
but for now I'm going to focus on how to actually
use iPCU to create a configuration profile.

00:16:24.019 --> 00:16:28.769
So what I do to get started is I select
the source list for configuration profiles.

00:16:28.769 --> 00:16:33.939
I go up to the toolbar, and I press the New button.

00:16:33.940 --> 00:16:38.140
Now I get my new profile here with a default name,

00:16:38.139 --> 00:16:43.710
and the bottom editor is our new
configuration profile editor for 2.0.

00:16:43.710 --> 00:16:49.080
On the left side in this list you will see the
different payloads that Stan was going through.

00:16:49.080 --> 00:16:55.450
And on the right side when I select a payload, I will
see the state of that payload and all the data for it.

00:16:55.450 --> 00:17:00.710
So I'm going to run down some of these payloads quick,
and while I'm doing it, I'm going to be showing you how

00:17:00.710 --> 00:17:04.610
to create a configuration profile
for kind of real world usage.

00:17:04.609 --> 00:17:11.379
So let's assume my company's name is Acme Inc., and I'm
going to create a profile that has VPN access to my company,

00:17:11.380 --> 00:17:14.690
and in addition to that, I'm going to enforce a passcode.

00:17:14.690 --> 00:17:17.940
I'm going give the user a web clip on their Springboard,

00:17:17.940 --> 00:17:21.930
and I'm also going to take away
some capabilities from the device.

00:17:21.930 --> 00:17:24.039
So let's get started.

00:17:24.039 --> 00:17:31.649
I have my new profile here, and in the general payload which
is always there, I get to specify the name of the profile.

00:17:31.650 --> 00:17:36.269
So I just click, give it a name.

00:17:36.269 --> 00:17:38.720
I'm going call it Acme VPN profile.

00:17:38.720 --> 00:17:42.509
Now I have to give it a unique identifier.

00:17:42.509 --> 00:17:47.059
These identifiers are very important because
when you are updating configuration profiles

00:17:47.059 --> 00:17:51.079
on a device they are uniquely identified by this identifier.

00:17:51.079 --> 00:17:54.129
So in this case, I'm going call it com.acme.vpn.

00:17:54.130 --> 00:18:01.560
In the future if I want to change that profile I have
to have that same identifier, and it will overwrite it.

00:18:01.559 --> 00:18:04.409
The organization name is Acme Inc.

00:18:04.410 --> 00:18:09.680
and the description, which will be
shown so the device when the user tries

00:18:09.680 --> 00:18:19.799
to install the profile, Acme Inc., VPN configuration.

00:18:19.799 --> 00:18:24.049
And I'm a bad typer.

00:18:24.049 --> 00:18:33.000
There. Down here at the bottom of the general payload is
where you would enable or disable removal of the profile.

00:18:33.000 --> 00:18:38.400
By clicking on this you could say allow it to be removed
with authentication, or never allow it to be removed.

00:18:38.400 --> 00:18:40.150
For this, we're going to leave it as Always.

00:18:40.150 --> 00:18:42.950
The user can remove it.

00:18:42.950 --> 00:18:49.059
So for the next payload, which is a passcode payload, you
notice when I click on it, I get this little gray screen

00:18:49.059 --> 00:18:52.389
that says this payload is not in the profile.

00:18:52.390 --> 00:18:58.280
So in order to start, I actually have to hit
configure to add the payload to the profile.

00:18:58.279 --> 00:19:02.490
Once I've done that I'm presented
all of the options in the payload.

00:19:02.490 --> 00:19:08.430
And you'll notice in the right there's a little minus
button which is remove the passcode configuration.

00:19:08.430 --> 00:19:11.549
So if I hit that it will go ahead
and remove that payload from here.

00:19:11.549 --> 00:19:17.889
What we want is we want to require a passcode on the
device, and we do not want it to be a simple value.

00:19:17.890 --> 00:19:22.750
So we don't want it to be 111, or AAA.

00:19:22.750 --> 00:19:26.119
And that's really all we're going it
do for the users of this Acme VPN.

00:19:26.119 --> 00:19:33.819
But you'll see there's many other options for minimum number
of complex characters, how long before we lock the device,

00:19:33.819 --> 00:19:38.559
how many failed attempts they can
have before we'll lock the device.

00:19:38.559 --> 00:19:40.179
So that's it.

00:19:40.180 --> 00:19:43.970
I leave that one , and that payload is part of my profile.

00:19:43.970 --> 00:19:45.400
Now we'll take a look at restrictions.

00:19:45.400 --> 00:19:49.920
Now I said I wanted to stop our users
from doing some things on the device,

00:19:49.920 --> 00:19:52.610
and specifically, I don't want them using the camera.

00:19:52.609 --> 00:19:54.240
So I'm going to uncheck these.

00:19:54.240 --> 00:19:59.390
Now, I got that backwards.

00:19:59.390 --> 00:19:59.860
I'm sorry.

00:19:59.859 --> 00:20:10.309
I'm going to allow them all of these, and
I'm going to take away the use of the camera.

00:20:10.309 --> 00:20:12.799
Again, there's nothing to do, just
move onto the next payload.

00:20:12.799 --> 00:20:14.839
That one will be saved.

00:20:14.839 --> 00:20:19.399
We're not going to be adding Wi-Fi to this
payload, but I'd like to show you the Wi-Fi editor.

00:20:19.400 --> 00:20:23.310
I go ahead and add the payload by
pressing the Cconfigure button.

00:20:23.309 --> 00:20:26.539
You'll notice on the Wi-Fi that
there's a plus and a minus button.

00:20:26.539 --> 00:20:29.420
That's actually because I can add
more than one Wi-Fi payload.

00:20:29.420 --> 00:20:36.340
So by clicking on plus, you'll see that it
added another configuration for a second Wi-Fi.

00:20:36.339 --> 00:20:43.899
And in here you'll find all the different types of Wi-Fi
set ups that can be done, all the eeps , peeps, TLS,

00:20:43.900 --> 00:20:47.259
authentication by certificate, things like that.

00:20:47.259 --> 00:20:52.400
So I'm going to take this payload off because
we're not going to use it for Acme Inc..

00:20:52.400 --> 00:20:53.410
The next one up is VPN.

00:20:53.410 --> 00:20:57.460
This is one we are going to use for Acme Inc..

00:20:57.460 --> 00:21:01.600
I can give it a connection name.

00:21:04.009 --> 00:21:06.879
Acme VPN connection.

00:21:06.880 --> 00:21:08.880
I can choose the type of connection.

00:21:08.880 --> 00:21:10.860
We're going to keep it very simple.

00:21:10.859 --> 00:21:20.169
We give it the server name, the little red arrow
goes away indicating that that was a required field.

00:21:20.170 --> 00:21:24.640
I can give it a user account.

00:21:24.640 --> 00:21:34.540
And since I'm going distribute this profile encrypted, I
can go ahead and put the shared secret for the VPN in there.

00:21:34.539 --> 00:21:35.700
That's actually it for VPN.

00:21:35.700 --> 00:21:40.950
You also notice I have the plus sign so
I can configure multiple VPN payloads.

00:21:40.950 --> 00:21:46.110
Moving on to e-mail, we're not
going to use that, but very quickly.

00:21:46.109 --> 00:21:51.259
Here's how you set up the e-mails, there's the incoming,
outgoing mail servers, all the different, you know,

00:21:51.259 --> 00:21:55.730
server name, server address, you can
put in the user name and password.

00:21:55.730 --> 00:21:58.000
So we'll take that one out.

00:21:58.000 --> 00:22:02.380
Here's the Exchange Active Sync settings
that Stan was mentioning earlier.

00:22:02.380 --> 00:22:06.380
The domain, the host for the Exchange Active Sync.

00:22:06.380 --> 00:22:11.380
We're not going to use that, we'll take that out.

00:22:11.380 --> 00:22:13.130
Some of the new settings.

00:22:13.130 --> 00:22:16.990
LDAP. Similar to the Wi-Fi and VPN.

00:22:16.990 --> 00:22:25.180
You can set up multiple LDAP servers, you can do your
search settings down here, and your host name and password

00:22:25.180 --> 00:22:28.810
if you're going to be deploying encrypted profiles.

00:22:28.809 --> 00:22:35.089
Another new payload for -- for 3.0 is CalDav.

00:22:35.089 --> 00:22:39.659
Again, just like the other ones, add your
host name, ports, account, user name,

00:22:39.660 --> 00:22:44.540
password, use SSL, and you can add multiples.

00:22:44.539 --> 00:22:47.440
Subscribe calendars.

00:22:47.440 --> 00:22:50.779
Similar. You're seeing the pattern by this point?

00:22:50.779 --> 00:22:57.289
Here's the web clip that Stan was mentioning,
and we are going to put this one in our Acme.

00:22:57.289 --> 00:23:01.059
So we're going to call this the Acme HR portal

00:23:01.059 --> 00:23:07.349
So because they're going to take our VPN,
and this is our carrot and stick approach --

00:23:07.349 --> 00:23:10.240
because they're going to get our VPN, there's the carrot,

00:23:10.240 --> 00:23:13.400
stick is going to be they're going
to lose some functionality.

00:23:13.400 --> 00:23:19.350
But we're also going to give them this quick web
clip to get to the HR portal inside of the company.

00:23:19.349 --> 00:23:22.019
So we can say this is hr.acme.com.

00:23:22.019 --> 00:23:28.349
Whether or not the user can remove it from
Springboard and whether or not you're going to --

00:23:28.349 --> 00:23:32.889
you add an icon here for the Springboard by
either dragging and dropping or by hitting Choose.

00:23:32.890 --> 00:23:36.810
And you can add multiple web clips.

00:23:36.809 --> 00:23:39.279
Credentials is not new.

00:23:39.279 --> 00:23:42.859
This is how you would actually put
certificates and identities on the device

00:23:42.859 --> 00:23:49.209
for usage n Wi-Fi payloads or VPN
payloads, things like that.

00:23:49.210 --> 00:23:52.340
SCEP is new.

00:23:52.339 --> 00:24:00.569
This is how you can do an enrollment protocol for
getting certificates to the device over the air.

00:24:00.569 --> 00:24:05.269
And there's going to be a demo of
that later on in this presentation.

00:24:05.269 --> 00:24:11.450
And then here's the APN payload and advanced
settings for the new HTTP proxy and things

00:24:11.450 --> 00:24:14.730
like that, that we're not going to be using that.

00:24:14.730 --> 00:24:23.180
There, I've run through all of my payloads, and I have my
name, the description, the organization, my identifier,

00:24:23.180 --> 00:24:29.360
I've enforced a passcode on the device, I've set up my VPN,

00:24:29.359 --> 00:24:34.149
I've given them a web clip to an
internal portal, and I'm done.

00:24:34.150 --> 00:24:39.670
So now the next step that I would want to do as an
administrator is start to deploy this to devices.

00:24:39.670 --> 00:24:43.340
And at this point my demo is done,
but we'll turn it back to Stan

00:24:43.339 --> 00:24:48.470
and let him start explaining how we
roll out these configuration profiles.

00:24:48.470 --> 00:24:50.009
Thank you.

00:24:50.009 --> 00:24:54.579
[ Applause ]

00:24:54.579 --> 00:24:56.529
>> Thank you, Chris.

00:24:56.529 --> 00:25:00.190
Okay, switch box.

00:25:01.809 --> 00:25:05.109
Chris, [Inaudible] here we go.

00:25:05.109 --> 00:25:05.769
Slides A.

00:25:05.769 --> 00:25:08.809
We did not rehearse that part.

00:25:08.809 --> 00:25:11.059
So that is Chris.

00:25:11.059 --> 00:25:12.460
Okay, so now we created a profile.

00:25:12.460 --> 00:25:16.769
Now we need to deploy to the people,
otherwise, it's kind of useless.

00:25:16.769 --> 00:25:18.089
How can you do that?

00:25:18.089 --> 00:25:25.159
The good old way, via e-mail, via the web, and
now new in 3.0, we have the USB tether from iPCU

00:25:25.160 --> 00:25:32.769
and the really sexy way of doing it is the over the air,
just no strings attached, distributed to people remotely.

00:25:32.769 --> 00:25:35.769
The USB and OTA approach are always encrypted.

00:25:35.769 --> 00:25:37.289
You have no choice there.

00:25:37.289 --> 00:25:42.000
The e-mail and web you do have a choice
if you do want to go encrypted or not.

00:25:42.000 --> 00:25:45.039
Typically, we will say that in most
cases you do want to go encrypted,

00:25:45.039 --> 00:25:47.920
but there are some reasons why you might not want to do.

00:25:47.920 --> 00:25:50.570
For instance, the simplicity of it is one.

00:25:50.569 --> 00:25:53.589
All encrypted profiles are device specific.

00:25:53.589 --> 00:25:59.179
And so if you wanted to deploy a profile to
say, a whole university with 10,000 students,

00:25:59.180 --> 00:26:03.430
you would have to have 10,000 very
unique profiles for each phone.

00:26:03.430 --> 00:26:07.269
And that might be overkill for a profile
that just, you know, gives them a web clip.

00:26:07.269 --> 00:26:09.480
That might not be suitable.

00:26:09.480 --> 00:26:14.630
So it's all about how much effort you want to put into it.

00:26:14.630 --> 00:26:15.650
So the old way.

00:26:15.650 --> 00:26:17.509
Click on the web.

00:26:17.509 --> 00:26:20.970
The profile gets installed in preferences.

00:26:20.970 --> 00:26:23.990
May or may not be encrypted.

00:26:23.990 --> 00:26:27.069
It's very easy to deploy, just put it on the server.

00:26:27.069 --> 00:26:32.109
You can distribute a URL via e-mail or via SMS.

00:26:32.109 --> 00:26:37.000
You can password protect the web
site itself, but not the profile.

00:26:37.000 --> 00:26:40.619
If you want, for some medium security.

00:26:42.500 --> 00:26:50.559
You should set up this MIME type if
you're planning to deploy to 2.X devices.

00:26:50.559 --> 00:26:54.690
In 3.0, if you're deploying only to 3.0
devices, you don't need the MIME time.

00:26:54.690 --> 00:26:58.590
The phone, when it sees .mobileconfig
will do the right thing.

00:26:58.589 --> 00:27:02.419
Extra credit if you know what aspen stands for.

00:27:02.420 --> 00:27:04.670
The other old way of doing it is e-mail.

00:27:04.670 --> 00:27:07.440
You can push it to a user's e-mail account.

00:27:07.440 --> 00:27:09.769
It requires that a user already has an e-mail account.

00:27:09.769 --> 00:27:12.509
So it can be quite out of the box.

00:27:12.509 --> 00:27:16.829
The profile can be encrypted, but doesn't have to be.

00:27:16.829 --> 00:27:22.480
Note that neither of those devices,
approaches, rather, are a true push.

00:27:22.480 --> 00:27:29.089
The user still needs to press the Install
button and go ahead and install the profile.

00:27:29.089 --> 00:27:33.220
New way. Distribution via iPCU USB push.

00:27:33.220 --> 00:27:42.480
So as we -- Chris already showed and we'll see more
demos of that later, you connect a phone to a computer

00:27:42.480 --> 00:27:48.099
and you just press the Install button as you can see in
the screen shot above, and the profile will get installed.

00:27:48.099 --> 00:27:53.179
But still, somebody has to confirm
and press the Install button.

00:27:53.180 --> 00:27:57.549
Or, the new sexy way, profile deployment via OTA.

00:27:57.549 --> 00:28:05.799
Your iPhone just talks to a cloud in the sky, and it's fully
encrypted, it will require some sort of auto authentication,

00:28:05.799 --> 00:28:11.919
like some sort of password that you already have set up with
the company so the device can do a handshake with the server

00:28:11.920 --> 00:28:17.400
with your OTS server, to agree that yes, okay,
I trust you, you're one of our friendly phones.

00:28:17.400 --> 00:28:20.800
And you still have to tap to install it.

00:28:20.799 --> 00:28:26.619
Don't file requests that you would like a totally
automatic push this profile and it has to be installed.

00:28:26.619 --> 00:28:27.589
We know about that.

00:28:27.589 --> 00:28:30.720
And if you actually think about the
problem, it's harder than it seems

00:28:30.720 --> 00:28:37.299
because the generic general case cannot
be solved without user interaction.

00:28:37.299 --> 00:28:47.639
So if you really want to know what's going on behind the
scenes I would like to invite Conrad and, yeah, go ahead.

00:28:47.640 --> 00:28:48.060
[ Inaudible comments ]

00:28:48.059 --> 00:28:55.679
>> -- the encrypted profiles, and
also the profile distribution service.

00:28:55.680 --> 00:28:57.200
So that you can actually get them to there.

00:28:57.200 --> 00:28:59.960
Because obviously setting up an
encrypted channel with the phone is going

00:28:59.960 --> 00:29:03.079
to require a little bit more than
just -- I don't know, guessing.

00:29:03.079 --> 00:29:07.159
So I'm going to basically talk
about encrypted profiles, you know,

00:29:07.160 --> 00:29:11.130
how did we get there, what -- how
do we actually encrypt them.

00:29:11.130 --> 00:29:14.890
Then I'm going to go over the high level steps
that we go through to have them distributed

00:29:14.890 --> 00:29:18.780
from a profile distribution service, and how
we get the phones set up with that service.

00:29:18.779 --> 00:29:24.599
And then at the tail end of it I will actually show
you a demo with like a little Ruby server and Raccoon,

00:29:24.599 --> 00:29:28.339
and just show you basically, you take a couple
of pieces of software, you put that together,

00:29:28.339 --> 00:29:31.169
you can actually get your own solution going.

00:29:31.170 --> 00:29:33.279
So encrypted profiles.

00:29:33.279 --> 00:29:39.109
First of all, as Stan has already pointed out, these things
should be signed so that your users can see, like, hey,

00:29:39.109 --> 00:29:43.589
this profile is actually -- wasn't
tampered with when it was in transit to me.

00:29:43.589 --> 00:29:46.039
And signing them is actually really simple.

00:29:46.039 --> 00:29:50.170
It's just take a profile and turn it into a CMS signed data.

00:29:50.170 --> 00:29:53.940
You know, there's nothing secret or special about it.

00:29:53.940 --> 00:29:55.600
It's fairly simple.

00:29:55.599 --> 00:30:00.819
It came to us that other people had thought that maybe
there was something special about it, but this is it.

00:30:00.819 --> 00:30:04.559
Then of course why are we having these encrypted profiles.

00:30:04.559 --> 00:30:08.099
Well, we want to install some policies
as well as some services,

00:30:08.099 --> 00:30:12.419
and those services will then have some
keys to, you know, the magic parts.

00:30:12.420 --> 00:30:19.610
You want them all installed together because basically if
you give people access to your local network you want them

00:30:19.609 --> 00:30:23.959
to abide -- at least a passcode on their
device, just to make sure that, you know,

00:30:23.960 --> 00:30:29.779
when they leave it in a restaurant, no eone will
be reading their e-mail like, within, 30 seconds.

00:30:29.779 --> 00:30:31.329
So how do we increment them.

00:30:31.329 --> 00:30:38.009
Well, sample answer there too, encrypted profile is just
really that array of payloads that you're going to install.

00:30:38.009 --> 00:30:43.859
All stuffed into a CMS envelope data, and all of
that then goes higher up into an XML file and --

00:30:43.859 --> 00:30:48.519
well, the server will basically give you a technical look
behind the scenes as to how that actually is put together,

00:30:48.519 --> 00:30:51.710
and you should be able to just make it work from there.

00:30:51.710 --> 00:30:53.380
One thing that's also mentioned, of course.

00:30:53.380 --> 00:30:57.210
When you pick encryption, we are
encrypting toward a specific device.

00:30:57.210 --> 00:31:00.970
So you do have to have, you know,
a specific profile for each device.

00:31:00.970 --> 00:31:03.960
You cannot just share those between different devices.

00:31:03.960 --> 00:31:07.759
And that brings me kind of to why we
needed that profile distribution service.

00:31:07.759 --> 00:31:09.920
So let's talk about that for a bit.

00:31:09.920 --> 00:31:14.440
Well, if you want to set up a profile distribution service,
obviously there's this enrollment part where, you know,

00:31:14.440 --> 00:31:16.960
a user picks up their phone and wants to start using it.

00:31:16.960 --> 00:31:21.269
So the first thing to do is figure
out, like, okay, who is this user.

00:31:21.269 --> 00:31:25.079
If we're going to be specific, then you can
also install all the services and configure them

00:31:25.079 --> 00:31:28.069
for this particular individual user
already so that the only thing they have

00:31:28.069 --> 00:31:30.399
to do is install the profile and they're off.

00:31:30.400 --> 00:31:33.700
Second of all, you probably also want
to figure out, hey, what is this device.

00:31:33.700 --> 00:31:36.539
Is this actually an iPhone, what software is it running.

00:31:36.539 --> 00:31:38.859
More about that later.

00:31:38.859 --> 00:31:44.879
So then we need the profile service to get, you
know, the phone has to get enrolled so it can prove

00:31:44.880 --> 00:31:46.350
to the profile service which phone it is.

00:31:46.349 --> 00:31:52.039
And so that the profile service can actually provide
the encrypted profile for this particular phone.

00:31:52.039 --> 00:31:56.849
And after the phone is set up that way and it
comes back and says, like, hey, give me my profile.

00:31:56.849 --> 00:32:00.569
The profile service can now go ahead and figure
out this is the user, this is the device,

00:32:00.569 --> 00:32:02.730
these are all the settings that should go together.

00:32:02.730 --> 00:32:05.579
Let's put them all into a profile and send them off.

00:32:05.579 --> 00:32:11.809
Of course if later on you find that, you know, some
settings are wrong or something needed to be fixed,

00:32:11.809 --> 00:32:17.289
the same way the phone can now come back through that same
profile service and go ahead and pick up a new profile

00:32:17.289 --> 00:32:21.970
that is going to just wholesale replace everything that was
there before, and the user can keep going at that point.

00:32:21.970 --> 00:32:25.039
So I skipped quickly over this certificate enrollment.

00:32:25.039 --> 00:32:29.889
This didn't exist on the phone before,
so with 3.0 we actually now have a form,

00:32:29.890 --> 00:32:31.990
a way of doing certificate enrollment.

00:32:31.990 --> 00:32:35.730
And for CMS we're going to need some X.509 identities.

00:32:35.730 --> 00:32:43.620
So what we did here is basically add enrollment so that
we have a way of avoiding the key ever leaving the device.

00:32:43.619 --> 00:32:48.899
With enrollment, what we do is we generate the key
on the device, we send the public key off to SEA,

00:32:48.900 --> 00:32:53.970
and then basically they can give us back a certificate
with which the profile service can now identify us

00:32:53.970 --> 00:32:58.660
and send us encrypted profiles
targeted specifically at that device.

00:32:58.660 --> 00:33:00.150
For that we use SCEP.

00:33:00.150 --> 00:33:01.650
The request will be pre-authenticated.

00:33:01.650 --> 00:33:06.800
This is to make a seamless experience for the user
so that basically they go through this install step

00:33:06.799 --> 00:33:10.769
and it just goes going, keeps motoring on.

00:33:10.769 --> 00:33:13.799
That enrollment, then finishes for the profile service.

00:33:13.799 --> 00:33:20.079
But you know, this feature enrollment, you could also
use if later on you decide to set up a VPN client base --

00:33:20.079 --> 00:33:24.109
client certificate base VPN in the configuration.

00:33:24.109 --> 00:33:28.789
So you can have it used for these additional
credentials, that on install it will go ahead

00:33:28.789 --> 00:33:33.950
and enroll a couple more entities for the
various services that you want to provide.

00:33:33.950 --> 00:33:36.549
So couple words about SCEP.

00:33:36.549 --> 00:33:40.659
It was a practical choice for us because it
basically allowed to do that automatic enrollment.

00:33:40.660 --> 00:33:47.220
And the profile service will use that in a way to prove
to the CA that, hey, this request that you're going

00:33:47.220 --> 00:33:51.930
to get actually should be handled, and you
should basically give out a certificate.

00:33:51.930 --> 00:33:53.620
It is limited to RSA, but so are we.

00:33:53.619 --> 00:33:57.769
So this only goes for RSA key pairs and X.509 entities.

00:33:57.769 --> 00:34:02.089
And then you have the choice of
picking 1024 or 2048-bit keys.

00:34:02.089 --> 00:34:08.079
One thing to be said about 2048-bit
keys is, like, nice big secure.

00:34:08.079 --> 00:34:11.719
But they take a while to generate
on a device, especially older ones.

00:34:11.719 --> 00:34:18.569
So you may want to find -- strike the good balance
between picking maybe a smaller key size and you know,

00:34:18.570 --> 00:34:23.940
having it valid for a shorter amount
of time, which also reduces your risk.

00:34:23.940 --> 00:34:26.369
So the challenge for pre authentication
needs to go in there.

00:34:26.369 --> 00:34:32.130
So you need to set up a way by which you can have the
profile service prove to the CA on the other side,

00:34:32.130 --> 00:34:36.700
because the phone basically gets all these
details, turns around, talks to the CA,

00:34:36.699 --> 00:34:39.750
and says, hey, enroll this public key for me.

00:34:39.750 --> 00:34:43.530
So you have to have a way to have both
of them agree that this should be done.

00:34:43.530 --> 00:34:49.700
And so the profile service has to provide
something that the CA can then validate to see

00:34:49.699 --> 00:34:53.849
that it should issue this a certificate, yes or no.

00:34:53.849 --> 00:34:56.059
Another thing to mention is as we were building the solution

00:34:56.059 --> 00:35:00.960
at Apple we do use this to deploy
on demand VPN for ourselves.

00:35:00.960 --> 00:35:08.490
But we implemented our own solution to basically mesh
better with the architecture of our IT organization.

00:35:08.489 --> 00:35:13.889
So in that, we missed a couple of small interoperability
issues that we actually need to still fix.

00:35:13.889 --> 00:35:18.699
So if you have an existing SCEP server, you
can actually go ahead and use that one instead,

00:35:18.699 --> 00:35:22.449
you don't have to hack up something
because you already did the work.

00:35:22.449 --> 00:35:28.339
So with that, let's -- I wanted to
also quickly touch on USB versus OTA.

00:35:28.340 --> 00:35:33.620
It was already kind of mentioned that as soon as you
get more and more profiles that it can get out of hand.

00:35:33.619 --> 00:35:35.929
But at a high level, both function the same way.

00:35:35.929 --> 00:35:42.419
With USB tether you obviously have the trusted connection
already, so there's no need to set up, like, a web service

00:35:42.420 --> 00:35:45.010
and make the phone actually talk
to it securely so much any more.

00:35:45.010 --> 00:35:48.980
You can basically have them quickly negotiate
the secrets on the first tether connection,

00:35:48.980 --> 00:35:53.570
and then later on you can actually
send encrypted profiles over e-mail,

00:35:53.570 --> 00:35:56.110
or you can actually put them on a web server as well.

00:35:56.110 --> 00:36:02.300
The updates do have to be pushed, and a profile
service, the phone can go ahead and it can just go back

00:36:02.300 --> 00:36:06.430
to profile service, say hey, give me a new
one, and that will happen; in the iPCU case,

00:36:06.429 --> 00:36:14.250
you will have to generate them, put them somewhere, and
then ask the user to go ahead and download the new one.

00:36:14.250 --> 00:36:20.739
So as you can see, it's a little more involved up front
to set up OTA, but it will scale to more devices, which,

00:36:20.739 --> 00:36:24.619
you know, eventually you have to make a decision there.

00:36:24.619 --> 00:36:27.859
So the overview of how this is going to go.

00:36:27.860 --> 00:36:31.840
I'm going to quickly touch on the various steps,
then we're going to go into a little bit more detail,

00:36:31.840 --> 00:36:36.350
and then finally I will actually show you that
this works and what it looks like to the user.

00:36:36.349 --> 00:36:40.699
I mentioned the profile service and I mentioned SCEP server.

00:36:40.699 --> 00:36:45.549
I'm actually pulling them apart here just to make it
a little more clear that there is a profile service

00:36:45.550 --> 00:36:49.900
that does all the handling of the profiles, and
then it can turn around and have the phone go ahead

00:36:49.900 --> 00:36:54.130
and talk to certificate authority
to enroll that certificate.

00:36:54.130 --> 00:36:56.660
So first of all, we need to get started here.

00:36:56.659 --> 00:36:57.389
What can you do?

00:36:57.389 --> 00:36:58.579
Well, let's make this simple.

00:36:58.579 --> 00:36:59.860
A URL would be the easiest way.

00:36:59.860 --> 00:37:04.180
You can use an SMS to send it out to
the phone, but this starts with a URL.

00:37:04.179 --> 00:37:06.169
That should make it relatively easy.

00:37:06.170 --> 00:37:08.590
Then the phone has to go ahead and authenticate.

00:37:08.590 --> 00:37:15.600
Possibly the user, but the device as well to the profile
service, and see if it's willing to let it enroll.

00:37:15.599 --> 00:37:19.789
If things go well, the profile service
will now give it enough information

00:37:19.789 --> 00:37:24.989
that the phone can go ahead and
enroll in the profile service.

00:37:24.989 --> 00:37:28.119
And get a profile service certificate, that is.

00:37:28.119 --> 00:37:31.519
Then it can go back to the profile
service and say, well, I'm enrolled.

00:37:31.519 --> 00:37:32.679
Here's my certificate.

00:37:32.679 --> 00:37:34.039
Where's my profile.

00:37:34.039 --> 00:37:38.699
Gets the encrypted profile, and as a final step,
the phone will go ahead and install that profile.

00:37:38.699 --> 00:37:42.659
And may actually find additional
certificates it needs to go ahead and enroll.

00:37:42.659 --> 00:37:45.369
And as such, it can go and complete those steps

00:37:45.369 --> 00:37:50.549
with the certificate authority before
all the services get configured.

00:37:50.550 --> 00:37:52.830
So first step.

00:37:52.829 --> 00:37:53.460
The boot strap.

00:37:53.460 --> 00:37:55.059
We have a URL.

00:37:55.059 --> 00:37:58.519
We can go ahead and send out the
HTTPS request to the profile service.

00:37:58.519 --> 00:38:06.150
At this point we have the option of authenticating the user,
making the user use whatever authentication Safari supports,

00:38:06.150 --> 00:38:08.570
and have them put in user name and password.

00:38:08.570 --> 00:38:12.250
The profile service can now, you
know, start keeping track of, like,

00:38:12.250 --> 00:38:16.690
who this user is by adding an authorization
token to the payload it's going to send back.

00:38:16.690 --> 00:38:22.519
It's going to send the device a payload saying
hey, the profile service is at this URL.

00:38:22.519 --> 00:38:27.750
Here's the device attributes I'd like you to
tell me, so tell me what kind of device this is.

00:38:27.750 --> 00:38:34.139
And it will also include that challenge to basically
point it to which user authenticated in this step,

00:38:34.139 --> 00:38:38.269
so that in the next step we can basically put
all of that information together as we get ready

00:38:38.269 --> 00:38:40.250
to enroll that profile service certificate.

00:38:40.250 --> 00:38:47.679
So to authenticate the device, the device goes ahead and
picks up all these device attributes that are required.

00:38:47.679 --> 00:38:54.119
It can tell you what build it's running, it can tell
you what device, it can give you the unique device ID.

00:38:54.119 --> 00:38:57.839
It will sign all of that with the device certificate.

00:38:57.840 --> 00:39:01.630
Again, this is a CMS signed data, trivial thing to check.

00:39:01.630 --> 00:39:05.550
And this way you will know, because of
the device certificate, it's an iPhone,

00:39:05.550 --> 00:39:09.480
and because of the contents, what
version it's currently running.

00:39:09.480 --> 00:39:13.000
As a result, the profile service will
say, like, hey, that looks good to me.

00:39:13.000 --> 00:39:22.210
Send the SCEP payload to the device for it to go
ahead and enroll a service certificate and off we go.

00:39:22.210 --> 00:39:24.289
So what does that look like.

00:39:24.289 --> 00:39:25.940
Well, that's the SCEP step.

00:39:25.940 --> 00:39:28.670
You can read about that elsewhere more specifically.

00:39:28.670 --> 00:39:32.829
But in short, the device generates the key pair.

00:39:32.829 --> 00:39:40.590
The key pair goes into a CSR, [Inaudible] and all of that
gets sent in an SCEP request to the certificate authority.

00:39:40.590 --> 00:39:45.600
The authority can then pull out that challenge,
can check, hey, is this little challenge here,

00:39:45.599 --> 00:39:48.099
was that actually signed by the profile service?

00:39:48.099 --> 00:39:49.900
Yep. It was, okay, good.

00:39:49.900 --> 00:39:51.590
Go ahead, issue that certificate.

00:39:51.590 --> 00:39:53.440
Send it back in an SCEP reply.

00:39:53.440 --> 00:39:59.329
The phone will go ahead, verify that reply that they got it
back from the service that actually asked for a certificate.

00:39:59.329 --> 00:40:00.750
And we're done.

00:40:00.750 --> 00:40:04.170
So let's get an encrypted profile.

00:40:04.170 --> 00:40:07.430
Well you see the same step again,
really, as the previous time.

00:40:07.429 --> 00:40:11.869
The device is going to go ahead now and send the
device attributes, but this time it's actually going

00:40:11.869 --> 00:40:14.089
to use the profile service identity that is now acquired.

00:40:14.090 --> 00:40:17.760
It just got that profile service certificate, put
them together with the private key, there you go.

00:40:17.760 --> 00:40:19.160
You've got a identity.

00:40:19.159 --> 00:40:22.549
So we sign the device attributes with that identity.

00:40:22.550 --> 00:40:23.840
Send it to the profile service.

00:40:23.840 --> 00:40:27.900
The profile service can now look at that
certificate and identify the device.

00:40:27.900 --> 00:40:35.610
And can go ahead and prep that specific configuration for
the device, encrypt it for the device, and send it back.

00:40:35.610 --> 00:40:41.010
So one thing to mention about this step is this is not
only the step during which you get the first profile,

00:40:41.010 --> 00:40:44.900
and this will also explain why we're sending
these device attributes again in this step.

00:40:44.900 --> 00:40:51.010
When the phone comes back, say a month later or so, and one
of its identities has expired and it needs to get a new one,

00:40:51.010 --> 00:40:52.680
it will send you the device attributes again.

00:40:52.679 --> 00:40:56.889
So you can recheck what version of the software
are you running now, just to, you know,

00:40:56.889 --> 00:41:01.500
figure out what services you should
have access to and which ones maybe not.

00:41:01.500 --> 00:41:03.599
And then the final step.

00:41:03.599 --> 00:41:05.079
We get this encrypted profile.

00:41:05.079 --> 00:41:07.829
You can see the policies with the
services and the credentials.

00:41:07.829 --> 00:41:09.509
They're all packed together there.

00:41:09.510 --> 00:41:11.090
And they all install in one go.

00:41:11.090 --> 00:41:13.539
And obviously, your keys to the
castle here are the credentials.

00:41:13.539 --> 00:41:17.900
But the credentials don't necessarily
have to be included, as I said.

00:41:17.900 --> 00:41:23.750
They can also be generated at this point, and then
the phone can go off during install and go ahead,

00:41:23.750 --> 00:41:30.900
put together an SCEP request, go ahead get that
certificate enrolled, stick it into the configuration.

00:41:30.900 --> 00:41:32.809
And move along.

00:41:32.809 --> 00:41:35.639
And with that, I finally get to the cool part.

00:41:35.639 --> 00:41:40.929
Now going to demonstrate how this works to you.

00:41:40.929 --> 00:41:48.989
And the thing that I'm going to
demonstrate to you is -- we have a phone.

00:41:48.989 --> 00:41:53.839
I'm going to demonstrate to you a service that was
basically put together with a simple Ruby service,

00:41:53.840 --> 00:42:01.769
and -- I'm going to steal the sticky-tape here.

00:42:03.210 --> 00:42:09.820
A simple Ruby service, and a Raccoon running on
my laptop, which is also the profile service.

00:42:09.820 --> 00:42:11.760
So it's kind of an all in one service.

00:42:11.760 --> 00:42:16.570
Just to show to you that basically you can --

00:42:16.570 --> 00:42:23.740
I'm glad that they got less fingerprints on
the new models, because this one is horrible.

00:42:23.739 --> 00:42:29.250
Yeah, you don't need those.

00:42:29.250 --> 00:42:32.159
So as you can see, we can get to this profile service here.

00:42:32.159 --> 00:42:34.980
This is the first time I'm actually connecting to it.

00:42:34.980 --> 00:42:40.050
This profile service goes ahead and sets up its own
self signed certificate because it is going to have

00:42:40.050 --> 00:42:48.070
to issue a whole bunch of certs to the -- nice -- okay.

00:42:56.710 --> 00:42:57.900
There it is.

00:42:57.900 --> 00:43:00.460
I don't know why I plugged that in.

00:43:00.460 --> 00:43:03.019
That's only going to get iPCU involved in this as well.

00:43:03.019 --> 00:43:04.199
So we don't want that.

00:43:04.199 --> 00:43:07.199
One step I already did here and I'm
actually going to quickly show you this.

00:43:07.199 --> 00:43:12.509
Since I have a self signed certificate here to start
out with, I needed to make the device trust it,

00:43:12.510 --> 00:43:14.770
because this is basically going to be the root of all trust.

00:43:14.769 --> 00:43:18.280
It's going to be the thing that issues the
VPN certificate is going to be the thing

00:43:18.280 --> 00:43:20.670
that issues me the profiles and all of that.

00:43:20.670 --> 00:43:26.639
So what I did was I went ahead and installed
the profile service root certificate here.

00:43:26.639 --> 00:43:32.739
And with that, basically the phone will now trust
anything that was issued from that CA going back on down.

00:43:32.739 --> 00:43:36.409
So going back to the profile service,
we have the root certificate on there.

00:43:36.409 --> 00:43:41.839
You can basically boot strap your process by getting an
actual certificate from a CA and get started with that,

00:43:41.840 --> 00:43:46.870
then go to an HTTPS web site and pick up the
organization's root certificate from there.

00:43:46.869 --> 00:43:51.109
In my case, I have to kinda you know,
dance around and say it's all good.

00:43:51.110 --> 00:43:54.579
Now let's go ahead and enroll.

00:43:54.579 --> 00:43:57.199
So this is the first boot strap URL.

00:43:57.199 --> 00:44:02.309
I'm not typing in the URL in this case, I'm basically
going ahead and just going into the profile service.

00:44:02.309 --> 00:44:07.230
After all of this I have already done user
authentication which Safari helpfully remembered for me

00:44:07.230 --> 00:44:10.260
from a previous time, so you haven't seen that either.

00:44:10.260 --> 00:44:14.270
The service will of course, you know,
prove to you how you can make that work.

00:44:14.269 --> 00:44:20.750
The profile service comes back and says hey, this is a
profile service, would you like to get enrolled in this one?

00:44:20.750 --> 00:44:23.289
I say, like, sure, let's do that.

00:44:23.289 --> 00:44:26.190
And now an awful lot of things are going to happen at once.

00:44:26.190 --> 00:44:31.349
Because we're going to enroll in this profile service, which
is going to ask us to go ahead and generate a key pair.

00:44:31.349 --> 00:44:34.369
Then go to the SCEP service in the background.

00:44:34.369 --> 00:44:35.969
So get that certificate enrolled.

00:44:35.969 --> 00:44:37.809
Go back to the profile service.

00:44:37.809 --> 00:44:40.559
Say, like, hey, where's my encrypted profile.

00:44:40.559 --> 00:44:47.940
And it's slower than normally so I've got a
little chance to tell you what's going to happen.

00:44:47.940 --> 00:44:52.090
The profile service that you see now is going
to switch into the actual encrypted profile.

00:44:52.090 --> 00:44:54.559
You see that the screen changed to secret layer.

00:44:54.559 --> 00:44:57.769
So now I'm going to have a configuration
profile to access that.

00:44:57.769 --> 00:45:01.269
In the top you can see that now we're actually
going to go ahead and generating more keys

00:45:01.269 --> 00:45:04.980
and enrolling more certificates, because if you look
at the contained section you'll see that we're going

00:45:04.980 --> 00:45:08.530
to install a web clip to point
us to where the secret layer is.

00:45:08.530 --> 00:45:15.940
We're going to set up some VPN settings to do a
client-side certificate off to a VPN server on my machine.

00:45:15.940 --> 00:45:21.829
And then there's an SCEP payload because we're not
including the client-side entity in the payload yet,

00:45:21.829 --> 00:45:25.670
we're actually just telling it, hey,
go ahead and get that one enrolled.

00:45:25.670 --> 00:45:33.750
Could have shown you that there's more here, and if
you can see the top -- this view is not that friendly.

00:45:33.750 --> 00:45:39.539
But you can see that I basically got
a profile service issued certificate.

00:45:39.539 --> 00:45:44.570
And that actually got used in my VPN crossing the moat.

00:45:44.570 --> 00:45:45.670
Configuration.

00:45:45.670 --> 00:45:47.889
So let's see what we have.

00:45:47.889 --> 00:45:52.889
We can go back to Springboard and you'll see --
oop, there is the new web clip to the secret layer.

00:45:52.889 --> 00:45:58.859
And that will basically be a URL that I set
up to have on demand VPN launch and use VPN

00:45:58.860 --> 00:46:02.370
to go -- to get in there and then hit the URL.

00:46:02.369 --> 00:46:04.489
Obviously I stopped the demo short a little bit here.

00:46:04.489 --> 00:46:06.779
What's going to happen is it's going to bring up VPN.

00:46:06.780 --> 00:46:09.990
It's actually going to ask me for
X off user name and password,

00:46:09.989 --> 00:46:13.329
because I don't have enough Raccoon
food to turn that part off.

00:46:13.329 --> 00:46:20.569
But at this point we will already have
negotiated with the client-side identification.

00:46:20.570 --> 00:46:28.050
So what you will see will go to the URL, it
launches Safari, there's a URL that doesn't exist.

00:46:28.050 --> 00:46:29.950
Then the VPN says hey, X off.

00:46:29.949 --> 00:46:32.679
But we're not requiring that part.

00:46:32.679 --> 00:46:33.399
And there we go.

00:46:33.400 --> 00:46:36.260
There's the message of the day that
was installed on the Raccoon service.

00:46:36.260 --> 00:46:41.710
This is the best I could do to prove to you that
I'm connecting to my VPN server there, and okay.

00:46:41.710 --> 00:46:46.280
And as you can -- may have noticed in the
top there's the little VPN icon that came up.

00:46:46.280 --> 00:46:57.340
So it's going, and if we go back to our configuration
now in general and in networking you can see

00:46:57.340 --> 00:47:01.870
that we now have VPN set up, and there is our profile.

00:47:01.869 --> 00:47:05.409
One thing to note about the VPN profile
is because everything was managed,

00:47:05.409 --> 00:47:07.789
we're not actually going to let
you change anything about it.

00:47:07.789 --> 00:47:11.829
You can turn off the on demand
switch, but that's all you can do.

00:47:11.829 --> 00:47:14.960
And with that we can get out of there.

00:47:14.960 --> 00:47:17.760
Now you can see, we've been connected for 45 seconds.

00:47:17.760 --> 00:47:24.510
Wow. So going back into the profiles
I wanted to show you one more thing.

00:47:24.510 --> 00:47:25.700
There's now two profiles.

00:47:25.699 --> 00:47:30.679
One is the root certificate authority, and the
second one is the actual configuration profile

00:47:30.679 --> 00:47:32.389
that you've already seen before.

00:47:32.389 --> 00:47:37.639
I marked it as it's already expired so I can show you
what's going to happen when something goes wrong with one

00:47:37.639 --> 00:47:42.440
of these identities, if VPN at some point kicks
you out and says, yep, that's no longer good.

00:47:42.440 --> 00:47:43.670
You end up at this screen.

00:47:43.670 --> 00:47:47.559
And there will be a button at the bottom where you
can say, hey, go ahead and update this profile.

00:47:47.559 --> 00:47:53.049
And then it will tell you, like, hey, I -- you
know, existing profile could not be updated.

00:47:53.050 --> 00:47:54.289
But I can get you a new one.

00:47:54.289 --> 00:47:55.090
Would you like a new one.

00:47:55.090 --> 00:47:56.390
I'll say, like, sure.

00:47:56.389 --> 00:47:58.170
And it will go ahead.

00:47:58.170 --> 00:47:59.619
And now we're going to get a new one.

00:47:59.619 --> 00:48:02.420
And notice that VPN icon at the top,
what's going to happen is it's going

00:48:02.420 --> 00:48:08.110
to uninstall the old configuration profile,
then install the new one on top of it.

00:48:08.110 --> 00:48:12.720
Of course I should have told it to go install
and replace in the meanwhile, while I'm talking.

00:48:12.719 --> 00:48:15.709
But basically what you're going to see
is the VPN icon is going to be pulled

00:48:15.710 --> 00:48:18.559
down because I just removed the configuration.

00:48:18.559 --> 00:48:26.059
And now we're going ahead and generating a new key just
for the VPN client off, and then we're going to go ahead

00:48:26.059 --> 00:48:31.489
and enroll that certificate again, and then at the
end of it I should be at the same point as I was.

00:48:31.489 --> 00:48:38.109
You get a good feel for what happens
when you demo to some stage.

00:48:38.110 --> 00:48:42.220
If you generate a couple thousand 24 bit
keys, the first couple ones are really --

00:48:42.219 --> 00:48:47.980
go really well because you have lots of
entropy, and then you slowly run out.

00:48:49.579 --> 00:48:50.730
And there we go.

00:48:50.730 --> 00:48:52.030
We finally generated the key.

00:48:52.030 --> 00:48:52.730
We enroll it.

00:48:52.730 --> 00:48:54.429
We're done.

00:48:54.429 --> 00:48:59.619
Go back, there's no -- you see,
there's only one secret layer icon.

00:48:59.619 --> 00:49:01.199
Yeah, yeah.

00:49:01.199 --> 00:49:01.879
There we go.

00:49:01.880 --> 00:49:04.360
And there's VPN again.

00:49:04.360 --> 00:49:06.920
Go -- I'm so happy to be back.

00:49:06.920 --> 00:49:09.380
All right, last step.

00:49:09.380 --> 00:49:15.420
We're going to go ahead and remove this
just to show you that it cleans up nicely.

00:49:15.420 --> 00:49:20.940
I didn't actually demo you, like, restrictions in here.

00:49:20.940 --> 00:49:27.559
This could have basically asked me for a passcode, like,
right in the middle of doing this install to tell me like,

00:49:27.559 --> 00:49:30.650
hey, you don't have a passcode
yet, I want you to install one.

00:49:30.650 --> 00:49:32.420
I didn't include that here.

00:49:32.420 --> 00:49:34.090
That would have probably been nice to show you.

00:49:34.090 --> 00:49:38.210
But I'll leave that as an exercise for you.

00:49:38.210 --> 00:49:41.289
The profile service we're going
to be at that lab afterwards.

00:49:41.289 --> 00:49:47.500
You can get that Ruby file from me and you can
even peek at some of the Raccoon notes if you like.

00:49:47.500 --> 00:49:53.460
But that Ruby file should basically be like your best
attempt as a technical piece of documentation for you

00:49:53.460 --> 00:49:57.019
to figure out a service like this yourself.

00:49:57.019 --> 00:50:03.840
Then if we go back here, let's quickly look for VPN,
because hey, it's no longer configured, all right.

00:50:03.840 --> 00:50:08.200
And just to prove to you that this wasn't
all fake we can try to reload this URL again,

00:50:08.199 --> 00:50:10.689
but you know, it's just not going to go anywhere.

00:50:10.690 --> 00:50:11.909
Okay, we do that.

00:50:11.909 --> 00:50:18.009
Anyway, with that I want to turn it over back to Stan.

00:50:18.010 --> 00:50:21.620
[ Applause ]

00:50:21.619 --> 00:50:24.210
>> Thank you, Conrad.

00:50:24.210 --> 00:50:30.679
So this was one of the reasons why I was
asking initially were you in the right room.

00:50:30.679 --> 00:50:35.769
This is the really new way to deploy profiles.

00:50:35.769 --> 00:50:37.119
It really scales well.

00:50:37.119 --> 00:50:41.750
The whole USB tether thing is great for small
shops, when you don't want to set up a server.

00:50:41.750 --> 00:50:47.539
But this thing is really great if you have several
people, if you have, you know, 100 people it will be hard

00:50:47.539 --> 00:50:53.190
to get them all to your IT person's
cubicle and connect and do things.

00:50:53.190 --> 00:50:54.829
So now we have installed profiles.

00:50:54.829 --> 00:50:57.650
Now what are we going to do with them.

00:50:57.650 --> 00:51:00.789
Well, one of the things is they need to be backed up.

00:51:00.789 --> 00:51:07.940
Just this last year if you back up a device and then you
restore it to the same device just because you erased it

00:51:07.940 --> 00:51:10.740
or something like that, the profiles will be there.

00:51:10.739 --> 00:51:18.869
If an encrypted profile has been installed on the
device via USB or e-mail or whatever, either way,

00:51:18.869 --> 00:51:22.969
if it's encrypted it will require
an encrypted back up in iTunes.

00:51:22.969 --> 00:51:27.469
There's a new feature to optionally
require encrypted back ups.

00:51:27.469 --> 00:51:34.480
If you have an encrypted profile, you have to have encrypted
back ups, or it will not allow you to back up your phone.

00:51:34.480 --> 00:51:35.750
There's no migration.

00:51:35.750 --> 00:51:41.460
That's in a way a security feature
for open cubicle landscape.

00:51:41.460 --> 00:51:46.610
Prairie dogging is good, stealing other
people's configurations and secrets is not.

00:51:46.610 --> 00:51:53.420
So if you take a phone or you buy a new phone or you
go out and buy the 3GS and you have profiles installed

00:51:53.420 --> 00:51:58.880
on your old phone, you back that up and you push it
to the new phone, the profiles will not come across,

00:51:58.880 --> 00:52:01.190
the Keychain is not going to come across as well.

00:52:01.190 --> 00:52:05.389
So you have to reinstall those by hand.

00:52:05.389 --> 00:52:07.420
Updating profiles.

00:52:07.420 --> 00:52:11.450
So Conrad was showing there, that, you
know, he pressed the Update button.

00:52:11.449 --> 00:52:17.409
The Update button is available only
when you hit an OTA installed profile.

00:52:17.409 --> 00:52:25.259
If for some reason your IT organization pushes out a
new profile, and again, there is no real push in 3.0,

00:52:25.260 --> 00:52:32.500
but when they tell you hey, there's a new profile
available, the update works roughly as follows --

00:52:32.500 --> 00:52:36.929
you navigate or you get an e-mail to the same profile again.

00:52:36.929 --> 00:52:38.329
You press Install.

00:52:38.329 --> 00:52:43.360
It so to speak deinstalls the old profile
and puts the new one in its place.

00:52:43.360 --> 00:52:46.650
All of this is triggered by the profile identifier.

00:52:46.650 --> 00:52:50.829
When you look at the XML documentation of
the profile or when you look at the iPCU,

00:52:50.829 --> 00:52:54.750
there's that one identifier thing that's
the most important thing, has to be unique.

00:52:54.750 --> 00:53:01.480
So you can have unique identifiers for your
Chicago, San Francisco, what not place.

00:53:01.480 --> 00:53:07.679
And if a new profile that comes into the device has the
same identifier as something that's already on the phone,

00:53:07.679 --> 00:53:12.059
that whole thing will get uninstalled,
the new thing will get replaced.

00:53:12.059 --> 00:53:15.059
It will be placed in its place.

00:53:15.059 --> 00:53:18.840
We were talking about security a lot.

00:53:18.840 --> 00:53:27.260
And you know, that you can't -- one of the new things
is that you can't update a profile with another one

00:53:27.260 --> 00:53:30.280
that does not come from the same signing authority.

00:53:30.280 --> 00:53:34.150
Because for instance we were talking about
nonremovable profiles, we'll talk about that

00:53:34.150 --> 00:53:36.059
and we'll show you more about that later.

00:53:36.059 --> 00:53:38.079
You flag a profile as nonremovable.

00:53:38.079 --> 00:53:44.009
Well, somebody could issue himself a profile with
iPCU that you can download off Apple's web site

00:53:44.010 --> 00:53:47.630
that doesn't have the nonremovable flag
set, and it would just supercede it.

00:53:47.630 --> 00:53:48.960
And then you could remove it.

00:53:48.960 --> 00:53:50.470
So that would kind of be a joke.

00:53:50.469 --> 00:53:57.349
So in order to install a new updated profile
it has to come from the same signing authority.

00:53:57.349 --> 00:53:58.400
Removing profiles.

00:53:58.400 --> 00:54:02.480
Again, normally unrestricted, but
then can be flagged as nonremovable.

00:54:02.480 --> 00:54:06.590
My plea to all of you is be really careful with that.

00:54:06.590 --> 00:54:08.320
At least provide a removal password.

00:54:08.320 --> 00:54:12.390
We have encrypted the profile so there is a
place in iPCU where you can enter in a password.

00:54:12.389 --> 00:54:13.650
It will be encrypted.

00:54:13.650 --> 00:54:15.000
Nobody's ever going to see it.

00:54:15.000 --> 00:54:20.269
And then the IT person can give to the
end user, hey, the password is fubar.

00:54:20.269 --> 00:54:22.929
And it may be flat-out illegal.

00:54:22.929 --> 00:54:26.389
So think about that.

00:54:26.389 --> 00:54:27.889
So enough talk.

00:54:27.889 --> 00:54:34.440
I would like to invite the other Chris who ironically
is other Chris's roommate, office mate, on stage,

00:54:34.440 --> 00:54:36.619
who is going to show you the user experience.

00:54:36.619 --> 00:54:38.389
[ Applause ]

00:54:38.389 --> 00:54:43.829
>> Hi everyone, I'm Chris Pavicich,
I am along with Chris Skogen one

00:54:43.829 --> 00:54:47.210
of the other iPhone Configuration Utility engineers.

00:54:47.210 --> 00:54:52.490
And I'd like to talk to you today about the
on-device experience with configuration profiles.

00:54:52.489 --> 00:54:56.729
So I'm going to go ahead and install
a couple of them from an e-mail.

00:54:56.730 --> 00:55:01.210
And I'm also going to show you
doing a tethered install with iPCU.

00:55:03.480 --> 00:55:19.719
So bear with me for a second while I get set up.

00:55:19.719 --> 00:55:21.209
So here's my iPhone.

00:55:21.210 --> 00:55:24.400
I'm a new employee at Acme Incorporated.

00:55:24.400 --> 00:55:28.800
And my System Administrator e-mailed me
out a couple of configuration profiles.

00:55:28.800 --> 00:55:34.700
So I'm going to go into Mobile Mail,
and I see that Chris sent me a couple

00:55:34.699 --> 00:55:36.779
of configuration profiles to help me get started.

00:55:36.780 --> 00:55:39.940
I'm going to go ahead and install this first one.

00:55:39.940 --> 00:55:46.630
And you see that Mobile Mail actually when
you send mobile config files as attachments,

00:55:46.630 --> 00:55:49.090
recognizes them, and it knows how to handle them.

00:55:49.090 --> 00:55:53.750
So I'm going to go ahead and I'm going to
get started with installing this profile.

00:55:53.750 --> 00:55:56.599
And I'm just going to tap on it.

00:55:56.599 --> 00:55:57.679
Launches the Settings app.

00:55:57.679 --> 00:56:00.219
And it brings me to the Install screen.

00:56:00.219 --> 00:56:03.129
And we get a nice summary, the name of the profile.

00:56:03.130 --> 00:56:04.869
This one hasn't been signed.

00:56:04.869 --> 00:56:05.609
A description.

00:56:05.610 --> 00:56:07.710
This one's got some web clips in it.

00:56:07.710 --> 00:56:11.869
When I received, I got it today, and it has three web clips.

00:56:11.869 --> 00:56:16.279
But I'm going to see more details about
the payloads in the individual profile.

00:56:16.280 --> 00:56:19.210
I can tap More Details.

00:56:19.210 --> 00:56:20.710
I see that I'm going to get three web clips.

00:56:20.710 --> 00:56:26.579
I'm going to get access to our wiki,
our lunch menu, and our main web site.

00:56:26.579 --> 00:56:27.659
So that looks pretty good to me.

00:56:27.659 --> 00:56:30.409
I want to go ahead and install that.

00:56:30.409 --> 00:56:33.409
So I'm going to tap Install.

00:56:33.409 --> 00:56:37.649
So an alert pops up here letting me
know that this profile wasn't signed.

00:56:37.650 --> 00:56:41.210
So the authenticity can't be verified.

00:56:41.210 --> 00:56:46.409
And it's also letting me know that installing this
profile is going to change some settings on my device.

00:56:46.409 --> 00:56:51.259
I'm good with that, I really -- I want these web
clips, so I'm going to go ahead and tap Install now.

00:56:54.119 --> 00:56:56.319
It's going to do its magic.

00:56:56.320 --> 00:57:02.610
Lets me know the profile is installed, and I'm done.

00:57:02.610 --> 00:57:04.829
Takes me back out to Mobile Mail where I came from.

00:57:04.829 --> 00:57:07.969
And let me show you actually that
it did install those web clips.

00:57:07.969 --> 00:57:15.639
So I'm going to hop back out to Springboard, and you see
it added three new web clips to my Springboard desktop.

00:57:15.639 --> 00:57:19.909
Chris also sent me another profile, I
think with some Wi-Fi settings in it

00:57:19.909 --> 00:57:24.690
so that I could access the corporate wireless
network while I'm in the office using my phone.

00:57:24.690 --> 00:57:31.079
I'm going to go ahead and install that too.

00:57:31.079 --> 00:57:33.139
So yeah, there's my Wi-Fi profile.

00:57:33.139 --> 00:57:34.039
I want to install that.

00:57:34.039 --> 00:57:35.239
Go ahead and tap on it.

00:57:35.239 --> 00:57:37.909
Again, it will launch settings automatically.

00:57:37.909 --> 00:57:39.379
Bring me to the installer screen.

00:57:39.380 --> 00:57:43.869
And you see that this profile summary screen
is slightly different from the last one

00:57:43.869 --> 00:57:46.659
in that it shows me who signed this profile.

00:57:46.659 --> 00:57:48.019
This one's been signed.

00:57:48.019 --> 00:57:49.369
But it's not been verified.

00:57:49.369 --> 00:57:56.989
So I don't -- the phone in this case doesn't
trust the CA that signed this profile.

00:57:56.989 --> 00:57:59.069
But it has been signed.

00:57:59.070 --> 00:58:05.269
And again, I can see what's -- payloads are in this
profile, there's a Wi-Fi network and a restriction.

00:58:05.269 --> 00:58:07.880
Let me see what those are.

00:58:07.880 --> 00:58:12.470
It looks like -- I'm not going to be able to use
YouTube if I want access to the Wi-Fi network.

00:58:12.469 --> 00:58:18.000
And that goes back to the carrot and
stick approach Stan mentioned earlier.

00:58:18.000 --> 00:58:24.869
You may need to give your users access to VPN, Wi-Fi
network, and there might be certain rules they have

00:58:24.869 --> 00:58:28.059
to play by, whether it's passcode restriction,

00:58:28.059 --> 00:58:32.150
they can't use explicit content, they
can't install apps on their phone.

00:58:32.150 --> 00:58:35.800
So I'm pretty happy with this, I
want access to the Wi-Fi network.

00:58:35.800 --> 00:58:39.490
And I'm willing to deal with losing YouTube.

00:58:39.489 --> 00:58:43.129
So I'm going to go ahead and install that.

00:58:43.130 --> 00:58:49.050
So again, I -- it tells me -- the authenticity
of this profile couldn't be verified.

00:58:49.050 --> 00:58:53.150
Installing this profile is going to
change some settings on my phone.

00:58:53.150 --> 00:59:00.670
And once this profile has been installed on the device
my System Administrator has locked this profile down

00:59:00.670 --> 00:59:05.280
and said that the only way to remove
it is with an administrative password.

00:59:05.280 --> 00:59:07.720
That was embedded in this profile.

00:59:07.719 --> 00:59:11.619
I'm okay with that, I really want
access to the Wi-Fi network.

00:59:11.619 --> 00:59:14.460
I'm going to hit Install now.

00:59:14.460 --> 00:59:20.559
As Stan mentioned earlier, if you leave any
information out of a profile that's necessary for it

00:59:20.559 --> 00:59:24.150
to work, the user will get prompted for it.

00:59:24.150 --> 00:59:27.670
I already know my Wi-Fi password, so
I'm going to go ahead and enter it.

00:59:27.670 --> 00:59:31.970
Tap Next. The profile installed.

00:59:31.969 --> 00:59:34.019
And we're good to go.

00:59:34.019 --> 00:59:38.860
So as I mentioned, this profile was locked down,
so you had to have a password to remove it.

00:59:38.860 --> 00:59:41.710
And I want to show you what that looks like.

00:59:41.710 --> 00:59:43.579
So I'm going to go back out to Springboard.

00:59:43.579 --> 00:59:48.159
And as you may have noticed in the earlier
demos the application on the device

00:59:48.159 --> 00:59:53.109
that manages the configuration
profiles is the Settings application.

00:59:53.110 --> 00:59:56.930
So I'm going to go ahead and launch Settings.

00:59:56.929 --> 00:59:59.089
Go into General.

00:59:59.090 --> 01:00:01.380
Scroll all the way to the bottom.

01:00:01.380 --> 01:00:03.099
And I see I have two profiles installed.

01:00:03.099 --> 01:00:05.269
I'm going to tap that, I'd like to see what they are.

01:00:05.269 --> 01:00:08.550
There's my web clips one that I
just installed, and my Wi-Fi.

01:00:08.550 --> 01:00:10.680
And I'm ready to take the Wi-Fi off.

01:00:10.679 --> 01:00:15.019
So I'm going to tap that.

01:00:15.019 --> 01:00:15.780
Hit Remove.

01:00:15.780 --> 01:00:28.750
And I have to know the removal password
for this profile, and I happen to know it.

01:00:28.750 --> 01:00:30.969
Tap Remove.

01:00:30.969 --> 01:00:33.259
It's going to pull the profile off.

01:00:33.260 --> 01:00:39.150
And my access to that Wi-Fi network has been removed.

01:00:39.150 --> 01:00:44.519
I can do the same thing with the
profile that installed the web clips.

01:00:44.519 --> 01:00:50.889
And when you uninstall configuration profiles,
it takes anything it added to the device with it.

01:00:50.889 --> 01:00:53.519
So we saw that there were three web clips installed.

01:00:53.519 --> 01:00:58.860
When I removed the web clip profile it's
going to go ahead and delete those as well.

01:00:58.860 --> 01:01:00.570
So let's do that.

01:01:00.570 --> 01:01:04.880
Remove. Yes, removing this profile is
going to change some settings on my phone.

01:01:04.880 --> 01:01:08.150
I'm good with that, I'm done with the web clips.

01:01:08.150 --> 01:01:11.230
Take them off.

01:01:11.230 --> 01:01:14.469
And no web clips.

01:01:14.469 --> 01:01:18.899
Cool. So that's -- as we mentioned, there are
four ways to get profiles to the device earlier.

01:01:18.900 --> 01:01:22.119
OTA, from the web, delivered via e-mail.

01:01:22.119 --> 01:01:27.569
And the fourth one is via tether to
the iPhone Configuration Utility.

01:01:27.570 --> 01:01:38.400
So in just a second here I'm going
to -- and we'll go back to iPCU.

01:01:38.400 --> 01:01:43.349
I've got a VPN profile that I'd
like to install on this device.

01:01:43.349 --> 01:01:46.869
I'm going to give some of my users
access to the corporate network remotely.

01:01:46.869 --> 01:01:51.179
I just drag and drop that file on to iPCU.

01:01:51.179 --> 01:02:06.759
And -- I'm going to change the
security on this VPN profile to Never.

01:02:06.760 --> 01:02:09.520
I never want my users to be able to remove it.

01:02:09.519 --> 01:02:16.550
So the only way they can get those configuration
settings off of their device is to either wipe it

01:02:16.550 --> 01:02:20.200
and reinstall the OS, or bring it
back to their System Administrator

01:02:20.199 --> 01:02:24.169
and say please remove this configuration
profile from this device.

01:02:24.170 --> 01:02:27.190
So it's essentially locked onto the device.

01:02:27.190 --> 01:02:33.539
And one important thing to remember is that when
you add a profile like this to the device, one,

01:02:33.539 --> 01:02:39.009
you should do it sparingly, because it
can be a real hassle for users, and two,

01:02:39.010 --> 01:02:43.530
it can only be removed from the iPCU that installed it.

01:02:43.530 --> 01:02:47.530
So I'm happy with this configuration.

01:02:51.329 --> 01:02:52.769
Make sure it's all good.

01:02:52.769 --> 01:02:55.309
There's my VPN settings.

01:02:55.309 --> 01:03:00.380
I'm going to add a bunch of restrictions.

01:03:01.420 --> 01:03:07.690
No Music Store, no apps, I'm really
locking this guy's device down.

01:03:07.690 --> 01:03:13.619
I'm going to go ahead and select my connected device.

01:03:13.619 --> 01:03:17.630
And again, you get the Summary screen.

01:03:17.630 --> 01:03:19.470
Configuration Profiles.

01:03:19.469 --> 01:03:23.109
I'm going to go ahead and install my VPN profile.

01:03:23.110 --> 01:03:29.599
I'm going to hit -- [Inaudible] since I can't show
you both the laptop and the device at the same time,

01:03:29.599 --> 01:03:32.309
and I want you to see the device
experience, I'm going to show you that.

01:03:32.309 --> 01:03:35.400
All I'm going to do here is tap Install.

01:03:35.400 --> 01:03:37.090
Tap Install.

01:03:37.090 --> 01:03:40.519
It's going to push the profile over to the device.

01:03:40.519 --> 01:03:46.150
You see that because this profile came from
iPCU, and when the device was connected

01:03:46.150 --> 01:03:48.740
to iPCU they swapped security credentials.

01:03:48.739 --> 01:03:51.649
This profile is now verified.

01:03:51.650 --> 01:03:54.349
So the phone trusts it.

01:03:54.349 --> 01:03:56.000
Go ahead and tap Install.

01:03:56.000 --> 01:04:00.940
And now we'll get a different warning than I got before.

01:04:00.940 --> 01:04:06.849
The one before said once this profile is installed
it can't be removed unless you enter a password.

01:04:06.849 --> 01:04:09.369
Slightly different verbiage here.

01:04:09.369 --> 01:04:12.420
Once this profile is installed it can't be removed at all.

01:04:12.420 --> 01:04:13.210
I'm good with that.

01:04:13.210 --> 01:04:14.909
I really need the VPN access.

01:04:14.909 --> 01:04:21.339
So I'm going to go ahead and install it.

01:04:21.340 --> 01:04:25.550
And I need to enter the VPN password
because I didn't include it in my profile.

01:04:25.550 --> 01:04:30.720
I need to enter a passcode now.

01:04:48.630 --> 01:04:50.090
My profile installed.

01:04:50.090 --> 01:04:53.940
And I can go ahead and -- oops, there we go.

01:04:53.940 --> 01:04:55.320
Profile installation is done.

01:04:55.320 --> 01:04:56.050
Click Done.

01:04:56.050 --> 01:05:06.870
If I go into my Settings I see that it added a web clip.

01:05:06.869 --> 01:05:13.539
Oops, General -- Network -- I'm not connected to my VPN.

01:05:13.539 --> 01:05:23.019
Now let's go back and look at what that nonremovable
profile looks like in the profile settings.

01:05:23.019 --> 01:05:25.460
So I'm going to launch Settings again.

01:05:25.460 --> 01:05:32.860
General, Profile, and you notice
there's no Remove button here at all.

01:05:32.860 --> 01:05:34.070
This is locked to the device.

01:05:34.070 --> 01:05:39.769
Like I said, you either have to wipe
it, or you have to remove it with iPCU.

01:05:39.769 --> 01:05:41.059
Still connected to iPCU.

01:05:41.059 --> 01:05:44.340
So I'm going to go ahead and I'm going
to remove this profile from the device.

01:05:44.340 --> 01:05:49.740
So the UI updated when this device was attached.

01:05:49.739 --> 01:05:50.839
The profile is installed.

01:05:50.840 --> 01:05:53.390
And what was an Install button has now changed to Remove.

01:05:53.389 --> 01:05:59.069
I'm gonna go ahead and tap that.

01:05:59.070 --> 01:06:01.350
Yup, I know that this can't be undone.

01:06:01.349 --> 01:06:02.599
That's cool.

01:06:02.599 --> 01:06:08.679
I want to remove it.

01:06:08.679 --> 01:06:10.460
See that it's now available to install.

01:06:10.460 --> 01:06:11.659
Now that it's been removed.

01:06:11.659 --> 01:06:19.920
And if we go back to the device, again, go
into Settings, General, and Profiles is gone.

01:06:19.920 --> 01:06:22.579
There are no profiles installed on this device.

01:06:22.579 --> 01:06:28.519
So I've shown you today how profiles are installed
via e-mail, how the different security settings show

01:06:28.519 --> 01:06:35.409
up in the Profile Summary screen, and the different security
restrictions that exist around configuration profiles.

01:06:35.409 --> 01:06:38.009
Thank you for your time, I hope you have a great conference.

01:06:38.010 --> 01:06:42.690
[ Applause ]

01:06:42.690 --> 01:06:44.070
>> Well, thank you Chris.

01:06:44.070 --> 01:06:46.240
Now for the last few slides.

01:06:46.239 --> 01:06:48.549
That was the user experience.

01:06:49.619 --> 01:06:53.639
Let's have a few words about best practices.

01:06:53.639 --> 01:06:56.509
You have seen four ways of deploying profiles.

01:06:56.510 --> 01:07:01.320
Use OTA for the best flexibility and the best scalability.

01:07:01.320 --> 01:07:07.269
It is some up front cost to your IT department,
but it is by far the best experience for the user.

01:07:07.269 --> 01:07:10.659
Because they can be anywhere, they can
be travelling, they can lose the device

01:07:10.659 --> 01:07:13.889
and get a replacement device, and it will still work.

01:07:13.889 --> 01:07:19.299
But it is some cost for you to set up the
server, and we will help you with that.

01:07:19.300 --> 01:07:25.289
USB with iPCU when you have a small
shop, when you have just a few employees.

01:07:25.289 --> 01:07:27.170
Or just for debugging.

01:07:27.170 --> 01:07:29.349
That's also really useful.

01:07:29.349 --> 01:07:33.569
Use unencrypted profiles when you just want
to share something that there is no secret.

01:07:33.570 --> 01:07:38.570
Just web clips for universities,
that's how the whole idea was born.

01:07:38.570 --> 01:07:45.750
And always sign profiles so that the user has some
sort of a certainty where the profile came from.

01:07:45.750 --> 01:07:51.309
The profile will refuse to install -- the
iPhone will refuse to install the profile

01:07:51.309 --> 01:07:56.090
that has been tampered with, or
where the signature doesn't match.

01:07:56.090 --> 01:08:02.920
So the summary, the profiles are here to
simplify life and configuration of phones.

01:08:02.920 --> 01:08:08.579
Because most users don't want to deal with
Exchange and VPN and Wi-Fi and all that.

01:08:08.579 --> 01:08:13.769
iPCU is your hub how to create
and also how to deploy profiles

01:08:13.769 --> 01:08:16.300
Encryption is available here now as a big thing.

01:08:16.300 --> 01:08:22.730
Everything that you have seen here is totally secure,
sniffing the channel is not going to do the hacker any good.

01:08:22.729 --> 01:08:27.289
Even if they were to download the profile
from the phone, it's still stored encrypted.

01:08:27.289 --> 01:08:33.430
You can distribute profiles over
the web, e-mail, or OTA and USB.

01:08:33.430 --> 01:08:40.940
And always consider security when creating
profiles, and choosing the deployment method.

01:08:40.939 --> 01:08:45.929
>> For more information, if you
have any questions, bug Mark.

01:08:45.930 --> 01:08:48.510
Not us.