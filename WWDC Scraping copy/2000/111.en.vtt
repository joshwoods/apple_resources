WEBVTT

00:00:08.920 --> 00:00:12.070
Welcome to the first of
two printing sessions,

00:00:12.170 --> 00:00:17.470
printing on Mac OS X and then advanced
printing on Mac OS X this afternoon.

00:00:18.060 --> 00:00:21.800
Printing is a very,
very vital part of any operating system,

00:00:21.800 --> 00:00:23.680
because you can have the
fanciest graphics and have

00:00:23.720 --> 00:00:26.700
the greatest programming
language and frameworks there,

00:00:26.700 --> 00:00:31.410
but it don't mean squat if the customers
can't get their results out on paper.

00:00:31.540 --> 00:00:32.960
And it must look good, too.

00:00:33.050 --> 00:00:35.080
In fact, actually,
it was the combination of,

00:00:35.080 --> 00:00:36.950
back in the early days
with the Macintosh,

00:00:37.010 --> 00:00:40.240
the combination of the Adobe PostScript,
all this page maker,

00:00:40.240 --> 00:00:43.380
and the Macintosh that really
has really kicked off the

00:00:43.460 --> 00:00:45.580
desktop publishing revolution.

00:00:46.170 --> 00:00:50.550
We need to continue forward in
making printing easier for both the

00:00:50.550 --> 00:00:54.700
customers and easier for printer
driver developers and easier for

00:00:54.700 --> 00:00:57.490
application developers to implement.

00:00:57.800 --> 00:01:01.630
And we think we're taking a good
stride towards that goal with

00:01:01.730 --> 00:01:06.180
the release of Mac OS X and the
Tiogo printing architecture.

00:01:06.970 --> 00:01:12.690
So to talk about the printing
architecture from both an application

00:01:12.700 --> 00:01:15.460
and a driver point of view,
and to go over the architecture

00:01:15.460 --> 00:01:18.120
overall this morning,
I'd like to introduce Paul Danbold,

00:01:18.180 --> 00:01:21.080
the manager of the print
group at Apple Computer.

00:01:21.240 --> 00:01:22.700
Paul?

00:01:28.500 --> 00:01:31.690
It's been quite a few years
since Apple had two printing

00:01:31.710 --> 00:01:33.780
sessions at this conference.

00:01:33.850 --> 00:01:35.740
So what we're going to do in this one,
we're really going to be talking

00:01:35.740 --> 00:01:40.480
about what you can and should be doing
with all the latest printing APIs.

00:01:40.510 --> 00:01:43.440
And we'll be covering
a couple of new topics.

00:01:43.580 --> 00:01:46.440
One's document modal printing,
which you'll see in a moment,

00:01:46.480 --> 00:01:49.220
and displaying your
print dialogs as sheets,

00:01:49.270 --> 00:01:53.510
and a better way of extending the
print dialog for both application

00:01:53.510 --> 00:01:57.580
developers and print driver developers.

00:01:57.800 --> 00:01:59.920
That'll take us halfway
through the session,

00:01:59.920 --> 00:02:03.640
and then we're going to talk
specifically about Mac OS X printing.

00:02:03.640 --> 00:02:06.350
I'll take you through the architecture,
which hasn't changed

00:02:06.380 --> 00:02:10.380
a lot since last year,
and I'll be explaining what's

00:02:10.380 --> 00:02:14.690
in DP4 and what to expect in
future releases of the OS.

00:02:16.780 --> 00:02:24.240
So, here's the situation with
Carbon printing on Mac OS 8 and 9,

00:02:24.240 --> 00:02:26.700
for those of you who are
carbonizing your applications.

00:02:26.700 --> 00:02:29.700
Your application is up there,
as you can see.

00:02:29.700 --> 00:02:31.700
You may have your
handcrafted printing code,

00:02:31.700 --> 00:02:36.600
or you may be using a Carbon power
plant or Carbon Mac app.

00:02:37.710 --> 00:02:43.560
You're using the APIs in
the Carbon Printing Manager,

00:02:43.590 --> 00:02:46.600
which is part of Carbon Lib on 8 and 9.

00:02:46.720 --> 00:02:49.990
And the way to think about it
is that the Carbon Printing

00:02:50.000 --> 00:02:53.750
Manager in that environment is just
a little bridge between you and the

00:02:53.750 --> 00:02:56.100
classic interface to print drivers.

00:02:56.130 --> 00:02:59.050
And print drivers do most of the work.

00:02:59.100 --> 00:03:00.990
The situation hasn't changed there.

00:03:01.070 --> 00:03:03.900
They have the chooser pack
for printer discovery.

00:03:03.900 --> 00:03:07.400
They do the page setup
and print dialogues.

00:03:07.430 --> 00:03:10.070
They turn Quick Draw into
whatever page description

00:03:10.070 --> 00:03:11.390
language the printer supports.

00:03:11.400 --> 00:03:13.400
They talk to the printer, etc.

00:03:13.400 --> 00:03:15.900
They handle foreground
and background printing.

00:03:15.920 --> 00:03:19.690
So, Carbon Printing on 8
and 9 is no different,

00:03:19.910 --> 00:03:24.350
really, than it is with the classic
printing system in that the code

00:03:24.380 --> 00:03:28.390
that we provide is a thin bridge.

00:03:28.510 --> 00:03:31.270
There's the chooser,
and there's print monitor or

00:03:31.360 --> 00:03:33.400
desktop printing for spooling.

00:03:35.200 --> 00:03:40.500
One of the things, if you've looked at
Carbon Printing on in CarbonLib,

00:03:40.600 --> 00:03:45.130
and hopefully many of you have,
you'll see that the header files,

00:03:45.130 --> 00:03:50.700
actually there's two now,
or three actually, contain a lot of APIs.

00:03:50.700 --> 00:03:55.680
About six times as many as in
the original printing.h file.

00:03:55.680 --> 00:03:59.310
And one of the things I'm going
to try to do in this session is

00:03:59.310 --> 00:04:01.610
explain why we've got so many APIs.

00:04:01.700 --> 00:04:05.700
One of the reasons, the obvious one,
is that we cleaned up a lot of things,

00:04:05.700 --> 00:04:09.190
so you now have access to functions
to what we call the page format

00:04:09.200 --> 00:04:12.780
and print settings objects,
which replace the old print record,

00:04:12.820 --> 00:04:14.700
which you were used to access directly.

00:04:14.720 --> 00:04:19.420
We have convenience utilities
or functions to get at.

00:04:19.580 --> 00:04:24.040
To insert pic comments and to
do PR general type functions.

00:04:24.200 --> 00:04:28.710
But since last year,
we've introduced a parallel set

00:04:28.710 --> 00:04:31.630
of APIs which account for almost
half the APIs in those headers,

00:04:31.660 --> 00:04:33.490
which take a print session argument.

00:04:33.500 --> 00:04:39.700
And we'll be talking about why
we've introduced all those extra

00:04:39.700 --> 00:04:43.170
APIs as we get into this session.

00:04:44.590 --> 00:04:47.190
So Carbon Printing Manager, as I said,
is a bridge to the classic

00:04:47.190 --> 00:04:48.730
printing interface.

00:04:48.780 --> 00:04:50.700
The drivers still do most of the work.

00:04:50.800 --> 00:04:53.500
It's worth dwelling for a moment
on the third bullet item here.

00:04:53.530 --> 00:04:57.690
What we've done in Carbon Printing
is we've provided some APIs which

00:04:57.740 --> 00:05:01.500
allow you to do things like get
and set the page orientation,

00:05:01.500 --> 00:05:03.500
the page size, the scaling, etc.

00:05:03.500 --> 00:05:06.620
Because a lot of applications
actually have a good reason for

00:05:06.620 --> 00:05:10.490
wanting to find out what's in the
print record and maybe manipulate it.

00:05:10.500 --> 00:05:13.430
It certainly isn't for all applications.

00:05:13.520 --> 00:05:17.500
And we had to find a reliable
way of implementing those APIs.

00:05:17.500 --> 00:05:21.050
The issue is that different drivers
store their settings in different

00:05:21.070 --> 00:05:24.490
parts of the print record and
encode the settings differently.

00:05:24.500 --> 00:05:27.960
So a year ago,
I said we were going to take care of

00:05:27.960 --> 00:05:32.940
this and relieve you of the chore of
writing a lot of special case code

00:05:32.940 --> 00:05:35.500
to deal with different printers.

00:05:35.500 --> 00:05:38.670
And I thought we were going
to do this programmatically,

00:05:38.690 --> 00:05:40.500
but we've changed our tack here.

00:05:40.530 --> 00:05:43.300
And last year,
we started to work on a database

00:05:43.310 --> 00:05:45.500
that we're putting into CarbonLib.

00:05:45.500 --> 00:05:49.530
And that database will contain
for as large a number of drivers

00:05:49.530 --> 00:05:52.960
as we can find information,
basically offsets and

00:05:52.990 --> 00:05:55.870
encoding information,
so that when you call PM,

00:05:55.870 --> 00:05:59.570
set orientation, for example,
or set scale, or set color mode,

00:05:59.570 --> 00:06:02.300
or whatever,
we will be able to execute that reliably

00:06:02.340 --> 00:06:06.150
because the printer vendors have provided
us with the information so that we

00:06:06.150 --> 00:06:09.500
know where those print drivers store
the information in the print record.

00:06:10.500 --> 00:06:14.180
That's a work in progress,
but we're fairly confident

00:06:14.180 --> 00:06:17.500
that it's a better solution
than the programmatic one.

00:06:17.500 --> 00:06:20.500
And if you happen to be running your
Carbon application on a print driver

00:06:20.500 --> 00:06:23.480
and it doesn't behave correctly
when you call some of these calls,

00:06:23.480 --> 00:06:25.490
you should let us know.

00:06:27.600 --> 00:06:30.670
So here's your same
application running on X.

00:06:30.720 --> 00:06:32.540
Of course,
it could be a Cocoa application

00:06:32.540 --> 00:06:35.380
as well as a Carbon application,
because everybody calls through

00:06:35.380 --> 00:06:38.380
to the same printing APIs.

00:06:38.490 --> 00:06:41.680
Underneath those APIs, of course,
is a very different implementation.

00:06:41.680 --> 00:06:45.220
And that implementation is
inside the printing frameworks.

00:06:45.220 --> 00:06:46.260
There's actually two.

00:06:46.260 --> 00:06:48.120
I'll explain that in a moment.

00:06:48.120 --> 00:06:52.710
And they're covered by the
Carbon umbrella framework.

00:06:52.790 --> 00:06:56.620
What's significantly different is that,
as opposed to print drivers

00:06:56.620 --> 00:06:58.580
serving up the print dialogs,
for example,

00:06:58.580 --> 00:07:01.880
and generating their spool files
and doing all that hard work,

00:07:01.880 --> 00:07:03.380
we're doing a lot of
that now in the system.

00:07:03.380 --> 00:07:06.940
So we provide the page
setup and print dialogs.

00:07:06.940 --> 00:07:09.620
We generate the spool file.

00:07:09.620 --> 00:07:13.860
We send the print job
to the print server,

00:07:13.860 --> 00:07:17.090
which is a separate process.

00:07:17.400 --> 00:08:12.200
[Transcript missing]

00:08:12.750 --> 00:08:15.720
The last thing to mention on
this slide is Print Center,

00:08:15.720 --> 00:08:19.560
the application, replaces the chooser,
replaces desktop printing.

00:08:19.560 --> 00:08:21.640
It provides the UI for
discovering printers,

00:08:21.650 --> 00:08:23.930
for setting up and managing queues.

00:08:24.010 --> 00:08:29.310
And it actually loads these modules,
called printer browser modules,

00:08:29.310 --> 00:08:32.920
to do connection-specific
printer discovery,

00:08:32.920 --> 00:08:34.770
like finding printers.

00:08:35.700 --> 00:08:40.070
over an ApiTalk network with MVP,
or going to the NetInfo network

00:08:40.070 --> 00:08:44.530
database to find printers that you
may be able to talk to with LPR.

00:08:48.220 --> 00:08:52.200
Last year, if you were here last year
for the printing session,

00:08:52.200 --> 00:08:55.600
you heard me go on about all
the Carbon printing APIs.

00:08:55.660 --> 00:08:59.390
And, tempting as it is to repeat that,

00:08:59.600 --> 00:09:03.600
It's better for me just to point
you to the latest documentation.

00:09:03.600 --> 00:09:08.600
If you go to this URL, where most of the
Carbon documentation is,

00:09:08.610 --> 00:09:11.200
you'll find that all the
printing APIs are pretty

00:09:11.200 --> 00:09:12.600
comprehensively documented.

00:09:12.600 --> 00:09:15.460
The documentation was
actually updated this week,

00:09:15.460 --> 00:09:17.800
so if you are working
off an older version,

00:09:17.800 --> 00:09:19.600
you should download the latest.

00:09:19.600 --> 00:09:23.860
You'll find in there a pretty
comprehensive explanation of all

00:09:23.860 --> 00:09:30.330
the concepts behind Carbon printing,
all the functions, all the type defs,

00:09:30.330 --> 00:09:31.080
etc.

00:09:32.000 --> 00:09:36.200
And so instead of talking about the APIs,
what I'm going to do is invite

00:09:36.200 --> 00:09:40.000
Alan Beck from the printing team to
come up and show you them in action,

00:09:40.020 --> 00:09:42.620
and show you printing on X today.

00:09:52.440 --> 00:09:53.600
There we go.

00:09:53.720 --> 00:09:56.670
So basically what I'm first going
to show you is Print Center app.

00:09:56.790 --> 00:10:00.400
It's like Paul said,
it's a replacement for both Chooser

00:10:00.450 --> 00:10:04.730
and the desktop print monitor,
or desktop printing stuff we had.

00:10:04.800 --> 00:10:08.690
So basically right now we don't,
if you can see here, we don't have any

00:10:08.690 --> 00:10:10.190
printers in our work set.

00:10:10.190 --> 00:10:13.780
So basically I want to go
and browse for some printers.

00:10:13.800 --> 00:10:19.140
So basically I'll first say I'll go
see if I can find any USB printers.

00:10:19.330 --> 00:10:24.200
Here's an Epson USB printer that's
connected to our demo machine here.

00:10:24.200 --> 00:10:26.570
I'm just going to add that
to our work set and let's see

00:10:26.570 --> 00:10:28.200
if we can find another one.

00:10:28.200 --> 00:10:30.990
Let's go up to Apple Talk.

00:10:31.500 --> 00:10:33.040
Let's see, what do we have here?

00:10:33.040 --> 00:10:37.890
We have a couple of LaserJet 4500,
and I'm just going to go ahead

00:10:37.890 --> 00:10:39.490
and add that to the workset.

00:10:39.500 --> 00:10:41.500
And let's close this.

00:10:41.500 --> 00:10:45.460
So here, basically, here's my workset,
something we use as desktop printers.

00:10:45.500 --> 00:10:50.450
You can do the same things
that you can before.

00:10:50.530 --> 00:10:52.430
Go up to the printers menu.

00:10:52.490 --> 00:10:54.500
You can actually go to the queue.

00:10:54.500 --> 00:10:55.500
You can stop the queue.

00:10:55.500 --> 00:10:58.500
Let's go ahead and stop this queue.

00:10:58.650 --> 00:11:01.500
And let's go ahead and make
that one our default printer.

00:11:01.550 --> 00:11:04.500
As you can see,
your default printer shows up here.

00:11:04.640 --> 00:11:06.470
You can see right now
we're using the old icons.

00:11:06.570 --> 00:11:09.140
It would be great as for the
printer module developers to

00:11:09.140 --> 00:11:15.500
create these wonderful new 128-bit
wonderful icons to impress our users.

00:11:15.500 --> 00:11:20.450
So let's go ahead and close that.

00:11:20.470 --> 00:11:23.140
Let's go ahead and quit
out of print center.

00:11:23.400 --> 00:11:25.740
We have all of our printers set up.

00:11:25.790 --> 00:11:29.540
And let's just go down into simple text.

00:11:33.200 --> 00:11:37.230
And here you can see normal
simple text document,

00:11:37.230 --> 00:11:39.460
fancy new picture shown.

00:11:39.460 --> 00:11:42.670
And let's just go ahead
and bring up page setup.

00:11:43.490 --> 00:11:46.160
Here's the page setup dialog.

00:11:46.160 --> 00:11:52.640
You can see it takes off of the
panel-based UI of LaserWriter 8.

00:11:52.850 --> 00:11:59.010
One thing you should notice is
it is a movable modal dialog now.

00:11:59.130 --> 00:12:04.500
You can basically select paper size of
any papers that the printer supports.

00:12:04.500 --> 00:12:08.910
We have orientation, you know, portrait,
landscape, and we're also providing a

00:12:08.910 --> 00:12:12.070
button for reverse landscape,
as well as scaling.

00:12:12.100 --> 00:12:15.990
So let's go ahead and do that.

00:12:16.910 --> 00:12:19.460
Actually,
one last thing here is like you can

00:12:19.740 --> 00:12:21.800
format for your different printers.

00:12:21.910 --> 00:12:25.280
Like here,
it comes up to a default printer.

00:12:25.310 --> 00:12:28.110
So if you just click this,
you can go back to the USB printer,

00:12:28.110 --> 00:12:30.720
or you can select other,
and it will launch Print Center,

00:12:30.850 --> 00:12:34.300
and you'll be able to add more
printers to your work set.

00:12:34.400 --> 00:12:39.800
This pop-up menu only shows the printers
that you've added to your work set.

00:12:39.900 --> 00:12:42.780
Then let's go ahead and
bring up the print dialog.

00:12:45.590 --> 00:12:49.600
Here again, you can basically have,
you can say what you want to print to.

00:12:49.600 --> 00:12:52.260
Here again, with the same pop-up,
this is the page setup.

00:12:52.320 --> 00:12:54.480
But this is the actual printer
you're going to print to.

00:12:54.500 --> 00:12:57.500
We're going to stay to the LaserJet.

00:12:57.550 --> 00:13:00.500
The next item down here is Save Settings.

00:13:00.500 --> 00:13:03.500
This is what we expect
most users to be doing.

00:13:03.500 --> 00:13:06.070
Basically,
it's a save settings of all the

00:13:06.070 --> 00:13:09.500
settings that are down in the,
that the user has set.

00:13:09.500 --> 00:13:13.450
Printer driver, printer module developers
will come up with their own,

00:13:13.590 --> 00:13:15.500
and they will be shown here.

00:13:15.670 --> 00:13:19.500
Like, we have like photo glossy,
normal color, normal black and white.

00:13:19.500 --> 00:13:23.500
And the user will be able
to save different sets.

00:13:23.500 --> 00:13:25.790
You can see here,
they'll be able to come down here and

00:13:25.790 --> 00:13:28.950
save what the current settings are.

00:13:29.100 --> 00:13:32.380
into a-- it'll be saved for them.

00:13:32.400 --> 00:13:37.210
And then those settings will
show up in this popup as well.

00:13:37.630 --> 00:13:41.930
So we don't expect many users to be
actually navigating the panes and

00:13:41.930 --> 00:13:44.180
setting all the different options.

00:13:44.180 --> 00:13:46.970
They will basically do what
they want-- set it once,

00:13:47.080 --> 00:13:51.360
save the set, and then just basically
switch between the settings.

00:13:51.470 --> 00:13:53.340
Then we go to the popup menu.

00:13:53.350 --> 00:13:57.060
Basically the same as
some of the old drivers,

00:13:57.160 --> 00:14:02.840
copy some pages, be able to set these,
set the page range.

00:14:02.840 --> 00:14:07.860
Another thing we have is we have layout
as a standard feature for all drivers.

00:14:08.040 --> 00:14:10.370
So basically any--

00:14:10.960 --> 00:14:12.850
Any printer will be able to have this.

00:14:13.050 --> 00:14:16.210
You can set your pages per sheet,
the layout direction,

00:14:16.280 --> 00:14:17.800
and what type of borders you want.

00:14:17.800 --> 00:14:24.490
Another thing we have is this version of
Simple Text uses the old append-diddle

00:14:24.600 --> 00:14:26.800
mechanism for extending the dialog.

00:14:26.800 --> 00:14:31.470
So basically you will see they
have their own pane and name

00:14:31.470 --> 00:14:33.800
the name of the application.

00:14:33.800 --> 00:14:36.800
Here we just added two sample ones.

00:14:36.800 --> 00:14:39.800
This is basically print selected
text only and include page numbers.

00:14:39.800 --> 00:14:44.240
Another thing we have added
for OS X is basically a summary

00:14:44.540 --> 00:14:48.800
pane of all the current options
that the user has selected.

00:14:49.380 --> 00:14:53.030
So here's basically a
summary of what the user,

00:14:53.170 --> 00:14:55.330
all the different panes
that the user has selected,

00:14:55.330 --> 00:14:56.400
except for the app pane.

00:14:56.850 --> 00:15:01.520
Because we do not know at this point,
because the application uses

00:15:01.530 --> 00:15:05.800
the pen diddle mechanism,
we don't know what they have set.

00:15:05.900 --> 00:15:07.800
And there is an API to get that.

00:15:07.800 --> 00:15:14.250
Let's just go back here and
let's just go ahead and...

00:15:14.440 --> 00:15:21.830
Every print dialog has a preview feature.

00:15:22.260 --> 00:15:24.830
Basically,
we select preview and it'll do a preview.

00:15:25.350 --> 00:15:29.820
What it's doing is saving that
PDF to disk and opening that

00:15:29.820 --> 00:15:35.950
PDF file with your preferred
PDF viewer that the user has set.

00:15:36.310 --> 00:15:39.780
So here you can see it's,
there's the document,

00:15:39.830 --> 00:15:44.260
we said include page number,
so here's the page number at the bottom.

00:15:44.260 --> 00:15:48.330
One feature of this is
now that we're in PDF,

00:15:48.330 --> 00:15:52.240
or preview,
you can actually go to and save this

00:15:52.240 --> 00:16:00.600
PDF file as a document anywhere on your
disk and use it for later processing.

00:16:00.720 --> 00:16:04.510
Let's just go ahead and quit out of this.

00:16:05.700 --> 00:16:07.170
Now we're back in symbol text.

00:16:07.240 --> 00:16:09.970
Let's bring up the print dialog again.

00:16:09.970 --> 00:16:15.190
And let's just go ahead
and actually print this.

00:16:19.300 --> 00:16:21.300
Let's quit out of this simple text.

00:16:21.300 --> 00:16:26.620
We have a new version of a different
version of simple text up here.

00:16:26.890 --> 00:16:29.750
Let's just go ahead and open
up this version of simple text.

00:16:29.760 --> 00:16:35.170
And here we have,
let's get two windows up.

00:16:44.030 --> 00:16:45.510
Let's go ahead and print this.

00:16:45.650 --> 00:16:46.760
Let's go ahead and try to print this.

00:16:46.860 --> 00:16:52.380
And what you can see now is we
have the print dialog as a sheet.

00:16:52.870 --> 00:16:55.800
And so basically
everything is active here,

00:16:55.800 --> 00:16:59.800
layout, summary, all that stuff is there.

00:16:59.800 --> 00:17:03.180
What's nice about the sheets is you
can go ahead and go over to this

00:17:03.180 --> 00:17:05.800
document and try to print it as well.

00:17:05.800 --> 00:17:08.800
So you can have two print
dialogs up at the same time.

00:17:08.800 --> 00:17:11.230
They are independent of each other.

00:17:12.540 --> 00:17:18.630
So basically I will say, you know,
I want, you know, five copies of this.

00:17:18.630 --> 00:17:20.290
And let's go to the summary pane of this.

00:17:20.370 --> 00:17:21.650
It says five copies here.

00:17:21.820 --> 00:17:25.260
And basically, you know,
it's not reflected over here.

00:17:25.260 --> 00:17:27.480
It still says one copy.

00:17:27.500 --> 00:17:30.820
So they are totally
independent of each other,

00:17:30.960 --> 00:17:33.290
and you can print these as you want.

00:17:33.570 --> 00:17:38.030
So this version of Simple Text also,
as well as using Sheets,

00:17:38.030 --> 00:17:42.500
actually use the new mechanism
for extending the dialog,

00:17:42.500 --> 00:17:46.500
which is through a PDE extension,
print dialog extension.

00:17:46.500 --> 00:17:50.320
So basically here it's
much more flexible to the,

00:17:50.480 --> 00:17:53.330
much more flexible for the developer.

00:17:53.800 --> 00:17:56.000
You can get any number
of panes that you want.

00:17:56.000 --> 00:18:00.050
You can organize them
in any way you want.

00:18:00.890 --> 00:18:05.330
So you can have multiple panes being
added for the user so that it's not

00:18:05.420 --> 00:18:07.950
all kind of crammed into one dialog.

00:18:08.170 --> 00:18:11.420
Another nice thing about this is

00:18:11.810 --> 00:18:16.700
You actually get the summary presented
to the user through the PDE interface.

00:18:16.700 --> 00:18:21.280
Another thing that this one has is,
you can see here, let's say we want to

00:18:21.360 --> 00:18:26.700
print this to the inkjet,
it goes back to copies and pages,

00:18:26.700 --> 00:18:31.700
and here this printer module
actually added its own PDE,

00:18:31.720 --> 00:18:34.700
and where it can select print quality.

00:18:34.700 --> 00:18:37.670
And that as well is saved in the summary.

00:18:37.700 --> 00:18:41.700
You can see that in the summary as well.

00:18:41.700 --> 00:18:45.610
Is there anything else?

00:18:49.100 --> 00:18:55.940
Pages.

00:18:55.940 --> 00:18:55.940
Okay, let's go back to,
let's quit out of this.

00:18:57.740 --> 00:19:00.770
Actually, another thing I wanted to show
you is this is a true sheet.

00:19:01.010 --> 00:19:01.990
This print dialog is up.

00:19:01.990 --> 00:19:06.820
You can't do anything in here,
but this dialog here is purely active,

00:19:06.850 --> 00:19:12.120
if you wanted to do that.

00:19:17.020 --> 00:19:18.990
Let's go back to the Print Center app.

00:19:19.000 --> 00:19:25.800
Let's go ahead and look at this,
see if we can see.

00:19:26.040 --> 00:19:28.000
Okay,
here's the document I printed earlier.

00:19:28.010 --> 00:19:30.160
This is a picture of the OS desktop.

00:19:30.350 --> 00:19:34.150
Let's just go ahead and start this queue.

00:19:36.100 --> 00:19:38.080
It should be printing now, if I remember.

00:19:38.130 --> 00:19:39.700
Let's see, yes.

00:19:39.760 --> 00:19:41.100
It now says it's printing.

00:19:41.190 --> 00:19:45.130
In future versions of PrintCenter,
we will be displaying a lot

00:19:45.370 --> 00:19:49.860
more user feedback to the user,
you know, in this area up here.

00:19:49.930 --> 00:19:53.930
And actually, it's,
the printer is starting to print.

00:19:54.010 --> 00:19:56.860
I hear it up here.

00:19:56.860 --> 00:20:00.930
And here is the document that I printed.

00:20:05.370 --> 00:20:08.210
So although this afternoon we're
going to go into code level details

00:20:08.260 --> 00:20:13.760
about how that second version of
Simple Text was able to do what it did,

00:20:13.800 --> 00:20:17.380
I'm going to cover briefly the
steps you should take as an

00:20:17.380 --> 00:20:21.420
application developer to get to that
level of printing functionality.

00:20:24.170 --> 00:20:26.760
We'll start with,
we'll take it in three steps.

00:20:26.760 --> 00:20:29.580
The first step many of
you hopefully have done,

00:20:29.620 --> 00:20:32.100
and that is to do the
carbonization of your applications.

00:20:32.100 --> 00:20:34.920
And if you started with the
APIs that were available back

00:20:34.920 --> 00:20:38.100
when CarbonLib 1.0 was released,
for example,

00:20:38.100 --> 00:20:42.850
and earlier versions of 10 were released,
you will have done that work,

00:20:42.850 --> 00:20:47.030
should be fairly straightforward,
PR open, went to PM begin, etc.

00:20:47.030 --> 00:20:50.100
And your application is running on 8, 9,
and 10.

00:20:50.100 --> 00:20:55.100
When you do that, the user experience,
as far as saying print dialogs,

00:20:55.110 --> 00:21:01.100
is what you saw in the first
version of simple text we showed.

00:21:01.110 --> 00:21:03.100
Print dialogs are still modal.

00:21:03.170 --> 00:21:05.290
They're sort of modal for
the system on 8 and 9,

00:21:05.290 --> 00:21:07.680
and they're modal for
the application on 10.

00:21:09.180 --> 00:21:13.830
So, step two is worth talking about
in a little bit more detail.

00:21:14.010 --> 00:21:18.320
When Aqua came along,
which I might say was after we designed

00:21:18.320 --> 00:21:22.170
the first set of Carbon printing APIs,
we realized we were going to have

00:21:22.170 --> 00:21:24.000
to support document model printing.

00:21:24.000 --> 00:21:29.190
And we looked at a lot of
different ways in which we could

00:21:29.830 --> 00:21:33.820
Implement that and minimize the
overhead to you if you'd already

00:21:33.820 --> 00:21:36.270
done the basic carbonization work.

00:21:36.380 --> 00:21:39.310
And after a while,
we realized that the best thing

00:21:39.370 --> 00:21:43.490
to do was to introduce a parallel
set of APIs and add one new

00:21:43.490 --> 00:21:45.330
argument to that parallel set.

00:21:45.340 --> 00:21:50.560
And that argument,
which is a printing session object,

00:21:50.560 --> 00:21:55.860
enabled us to maintain context between
one document's print session and

00:21:55.860 --> 00:21:57.990
another document's print session.

00:21:58.080 --> 00:22:03.700
So although I hate to ask anybody to
go back and rework their printing code,

00:22:03.770 --> 00:22:06.110
this rework is rather straightforward.

00:22:06.370 --> 00:22:10.430
You have to be a little careful to make
sure that you're doing the right thing.

00:22:10.440 --> 00:22:15.710
But switching over to the session
APIs will get you to the point

00:22:15.800 --> 00:22:22.730
where you can have multiple
print sessions running on 10.

00:22:22.990 --> 00:22:26.200
Because ACWA doesn't run on 8 and 9,
as you're probably well aware,

00:22:26.250 --> 00:22:30.530
you are limited to one
session on that OS.

00:22:30.610 --> 00:22:33.840
You can use the session APIs,
you're just not allowed to create

00:22:33.840 --> 00:22:35.460
multiple printing sessions.

00:22:36.490 --> 00:22:43.430
So if you do that,
basically you've got the ability to run,

00:22:43.610 --> 00:22:47.400
to spool a print job while
another one is being prepared.

00:22:47.400 --> 00:22:50.390
So you've got some performance benefits.

00:22:50.460 --> 00:22:52.390
But your print dialogs are still modal.

00:22:52.390 --> 00:22:54.390
They're not displayed as a sheet.

00:22:54.450 --> 00:22:58.340
So you're going to take one more step,
and that step's pretty straightforward.

00:22:58.400 --> 00:23:03.400
It involves one new API,
PMSessionUseSheets.

00:23:03.400 --> 00:23:07.730
It involves a callback function
that you have to reference from

00:23:07.730 --> 00:23:09.400
your call to PMSessionUseSheets.

00:23:09.400 --> 00:23:12.880
And when you do that,
basically we'll display the

00:23:12.880 --> 00:23:15.400
print dialogs as a sheet for you.

00:23:15.400 --> 00:23:20.490
And everything works like
it did in Alan's demo.

00:23:22.210 --> 00:23:24.900
We would like you to get
there as soon as you can,

00:23:24.900 --> 00:23:31.190
but we understand that if you've
already done the first step of

00:23:31.190 --> 00:23:36.300
getting your applications carbonized,
you may want to wait until 10 is

00:23:36.440 --> 00:23:39.770
your primary focus before doing that,
because you are going to

00:23:39.770 --> 00:23:45.330
have to do a runtime check
before you can use this API.

00:23:47.470 --> 00:23:52.260
The other thing that Alan had in the
first version of Simple Text was that

00:23:52.260 --> 00:23:57.080
he had Simple Text adding a couple
of controls to the print dialog using

00:23:57.080 --> 00:23:59.160
the old append-dittle mechanism.

00:23:59.230 --> 00:24:02.070
And if you don't know
what append-dittle is,

00:24:02.070 --> 00:24:06.100
you should look at TechNote 1080,
I think it is.

00:24:06.190 --> 00:24:10.590
It's been used a long time and will
continue to support it and maintain it

00:24:10.590 --> 00:24:14.080
on both 8.9 and 10 with Carbon printing.

00:24:14.220 --> 00:24:18.420
It has some significant limitations,
I mean, one of which is that,

00:24:18.520 --> 00:24:20.540
especially on 8 and 9
with different drivers,

00:24:20.570 --> 00:24:24.300
you don't really have a lot of control
over where your controls get placed.

00:24:24.370 --> 00:24:28.440
And two, all your controls just
go into the print dialog.

00:24:28.520 --> 00:24:32.470
There's no ability to organize
them into multiple panels.

00:24:32.590 --> 00:24:37.060
And there's no way for your controls
to have any idea of what the system,

00:24:37.060 --> 00:24:41.810
the printing system's controls are doing,
or what the driver's controls are doing.

00:24:42.810 --> 00:24:46.080
So, as Alan mentioned,
we've come up with a better mechanism.

00:24:46.080 --> 00:24:47.940
We call them print dialog extensions.

00:24:47.940 --> 00:24:48.580
They're plug-ins.

00:24:48.580 --> 00:24:51.040
They're based on CF plug-in.

00:24:51.130 --> 00:24:55.170
And because

00:24:55.500 --> 00:24:58.560
They tie in quite nicely with
document mobile printing and

00:24:58.560 --> 00:25:00.500
printing dialogs as sheets.

00:25:00.500 --> 00:25:03.500
They are available only for 10.

00:25:03.500 --> 00:25:05.790
As I said,
you can use them when your print

00:25:05.790 --> 00:25:07.500
dialog is displayed as a sheet.

00:25:07.500 --> 00:25:10.690
And the benefits are that, one,
if you have a lot of printing

00:25:10.800 --> 00:25:13.870
features that you want to add,
you can organize them

00:25:13.870 --> 00:25:15.500
into multiple panels.

00:25:15.500 --> 00:25:18.650
The way to think about it
is that you write one PDE,

00:25:18.650 --> 00:25:22.500
one plug-in per panel you want
to add to the print dialogs,

00:25:22.500 --> 00:25:24.550
or to the page setup dialogs.

00:25:26.030 --> 00:25:28.500
So that's good.

00:25:28.580 --> 00:25:34.400
One thing that's got incredible
repercussions potentially is that your

00:25:34.400 --> 00:25:37.890
controls can override other controls.

00:25:37.950 --> 00:25:43.650
We've let applications install
PDEs which override things that we

00:25:43.650 --> 00:25:45.900
provide as standard in the system.

00:25:45.960 --> 00:25:49.980
You can even override controls
potentially that the printer

00:25:50.130 --> 00:25:51.660
driver would serve up.

00:25:51.910 --> 00:25:54.870
So you have to be careful about this,
but if, for example,

00:25:54.900 --> 00:25:59.280
your application wants to allow
users to type in page numbers or

00:25:59.280 --> 00:26:04.020
page range in a different format
than the one that we provide,

00:26:04.020 --> 00:26:06.070
then you've got the ability to do that.

00:26:06.180 --> 00:26:11.590
And you won't confuse users by
providing two page range controls.

00:26:11.650 --> 00:26:18.610
The other thing that we're implementing
is a mechanism to notify your PDE when

00:26:18.750 --> 00:26:23.050
a control in another panel has
been changed that affects you.

00:26:24.220 --> 00:26:27.810
Of course, you have to be a little
careful about doing that,

00:26:27.850 --> 00:26:30.410
but it's a lot more powerful than
what we used to have in the past,

00:26:30.410 --> 00:26:34.280
where you might implement, for example,
the reverse page order

00:26:34.900 --> 00:26:37.480
control in your print dialog.

00:26:37.600 --> 00:26:39.800
The driver may have
done the same control,

00:26:39.870 --> 00:26:43.250
and they'll interact with each
other in ways that the user

00:26:43.250 --> 00:26:45.200
probably won't appreciate.

00:26:45.280 --> 00:26:48.140
If you want to know
exactly how to write PDEs,

00:26:48.340 --> 00:26:50.000
you should come to this
afternoon's session,

00:26:50.130 --> 00:26:52.840
because I'm not going to
go into code at this time.

00:26:53.210 --> 00:26:56.600
To wrap this up though,
the main message for you is if you're

00:26:56.600 --> 00:27:00.950
developing a Carbon application
and you've already done the port,

00:27:01.080 --> 00:27:03.490
the non-session APIs are
just fine for now.

00:27:03.530 --> 00:27:08.690
You'll print on 8, 9, and 10,
but the print dialogs will be modal.

00:27:08.790 --> 00:27:11.060
Very soon,
hopefully 10 will be your primary focus,

00:27:11.060 --> 00:27:13.670
and that's the time when you should
switch over to the session APIs,

00:27:13.700 --> 00:27:14.900
use those.

00:27:14.970 --> 00:27:19.260
And a small step beyond that would be
to display your print dialogs as sheets.

00:27:19.330 --> 00:27:22.650
And if you're an application
with advanced printing needs,

00:27:22.720 --> 00:27:27.000
now's the time to think seriously
about using the plugins instead of

00:27:27.000 --> 00:27:29.380
using the append-dittle mechanism.

00:27:30.180 --> 00:27:32.380
And that's pretty much it for
the first part of the session to

00:27:32.390 --> 00:27:34.100
talk about Carbon printing APIs.

00:27:34.100 --> 00:27:42.100
We're now going to switch over to a quick
recap of the printing architecture on X.

00:27:42.100 --> 00:27:44.840
If you were here last year,
you saw a diagram that

00:27:44.840 --> 00:27:46.100
looked just like this.

00:27:46.100 --> 00:27:49.100
And the good news is that
it's still a valid diagram.

00:27:49.100 --> 00:27:51.090
We haven't changed our architecture.

00:27:51.140 --> 00:27:54.090
We've tweaked a couple of APIs,
but pretty much everything's in place.

00:27:54.100 --> 00:27:56.100
We've just written a lot more code.

00:27:56.100 --> 00:28:00.100
I'm going to walk you
through this fairly quickly,

00:28:00.100 --> 00:28:03.100
and the reason I'm going to do that is
so that I can point out what's in DP4,

00:28:03.100 --> 00:28:06.090
and what you can expect
in the first release of X,

00:28:06.090 --> 00:28:09.900
and a couple of things that
will unfortunately have to wait

00:28:09.900 --> 00:28:12.210
until future releases of the OS.

00:28:12.600 --> 00:28:16.870
There's your application
up on the top left,

00:28:16.870 --> 00:28:18.420
Carbon or Cocoa.

00:28:19.260 --> 00:28:21.550
You're going to be linked against,
well probably against the

00:28:21.550 --> 00:28:24.370
Carbon Umbrella Framework,
but you're certainly going to

00:28:24.370 --> 00:28:27.600
be linked against the printing
frameworks which are inside that.

00:28:27.670 --> 00:28:30.020
And as I said,
print frameworks are responsible

00:28:30.020 --> 00:28:32.420
for serving up the UI,
they're responsible for

00:28:32.420 --> 00:28:36.950
generating the spool file,
they even talk to print center,

00:28:37.050 --> 00:28:40.660
and they replace a lot of the
functionality that old style

00:28:40.660 --> 00:28:42.700
classic drivers used to do.

00:28:42.720 --> 00:28:45.790
They generate a,
for every time you hit the print button,

00:28:45.790 --> 00:28:47.400
they generate a print job.

00:28:47.430 --> 00:28:50.080
The print job,
as I talked about last year,

00:28:50.150 --> 00:28:51.700
comprises two files.

00:28:51.700 --> 00:28:55.160
There's a spool file,
which by default is PDF,

00:28:55.160 --> 00:28:58.700
but other spool file
formats are supported.

00:28:58.700 --> 00:29:01.060
There's also a job ticket,
which is a metadata

00:29:01.100 --> 00:29:04.270
associated with a print job,
which provides a better means

00:29:04.380 --> 00:29:08.700
for us to control printing as
the job goes down the pipeline,

00:29:08.750 --> 00:29:11.700
and to separate the PDL,
the page description language,

00:29:11.700 --> 00:29:12.700
from the printing setting.

00:29:12.700 --> 00:29:14.110
things.

00:29:16.920 --> 00:29:20.430
So the next step in the pipeline
is this separate process

00:29:20.430 --> 00:29:22.160
called the queue manager.

00:29:22.160 --> 00:29:26.640
If you're running Process Viewer on 10,
you'll see that it's

00:29:26.700 --> 00:29:28.660
called the print server.

00:29:28.730 --> 00:29:32.560
And it replaces print monitor
and desktop printing that

00:29:32.600 --> 00:29:35.190
you're familiar with on 8 and 9.

00:29:35.250 --> 00:29:41.750
It's responsible for managing the queues,
multiple queues for multiple printers.

00:29:41.910 --> 00:29:46.450
It's designed for a client-server
architecture to support a client

00:29:46.450 --> 00:29:52.900
spooling a job and sending it to
a separate machine to process.

00:29:52.900 --> 00:29:56.810
But in DP4,
and unfortunately in the first release,

00:29:56.860 --> 00:29:59.900
we're only spooling local queuing.

00:29:59.950 --> 00:30:02.960
The design's there,
but the implementation isn't

00:30:02.960 --> 00:30:07.050
ready for us to be able to support
true client-server printing.

00:30:09.560 --> 00:30:13.780
The job manager is responsible for
processing individual jobs as they

00:30:13.780 --> 00:30:16.400
get dequeued by the queue manager.

00:30:16.590 --> 00:30:20.400
The job manager is responsible
for page level features.

00:30:20.400 --> 00:30:23.710
For printers that don't have
their own ability to do things

00:30:23.710 --> 00:30:27.400
like print multiple copies,
it takes care of that.

00:30:27.400 --> 00:30:30.300
And it coordinates three threads.

00:30:30.400 --> 00:30:33.400
The first one is the converter.

00:30:33.400 --> 00:30:39.400
The converter is quite
a clever piece of code.

00:30:39.440 --> 00:30:43.400
It's not just a single module.

00:30:43.400 --> 00:30:48.560
It contains code that can read
in various full file formats,

00:30:48.560 --> 00:30:53.400
and separately code that can
generate different output formats.

00:30:53.460 --> 00:30:57.400
The mainstream print path is
when the print job creator uses

00:30:57.400 --> 00:31:03.400
the converter to generate from,
say, Quick Draw, a PDF school file.

00:31:03.400 --> 00:31:05.400
And when you get down to the
server end of the system,

00:31:05.400 --> 00:31:10.400
the converter is used to
convert that PDF into bitmap.

00:31:10.400 --> 00:31:14.400
And the converter is built around a lot
of core graphics technology to do that.

00:31:14.510 --> 00:31:18.400
But also in the converter is code
ported over from LaserWriter 8.

00:31:18.400 --> 00:31:21.200
So, for example,
if your application generated a

00:31:21.200 --> 00:31:25.130
school file that contained PostScript,
we would generate an old-style

00:31:25.150 --> 00:31:26.400
PIC with PostScript school file.

00:31:26.400 --> 00:31:30.400
And by the time the converter
gets to process the job,

00:31:30.430 --> 00:31:31.400
it's going to be using
LaserWriter 8 code.

00:31:31.400 --> 00:31:35.380
So, you're printing LaserWriter 8-derived
code to turn that into PostScript.

00:31:35.400 --> 00:31:38.390
Of course, that seems you're printing
to a PostScript printer.

00:31:40.600 --> 00:31:44.600
The printer module is really
the vestige of the old drivers.

00:31:44.600 --> 00:31:51.780
It contains all the printer-specific
code in the printing system,

00:31:51.790 --> 00:31:56.600
because the OS is taking care
of so much of the functionality.

00:31:56.600 --> 00:32:01.530
And it's a printer module that
is responsible for knowing

00:32:01.530 --> 00:32:06.600
what sort of format the printer
is capable of receiving,

00:32:06.600 --> 00:32:10.600
managing the printer,
returning status up the pipeline,

00:32:10.600 --> 00:32:12.600
and error messages up the
pipeline to the client.

00:32:12.600 --> 00:32:17.140
And I'll be talking a little bit more
about the printer module in a moment.

00:32:17.730 --> 00:32:20.410
The I/O module,
as I mentioned a moment ago,

00:32:20.410 --> 00:32:24.520
we've separated I/O from spool file
rendering and that sort of thing.

00:32:24.610 --> 00:32:31.230
I/O modules are shared amongst
various types of printers.

00:32:31.230 --> 00:32:31.230
We have got

00:32:31.330 --> 00:32:35.130
I/O modules for network
protocols and I/O modules for the

00:32:35.130 --> 00:32:38.590
Direct Connect protocols like USB.

00:32:39.720 --> 00:32:41.540
Last but not least,
we've got the Print Center application,

00:32:41.540 --> 00:32:43.370
which you saw in action.

00:32:43.530 --> 00:32:50.800
UI isn't final, but it works just fine on
DP4 for discovering printers,

00:32:50.800 --> 00:32:53.200
setting up queues,
and picking default printers.

00:32:53.280 --> 00:32:56.070
But we're going to be extending
the functionality so that it

00:32:56.080 --> 00:32:58.900
becomes a host for printer
configuration and other things.

00:32:58.900 --> 00:33:03.760
So you can expect that to evolve
between now and the first release of X.

00:33:04.150 --> 00:33:09.070
So that's pretty much the architecture,
and I'm going to switch over here

00:33:09.070 --> 00:33:14.920
to show you the Toga system from
the viewpoint of printer vendors,

00:33:14.930 --> 00:33:18.370
or the developers of print drivers.

00:33:18.560 --> 00:33:21.190
It's a slightly different
perspective because here we're

00:33:21.190 --> 00:33:25.470
showing four types of modules which

00:33:26.070 --> 00:33:29.210
Printer vendors or driver
developers are going to create,

00:33:29.210 --> 00:33:32.880
with an SDK, which we're going to
be releasing next week,

00:33:32.880 --> 00:33:37.840
to be able to get their
printers working with Mac OS X.

00:33:37.890 --> 00:33:43.140
And we have been collaborating with a lot
of printer vendors over the last year.

00:33:43.190 --> 00:33:46.460
If you're in the business and you haven't
been talking to us about your needs,

00:33:46.460 --> 00:33:49.610
next week would be a great
time to get in touch with us.

00:33:50.480 --> 00:33:53.400
Let's talk about printer modules first.

00:33:53.560 --> 00:33:56.640
What do they do?

00:33:57.240 --> 00:33:59.990
They're quite simple actually,
or maybe that's just because

00:34:00.010 --> 00:34:01.640
they're architected cleverly.

00:34:01.640 --> 00:34:08.110
They have a set of functions that
are used to tell the converter

00:34:08.110 --> 00:34:12.640
what sort of output data they
want the converter to generate.

00:34:12.640 --> 00:34:16.210
They contain, obviously,
codes to know how to format

00:34:16.210 --> 00:34:17.900
the data for the printer.

00:34:17.900 --> 00:34:20.400
In the case of an inkjet printer,
they'd be banding the data

00:34:20.400 --> 00:34:23.030
and compressing it and
inserting engine control codes,

00:34:23.030 --> 00:34:23.400
etc.

00:34:23.510 --> 00:34:28.900
They also have the smarts to handle
printer status and error messages.

00:34:28.970 --> 00:34:30.900
They're called by the job manager.

00:34:30.930 --> 00:34:34.830
When a job's being printed,
the job manager will tell the printer

00:34:34.830 --> 00:34:38.670
module to print a page or maybe print
a whole document and relay status,

00:34:38.670 --> 00:34:39.350
etc.

00:34:40.830 --> 00:34:42.920
It's a lot less work to write
a printer module than it was

00:34:42.920 --> 00:34:46.360
to write a classic driver,
by a long way.

00:34:46.770 --> 00:34:50.140
So what Apple's doing,
and what we've done for DP4,

00:34:50.140 --> 00:34:53.080
is we provided the
PostScript printer module,

00:34:53.150 --> 00:34:56.700
so we take care of most of
the PostScript printing needs.

00:34:56.850 --> 00:35:00.690
We don't have in DP4 full
support for PPD files.

00:35:00.700 --> 00:35:02.690
That'll come later.

00:35:02.790 --> 00:35:05.700
But Apple is taking on the
responsibility of providing

00:35:05.700 --> 00:35:07.700
PostScript printing support in the OS.

00:35:07.700 --> 00:35:10.460
And printer vendors
will be using the SDK,

00:35:10.630 --> 00:35:13.360
which I mentioned,
to write printer modules

00:35:13.360 --> 00:35:17.040
for their printers,
which sort different page

00:35:17.040 --> 00:35:19.700
description languages,
like PCL, which you've probably heard of,

00:35:19.700 --> 00:35:23.560
Escape P for Epson printers,
the BubbleJet language

00:35:23.560 --> 00:35:25.700
for Canon printers,
etc.

00:35:25.700 --> 00:35:30.060
So we're looking to those printer
vendors to write printer modules

00:35:30.060 --> 00:35:32.200
for those types of products.

00:35:33.780 --> 00:35:36.250
Print dialog extensions.

00:35:36.300 --> 00:35:39.350
You saw one in Alan's demo.

00:35:39.480 --> 00:35:41.690
In just the same way that
applications can add functionality

00:35:41.710 --> 00:35:47.760
to the page set and print dialogs,
printer vendors and basically printer

00:35:47.760 --> 00:35:53.470
modules can expose their printer-specific
features through these plugins.

00:35:53.900 --> 00:35:59.800
So,
not only do you have the printing system,

00:35:59.800 --> 00:36:02.500
that part of the OS,
putting up controls in the print dialog,

00:36:02.500 --> 00:36:06.290
you have applications potentially
doing it by installing their own PDEs,

00:36:06.340 --> 00:36:12.870
and you have the printer modules
registering their own PDEs.

00:36:14.640 --> 00:36:19.000
We're going to do all the basic,
what we call universal

00:36:19.070 --> 00:36:21.470
features in our PDEs,
so copies and page range

00:36:21.520 --> 00:36:22.600
fall into that category.

00:36:22.600 --> 00:36:27.550
We're also, after DP4,
but before we ship the first release,

00:36:27.900 --> 00:36:32.600
going to add these plugins to support
PPD features for PostScript printers.

00:36:32.600 --> 00:36:37.550
And we're going to be looking to the
printer vendors using this SDK to

00:36:37.580 --> 00:36:40.600
write these plugins for their features.

00:36:40.720 --> 00:36:45.640
We categorize these features
using some terminology,

00:36:45.660 --> 00:36:48.600
which I might as well mention now.

00:36:48.780 --> 00:36:51.970
Universal applies to features
which you always get,

00:36:51.970 --> 00:36:55.820
regardless of what you're printing to,
and copies and page

00:36:55.820 --> 00:36:57.600
range are good examples.

00:36:57.790 --> 00:37:01.390
Standard features,
features like quality mode,

00:37:01.480 --> 00:37:05.910
if you've got a printer that
supports best mode or draft mode,

00:37:05.930 --> 00:37:06.600
etc.

00:37:06.600 --> 00:37:09.760
Different printers want to
implement quality mode using

00:37:09.760 --> 00:37:10.600
a different style of print.

00:37:10.600 --> 00:37:14.560
So, because there isn't a standard
way of presenting that,

00:37:14.570 --> 00:37:20.970
we would expect the printer vendors
to develop those panels for what

00:37:20.970 --> 00:37:22.600
we call these standard features.

00:37:22.600 --> 00:37:27.600
Then applications can add their PDEs for
what we might call custom features.

00:37:27.600 --> 00:37:29.990
So, for example,
with this presentation package,

00:37:29.990 --> 00:37:34.170
if you wanted to print out slides, notes,
and handouts, you'd expect to see a panel

00:37:34.170 --> 00:37:37.600
loaded for that application's
custom features at print time.

00:37:37.600 --> 00:37:38.160
And then last but not least,
the printer vendors are going to use

00:37:38.160 --> 00:37:38.600
this SDK to develop those panels.

00:37:38.600 --> 00:37:39.600
So, we're going to be looking at
the different types of features.

00:37:39.600 --> 00:37:42.920
So, the printer vendors are going to
be writing PDEs for their unique

00:37:42.920 --> 00:37:44.600
features for their printers.

00:37:45.600 --> 00:37:48.590
So, Apple's going to be
taking care of PostScript,

00:37:48.590 --> 00:37:51.280
and the printer vendors are
going to be writing PDEs for

00:37:51.280 --> 00:37:53.810
their non-PostScript printers.

00:37:57.260 --> 00:38:02.960
Printer modules and PDEs are
mandatory to hook a printer up

00:38:02.960 --> 00:38:05.200
to 10 and be able to print to it.

00:38:05.200 --> 00:38:10.200
I/O modules and their counterpart,
which is on the next slide,

00:38:10.530 --> 00:38:16.420
those we're hoping that printer
vendors and other developers really

00:38:16.500 --> 00:38:20.630
don't have to spend a lot of time on,
because it's our intent to support

00:38:20.630 --> 00:38:23.190
the mainstream print protocols.

00:38:23.200 --> 00:38:28.200
In DP4, we've got I/O modules which
handle printing over LPR.

00:38:28.270 --> 00:38:32.200
AppleTalk with Pap, we can send

00:38:32.300 --> 00:38:52.300
[Transcript missing]

00:38:52.500 --> 00:38:57.100
If you're using a printer
connected up to Mac OS X,

00:38:57.100 --> 00:39:00.000
and for example it has an interface
that we haven't supported,

00:39:00.150 --> 00:39:04.400
then you should talk to us before you
go ahead and write an I/O module for it.

00:39:04.480 --> 00:39:06.350
Because we'd like to help you.

00:39:06.450 --> 00:39:08.700
But there will be cases
where you have a proprietary

00:39:08.700 --> 00:39:10.400
interface maybe to your printer.

00:39:10.400 --> 00:39:13.770
If that's the case, then the SDK,
through the SDK,

00:39:13.770 --> 00:39:18.190
we will provide sample code for
you writing your own I/O modules.

00:39:18.600 --> 00:39:22.420
And I mentioned a couple there
that possibly Apple would do,

00:39:22.420 --> 00:39:26.340
SCSI and IRDA,
but it's not high on our priority list.

00:39:28.800 --> 00:39:32.500
The last is printer browser modules.

00:39:32.530 --> 00:39:36.200
These are, to I/O modules,
what print dialog extensions

00:39:36.200 --> 00:39:37.560
were to printer modules.

00:39:37.580 --> 00:39:39.800
I/O modules have no UI.

00:39:39.800 --> 00:39:44.190
If you want to find a printer
on a particular connection type,

00:39:44.320 --> 00:39:48.200
Print Center loads a printer
browser module to give you the user

00:39:48.200 --> 00:39:50.800
interface for the discovery process.

00:39:50.930 --> 00:39:57.610
So we have, for example, in DP4,
we've got a printer browser module so

00:39:57.620 --> 00:40:00.800
that you can set up an LPR printer.

00:40:00.800 --> 00:40:05.800
And as you probably know,
LPR is not a BiDi connection.

00:40:05.800 --> 00:40:10.800
So the user interface for LPR is that you
type in the IP address of the printer.

00:40:10.800 --> 00:40:14.750
We have another one that Alan showed,
NBP,

00:40:14.870 --> 00:40:17.790
that's the AppleTalk discovery protocol.

00:40:17.860 --> 00:40:20.790
So we have a printer browser module.

00:40:20.800 --> 00:40:23.800
We have a printer browser module for
connecting to AppleTalk printers.

00:40:23.800 --> 00:40:26.800
Netinfo,
which you're probably familiar with,

00:40:26.800 --> 00:40:28.540
which is a directory service,
we have a printer browser

00:40:28.540 --> 00:40:32.790
module so you can find printers
in the Netinfo database.

00:40:32.810 --> 00:40:36.230
And last, and of course not least,
is USB, and you can find

00:40:36.230 --> 00:40:38.800
printers on your USB bus.

00:40:38.800 --> 00:40:41.010
So in due course,
we'll have a printer browser

00:40:41.040 --> 00:40:42.800
module for FireWire printers.

00:40:43.870 --> 00:40:47.600
Another one on our list is SLP,
Service Location Protocol.

00:40:47.650 --> 00:40:49.620
Again, it's not in DP4,
it's likely not going to

00:40:49.620 --> 00:40:53.400
be in the first release,
but it's becoming quite a popular

00:40:53.620 --> 00:40:56.070
IP-based discovery protocol.

00:40:56.150 --> 00:41:00.950
And as people move more and
more towards IP-only networks,

00:41:00.950 --> 00:41:05.810
we'll add SLP to enable you
to find SLP-savvy printers.

00:41:07.000 --> 00:41:11.540
And just like you might have to
write your own custom I/O modules,

00:41:11.540 --> 00:41:13.640
if you were to do so,
you'd be writing a printer browser

00:41:13.640 --> 00:41:19.890
module to go along with it.

00:41:21.350 --> 00:41:25.970
The print dialog extensions, I/O modules,
and these printer browser modules,

00:41:26.100 --> 00:41:30.300
these are all part of
the so-called Tioga SDK.

00:41:30.430 --> 00:41:34.140
The SDK is focused right now
on the printer modules and

00:41:34.180 --> 00:41:36.530
the print dialog extensions.

00:41:36.530 --> 00:41:41.020
It's coming out next week, and as I said,
if you're not already talking to us,

00:41:41.020 --> 00:41:41.970
you should be.

00:41:43.680 --> 00:41:47.740
I could say how great this SDK is,
but actually we've been working

00:41:47.740 --> 00:41:52.000
with some of the main people in the
printing business for the last year.

00:41:52.000 --> 00:41:57.070
In fact, a year ago next week,
we got together with them

00:41:57.140 --> 00:42:01.560
and started the collaborative
effort of creating this SDK.

00:42:01.650 --> 00:42:05.150
And we've been making some pretty
good progress over the last year.

00:42:05.340 --> 00:42:09.200
They've been very helpful, supportive,
and patient with us.

00:42:09.340 --> 00:42:12.910
And so we thought that we would
get some of these guys who've been

00:42:12.910 --> 00:42:15.700
collaborating with us to come up
here and just tell you what their

00:42:15.700 --> 00:42:18.640
plans are for supporting Tioga on X.

00:42:18.640 --> 00:42:24.620
And I'm going to hand over to
John now to make those introductions.

00:42:32.640 --> 00:42:33.950
Thank you, Paul.

00:42:33.960 --> 00:42:36.300
As Paul mentioned,
we have been working with developers.

00:42:36.300 --> 00:42:39.460
We have not been designing
this in a black box.

00:42:39.540 --> 00:42:41.450
We have been taking feedback.

00:42:41.550 --> 00:42:45.040
And we've been very lucky that we've
actually worked very closely with

00:42:45.130 --> 00:42:49.160
some of the key printer developers out
there to get some very good feedback.

00:42:49.280 --> 00:42:52.540
And the results have
been extremely positive.

00:42:52.660 --> 00:42:55.410
So I'd like to first introduce

00:42:55.520 --> 00:42:59.260
I'll introduce the three
that we have reps today.

00:42:59.260 --> 00:43:04.960
I'll first off with Rick Spillers from
HeLa Packard to talk about where they're

00:43:04.960 --> 00:43:07.970
going with Mac OS X and their printers.

00:43:07.970 --> 00:43:07.970
Rick.

00:43:09.730 --> 00:43:12.280
Hi everybody,
I'm very glad to be here and I just

00:43:12.300 --> 00:43:15.930
want to say that I'm part of a small
team inside Hewlett Packard that's

00:43:15.980 --> 00:43:19.700
focused exclusively on the Mac market
across all of our product lines.

00:43:19.710 --> 00:43:23.330
It includes our large format design jets,
our laser jets, and especially our award

00:43:23.330 --> 00:43:24.700
winning desk jet printers.

00:43:24.700 --> 00:43:27.410
Since the iMac first
introduced a few years ago,

00:43:27.410 --> 00:43:30.770
we've been working real closely
with Apple on an R&D level,

00:43:30.780 --> 00:43:32.700
and especially in the last year,
as Paul says,

00:43:32.700 --> 00:43:36.650
our software engineering teams have
been working with Apple to make sure

00:43:36.660 --> 00:43:38.700
we're on track with OS X development.

00:43:38.710 --> 00:43:40.160
And that's been working out very well.

00:43:40.160 --> 00:43:43.680
And we have some very hardworking--

00:43:43.720 --> 00:43:46.850
Mac-focused software engineers,
many of whom are in the room right now on

00:43:46.850 --> 00:43:50.730
our quality assurance team that's working
real closely with Apple to make sure our

00:43:50.730 --> 00:43:56.920
OS X drivers work well and we're ready to
ship things in the box as OS X develops.

00:43:57.240 --> 00:43:59.890
We're very excited
inside HP about Mac OS X,

00:43:59.900 --> 00:44:03.360
and it's really raising some eyebrows
inside HP with all of our Wintel folks,

00:44:03.360 --> 00:44:08.910
so it's really interesting to watch
that from the Mac perspective.

00:44:09.170 --> 00:44:13.340
I also want to ask that,
from a developer standpoint,

00:44:13.390 --> 00:44:17.190
as you develop your products for OS X,
you think about HP,

00:44:17.280 --> 00:44:22.780
and to help you do that,
HP has a website, hp.com/go/solutions,

00:44:22.830 --> 00:44:26.550
where you can sign up on a couple of
different levels to get HP products to

00:44:26.550 --> 00:44:30.460
test with for your OS X development,
and also to get HP products to use at

00:44:30.460 --> 00:44:32.720
trade show demos and things like that.

00:44:32.880 --> 00:44:37.040
So that's available to you,
hp.com/go/solutions.

00:44:37.080 --> 00:44:39.150
And in closing,
I just want to say that we're very

00:44:39.150 --> 00:44:40.820
excited to be working with Apple.

00:44:40.820 --> 00:44:43.700
I think OS X is going to be really hot,
and we're working hard to make

00:44:43.700 --> 00:44:46.600
sure we have OS X drivers that
are going to ship in the box with

00:44:46.600 --> 00:44:49.040
our printers as things roll on.

00:44:49.090 --> 00:44:50.890
So thank you.

00:44:54.800 --> 00:44:56.800
Thank you, Rick.

00:44:56.800 --> 00:45:01.760
Next, I would like to go ahead
and introduce from Epson,

00:45:01.760 --> 00:45:03.750
Mitch Kadish.

00:45:04.200 --> 00:45:04.700
Thank you, John.

00:45:04.700 --> 00:45:07.570
It's great to be here.

00:45:07.640 --> 00:45:13.860
The relationship that Epson shares with
Apple is a very important one for us,

00:45:13.880 --> 00:45:20.110
and it's also been a continuous one,
even through the tough period that

00:45:20.250 --> 00:45:22.750
Apple went through a few years ago.

00:45:22.910 --> 00:45:25.780
As you probably know,
when the iMac was introduced,

00:45:25.780 --> 00:45:28.170
Epson was there with
the first USB printer,

00:45:28.340 --> 00:45:32.380
and we continued our innovation
last year by introducing

00:45:32.380 --> 00:45:34.610
the first FireWire printer.

00:45:34.700 --> 00:45:38.220
We're very excited about
working with Apple on OS X,

00:45:38.340 --> 00:45:42.570
and you can be sure that when it ships,
our drivers will be there fully

00:45:42.730 --> 00:45:46.120
supporting all the printing
features in the operating system.

00:45:46.180 --> 00:45:52.380
And we're especially excited about the
Tioga architecture and how we think

00:45:52.430 --> 00:45:56.910
it will help drive high-resolution
printing forward into the future.

00:45:57.040 --> 00:45:58.690
Thank you.

00:46:01.280 --> 00:46:04.860
And finally,
we have a representative from Canon to

00:46:04.920 --> 00:46:08.200
talk about their directions and how
they're getting involved with Mac OS X,

00:46:08.230 --> 00:46:10.200
Robert Shibata.

00:46:10.250 --> 00:46:11.110
Hi, I'm Robert Shibata.

00:46:11.260 --> 00:46:13.890
I'm a representative
from Canon here today.

00:46:13.990 --> 00:46:17.180
And I just wanted to let you
know that Canon is the largest

00:46:17.190 --> 00:46:19.300
printer manufacturer in the world.

00:46:19.380 --> 00:46:23.370
And we are definitely behind Apple.

00:46:23.400 --> 00:46:24.850
As you know,
we have a lot of products that

00:46:24.850 --> 00:46:26.280
are supporting the Apple platform.

00:46:26.370 --> 00:46:30.000
And actually going back in history,
we've actually been working with

00:46:30.000 --> 00:46:33.090
Apple for well over 10 years,
going back to the LaserWriters

00:46:33.100 --> 00:46:34.300
and the StyleWriters.

00:46:34.420 --> 00:46:39.300
And more recently, with products that are
supporting the Apple platform,

00:46:39.400 --> 00:46:45.300
we have obviously printers, scanners,
MFPs, a full line of products.

00:46:45.410 --> 00:46:49.530
Back at the keynote in January,
Steve Jobs actually held up one

00:46:49.530 --> 00:46:54.340
of our USB-powered scanners and
said something to the effect that,

00:46:54.350 --> 00:46:56.300
"Oh, this is a really neat
old product," I think.

00:46:56.500 --> 00:46:58.540
So, um...

00:46:58.600 --> 00:47:00.460
Actually, I did,
I promised I wouldn't do too

00:47:00.460 --> 00:47:03.420
much sales type stuff here today,
but I just wanted to show our,

00:47:03.420 --> 00:47:05.710
our little portable we have.

00:47:05.800 --> 00:47:09.660
So this is the BJC85,
and it is actually the thinnest

00:47:09.660 --> 00:47:13.050
and lightest notebook product
for the Apple platform.

00:47:13.100 --> 00:47:15.420
And as you can see,
it's actually a perfect

00:47:15.530 --> 00:47:16.980
partner for a PowerBook.

00:47:17.010 --> 00:47:18.790
So those of you who may
have PowerBooks or know

00:47:18.790 --> 00:47:21.990
somebody that has a PowerBook,
you know, just keep this product in mind.

00:47:22.000 --> 00:47:26.000
And speaking about,
speaking about miniaturization,

00:47:26.000 --> 00:47:29.400
we actually have the smallest
MFP for the Apple platform,

00:47:29.400 --> 00:47:30.490
you know, in addition.

00:47:30.500 --> 00:47:33.060
But not to talk about
too much of our products,

00:47:33.120 --> 00:47:35.490
I didn't want to take
too much of your time,

00:47:35.490 --> 00:47:38.000
is that we do have a
full line of products.

00:47:38.000 --> 00:47:40.940
And we actually just
shipped a photo printer,

00:47:41.040 --> 00:47:45.020
which is called the BJC8200,
which actually has the smallest

00:47:45.020 --> 00:47:46.500
picoliter dot on the market.

00:47:46.920 --> 00:47:55.060
And, um, Well, anyways, Anyways,
just to say that our developers

00:47:55.140 --> 00:47:58.100
back in Japan have really been
working very closely with,

00:47:58.120 --> 00:48:00.330
uh, with, uh,
Paul Danbold and the printer

00:48:00.340 --> 00:48:03.070
team to really support the
current operating system as

00:48:03.070 --> 00:48:04.500
well as going future with OSX10.

00:48:04.500 --> 00:48:06.500
So, um, OSX, excuse me.

00:48:06.500 --> 00:48:09.310
So, um,
we really look forward to this new

00:48:09.310 --> 00:48:12.170
operating system with a lot of the power,
the multi-functionality with

00:48:12.180 --> 00:48:13.490
this new operating system.

00:48:13.500 --> 00:48:14.990
So, thanks very much.

00:48:15.000 --> 00:48:16.000
Thank you.

00:48:16.000 --> 00:48:21.490
Just to let you know,
operators are standing by.

00:48:21.500 --> 00:48:22.000
Thank you.

00:48:26.470 --> 00:48:29.290
So as you can see,
we've actually been working with three

00:48:29.290 --> 00:48:30.520
of the bigger companies out there.

00:48:30.520 --> 00:48:33.230
We have been working with
other developers as well.

00:48:33.440 --> 00:48:35.980
And it's been a very
interesting experience,

00:48:35.980 --> 00:48:41.530
because normally you think of the big
companies out on the market as against

00:48:41.530 --> 00:48:43.770
each other and almost a cutthroat.

00:48:43.830 --> 00:48:45.710
And it's an amazing experience to
get all three of them in the same

00:48:45.710 --> 00:48:48.610
room and actually cooperating and
giving us ideas on how we can make

00:48:48.610 --> 00:48:50.420
the operating system move forward.

00:48:50.540 --> 00:48:52.560
So we are very excited
to be working with them,

00:48:52.640 --> 00:48:55.320
as well as working with
other companies as well.

00:48:56.800 --> 00:49:02.110
So, to wrap up the session and where
you should be going forward,

00:49:02.280 --> 00:49:05.520
We first recommend that
after this session,

00:49:05.550 --> 00:49:07.900
in addition to going to the
sessions this afternoon,

00:49:07.920 --> 00:49:09.950
go back and take a look
at the documentation.

00:49:10.030 --> 00:49:12.940
You'll find some documentation
up on the website,

00:49:13.040 --> 00:49:19.200
developer.apple.com/techpubs/carbon/mult
imediacarbonprintingmanager.

00:49:19.200 --> 00:49:23.100
Take a look at the documentation
and get more in depth with it.

00:49:23.200 --> 00:49:28.200
In addition,
start using Carbon in your applications.

00:49:28.200 --> 00:49:30.200
As you're porting your
applications to Carbon,

00:49:30.200 --> 00:49:33.810
use the Carbon printing APIs.

00:49:34.790 --> 00:49:38.670
And finally,
we have an email address that you can

00:49:38.670 --> 00:49:42.180
send us feedback of your experiences,
let us know what we're doing right,

00:49:42.290 --> 00:49:43.700
let us know what we're doing wrong.

00:49:43.870 --> 00:49:49.690
And that's at
macosx-dev-feedback@apple.com