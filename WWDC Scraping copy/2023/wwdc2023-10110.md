# Wwdc2023 10110

## Transcript

More Videos

Streaming is available in most browsers,and in the Developer app.

About

Transcript

Elevate your windowed app for spatial computingDiscover how you can bring your multiplatform SwiftUI app to visionOS and the Shared Space. We'll show you how to add the visionOS destination to an existing app and view your app in the Simulator. Explore how your SwiftUI code automatically adapts to support the unique context and presentation of the visionOS platform. Learn how you can update custom views, improve your app's UI, and add features and controls specific to this platform.Chapters1:50 -SwiftUI in the Shared Space4:59 -Polishing your app12:08 -Brand new conceptsResourcesHD VideoSD VideoRelated VideosWWDC23Go beyond the window with SwiftUIMeet SwiftUI for spatial computingMeet UIKit for spatial computingRun your iPad and iPhone apps in the Shared SpaceTake SwiftUI to the next dimensionWhat’s new in privacy

Discover how you can bring your multiplatform SwiftUI app to visionOS and the Shared Space. We'll show you how to add the visionOS destination to an existing app and view your app in the Simulator. Explore how your SwiftUI code automatically adapts to support the unique context and presentation of the visionOS platform. Learn how you can update custom views, improve your app's UI, and add features and controls specific to this platform.

1:50 -SwiftUI in the Shared Space

4:59 -Polishing your app

12:08 -Brand new concepts

HD VideoSD Video

HD Video

SD Video

Go beyond the window with SwiftUI

Meet SwiftUI for spatial computing

Meet UIKit for spatial computing

Run your iPad and iPhone apps in the Shared Space

Take SwiftUI to the next dimension

What’s new in privacy

Search this video…♪ Mellow instrumental hip-hop ♪♪Hello!I'm Harlan, and I work on SwiftUI.I'm thrilled to help you make your windowed apptruly spectacular on this new spatial platform.With spatial computing, your apps existwithin your physical surroundings,which enables whole new classesof stunning three-dimensional experiences.And as with every Apple platform,the best way to build an app is with SwiftUI.SwiftUI has added a suite of APIs and behaviorsthat take advantage of everythingthis new platform has to offer.If you haven't already,watch "Meet SwiftUI for spatial computing"for an overview of all the new waysyou can use SwiftUI on this device.I'll be focusing on SwiftUI but if you're working with UIKit,there's a lot you can take advantage of too.Check out "Meet UIKit for spatial computing"to learn how to make the best UIKit experience possible.If you have an existing iPhone or iPad appand you'd prefer to retain your iOS experience, check out"Run your iPad and iPhone apps in the Shared Space."Whether you're bringing an app from another Apple platformor making something brand-new, SwiftUI is the best wayto make your app feel at home wherever it runs.In this session, we'll update a SwiftUI app for this platform.We'll begin by exploring how the built-in controlsautomatically adapt themselves for legibility and interaction;we'll talk about how to ensure your custom views and controlstake advantage of the new visuals and input techniqueson this device;and we'll adopt some brand-new featuresthat are only possible with this device.This platform was built from the ground upwith SwiftUI in mind.In fact, most of the system applicationsare written with SwiftUI,like Keynote,Freeform,and TV,which all bring their familiar interfacesright into your surroundings.Even though these apps look similarto their iPad counterparts, they take full advantageof the new design language and interaction methodson this platform.Let's explore how you can do the same with your appsby updating an iPad app together.This is Backyard Birds, and it's like a virtual birdwatching app,where you can feed and record all the birdsthat visit your yard.As a Swift developer, I love birds.This is my kind of app.Backyard Birds is written in SwiftUI.It's a great example of a multiplatform SwiftUI app.It supports iPhone, iPad, Mac, and Apple Watch.I'd like to add one more platform to that list.Let's make Backyard Birds really sing in the Shared Space.First, make sure your app supports this new platformby adding it in the Supported Platforms menu in Xcode.This will add a new run destination,so let's choose that and run our app in the simulator.Here in the simulator, when I move my cursor around,the app responds as if I was looking around with my eyes.When we run Backyard Birds, we immediately findthat it has the same basic layout as on iPad,but some things appear a little different.The first difference I notice is that the appnow has a glass background.Glass is a standard background provided to windows by default.It adjusts its contrast and color balancebased on lighting conditions and the colors of objects behind it.Because of that, this platform does not make a distinctionbetween light and dark appearances.Glass automatically ensures your app stays legibleno matter where you're using it.Let's explore Backyard Birds some more.Backyard Birds has a navigation split view at the top level,which provides this sidebarfor switching between top-level views.The sidebar automatically darkens its background on topof glass to visually separate itself from the detail view.When I hover the cursor over these list rows,they highlight subtly.I can tap on these rows to switch between views,just like on iPad.On the right side of the split view is a navigation stack.When I tap on one of the backyards,it navigates to its details view.From here I can see how much seed and wateris left for the birds in this yard.I can scroll down to see a list of all the birdsthat have recently visited.The navigation bar has these circular buttonsthat also highlight when I look at them.When I press the Favorite button,it scales down and then toggles the favorited state.These are just a few of the things that SwiftUI has doneto enhance every app for the Shared Space.Now that we've taken a stroll around Backyard Birdsand found some of the new, automatic behaviorsthat the built-in controls offer,let's investigate how we can make our custom viewsand controls feel at home.I spotted something subtle while we touredthe Backyards list.If I get really close to the app,the bird and plants remain crisp,but the fountain becomes a little blurry.I suspect the fountain is being drawn at a fixed resolution.Apps on this device are placed in your physical surroundings.And unlike other platforms, there's no screenwith physical pixels that defines the qualityat which your content can draw.Apps could be positioned anywhere.They might be pushed far away from you,or brought right up close, or even viewed at an angle.The system ensures that apps look greatin all these situations by scaling content dynamically.For the system to do that, you must provide vector assetsbecause bitmaps cannot be scaled without reducing quality.Text and SF Symbols are already vectors,but if you're using custom icons or graphics,use vectors to take advantage of dynamic content scaling.Let's check if that fountain is a bitmap image.Ah, if I look at the scales option,it's specified in individual scales.Thankfully, I have a vector for this asset already,so I'll switch it to a single scale,remove the existing assets, and replace it with my vector.Then I'll check the Preserve Vector Data box,which allows the contents to scale to any size.This setting is supported on all Apple platforms.That's better.Now the fountain is sharp, and if I move closeror further away, it stays at high quality.Let's poke around some of the other tabs.The Plants tab shows a grid of all the plants,and these circles behind the plantslook bright and out of place.If we inspect the code, we find our answer:the background is a solid color.Solid colors like this one have a fixed contrast against glassand can't adjust to your surroundings.There's a check here to use a slightly darker colorin Dark Mode, which is a common practice on iOS.This platform reports its color scheme as dark,so this is the color we see behind the plants.But remember, this platform doesn't distinguishbetween light and dark color schemes.Instead, the best way to make sure your content is legible,regardless of what's coming through glass,is to adopt vibrancy.Vibrant materials introduce additional contrastand brightness to ensure that content on top of glassremains legible no matter what's shining through.All of the built-in controls and containersuse these vibrant materials by default,so if you're using standard controls,there's no extra work for you here.SwiftUI's semantic styles automatically adoptan appropriate appearance on each platform.On this device,they look vibrant when placed on top of glass.If you're building your own custom views or containers,use these semantic styles to make your content legibleno matter how glass adapts to your surroundings.Let's change these plant icons to use a semantic fill colorrather than a solid color.Since we're using semantic materials,we can remove the color scheme check altogether.Now the code is simpler and more correct on all platforms.Wow, these icons are much better.They pop beautifully against the glassin every lighting condition.Now that we've spent some time improving the visualsin the app,let's make sure all the interactive componentsare clear and easy to target.As you learned in "Meet SwiftUI for spatial computing,"there are four ways you can interact with your apps.The most common interaction is an indirect pinch gesture,where you look at a control and pinch your fingers togetherto perform a tap.If an app is close to you, you can directly interact with itjust by reaching out and touching it.If you've paired a trackpad, you can use it as a pointerfor precise input.And the world-class accessibility technologiesthat you're already familiar with on Apple platformsare also available on this device.Tools like VoiceOver and Switch Control enable everyoneto have the same great experience using your apps.On this platform, interactable contentis highlighted using hover effects.For example, when you look at a controllike a button or a list, a subtle highlight effectover the view's bounds makes it clearthat you can interact with it.These hover effects are crucial to making your appfeel responsive.They give people confidence that the view they're looking ator reaching for is the view that they'll interact with.Hover effects are added automaticallyto all system controls.If you use the built-in controls provided by SwiftUI,you'll get these effects in your app for free.I noticed a missing hover effect on the Birds tabof our app.I can tap on one of these birds, but there's no visual indicationthat I can do that because there's no hover effect.Whenever you make a control that responds to gestures like taps,it should probably have a hover effect.You can add one using the hoverEffect() modifier.By default, the hover effect is a highlight,meaning it will brighten when you look at the control.With our new hover effect,it's clear that I can interact with these controls,but the hover effect has these sharp corners,and I think they'd look a little better rounded.I can provide a custom shapeusing the contentShape() modifier,with hoverEffect as the kind.The hoverEffect() modifier reads this content shapeout of the view that it modifies.There, that feels much better.The hover effect is clear and has a bit of paddingand nice rounded corners.However, I think there's more that we can do.In SwiftUI, if a control performs an actionin response to a tap, it's likely that the controlshould just be a button.Let's change the bird view to a button.Buttons are bordered by default on this platform,but I don't want these buttons to have a backgroundwhen I'm not looking at them.I'll make this a plain button, so it getsa standard hover effect but no background or internal padding.Perfect!These buttons have a standard hover effect,and they scale down when they're tapped.Hover effects were built to preserve privacy.These effects are performed by the systemoutside of your app's process.System hover effects are the only way to make your appreact to where people are looking.Your app is only told when someone pinches their fingers,directly touches your app, or hovers their fingeror pointer over your controls.After all these changes, I'd say Backyard Birdsis looking pretty good.But by making some small changes to our layoutand adopting some features unique to this platform,we can really take to the skies.Let's talk about some of the top-level layout.On iPad, when a window's horizontal size classis regular,a sidebar is preferred over a tab viewbecause it makes better use of the increased width.On this device, however, your windows are not tiedto the size of a screen, and controls are not requiredto live inside your window.Consider using a tab view to switch between top-level views.When using a tab view, the tab bar is attachedto the left side of your app, like the one here in Photos.When you look at one of the icons,it automatically expands to show each tab's label.Let's go ahead and switch from a navigation split viewto a tab view.I'll make a view for each screen in the app......and give it a tab item with a title and icon.Nice!The tab bar is collapsedwhen you're not interacting with it,and the app now has much more room for its content.Notice how the tab bar sits outside of the windowinstead of within it.This kind of attachment is called an ornament.Ornaments are positioned outside the boundariesat the edges of your windows and are a great placeto put additional controls that you wantalongside your main content.In addition to the tab bar, Photos has a toolbarat the bottom that lets you control the time rangesshown in your library.These kinds of ornaments are so common,you can add one automatically with the .toolbar modifierusing the bottomOrnament placement.Toolbar ornaments provide a glass capsule backgroundautomatically.I have an idea for an ornament to add to Backyard Birds.I try to keep an eye on how much water and seedI've left out, but if I'm running low,I'd like to be told that a feeder needs a refill.You can build this kind of custom ornamentusing the ornament() modifier.The attachmentAnchor determines where in your appthe ornament will be attached.I could put my notification on any edge of my app window,but I want to align it to the bottom.The contentAlignment parameter lets you choosewhat part of your ornament is aligned to the attachmentAnchor.I'd like to put the center of my ornamentat the bottom of my app.Because you have more control over the contentsof a custom ornament, SwiftUI does not give thema glass background by default.If you do want one, you can usethe .glassBackgroundEffect() modifieron the ornament's contents.Now when there's not enough water or seedsin any of my yards, I'll get this messageat the bottom of my app, and I can tap on itto navigate to that yard.I love it!Because SwiftUI automatically adapts to the platformit's running on,it was simple to make Backyard Birdsfeel at home in the Shared Space.You can follow the same steps in your apps.Add hover effects to interactive controls,use vector assets and vibrancy for legibility,and make ornaments for auxiliary controls.There's still so much more that you can explorethat's only possible on this platform,like volumes for 3D content and Immersive Spacesfor spatial experiences.Check out "Take SwiftUI to the next dimension"and "Go beyond the window with SwiftUI"to learn how to expand your app beyond its window.Thanks and happy coding!♪

♪ Mellow instrumental hip-hop ♪♪Hello!I'm Harlan, and I work on SwiftUI.I'm thrilled to help you make your windowed apptruly spectacular on this new spatial platform.With spatial computing, your apps existwithin your physical surroundings,which enables whole new classesof stunning three-dimensional experiences.

And as with every Apple platform,the best way to build an app is with SwiftUI.SwiftUI has added a suite of APIs and behaviorsthat take advantage of everythingthis new platform has to offer.If you haven't already,watch "Meet SwiftUI for spatial computing"for an overview of all the new waysyou can use SwiftUI on this device.I'll be focusing on SwiftUI but if you're working with UIKit,there's a lot you can take advantage of too.Check out "Meet UIKit for spatial computing"to learn how to make the best UIKit experience possible.If you have an existing iPhone or iPad appand you'd prefer to retain your iOS experience, check out"Run your iPad and iPhone apps in the Shared Space."Whether you're bringing an app from another Apple platformor making something brand-new, SwiftUI is the best wayto make your app feel at home wherever it runs.In this session, we'll update a SwiftUI app for this platform.We'll begin by exploring how the built-in controlsautomatically adapt themselves for legibility and interaction;we'll talk about how to ensure your custom views and controlstake advantage of the new visuals and input techniqueson this device;and we'll adopt some brand-new featuresthat are only possible with this device.This platform was built from the ground upwith SwiftUI in mind.In fact, most of the system applicationsare written with SwiftUI,like Keynote,Freeform,and TV,which all bring their familiar interfacesright into your surroundings.Even though these apps look similarto their iPad counterparts, they take full advantageof the new design language and interaction methodson this platform.Let's explore how you can do the same with your appsby updating an iPad app together.This is Backyard Birds, and it's like a virtual birdwatching app,where you can feed and record all the birdsthat visit your yard.As a Swift developer, I love birds.This is my kind of app.Backyard Birds is written in SwiftUI.It's a great example of a multiplatform SwiftUI app.It supports iPhone, iPad, Mac, and Apple Watch.I'd like to add one more platform to that list.Let's make Backyard Birds really sing in the Shared Space.First, make sure your app supports this new platformby adding it in the Supported Platforms menu in Xcode.

This will add a new run destination,so let's choose that and run our app in the simulator.

Here in the simulator, when I move my cursor around,the app responds as if I was looking around with my eyes.When we run Backyard Birds, we immediately findthat it has the same basic layout as on iPad,but some things appear a little different.The first difference I notice is that the appnow has a glass background.Glass is a standard background provided to windows by default.It adjusts its contrast and color balancebased on lighting conditions and the colors of objects behind it.Because of that, this platform does not make a distinctionbetween light and dark appearances.Glass automatically ensures your app stays legibleno matter where you're using it.Let's explore Backyard Birds some more.Backyard Birds has a navigation split view at the top level,which provides this sidebarfor switching between top-level views.The sidebar automatically darkens its background on topof glass to visually separate itself from the detail view.When I hover the cursor over these list rows,they highlight subtly.I can tap on these rows to switch between views,just like on iPad.On the right side of the split view is a navigation stack.When I tap on one of the backyards,it navigates to its details view.From here I can see how much seed and wateris left for the birds in this yard.I can scroll down to see a list of all the birdsthat have recently visited.The navigation bar has these circular buttonsthat also highlight when I look at them.When I press the Favorite button,it scales down and then toggles the favorited state.These are just a few of the things that SwiftUI has doneto enhance every app for the Shared Space.Now that we've taken a stroll around Backyard Birdsand found some of the new, automatic behaviorsthat the built-in controls offer,let's investigate how we can make our custom viewsand controls feel at home.I spotted something subtle while we touredthe Backyards list.If I get really close to the app,the bird and plants remain crisp,but the fountain becomes a little blurry.I suspect the fountain is being drawn at a fixed resolution.Apps on this device are placed in your physical surroundings.And unlike other platforms, there's no screenwith physical pixels that defines the qualityat which your content can draw.Apps could be positioned anywhere.They might be pushed far away from you,or brought right up close, or even viewed at an angle.The system ensures that apps look greatin all these situations by scaling content dynamically.For the system to do that, you must provide vector assetsbecause bitmaps cannot be scaled without reducing quality.Text and SF Symbols are already vectors,but if you're using custom icons or graphics,use vectors to take advantage of dynamic content scaling.Let's check if that fountain is a bitmap image.Ah, if I look at the scales option,it's specified in individual scales.Thankfully, I have a vector for this asset already,so I'll switch it to a single scale,remove the existing assets, and replace it with my vector.Then I'll check the Preserve Vector Data box,which allows the contents to scale to any size.This setting is supported on all Apple platforms.That's better.Now the fountain is sharp, and if I move closeror further away, it stays at high quality.Let's poke around some of the other tabs.The Plants tab shows a grid of all the plants,and these circles behind the plantslook bright and out of place.If we inspect the code, we find our answer:the background is a solid color.Solid colors like this one have a fixed contrast against glassand can't adjust to your surroundings.There's a check here to use a slightly darker colorin Dark Mode, which is a common practice on iOS.This platform reports its color scheme as dark,so this is the color we see behind the plants.But remember, this platform doesn't distinguishbetween light and dark color schemes.Instead, the best way to make sure your content is legible,regardless of what's coming through glass,is to adopt vibrancy.Vibrant materials introduce additional contrastand brightness to ensure that content on top of glassremains legible no matter what's shining through.All of the built-in controls and containersuse these vibrant materials by default,so if you're using standard controls,there's no extra work for you here.SwiftUI's semantic styles automatically adoptan appropriate appearance on each platform.On this device,they look vibrant when placed on top of glass.If you're building your own custom views or containers,use these semantic styles to make your content legibleno matter how glass adapts to your surroundings.Let's change these plant icons to use a semantic fill colorrather than a solid color.Since we're using semantic materials,we can remove the color scheme check altogether.Now the code is simpler and more correct on all platforms.Wow, these icons are much better.They pop beautifully against the glassin every lighting condition.Now that we've spent some time improving the visualsin the app,let's make sure all the interactive componentsare clear and easy to target.As you learned in "Meet SwiftUI for spatial computing,"there are four ways you can interact with your apps.The most common interaction is an indirect pinch gesture,where you look at a control and pinch your fingers togetherto perform a tap.If an app is close to you, you can directly interact with itjust by reaching out and touching it.If you've paired a trackpad, you can use it as a pointerfor precise input.And the world-class accessibility technologiesthat you're already familiar with on Apple platformsare also available on this device.Tools like VoiceOver and Switch Control enable everyoneto have the same great experience using your apps.On this platform, interactable contentis highlighted using hover effects.For example, when you look at a controllike a button or a list, a subtle highlight effectover the view's bounds makes it clearthat you can interact with it.These hover effects are crucial to making your appfeel responsive.They give people confidence that the view they're looking ator reaching for is the view that they'll interact with.Hover effects are added automaticallyto all system controls.If you use the built-in controls provided by SwiftUI,you'll get these effects in your app for free.I noticed a missing hover effect on the Birds tabof our app.I can tap on one of these birds, but there's no visual indicationthat I can do that because there's no hover effect.Whenever you make a control that responds to gestures like taps,it should probably have a hover effect.You can add one using the hoverEffect() modifier.By default, the hover effect is a highlight,meaning it will brighten when you look at the control.With our new hover effect,it's clear that I can interact with these controls,but the hover effect has these sharp corners,and I think they'd look a little better rounded.I can provide a custom shapeusing the contentShape() modifier,with hoverEffect as the kind.The hoverEffect() modifier reads this content shapeout of the view that it modifies.

There, that feels much better.The hover effect is clear and has a bit of paddingand nice rounded corners.However, I think there's more that we can do.In SwiftUI, if a control performs an actionin response to a tap, it's likely that the controlshould just be a button.Let's change the bird view to a button.

Buttons are bordered by default on this platform,but I don't want these buttons to have a backgroundwhen I'm not looking at them.I'll make this a plain button, so it getsa standard hover effect but no background or internal padding.Perfect!These buttons have a standard hover effect,and they scale down when they're tapped.Hover effects were built to preserve privacy.These effects are performed by the systemoutside of your app's process.System hover effects are the only way to make your appreact to where people are looking.Your app is only told when someone pinches their fingers,directly touches your app, or hovers their fingeror pointer over your controls.After all these changes, I'd say Backyard Birdsis looking pretty good.But by making some small changes to our layoutand adopting some features unique to this platform,we can really take to the skies.Let's talk about some of the top-level layout.On iPad, when a window's horizontal size classis regular,a sidebar is preferred over a tab viewbecause it makes better use of the increased width.On this device, however, your windows are not tiedto the size of a screen, and controls are not requiredto live inside your window.Consider using a tab view to switch between top-level views.When using a tab view, the tab bar is attachedto the left side of your app, like the one here in Photos.When you look at one of the icons,it automatically expands to show each tab's label.Let's go ahead and switch from a navigation split viewto a tab view.I'll make a view for each screen in the app......and give it a tab item with a title and icon.Nice!The tab bar is collapsedwhen you're not interacting with it,and the app now has much more room for its content.Notice how the tab bar sits outside of the windowinstead of within it.This kind of attachment is called an ornament.Ornaments are positioned outside the boundariesat the edges of your windows and are a great placeto put additional controls that you wantalongside your main content.In addition to the tab bar, Photos has a toolbarat the bottom that lets you control the time rangesshown in your library.These kinds of ornaments are so common,you can add one automatically with the .toolbar modifierusing the bottomOrnament placement.Toolbar ornaments provide a glass capsule backgroundautomatically.I have an idea for an ornament to add to Backyard Birds.I try to keep an eye on how much water and seedI've left out, but if I'm running low,I'd like to be told that a feeder needs a refill.You can build this kind of custom ornamentusing the ornament() modifier.The attachmentAnchor determines where in your appthe ornament will be attached.I could put my notification on any edge of my app window,but I want to align it to the bottom.The contentAlignment parameter lets you choosewhat part of your ornament is aligned to the attachmentAnchor.I'd like to put the center of my ornamentat the bottom of my app.Because you have more control over the contentsof a custom ornament, SwiftUI does not give thema glass background by default.If you do want one, you can usethe .glassBackgroundEffect() modifieron the ornament's contents.Now when there's not enough water or seedsin any of my yards, I'll get this messageat the bottom of my app, and I can tap on itto navigate to that yard.I love it!Because SwiftUI automatically adapts to the platformit's running on,it was simple to make Backyard Birdsfeel at home in the Shared Space.You can follow the same steps in your apps.Add hover effects to interactive controls,use vector assets and vibrancy for legibility,and make ornaments for auxiliary controls.There's still so much more that you can explorethat's only possible on this platform,like volumes for 3D content and Immersive Spacesfor spatial experiences.Check out "Take SwiftUI to the next dimension"and "Go beyond the window with SwiftUI"to learn how to expand your app beyond its window.Thanks and happy coding!♪

## Code Samples

