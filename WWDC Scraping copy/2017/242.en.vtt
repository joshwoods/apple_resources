WEBVTT

00:00:07.516 --> 00:00:16.500
[ Cheering ]

00:00:21.176 --> 00:00:23.500
[ Applause ]

00:00:24.766 --> 00:00:25.426
>> Okay, thank you.

00:00:25.956 --> 00:00:26.366
Thank you.

00:00:26.826 --> 00:00:27.696
Good morning, everybody.

00:00:28.246 --> 00:00:29.096
My name is Kasia.

00:00:29.286 --> 00:00:30.366
I'm here with my colleagues,

00:00:30.366 --> 00:00:31.246
Shuchen and James.

00:00:31.556 --> 00:00:32.555
And we are here to hand you the

00:00:32.555 --> 00:00:33.986
keys to a better text input

00:00:33.986 --> 00:00:35.156
experience in your app.

00:00:35.246 --> 00:00:36.516
So, let's see what we're going

00:00:36.516 --> 00:00:37.236
to talk about today.

00:00:37.506 --> 00:00:39.246
We're going to start with

00:00:39.436 --> 00:00:40.686
integrating the keyboard into

00:00:40.686 --> 00:00:41.186
your layout.

00:00:41.596 --> 00:00:42.786
And we're also going to talk

00:00:42.786 --> 00:00:44.266
about creating dynamic and more

00:00:44.266 --> 00:00:45.556
interesting input accessory

00:00:45.556 --> 00:00:45.856
views.

00:00:46.446 --> 00:00:47.876
We'll talk about making your app

00:00:48.316 --> 00:00:49.816
reach multilingual audiences,

00:00:50.586 --> 00:00:52.056
using traits to make predictive

00:00:52.056 --> 00:00:54.796
quick type smarter in your app.

00:00:54.796 --> 00:00:56.026
Supporting hardware keyboards.

00:00:56.666 --> 00:00:58.166
Creating custom input views.

00:00:58.686 --> 00:01:00.076
And finally, tips and best

00:01:00.076 --> 00:01:01.146
practices for keyboard

00:01:01.146 --> 00:01:01.736
extensions.

00:01:02.346 --> 00:01:03.526
So, I'm going to start with

00:01:03.526 --> 00:01:04.666
integrating the keyboard into

00:01:04.666 --> 00:01:04.965
your app.

00:01:05.846 --> 00:01:06.816
And for that, I'm going to show

00:01:06.816 --> 00:01:08.286
you a screenshot of the app

00:01:08.286 --> 00:01:10.296
we've created for this talk.

00:01:10.296 --> 00:01:11.496
It's called CatChat.

00:01:11.496 --> 00:01:12.496
It's for talking with your pets.

00:01:13.416 --> 00:01:14.926
Not just cats, but in my case,

00:01:15.046 --> 00:01:16.446
just cats.

00:01:16.446 --> 00:01:18.436
And we do have this available as

00:01:18.436 --> 00:01:19.616
sample code so you can grab it

00:01:19.616 --> 00:01:20.146
from the site.

00:01:20.476 --> 00:01:21.726
Cat pictures not included.

00:01:22.696 --> 00:01:25.026
So, let's get started with that.

00:01:25.026 --> 00:01:25.636
You're going to see a lot of

00:01:25.636 --> 00:01:26.246
this in the talk.

00:01:26.246 --> 00:01:27.786
And we're going to start with

00:01:27.786 --> 00:01:29.346
accounting for changing keyboard

00:01:29.346 --> 00:01:29.576
heights.

00:01:30.976 --> 00:01:32.706
So, keyboards come in different

00:01:32.706 --> 00:01:33.166
sizes.

00:01:34.216 --> 00:01:35.976
Depending on the language that

00:01:35.976 --> 00:01:37.326
the user is using and the

00:01:37.326 --> 00:01:38.446
settings that they've enabled,

00:01:39.026 --> 00:01:40.076
you might see different heights

00:01:40.606 --> 00:01:41.916
of the keyboards that are used

00:01:41.916 --> 00:01:42.296
in your app.

00:01:42.816 --> 00:01:44.626
The English keyboard, with the

00:01:44.626 --> 00:01:46.716
predictive bar, is one height,

00:01:47.266 --> 00:01:48.876
whereas the Polish keyboard is

00:01:48.876 --> 00:01:51.246
shorter, and the Chinese 10-key

00:01:51.246 --> 00:01:53.126
pinyin keyboard, is taller than

00:01:53.126 --> 00:01:53.726
both of those.

00:01:54.716 --> 00:01:56.066
And there are third party

00:01:56.066 --> 00:01:57.356
keyboards, which some of you may

00:01:57.356 --> 00:01:58.946
have even written, and those do

00:01:58.946 --> 00:02:00.246
not have a specific height

00:02:00.246 --> 00:02:00.846
requirement.

00:02:01.496 --> 00:02:03.066
So, you're not ever guaranteed

00:02:03.066 --> 00:02:04.526
to get a specific height for a

00:02:04.526 --> 00:02:05.876
keyboard that a user is using in

00:02:05.876 --> 00:02:06.846
your app.

00:02:07.136 --> 00:02:08.216
So, how do you account for this?

00:02:09.256 --> 00:02:09.916
Well, we have a set of

00:02:09.916 --> 00:02:10.686
notifications.

00:02:11.586 --> 00:02:13.436
We tell you when the keyboard

00:02:13.436 --> 00:02:15.776
shows, when it hides, and when

00:02:15.776 --> 00:02:16.596
the frame changes.

00:02:17.136 --> 00:02:17.756
And for each of these

00:02:17.756 --> 00:02:18.896
notifications, we'll give you

00:02:18.896 --> 00:02:20.206
the beginning and ending frame

00:02:20.656 --> 00:02:21.916
that you get from the keyboard.

00:02:22.876 --> 00:02:24.756
Now before we go into how to

00:02:24.756 --> 00:02:25.546
work with that frame we're

00:02:25.546 --> 00:02:26.846
giving you, let's talk about a

00:02:26.846 --> 00:02:28.386
bit of a special case, and

00:02:28.386 --> 00:02:29.676
that's the undocked keyboard.

00:02:30.306 --> 00:02:33.106
In iPads, the user can actually

00:02:33.586 --> 00:02:34.786
lift the keyboard off the bottom

00:02:34.786 --> 00:02:36.216
of the screen, and move it

00:02:36.216 --> 00:02:37.586
around, as well as split it

00:02:37.586 --> 00:02:37.946
apart.

00:02:38.996 --> 00:02:41.126
In that instance, you generally

00:02:41.126 --> 00:02:42.736
don't want your app to be trying

00:02:42.736 --> 00:02:43.986
to stay on top of the keyboard,

00:02:43.986 --> 00:02:44.736
because they might move it all

00:02:44.736 --> 00:02:45.476
the way to the top of the

00:02:45.526 --> 00:02:46.766
screen, and then all your

00:02:46.766 --> 00:02:47.846
content is gone and that's no

00:02:47.846 --> 00:02:48.146
fun.

00:02:48.706 --> 00:02:50.266
So, when the keyboard gets

00:02:50.266 --> 00:02:51.596
undocked, we will send you a

00:02:51.596 --> 00:02:53.316
"Hide" notification, just like

00:02:53.316 --> 00:02:54.816
we would if the keyboard was

00:02:54.816 --> 00:02:55.396
dismissed.

00:02:56.236 --> 00:02:58.066
In most cases, that's how you're

00:02:58.066 --> 00:02:58.986
going to handle it, as though

00:02:58.986 --> 00:03:00.086
the keyboard was dismissed.

00:03:00.906 --> 00:03:01.956
If you do want to do something

00:03:01.956 --> 00:03:03.436
clever, we will continue sending

00:03:03.436 --> 00:03:05.016
you frame change notifications,

00:03:05.776 --> 00:03:07.736
but for most people, what you're

00:03:07.736 --> 00:03:09.286
going to want to do is track the

00:03:09.286 --> 00:03:10.756
most recent hide or show event,

00:03:11.576 --> 00:03:13.036
and then deal with the keyboard

00:03:13.036 --> 00:03:14.896
accordingly before you deal with

00:03:14.896 --> 00:03:15.636
any frame changes.

00:03:16.896 --> 00:03:18.206
So, the undocked keyboard is

00:03:18.206 --> 00:03:19.066
something like this.

00:03:19.066 --> 00:03:20.176
We have this nice scroll view.

00:03:20.886 --> 00:03:22.306
And when the keyboard comes up,

00:03:22.486 --> 00:03:23.606
the scroll view compensates.

00:03:23.726 --> 00:03:25.296
When it's undocked, it takes up

00:03:25.296 --> 00:03:26.226
the full screen again.

00:03:26.806 --> 00:03:27.856
And when the user docks it

00:03:27.856 --> 00:03:29.726
again, it comes back up so that

00:03:29.726 --> 00:03:30.626
you can see the entire

00:03:30.626 --> 00:03:32.376
transcript of your delightful

00:03:32.376 --> 00:03:33.856
chat with your cat, which is

00:03:33.856 --> 00:03:34.256
important.

00:03:35.166 --> 00:03:37.426
So, that's the kind of special

00:03:37.426 --> 00:03:37.846
case.

00:03:38.586 --> 00:03:40.086
So, let's move on to actually

00:03:40.116 --> 00:03:41.256
working with that frame

00:03:41.256 --> 00:03:42.456
notification that we give you.

00:03:43.666 --> 00:03:44.306
First things first.

00:03:44.306 --> 00:03:45.616
The keyboard is always full

00:03:45.616 --> 00:03:45.976
screen.

00:03:46.226 --> 00:03:47.626
It's always in the full screen

00:03:47.626 --> 00:03:48.486
coordinate space.

00:03:49.186 --> 00:03:51.146
So, the first thing you do when

00:03:51.146 --> 00:03:52.306
you get a keyboard frame from

00:03:52.306 --> 00:03:53.856
one of our notifications, is

00:03:53.856 --> 00:03:55.096
convert it from the frame -- the

00:03:55.096 --> 00:03:56.196
screen coordinates, to your

00:03:56.196 --> 00:03:57.656
local coordinates before you

00:03:57.656 --> 00:03:58.576
start working with anything

00:03:59.536 --> 00:03:59.636
else.

00:03:59.756 --> 00:04:01.636
Because the keyboard can be full

00:04:01.636 --> 00:04:03.476
screen when you are not, and

00:04:03.476 --> 00:04:04.686
because you can you know --

00:04:04.686 --> 00:04:05.516
there are all sorts of fun

00:04:05.516 --> 00:04:06.626
situations where keyboards come

00:04:06.626 --> 00:04:07.186
up and down.

00:04:07.506 --> 00:04:08.416
You always want to make sure to

00:04:08.416 --> 00:04:09.236
do this first.

00:04:09.236 --> 00:04:11.126
You can't count on the frame

00:04:11.126 --> 00:04:12.836
that you get being local to the

00:04:12.836 --> 00:04:13.476
frame of your app.

00:04:13.846 --> 00:04:15.076
Think about multitasking, for

00:04:15.076 --> 00:04:15.436
instance.

00:04:16.736 --> 00:04:17.935
Then, if you do use the

00:04:17.935 --> 00:04:19.086
intersection of the frame that

00:04:19.086 --> 00:04:19.836
we give you once you've

00:04:19.836 --> 00:04:21.406
converted it, and the view you

00:04:21.406 --> 00:04:24.056
want to use, you can then get

00:04:24.056 --> 00:04:25.106
the difference in height between

00:04:25.106 --> 00:04:26.386
the two of those -- or the

00:04:26.386 --> 00:04:27.806
height of the keyboard as it

00:04:27.806 --> 00:04:29.746
will overlap your view, and use

00:04:29.746 --> 00:04:31.586
that to adjust for the keyboard.

00:04:32.456 --> 00:04:33.446
So, let's talk about a couple

00:04:33.446 --> 00:04:34.646
different kinds of layouts.

00:04:35.276 --> 00:04:36.576
Let's start with layouts that do

00:04:36.576 --> 00:04:37.206
not scroll.

00:04:38.126 --> 00:04:40.496
So, static layouts are generally

00:04:40.496 --> 00:04:41.726
a couple of text views, maybe a

00:04:41.726 --> 00:04:43.536
button, where the user doesn't

00:04:43.536 --> 00:04:45.206
have to move around a lot in

00:04:45.206 --> 00:04:46.866
order to see everything in your

00:04:46.866 --> 00:04:47.136
view.

00:04:47.636 --> 00:04:48.616
But you still want it to look

00:04:48.616 --> 00:04:49.956
nice with all keyboards.

00:04:50.836 --> 00:04:52.226
In this instance, as an example,

00:04:52.446 --> 00:04:54.716
we have five text fields and

00:04:54.716 --> 00:04:56.046
they are tied together with UI

00:04:56.046 --> 00:04:57.576
Layout Guides acting as spacers.

00:04:58.236 --> 00:04:59.246
AT the top of the view, they're

00:04:59.246 --> 00:05:01.116
using The Safe Area Edge Insets,

00:05:01.596 --> 00:05:03.206
and at the bottom -- well, we'll

00:05:03.206 --> 00:05:04.776
talk about that in a second, but

00:05:05.056 --> 00:05:06.446
the spacers change size

00:05:06.476 --> 00:05:08.156
depending on what keyboard

00:05:08.156 --> 00:05:10.446
appears, so that it always shows

00:05:10.446 --> 00:05:11.816
all five of the text views to

00:05:12.146 --> 00:05:12.706
the user.

00:05:13.876 --> 00:05:15.286
So, how did we do that?

00:05:15.676 --> 00:05:17.046
Well, we created a custom UI

00:05:17.046 --> 00:05:18.676
Layout Guide with a height

00:05:18.676 --> 00:05:20.446
constraint that we hold onto so

00:05:20.446 --> 00:05:21.546
that we can adjust it later.

00:05:22.036 --> 00:05:25.676
The Layout Guide gets tied to

00:05:25.676 --> 00:05:27.576
the bottom Safe Area Layout

00:05:27.576 --> 00:05:28.446
Guide of your view.

00:05:29.166 --> 00:05:31.026
And the top of the Layout Guide

00:05:31.176 --> 00:05:32.556
should be tied to the bottom of

00:05:32.556 --> 00:05:34.316
the view or spacer that you want

00:05:34.316 --> 00:05:35.636
to appear directly on top of the

00:05:35.636 --> 00:05:37.256
keyboard, when the keyboard has

00:05:37.256 --> 00:05:37.696
appeared.

00:05:38.926 --> 00:05:40.176
Once you do that, you can do

00:05:40.176 --> 00:05:41.746
your height conversion after

00:05:41.746 --> 00:05:42.656
checking that the keyboard is

00:05:42.656 --> 00:05:44.626
visible, and simply set that

00:05:44.626 --> 00:05:46.036
height constraint you held onto,

00:05:46.366 --> 00:05:47.406
to the height of the keyboard.

00:05:48.266 --> 00:05:49.426
If you pop that into a view

00:05:49.426 --> 00:05:51.256
animation block with N call

00:05:51.256 --> 00:05:52.266
layout if needed, you'll get the

00:05:52.266 --> 00:05:53.626
cool little animation between

00:05:53.626 --> 00:05:55.226
the keyboards that you saw, just

00:05:55.226 --> 00:05:55.746
a moment ago.

00:05:56.706 --> 00:05:58.516
The more common case however,

00:05:58.606 --> 00:05:59.626
are scrolling layouts.

00:06:00.356 --> 00:06:01.666
Layouts embedded in the scroll

00:06:01.666 --> 00:06:02.956
view so that the user can move

00:06:02.956 --> 00:06:04.556
between your views, and see

00:06:04.556 --> 00:06:05.336
everything that they need to

00:06:05.336 --> 00:06:05.646
see.

00:06:06.536 --> 00:06:07.446
In our case, we had this

00:06:07.526 --> 00:06:08.746
conversation View Controller in

00:06:08.746 --> 00:06:09.616
our Cat Chat app.

00:06:10.206 --> 00:06:11.076
And we want to make sure that

00:06:11.076 --> 00:06:11.936
you can scroll through the

00:06:11.936 --> 00:06:13.746
entire conversation at any time.

00:06:14.536 --> 00:06:16.156
So, we need to make sure that

00:06:16.156 --> 00:06:18.086
the bottom of the table view is

00:06:18.086 --> 00:06:21.056
adjusted to how the entirety of

00:06:21.056 --> 00:06:22.296
your chat transcript.

00:06:23.246 --> 00:06:24.226
So, how do you do this?

00:06:24.906 --> 00:06:26.276
Very similar to before but a

00:06:26.276 --> 00:06:27.316
little less complicated.

00:06:27.616 --> 00:06:28.326
You simply make sure the

00:06:28.326 --> 00:06:30.356
keyboard's visible gain, do your

00:06:30.356 --> 00:06:31.666
frame conversion, get your

00:06:31.666 --> 00:06:33.646
height, and set the content

00:06:33.646 --> 00:06:34.976
inset of the scroll view.

00:06:35.206 --> 00:06:36.666
This is where that intersection

00:06:36.666 --> 00:06:38.096
bit is helpful because if you

00:06:38.096 --> 00:06:39.356
have a scroll view that does not

00:06:39.356 --> 00:06:40.976
take up the full screen, you

00:06:40.976 --> 00:06:42.256
only want to offset it by the

00:06:42.256 --> 00:06:43.266
bit that's covered by the

00:06:43.266 --> 00:06:43.716
keyboard.

00:06:44.766 --> 00:06:46.436
Finally, you do need to handle

00:06:46.536 --> 00:06:48.246
scrolling the content, once

00:06:48.246 --> 00:06:49.296
you've adjusted your scroll

00:06:49.296 --> 00:06:49.716
insets.

00:06:50.766 --> 00:06:52.076
In the previous example, we were

00:06:52.076 --> 00:06:53.646
actually using a UI Table View

00:06:53.646 --> 00:06:55.806
Controller, which is even easier

00:06:56.436 --> 00:06:58.026
because it sets the insets for

00:06:58.026 --> 00:06:59.886
you, and all you have to do is

00:06:59.886 --> 00:07:01.426
scroll the content, which is

00:07:01.426 --> 00:07:01.766
nice.

00:07:01.766 --> 00:07:03.076
In this case, we have a table

00:07:03.076 --> 00:07:05.256
view and we want the most recent

00:07:05.256 --> 00:07:06.346
item to show right above the

00:07:06.346 --> 00:07:06.866
keyboard.

00:07:07.236 --> 00:07:08.416
So, we scroll the bottom cell,

00:07:08.796 --> 00:07:10.426
to the bottom of our inset table

00:07:10.426 --> 00:07:10.636
view.

00:07:11.576 --> 00:07:13.396
So, that is adjusting for the

00:07:13.396 --> 00:07:14.326
keyboard in your layout.

00:07:14.806 --> 00:07:16.056
Now, let's talk about extending

00:07:16.056 --> 00:07:17.486
the keyboard with an input

00:07:17.486 --> 00:07:18.196
accessory view.

00:07:19.016 --> 00:07:21.216
The input accessory view, is a

00:07:21.216 --> 00:07:22.386
view right above the keyboard.

00:07:22.446 --> 00:07:24.086
Here, it's a text view, and a

00:07:24.086 --> 00:07:24.436
button.

00:07:25.126 --> 00:07:26.356
IT can also be a tool bar with

00:07:26.356 --> 00:07:27.356
some navigation buttons.

00:07:27.486 --> 00:07:28.976
It can be a row of buttons.

00:07:29.116 --> 00:07:31.046
If can a couple of cool little,

00:07:31.286 --> 00:07:32.346
you know, photos or something.

00:07:32.346 --> 00:07:33.526
Anything you want to put on

00:07:33.526 --> 00:07:35.056
there, you can because it's just

00:07:35.056 --> 00:07:35.486
a view.

00:07:36.346 --> 00:07:37.576
How do you add this to the

00:07:37.576 --> 00:07:38.066
keyboard?

00:07:38.276 --> 00:07:39.506
Well, here we have the -- an

00:07:39.506 --> 00:07:41.296
input accessory view in our chat

00:07:41.346 --> 00:07:42.846
conversation view controller.

00:07:43.646 --> 00:07:45.306
And so, it's the host view

00:07:45.306 --> 00:07:46.726
controller that wants to display

00:07:46.726 --> 00:07:47.576
the keyboard with the input

00:07:47.576 --> 00:07:48.396
accessory view.

00:07:49.226 --> 00:07:50.146
So, we make it part of the

00:07:50.146 --> 00:07:51.836
responder chain by returning

00:07:51.836 --> 00:07:53.116
True for, "Can become first

00:07:53.116 --> 00:07:54.896
responder," on our conversation

00:07:54.896 --> 00:07:55.526
view controller.

00:07:56.446 --> 00:07:58.566
Then, using either a custom view

00:07:58.566 --> 00:08:00.116
or a custom view controller,

00:08:00.116 --> 00:08:01.376
depending on what exactly you

00:08:01.376 --> 00:08:03.276
want to do with that view, you

00:08:03.276 --> 00:08:04.506
override the applicable method.

00:08:04.506 --> 00:08:06.006
Input accessory view, if you're

00:08:06.006 --> 00:08:06.676
using a view.

00:08:07.106 --> 00:08:08.536
Input accessory view controller,

00:08:08.686 --> 00:08:09.226
if you're using a view

00:08:09.226 --> 00:08:09.666
controller.

00:08:10.346 --> 00:08:12.926
So, the input accessory view

00:08:12.926 --> 00:08:15.416
that you add, is accounted for

00:08:15.416 --> 00:08:16.886
in frame change notifications,

00:08:17.306 --> 00:08:18.886
and if the height of that input

00:08:18.886 --> 00:08:20.846
accessory view changes, it will

00:08:20.846 --> 00:08:22.086
send a frame change

00:08:22.086 --> 00:08:23.056
notification.

00:08:23.416 --> 00:08:24.716
So, you can take care of that in

00:08:24.716 --> 00:08:27.566
the app that the keyboard is in.

00:08:27.956 --> 00:08:29.026
Let's talk about making a

00:08:29.026 --> 00:08:30.586
dynamic height changing input

00:08:30.586 --> 00:08:31.716
accessory view, because this is

00:08:31.716 --> 00:08:32.566
something that a lot of people

00:08:32.566 --> 00:08:33.905
want to be able to do.

00:08:34.446 --> 00:08:35.996
So, when you're doing this, this

00:08:35.996 --> 00:08:37.275
acts a lot like a self-sizing

00:08:37.275 --> 00:08:38.546
table view in that you want to

00:08:38.546 --> 00:08:39.635
take whatever view is going to

00:08:39.635 --> 00:08:41.456
be changing size, and use it to

00:08:41.456 --> 00:08:43.186
define the height of the view.

00:08:43.236 --> 00:08:44.526
And you can do this with more

00:08:44.526 --> 00:08:45.706
than one, but in this example,

00:08:45.706 --> 00:08:48.856
we'll use a UI text view to show

00:08:48.856 --> 00:08:50.186
how this might be done.

00:08:50.646 --> 00:08:52.226
If you pin -- you can pin it to

00:08:52.226 --> 00:08:54.246
the top and bottom of the

00:08:55.316 --> 00:08:57.226
content view with spacing if

00:08:57.226 --> 00:08:57.736
applicable.

00:08:58.296 --> 00:08:59.116
And if there are views in

00:08:59.116 --> 00:09:00.446
between it, that's fine as long

00:09:00.446 --> 00:09:01.596
as the height is fully defined.

00:09:01.596 --> 00:09:02.616
Again, it's very similar to

00:09:02.616 --> 00:09:04.036
self-sizing table view cells.

00:09:04.666 --> 00:09:07.716
At that point, you need to use

00:09:07.716 --> 00:09:09.216
or define the intrinsic content

00:09:09.216 --> 00:09:10.826
size of your growing view, so

00:09:10.916 --> 00:09:12.296
that the input accessory view

00:09:12.296 --> 00:09:14.776
knows how talk it needs to be.

00:09:14.996 --> 00:09:16.486
With a text view specifically,

00:09:16.876 --> 00:09:18.016
in order for it to have its own

00:09:18.016 --> 00:09:19.466
intrinsic content size so that

00:09:19.466 --> 00:09:21.366
you don't have to define it, you

00:09:21.366 --> 00:09:22.696
need to tell its text container

00:09:22.696 --> 00:09:23.976
to have its height track the

00:09:23.976 --> 00:09:24.546
text view.

00:09:25.316 --> 00:09:26.976
And you also need to disable

00:09:26.976 --> 00:09:27.586
scrolling.

00:09:28.146 --> 00:09:29.646
At that point, the text view

00:09:29.646 --> 00:09:30.516
defines its internal --

00:09:30.516 --> 00:09:32.966
intrinsic content size, based on

00:09:32.966 --> 00:09:34.486
the amount of text in the view.

00:09:34.486 --> 00:09:36.266
And you can get something like

00:09:37.556 --> 00:09:37.796
this.

00:09:37.796 --> 00:09:39.546
So, this is one of the few cases

00:09:39.546 --> 00:09:40.616
where you may need to actually

00:09:40.616 --> 00:09:42.396
override intrinsic content size

00:09:42.396 --> 00:09:43.686
in the input accessory view.

00:09:44.406 --> 00:09:45.826
And to do that, you don't want

00:09:45.826 --> 00:09:47.056
to spend, you know -- don't want

00:09:47.056 --> 00:09:48.026
to make it too complicated.

00:09:48.026 --> 00:09:50.036
It's actually not too bad.

00:09:50.036 --> 00:09:51.636
Grab the bounds as they come in.

00:09:51.636 --> 00:09:52.556
That's going to be your original

00:09:52.556 --> 00:09:53.526
bounds, and we'll make sure that

00:09:53.526 --> 00:09:54.526
you have the correct width,

00:09:55.156 --> 00:09:56.086
which is already given to you by

00:09:56.086 --> 00:09:56.626
the system.

00:09:57.466 --> 00:09:58.886
In my case, I always like to

00:09:58.886 --> 00:10:00.086
make sure that the view has a

00:10:00.086 --> 00:10:02.276
minimum height, so I set it to

00:10:02.276 --> 00:10:03.376
minimum height first, just in

00:10:03.376 --> 00:10:05.126
case everything else -- all my

00:10:05.126 --> 00:10:06.686
other ifs are elses.

00:10:07.236 --> 00:10:09.676
And then, if my expanding view

00:10:09.676 --> 00:10:11.096
is the correct height, I use

00:10:11.096 --> 00:10:12.496
that plus some vertical padding

00:10:12.496 --> 00:10:14.126
I've previously defined to

00:10:14.126 --> 00:10:15.126
define the new height of the

00:10:15.126 --> 00:10:15.416
view.

00:10:16.216 --> 00:10:17.496
I also have a maximum height

00:10:17.496 --> 00:10:18.606
because there's only so much I

00:10:18.606 --> 00:10:19.886
actually should type to my cats

00:10:19.886 --> 00:10:20.376
at once.

00:10:20.886 --> 00:10:22.066
They don't have great attention

00:10:22.066 --> 00:10:22.526
spans.

00:10:23.206 --> 00:10:26.126
So, at a point, it stops.

00:10:26.126 --> 00:10:27.556
At that point, you simply return

00:10:27.866 --> 00:10:29.346
your new intrinsic content size,

00:10:29.576 --> 00:10:31.136
and your input accessory view

00:10:31.136 --> 00:10:31.576
will grow.

00:10:33.086 --> 00:10:35.646
Okay, so we have now talked

00:10:35.646 --> 00:10:36.786
about integrating the keyboard

00:10:36.786 --> 00:10:38.326
into your layout, and adding a

00:10:38.326 --> 00:10:39.836
dynamic input accessory view.

00:10:40.576 --> 00:10:41.976
Now, we have an app where I can

00:10:41.976 --> 00:10:44.076
talk to my cats, and I can say

00:10:44.076 --> 00:10:45.226
more than a couple of words at

00:10:45.226 --> 00:10:46.216
once, which is nice.

00:10:46.866 --> 00:10:47.996
He doesn't need very many words.

00:10:47.996 --> 00:10:50.216
He's very specific in what he

00:10:50.216 --> 00:10:50.836
needs from me.

00:10:51.436 --> 00:10:52.756
But there's more cool things

00:10:52.756 --> 00:10:54.546
that we can do with this app to

00:10:54.546 --> 00:10:56.216
make it a lot more interesting.

00:10:56.736 --> 00:10:57.696
So, I'm going to hand this over

00:10:57.696 --> 00:10:58.666
to Shuchen, and she's going to

00:10:58.666 --> 00:10:59.846
tell you all about how to make

00:10:59.846 --> 00:11:00.976
your app feel more magical.

00:11:01.516 --> 00:11:09.676
[ Applause ]

00:11:10.176 --> 00:11:12.276
>> Hello, everyone.

00:11:12.276 --> 00:11:14.676
So, in iOS, we provide a lot of

00:11:14.756 --> 00:11:17.146
sweet features so that you can

00:11:17.146 --> 00:11:18.776
improve our user text input

00:11:18.776 --> 00:11:19.356
experience.

00:11:19.926 --> 00:11:20.916
My name is Shuchen Li.

00:11:21.536 --> 00:11:23.256
I'm going to talk a few of them.

00:11:23.726 --> 00:11:26.056
So, I hope after my talk you can

00:11:26.326 --> 00:11:28.526
utilize these tricks and make

00:11:28.526 --> 00:11:29.666
your app feel magical.

00:11:30.226 --> 00:11:31.766
So, let's get started.

00:11:33.496 --> 00:11:35.106
So, first of all, let me ask a

00:11:35.106 --> 00:11:35.576
question.

00:11:35.636 --> 00:11:37.766
Who are multilingual people

00:11:37.766 --> 00:11:37.956
here?

00:11:38.566 --> 00:11:39.356
Oh, I see quite a few.

00:11:40.246 --> 00:11:43.666
So, am I. Do you face the

00:11:43.666 --> 00:11:45.816
situation that you have to keep

00:11:45.816 --> 00:11:46.536
switch keyboard?

00:11:48.136 --> 00:11:49.276
Oh, I see one there.

00:11:49.276 --> 00:11:50.786
Oh, I see a few of you there.

00:11:51.656 --> 00:11:53.696
Good. I suffer that problem too.

00:11:53.696 --> 00:11:56.446
And I have to talk to my boss

00:11:56.566 --> 00:11:57.236
with one keyboard.

00:11:57.666 --> 00:11:58.846
I talk to my mom with another

00:11:58.846 --> 00:11:59.256
keyboard.

00:11:59.336 --> 00:12:00.776
I have to keep switch between

00:12:00.776 --> 00:12:00.996
these.

00:12:01.636 --> 00:12:04.226
What if your app just know what

00:12:04.226 --> 00:12:04.996
keyboard you use?

00:12:05.706 --> 00:12:07.176
What if when keyboard brings up,

00:12:07.356 --> 00:12:08.706
it's just the right keyboard for

00:12:09.236 --> 00:12:09.306
you?

00:12:10.036 --> 00:12:12.546
Actually, you may know this.

00:12:12.976 --> 00:12:14.626
In our Message app, it does that

00:12:14.626 --> 00:12:14.866
for you.

00:12:14.866 --> 00:12:17.786
I talk to John with English

00:12:17.786 --> 00:12:18.156
keyboard.

00:12:19.196 --> 00:12:21.346
I talk to my [inaudible] with

00:12:21.346 --> 00:12:22.076
Chinese keyboard.

00:12:23.066 --> 00:12:24.216
And Magic knows what keyboard

00:12:24.216 --> 00:12:24.646
I'm using.

00:12:25.616 --> 00:12:27.816
How does that work?

00:12:28.026 --> 00:12:32.676
In iOS, we can associate a

00:12:32.676 --> 00:12:34.626
unique identifier called Text

00:12:34.626 --> 00:12:37.086
Input Context Identifier, with

00:12:37.086 --> 00:12:38.216
your text view.

00:12:38.406 --> 00:12:40.106
Actually, we can associate that

00:12:40.316 --> 00:12:41.846
with all your UI Responder.

00:12:42.196 --> 00:12:43.816
That is, you can also do that

00:12:43.816 --> 00:12:47.216
with your view controllers.

00:12:48.736 --> 00:12:50.576
So, when we see you have a

00:12:50.576 --> 00:12:52.906
unique identifier set up,

00:12:53.146 --> 00:12:54.816
whether you're a responder, we

00:12:54.816 --> 00:12:56.116
will associate that

00:12:56.116 --> 00:12:58.076
automatically with the user

00:12:58.076 --> 00:13:00.406
selected keyboard, and then save

00:13:00.406 --> 00:13:01.926
that into user default.

00:13:02.466 --> 00:13:04.306
Next time, when you are a

00:13:04.306 --> 00:13:05.606
responder, becomes a first

00:13:05.606 --> 00:13:07.566
responder, the keyboard will be

00:13:07.566 --> 00:13:08.606
retrieved automatically.

00:13:09.366 --> 00:13:10.966
Sounds complicated.

00:13:11.736 --> 00:13:13.336
The only thing you need to worry

00:13:13.336 --> 00:13:15.046
about is to find a good unique

00:13:15.046 --> 00:13:15.596
identifier.

00:13:16.456 --> 00:13:17.196
What are good unique

00:13:17.196 --> 00:13:17.846
identifiers?

00:13:18.116 --> 00:13:21.076
For example, your user ID, your

00:13:21.076 --> 00:13:23.116
conversation ID, the group IDs,

00:13:23.716 --> 00:13:28.776
these are all good examples.

00:13:28.826 --> 00:13:31.726
So, you may ask, "Where should I

00:13:31.826 --> 00:13:33.626
put this unique identifier?

00:13:33.916 --> 00:13:35.476
You mentioned, yes, I can define

00:13:35.476 --> 00:13:36.606
it in all the UI responder.

00:13:36.606 --> 00:13:37.926
Do I define it everywhere?"

00:13:37.926 --> 00:13:38.636
Of course not.

00:13:39.426 --> 00:13:40.626
So, let's see how we put it.

00:13:41.406 --> 00:13:43.976
Let's recall our CatChat app.

00:13:44.196 --> 00:13:45.516
When we bring out the keyboard,

00:13:46.236 --> 00:13:48.036
the text view becomes the first

00:13:48.036 --> 00:13:48.486
responder.

00:13:49.176 --> 00:13:50.546
And then what's next, in the

00:13:50.546 --> 00:13:52.576
responder chain, is our

00:13:52.576 --> 00:13:53.926
conversation view controller.

00:13:54.726 --> 00:13:56.086
And then, it's navigation

00:13:56.086 --> 00:13:56.486
controller.

00:13:57.036 --> 00:14:02.806
And then, in iOS, when we look

00:14:02.806 --> 00:14:05.106
for the unique identifier for

00:14:05.106 --> 00:14:07.186
your responder, we will search

00:14:07.186 --> 00:14:08.956
and look up the responder chain

00:14:08.956 --> 00:14:10.546
to look for the first one.

00:14:10.946 --> 00:14:13.466
So, in our app, we handle all

00:14:13.466 --> 00:14:14.546
our conversation in our

00:14:14.546 --> 00:14:15.606
conversation view controller.

00:14:16.186 --> 00:14:16.896
So, we put it there.

00:14:17.816 --> 00:14:19.966
In such way, you don't have to

00:14:20.146 --> 00:14:22.206
find a way you pass down your

00:14:22.206 --> 00:14:24.646
unique identifier to your

00:14:24.646 --> 00:14:25.956
[inaudible] or other places that

00:14:25.956 --> 00:14:26.636
it want to pass in.

00:14:27.136 --> 00:14:28.296
So, you just put in where you

00:14:28.296 --> 00:14:29.526
handle all your conversations.

00:14:30.646 --> 00:14:31.666
Let's see how we transfer all

00:14:31.666 --> 00:14:32.376
these into code.

00:14:32.886 --> 00:14:35.916
In our conversation view

00:14:35.916 --> 00:14:37.856
controller, we override the

00:14:37.856 --> 00:14:39.446
[inaudible] for Text Input

00:14:39.446 --> 00:14:40.456
Context Identifier.

00:14:41.016 --> 00:14:41.966
You can see this method.

00:14:41.966 --> 00:14:42.586
It's very simple.

00:14:42.916 --> 00:14:44.116
It's just return a unique

00:14:44.116 --> 00:14:44.676
identifier.

00:14:45.386 --> 00:14:48.076
In our case, we return our

00:14:48.076 --> 00:14:49.606
recipient's ID.

00:14:51.016 --> 00:14:53.716
Now, Kasia is going to show you

00:14:53.716 --> 00:14:55.786
a demo to see how we give our

00:14:55.886 --> 00:14:56.796
app a memory.

00:14:57.366 --> 00:14:57.706
Kasia?

00:14:58.516 --> 00:15:03.306
[ Applause ]

00:15:03.806 --> 00:15:04.686
>> You may not remember me.

00:15:04.836 --> 00:15:05.646
It's been a while since I've

00:15:05.696 --> 00:15:06.196
seen you all.

00:15:06.726 --> 00:15:09.246
But Kasia's still on keyboards.

00:15:09.726 --> 00:15:13.896
Okay, so first -- here we have

00:15:13.896 --> 00:15:15.006
our CatChat app that we've been

00:15:15.006 --> 00:15:15.746
looking at today.

00:15:16.416 --> 00:15:18.006
And I've got a couple of pets

00:15:18.006 --> 00:15:19.116
that speak different languages.

00:15:19.416 --> 00:15:20.786
I have my Misiu here.

00:15:21.236 --> 00:15:22.316
He speaks Polish.

00:15:22.316 --> 00:15:23.186
And actually, I learned as a

00:15:23.186 --> 00:15:24.336
child that all cats speak

00:15:24.336 --> 00:15:24.796
Polish.

00:15:24.796 --> 00:15:25.876
So, it's important to speak

00:15:25.876 --> 00:15:26.736
Polish to all of them.

00:15:27.556 --> 00:15:29.256
But, my default keyboard as an

00:15:29.256 --> 00:15:30.666
English speaker is English.

00:15:31.196 --> 00:15:32.116
So, if I go ahead and change it

00:15:32.116 --> 00:15:34.486
to Polish, and say "Hello,"

00:15:35.186 --> 00:15:36.306
let's see.

00:15:36.536 --> 00:15:42.666
And see, you know, how he's

00:15:42.666 --> 00:15:43.106
doing today.

00:15:43.106 --> 00:15:44.876
This is me saying, "Hey, how are

00:15:44.876 --> 00:15:45.256
you doing?"

00:15:45.566 --> 00:15:46.796
And he wants food.

00:15:47.516 --> 00:15:48.466
This is so surprising.

00:15:49.476 --> 00:15:51.226
Well, let's check in on

00:15:51.486 --> 00:15:53.106
Shuchen's dog, Jiwang.

00:15:54.546 --> 00:15:56.166
And Jiwang would like to go out

00:15:56.166 --> 00:15:57.496
for a walk, but I don't

00:15:57.496 --> 00:15:58.366
currently have time.

00:15:58.816 --> 00:16:01.056
However, he speaks Chinese, so

00:16:01.056 --> 00:16:01.966
I'm going to switch keyboards

00:16:01.966 --> 00:16:03.206
again to the Chinese pinyin

00:16:03.206 --> 00:16:05.426
keyboard, and say, "I don't have

00:16:05.426 --> 00:16:05.976
time right now.

00:16:06.676 --> 00:16:07.346
Please be patient."

00:16:08.326 --> 00:16:10.146
And dogs are a little bit

00:16:10.506 --> 00:16:11.946
friendlier sometimes with their

00:16:11.946 --> 00:16:12.826
responses than cats.

00:16:13.236 --> 00:16:14.916
So, now, this is the first time

00:16:14.916 --> 00:16:16.086
I've used this to talk to both

00:16:16.086 --> 00:16:16.426
of them.

00:16:16.926 --> 00:16:18.106
So, if I go back into Misiu's

00:16:18.106 --> 00:16:19.686
conversation, the Polish

00:16:19.686 --> 00:16:20.586
keyboard is still there.

00:16:20.966 --> 00:16:23.156
And if I go back here, I still

00:16:23.156 --> 00:16:24.996
have the Chinese keyboard.

00:16:25.326 --> 00:16:26.076
So, I don't have to keep

00:16:26.136 --> 00:16:27.726
switching keyboards, depending

00:16:27.726 --> 00:16:28.886
on the conversation I'm in.

00:16:29.306 --> 00:16:30.516
And all that needed to happen

00:16:30.516 --> 00:16:32.356
for that to happen, was to set

00:16:32.566 --> 00:16:35.526
that text input context

00:16:35.526 --> 00:16:37.316
identifier, as Shuchen showed

00:16:37.316 --> 00:16:39.336
you, with the unique ID of each

00:16:39.336 --> 00:16:40.116
individual chat.

00:16:40.516 --> 00:16:42.546
If I change languages now, my

00:16:42.546 --> 00:16:43.416
app doesn't need to know what

00:16:43.416 --> 00:16:44.156
language I'm in.

00:16:44.476 --> 00:16:45.426
It just needs to know that it's

00:16:45.426 --> 00:16:47.166
in a specific conversation and

00:16:47.166 --> 00:16:49.146
we will take care of setting the

00:16:49.146 --> 00:16:50.226
proper keyboard for you.

00:16:50.586 --> 00:16:50.653
So.

00:16:51.016 --> 00:16:53.000
[ Applause ]

00:16:59.426 --> 00:17:02.336
Okay, back to Shuchen.

00:17:03.776 --> 00:17:05.185
>> Thanks, Kasia.

00:17:06.116 --> 00:17:07.205
A quite neat feature, right?

00:17:07.376 --> 00:17:08.915
It'll save quite a bit of wear

00:17:08.915 --> 00:17:09.736
and tear on your [inaudible] I

00:17:09.736 --> 00:17:10.205
believe.

00:17:10.205 --> 00:17:14.046
So, in this whole process, you

00:17:14.046 --> 00:17:16.136
may notice, you don't really

00:17:16.136 --> 00:17:17.736
need to care what keyboard the

00:17:17.736 --> 00:17:18.546
user selected.

00:17:18.945 --> 00:17:19.675
You don't need to know.

00:17:20.116 --> 00:17:21.266
The only thing you need to worry

00:17:21.266 --> 00:17:23.116
about is the unique identifier

00:17:23.175 --> 00:17:24.616
that was set up.

00:17:24.616 --> 00:17:26.516
Now you may ask, what if you

00:17:26.516 --> 00:17:28.316
want to know what's the language

00:17:28.386 --> 00:17:29.216
the user used?

00:17:30.106 --> 00:17:31.836
What if you want to develop a

00:17:31.836 --> 00:17:33.986
specific feature for a certain

00:17:33.986 --> 00:17:34.466
language?

00:17:35.536 --> 00:17:37.616
Now you may want to look up UI

00:17:37.616 --> 00:17:38.496
text input mode.

00:17:39.136 --> 00:17:40.896
In UI text input mode, you can

00:17:40.896 --> 00:17:42.726
easily access the primary

00:17:42.726 --> 00:17:43.756
language for the user.

00:17:44.956 --> 00:17:47.156
In such way, you can for

00:17:47.156 --> 00:17:48.516
example, develop your own spell

00:17:48.516 --> 00:17:52.456
checker for your own language or

00:17:52.456 --> 00:17:54.136
you can develop other specific

00:17:54.136 --> 00:17:55.236
feature for the specific

00:17:55.236 --> 00:17:56.846
language that you want that

00:17:56.846 --> 00:17:57.886
probably [inaudible] support

00:17:57.886 --> 00:17:59.536
where -- we will support maybe

00:17:59.706 --> 00:18:01.316
in future.

00:18:02.146 --> 00:18:05.936
Now, next, we've been working

00:18:05.936 --> 00:18:08.916
really hard on how to accurately

00:18:09.376 --> 00:18:10.726
and quickly input text.

00:18:11.646 --> 00:18:13.286
We made it further through a

00:18:13.286 --> 00:18:14.786
context scroll predictions.

00:18:16.516 --> 00:18:19.516
Also, we take user personalized

00:18:19.666 --> 00:18:21.506
information into account.

00:18:23.016 --> 00:18:25.806
Back in iOS 4, we introduced

00:18:26.046 --> 00:18:26.626
keyboard types.

00:18:27.566 --> 00:18:29.626
There's different keyboard types

00:18:29.626 --> 00:18:31.786
like email keyboards, URL

00:18:31.786 --> 00:18:32.216
keyboards.

00:18:32.216 --> 00:18:33.436
If you're typing an email

00:18:33.646 --> 00:18:36.116
address, the @ and the .com keys

00:18:36.116 --> 00:18:38.186
are there for easy typing.

00:18:39.536 --> 00:18:42.586
Last year, we introduced UI text

00:18:43.306 --> 00:18:43.956
content type.

00:18:44.416 --> 00:18:48.136
UI text content type, it's a tag

00:18:48.336 --> 00:18:49.706
that you can set to your text

00:18:49.706 --> 00:18:49.926
view.

00:18:50.516 --> 00:18:55.056
It will provide all the context

00:18:55.056 --> 00:18:58.906
predictions through the tags.

00:18:58.906 --> 00:19:02.166
Let's see an example.

00:19:02.166 --> 00:19:04.986
So, now, John wants to add his

00:19:04.986 --> 00:19:07.606
cat, Penny, into our CatChat

00:19:07.606 --> 00:19:07.806
app.

00:19:08.246 --> 00:19:09.906
This is John Appleseed's cat.

00:19:10.636 --> 00:19:12.996
From the video, you can see

00:19:13.056 --> 00:19:14.736
actually John didn't even type

00:19:14.736 --> 00:19:15.766
on any of the letter keys.

00:19:16.456 --> 00:19:18.426
He was just typing on the Quick

00:19:18.426 --> 00:19:18.816
Type bar.

00:19:19.616 --> 00:19:21.986
All the informations are input.

00:19:23.316 --> 00:19:24.926
Now, John wants to type the

00:19:24.926 --> 00:19:26.056
address for the cat.

00:19:27.026 --> 00:19:28.556
So, that's John Appleseed's cat.

00:19:28.806 --> 00:19:30.416
So, it lives in -- must be

00:19:30.416 --> 00:19:31.686
living in an Apple store.

00:19:32.486 --> 00:19:33.046
Which one?

00:19:33.776 --> 00:19:35.056
The one is Los Gatos.

00:19:41.696 --> 00:19:42.926
For someone if we don't know,

00:19:42.926 --> 00:19:44.256
Los Gatos means "cat" in

00:19:44.256 --> 00:19:44.726
Spanish.

00:19:46.436 --> 00:19:48.006
So, we can see, John went to the

00:19:49.136 --> 00:19:50.806
map and browsed the Apple store

00:19:52.036 --> 00:19:53.246
and see what's the address.

00:19:54.056 --> 00:19:55.216
And then come back to our

00:19:55.216 --> 00:19:55.856
CatChat app.

00:19:57.176 --> 00:19:59.186
And then you will see, ta-da,

00:19:59.646 --> 00:20:00.356
the address are there,

00:20:01.206 --> 00:20:01.786
magically.

00:20:01.786 --> 00:20:03.836
And by typing on the Quick Type

00:20:03.836 --> 00:20:06.866
bar, you can -- thank you.

00:20:07.796 --> 00:20:08.806
If I type on the Quick Type bar,

00:20:09.226 --> 00:20:11.196
you can directly input the whole

00:20:11.336 --> 00:20:11.816
address.

00:20:12.626 --> 00:20:15.856
If you look closely, you can see

00:20:16.226 --> 00:20:16.836
its source.

00:20:17.276 --> 00:20:18.716
It's from Map, in our case.

00:20:21.276 --> 00:20:24.886
So, in iOS, we've been pulling

00:20:24.986 --> 00:20:27.226
all user information and user

00:20:27.226 --> 00:20:29.796
activities as a whole, to come

00:20:29.796 --> 00:20:32.036
with the data source, to improve

00:20:32.036 --> 00:20:33.286
user's experience.

00:20:34.436 --> 00:20:36.436
For example, our keyboard

00:20:36.436 --> 00:20:38.966
personalization also can extract

00:20:38.966 --> 00:20:41.106
names to form keyboard

00:20:41.106 --> 00:20:42.766
personalization lexicon.

00:20:44.956 --> 00:20:47.966
Also, one more thing I want to

00:20:47.966 --> 00:20:48.446
mention.

00:20:48.996 --> 00:20:52.046
In this whole process, your app

00:20:52.046 --> 00:20:54.086
is not only a passive receiver.

00:20:54.986 --> 00:20:57.146
Your app can be a contributor.

00:20:58.326 --> 00:20:59.826
Your app can contribute your

00:20:59.826 --> 00:21:02.426
app's activity through NS User

00:21:02.426 --> 00:21:04.366
Activity APIs.

00:21:05.176 --> 00:21:08.316
So, for example, if your browse

00:21:08.396 --> 00:21:09.406
your favorite restaurant in

00:21:09.406 --> 00:21:12.946
Yelp, the address can be

00:21:13.146 --> 00:21:14.626
displayed on the Quick Type bar,

00:21:14.906 --> 00:21:16.746
if you set the tag properly.

00:21:17.286 --> 00:21:19.316
So, sounds interested?

00:21:20.366 --> 00:21:22.606
If you want to learn more, don't

00:21:22.606 --> 00:21:24.686
forget to look at the session

00:21:24.776 --> 00:21:27.066
from last year called "Increase

00:21:27.066 --> 00:21:29.516
Usage of Your App Through

00:21:29.796 --> 00:21:31.836
Proactive Suggestion."

00:21:33.586 --> 00:21:35.856
So, this year, we made it

00:21:36.456 --> 00:21:36.596
further.

00:21:37.166 --> 00:21:38.726
We add some new tags for user

00:21:38.726 --> 00:21:39.896
name and password.

00:21:40.366 --> 00:21:43.726
When you label your log-in field

00:21:43.726 --> 00:21:45.696
properly, we will automatically

00:21:45.696 --> 00:21:48.306
suggest user name and password

00:21:48.576 --> 00:21:49.956
for your app.

00:21:49.956 --> 00:21:52.136
And also, fill that for you.

00:21:54.536 --> 00:21:56.186
The only thing you need to do,

00:21:56.396 --> 00:21:58.286
if you set your tags properly,

00:21:58.786 --> 00:22:01.366
this is a one line API super

00:22:01.366 --> 00:22:03.546
simple, and it will guarantee

00:22:03.546 --> 00:22:05.376
that some of the Quick Type

00:22:05.376 --> 00:22:06.596
suggestion will display.

00:22:07.616 --> 00:22:10.186
However, this is not the full

00:22:10.186 --> 00:22:10.496
story.

00:22:10.966 --> 00:22:12.776
If you want to make sure all

00:22:12.776 --> 00:22:15.026
your credentials displayed

00:22:15.026 --> 00:22:17.746
properly with your app, because

00:22:17.746 --> 00:22:18.916
you may have a website to

00:22:18.916 --> 00:22:21.186
associate with your app, you'd

00:22:21.186 --> 00:22:22.616
want to check out "Introducing

00:22:22.616 --> 00:22:23.836
Password Auto Fill for App"

00:22:24.126 --> 00:22:24.496
session.

00:22:24.916 --> 00:22:29.446
So, next up, we talk about some

00:22:29.446 --> 00:22:30.206
new smartness.

00:22:30.256 --> 00:22:33.856
This year, we introduced some

00:22:33.856 --> 00:22:37.996
smartness into our text view.

00:22:38.236 --> 00:22:40.126
First one is Smart Quote.

00:22:41.176 --> 00:22:43.426
Here are typewriter quotes.

00:22:44.516 --> 00:22:47.146
They are straight and some

00:22:48.406 --> 00:22:49.846
people don't like it.

00:22:49.846 --> 00:22:51.776
I don't like it.

00:22:53.436 --> 00:22:55.186
These are typographic quotes.

00:22:55.666 --> 00:22:56.136
I like it.

00:22:56.206 --> 00:22:57.736
They are curly.

00:22:58.326 --> 00:22:59.136
They're more legible.

00:22:59.866 --> 00:23:01.096
And actually, they're more

00:23:01.096 --> 00:23:02.746
grammatically correct in the

00:23:02.746 --> 00:23:03.556
language perspective.

00:23:04.076 --> 00:23:06.246
And this year, iOS will

00:23:06.386 --> 00:23:09.386
automatically convert your

00:23:09.386 --> 00:23:11.456
typewriter quote into

00:23:11.766 --> 00:23:12.976
typographic quote.

00:23:13.516 --> 00:23:19.986
[ Applause ]

00:23:20.486 --> 00:23:21.846
What's next?

00:23:22.396 --> 00:23:23.936
When you type on the middle bar

00:23:23.936 --> 00:23:26.956
line, sometimes you just think

00:23:26.956 --> 00:23:28.876
about, "Okay, a hyphen, an end

00:23:28.876 --> 00:23:30.286
dash, and add dash," how to do

00:23:30.286 --> 00:23:30.466
that.

00:23:31.266 --> 00:23:33.336
From this year, we can input a

00:23:33.336 --> 00:23:34.386
hyphen with one dash.

00:23:35.026 --> 00:23:36.476
We will automatically convert

00:23:36.476 --> 00:23:38.246
two dashes into an end dash.

00:23:39.566 --> 00:23:41.336
And then, add dash with three

00:23:41.336 --> 00:23:41.976
dashes of course.

00:23:42.516 --> 00:23:46.606
[ Applause ]

00:23:47.106 --> 00:23:49.916
Also, we introduce Smart

00:23:49.916 --> 00:23:51.036
Insertion and Smart Deletion.

00:23:51.576 --> 00:23:53.886
If you work with tags before,

00:23:54.826 --> 00:23:57.036
you have to insert and delete a

00:23:57.036 --> 00:23:59.206
paragraph or a phrase, you know

00:23:59.206 --> 00:23:59.946
what I'm talking about.

00:24:00.366 --> 00:24:01.846
And not even mention the trouble

00:24:01.846 --> 00:24:02.826
caused by punctuation.

00:24:03.206 --> 00:24:06.196
So, for example, in our example,

00:24:06.536 --> 00:24:08.136
Vivian wants to bring Jiwang

00:24:08.136 --> 00:24:10.946
also to the party, but then

00:24:11.066 --> 00:24:12.206
Jiwang was sick.

00:24:12.536 --> 00:24:14.836
So, we have to remove him.

00:24:15.316 --> 00:24:18.006
Now, in this whole process, you

00:24:18.046 --> 00:24:19.636
have to deal with a space.

00:24:19.856 --> 00:24:20.506
That's the trouble.

00:24:21.346 --> 00:24:22.086
Troublemaker.

00:24:23.596 --> 00:24:26.446
So, from today, we will take

00:24:26.446 --> 00:24:27.546
care of all of that for you.

00:24:28.166 --> 00:24:29.246
With Smart Insertion and

00:24:29.246 --> 00:24:30.866
Deletion, we'll take care of all

00:24:30.866 --> 00:24:32.826
the leading and trailing spaces

00:24:32.826 --> 00:24:33.660
for you.

00:24:35.516 --> 00:24:38.206
[ Applause ]

00:24:38.706 --> 00:24:40.836
Also, I want to mention, all the

00:24:40.886 --> 00:24:41.976
smartness that we introduced

00:24:41.976 --> 00:24:43.106
that I have talked about today,

00:24:43.326 --> 00:24:44.426
they are all by default.

00:24:45.496 --> 00:24:47.786
But I want you note, for these

00:24:47.786 --> 00:24:50.836
smart text input traits, they

00:24:51.216 --> 00:24:52.426
have three values.

00:24:52.736 --> 00:24:54.316
They have yes, no, and the

00:24:54.316 --> 00:24:54.986
default value.

00:24:55.866 --> 00:24:57.246
We set the default value for

00:24:57.246 --> 00:24:58.916
default for all of you.

00:25:00.236 --> 00:25:01.936
We will automatically do the

00:25:01.936 --> 00:25:02.866
right thing for you.

00:25:03.156 --> 00:25:07.256
For example, if you have a text

00:25:07.336 --> 00:25:09.086
field, you set the Secured Text

00:25:09.086 --> 00:25:10.066
Entry to Yes.

00:25:10.736 --> 00:25:12.076
Probably it's the password

00:25:12.076 --> 00:25:12.386
field.

00:25:12.626 --> 00:25:14.956
In that case, if you set your

00:25:14.956 --> 00:25:17.756
smart traits to default, we will

00:25:17.756 --> 00:25:20.326
automatically disable the smart

00:25:20.326 --> 00:25:21.346
quote conversion for you,

00:25:21.456 --> 00:25:22.876
because we think probably that's

00:25:22.876 --> 00:25:23.906
the user password.

00:25:24.046 --> 00:25:26.046
We don't want to switch user

00:25:26.096 --> 00:25:27.976
typing for a password field.

00:25:29.046 --> 00:25:31.796
If you recall, actually we can

00:25:31.796 --> 00:25:33.546
config auto correction types.

00:25:33.816 --> 00:25:34.776
We can config auto

00:25:34.776 --> 00:25:35.796
capitalization types.

00:25:36.286 --> 00:25:39.006
There are a lot of sweet traits

00:25:39.006 --> 00:25:40.106
that we have in Text Input

00:25:40.106 --> 00:25:40.466
traits.

00:25:41.436 --> 00:25:43.276
All of them have this default

00:25:43.276 --> 00:25:43.566
value.

00:25:44.526 --> 00:25:46.076
What I want to emphasize here

00:25:46.076 --> 00:25:48.616
is, before you play with any of

00:25:48.616 --> 00:25:51.466
these traits, always understand

00:25:51.716 --> 00:25:53.036
what your tags is going to be.

00:25:54.136 --> 00:25:56.256
Always understand what the tags

00:25:56.556 --> 00:25:57.786
you're expecting the user to

00:25:57.786 --> 00:25:58.166
type.

00:25:58.806 --> 00:26:00.876
So, let me ask another question.

00:26:00.876 --> 00:26:04.096
Who flew to San Jose for WWDC?

00:26:04.096 --> 00:26:05.306
Well, welcome.

00:26:06.456 --> 00:26:10.166
So, am I. Kidding this time.

00:26:10.376 --> 00:26:12.986
If you have a text entry, only

00:26:12.986 --> 00:26:17.366
take flight code as an input, in

00:26:17.366 --> 00:26:18.776
such case, probably you want to

00:26:18.946 --> 00:26:21.916
disable auto correction type and

00:26:21.916 --> 00:26:24.706
auto capitalization type setting

00:26:24.706 --> 00:26:25.096
to No.

00:26:25.566 --> 00:26:27.416
Right? Because that makes sense.

00:26:28.156 --> 00:26:29.806
So, you always want to fully

00:26:29.806 --> 00:26:34.396
understand your text before set

00:26:34.396 --> 00:26:35.126
all these traits.

00:26:35.126 --> 00:26:36.796
Not just, okay, type on the tab

00:26:36.796 --> 00:26:38.086
and just say, "Okay, yes," or

00:26:38.086 --> 00:26:39.496
"No," just by thing.

00:26:39.926 --> 00:26:41.746
Always fully understand it.

00:26:43.556 --> 00:26:44.636
This is my point.

00:26:45.056 --> 00:26:50.336
Next, while work with text, you

00:26:50.336 --> 00:26:52.116
can now ignore marked texts.

00:26:53.006 --> 00:26:54.696
Two big names, Chinese and

00:26:54.696 --> 00:26:55.016
Japanese.

00:26:55.136 --> 00:26:57.316
They all use marked texts.

00:26:57.316 --> 00:26:58.676
So, marked text language call

00:26:58.676 --> 00:27:00.526
word, the marked text into final

00:27:00.526 --> 00:27:01.996
text by select candidates.

00:27:02.546 --> 00:27:05.796
In iOS, actually you can easily

00:27:05.796 --> 00:27:07.826
access marked text from UI Text

00:27:07.826 --> 00:27:08.216
Input.

00:27:08.906 --> 00:27:10.876
You can directly use the marked

00:27:11.676 --> 00:27:11.886
text.

00:27:12.536 --> 00:27:14.466
We have an example in our system

00:27:14.896 --> 00:27:15.786
is the Spotlight.

00:27:16.806 --> 00:27:20.076
In Spotlight, when user type in

00:27:20.076 --> 00:27:22.506
Chinese for example, before

00:27:22.506 --> 00:27:24.036
users select the candidate,

00:27:25.406 --> 00:27:27.096
Spotlight engine already start

00:27:27.096 --> 00:27:28.566
to show you all the results.

00:27:29.216 --> 00:27:30.756
You can also do that in your app

00:27:31.156 --> 00:27:33.296
through the marked text by

00:27:33.296 --> 00:27:34.546
retrieving it from UI Text

00:27:34.546 --> 00:27:34.896
Input.

00:27:36.106 --> 00:27:37.576
In such way, user won't be

00:27:37.576 --> 00:27:39.136
interrupted by selecting

00:27:39.136 --> 00:27:39.616
candidate.

00:27:39.856 --> 00:27:41.506
The user can spend more time to

00:27:41.506 --> 00:27:43.466
enjoy your app.

00:27:43.866 --> 00:27:46.156
I won't dive into too much about

00:27:46.156 --> 00:27:48.106
internationalization stuff, but

00:27:48.106 --> 00:27:49.956
if you're interested, please

00:27:49.956 --> 00:27:51.806
watch Internationalization Best

00:27:51.806 --> 00:27:52.886
Practices from last year.

00:27:53.366 --> 00:27:57.286
Last but not least, hardware

00:27:57.286 --> 00:27:57.706
keyboard.

00:27:58.726 --> 00:28:00.156
I think everyone use hardware

00:28:00.156 --> 00:28:02.016
keyboard and I believe you all

00:28:02.016 --> 00:28:03.736
love the keyboard shortcuts,

00:28:03.876 --> 00:28:05.326
like Command C, Command V,

00:28:05.696 --> 00:28:06.616
probably your favorite is

00:28:06.616 --> 00:28:07.256
Command Z.

00:28:07.416 --> 00:28:11.306
We brought that to iOS with

00:28:11.306 --> 00:28:11.876
Smart Keyboard.

00:28:12.396 --> 00:28:17.206
So, in iOS, you can define your

00:28:17.206 --> 00:28:21.066
own shortcut for your user if I

00:28:21.066 --> 00:28:23.646
have iPad app.

00:28:23.906 --> 00:28:25.286
So, let's see, how we do that.

00:28:25.286 --> 00:28:27.676
Let's dive right into the code.

00:28:28.096 --> 00:28:29.256
It's very straightforward and

00:28:29.256 --> 00:28:29.666
easy.

00:28:30.796 --> 00:28:32.876
Again, in UI Responder, you can

00:28:32.876 --> 00:28:34.086
override the key commands.

00:28:34.646 --> 00:28:38.116
Key commands return an array of

00:28:38.116 --> 00:28:38.636
key commands.

00:28:38.636 --> 00:28:39.966
That means you can define a

00:28:40.096 --> 00:28:42.746
couple shortcuts for your app at

00:28:42.746 --> 00:28:43.976
the same time.

00:28:44.736 --> 00:28:46.736
To define a key command is very

00:28:46.736 --> 00:28:47.576
straightforward.

00:28:48.506 --> 00:28:49.386
You give it inputs.

00:28:50.156 --> 00:28:51.156
You give a modifier.

00:28:52.166 --> 00:28:53.326
You put your selector there.

00:28:54.036 --> 00:28:55.236
And then also give it a name.

00:28:56.006 --> 00:28:57.266
Also, don't forget to localize

00:28:57.266 --> 00:28:58.316
your name.

00:28:59.276 --> 00:29:01.736
This is our second shortcut.

00:29:02.286 --> 00:29:06.946
Now, press on the Command key,

00:29:07.236 --> 00:29:10.316
it will display the keyboard

00:29:10.316 --> 00:29:12.066
shortcut for you and then you

00:29:12.066 --> 00:29:14.196
can see in our CatChat app, we

00:29:14.196 --> 00:29:16.516
have Command Up and Command Down

00:29:16.516 --> 00:29:18.886
to switch between the

00:29:20.716 --> 00:29:21.066
conversations.

00:29:21.066 --> 00:29:21.826
So, let's recap.

00:29:22.386 --> 00:29:23.216
I've talked about the

00:29:23.216 --> 00:29:24.716
multilingual problem to how to

00:29:24.716 --> 00:29:25.836
give your app a memory.

00:29:26.346 --> 00:29:29.336
I've talked about how to take

00:29:29.606 --> 00:29:31.356
most advantages out of the

00:29:31.356 --> 00:29:33.766
context for predictions by

00:29:33.766 --> 00:29:35.376
giving your text field a tag

00:29:35.906 --> 00:29:36.976
through text content type.

00:29:37.836 --> 00:29:39.556
I talked about the new smartness

00:29:40.156 --> 00:29:41.506
for text input fields.

00:29:42.426 --> 00:29:44.156
I also talked about the mark

00:29:44.486 --> 00:29:45.026
text.

00:29:45.846 --> 00:29:47.836
Last but not least, there's

00:29:47.836 --> 00:29:48.996
keyboard shortcuts you'll want

00:29:48.996 --> 00:29:49.446
to try out.

00:29:50.656 --> 00:29:51.276
Try them all.

00:29:51.896 --> 00:29:55.506
Next, James is going to talk

00:29:55.506 --> 00:29:57.856
about how to create a custom

00:29:57.926 --> 00:29:58.576
input views.

00:29:58.996 --> 00:29:59.306
James?

00:30:00.516 --> 00:30:05.566
[ Applause ]

00:30:06.066 --> 00:30:06.806
>> Thanks, Shuchen.

00:30:07.266 --> 00:30:08.376
I'm very nervous -- I mean,

00:30:08.446 --> 00:30:09.876
excited to tell you about

00:30:09.876 --> 00:30:11.676
creating custom input views.

00:30:12.426 --> 00:30:14.946
So, Shuchen briefly mentioned a

00:30:14.946 --> 00:30:16.726
UI Responder property called

00:30:16.726 --> 00:30:18.266
Keyboard Type, which allows you

00:30:18.266 --> 00:30:20.586
to access a lot of the built-in

00:30:20.586 --> 00:30:22.156
iOS system keyboards for

00:30:22.156 --> 00:30:24.506
specialized input, such as the

00:30:24.506 --> 00:30:25.956
decimal pad for entering decimal

00:30:25.956 --> 00:30:27.676
numbers, and we also have a

00:30:27.676 --> 00:30:29.006
phone pad for entering phone

00:30:29.006 --> 00:30:30.916
numbers, and a special keyboard

00:30:30.916 --> 00:30:32.366
just for URLs and email

00:30:32.366 --> 00:30:32.936
addresses.

00:30:33.566 --> 00:30:34.766
Sometimes though, this may not

00:30:34.766 --> 00:30:36.286
be enough for your application.

00:30:36.646 --> 00:30:38.066
You may want to go beyond what

00:30:38.066 --> 00:30:39.136
the system keyboard provides

00:30:39.136 --> 00:30:39.376
you.

00:30:40.026 --> 00:30:41.166
Let's take a look at a couple of

00:30:41.166 --> 00:30:42.000
examples.

00:30:43.066 --> 00:30:44.266
So, mathematics is a pretty good

00:30:44.266 --> 00:30:44.786
example.

00:30:45.156 --> 00:30:46.306
In math, there's a lot of custom

00:30:46.306 --> 00:30:48.076
symbols like Greek letters,

00:30:48.406 --> 00:30:50.106
superscript operators, and

00:30:50.106 --> 00:30:51.176
subscript operators.

00:30:51.436 --> 00:30:52.706
It could be pretty difficult to

00:30:52.706 --> 00:30:54.406
type something like this with

00:30:54.406 --> 00:30:55.936
the built-in system keyboard.

00:30:56.386 --> 00:30:59.216
Swift Playgrounds is another

00:30:59.216 --> 00:30:59.866
good example.

00:31:00.426 --> 00:31:01.396
This is the Swift Playgrounds

00:31:01.396 --> 00:31:01.556
app.

00:31:01.556 --> 00:31:02.866
They have the standard QWERTY

00:31:02.866 --> 00:31:04.276
layout, but they provide a lot

00:31:04.276 --> 00:31:05.626
of additional functionality for

00:31:05.626 --> 00:31:06.766
frequently used symbols in the

00:31:06.766 --> 00:31:07.816
Swift programming language.

00:31:08.806 --> 00:31:10.006
And they also have a really nice

00:31:10.006 --> 00:31:11.426
accessory bar in the top here,

00:31:11.926 --> 00:31:13.186
for quickly inputting relevant

00:31:13.186 --> 00:31:14.376
functions and symbols.

00:31:14.916 --> 00:31:19.126
And then lastly, Apple numbers,

00:31:19.216 --> 00:31:20.316
spreadsheets, is another good

00:31:20.316 --> 00:31:20.786
example.

00:31:21.206 --> 00:31:22.966
So, there's a formula entry bar

00:31:22.966 --> 00:31:24.316
here, which also requires a lot

00:31:24.316 --> 00:31:26.326
of custom symbols, and they also

00:31:26.326 --> 00:31:27.286
have a nice, dark gray

00:31:27.286 --> 00:31:28.656
background here, so it blends in

00:31:28.656 --> 00:31:29.836
really nicely with the system

00:31:29.836 --> 00:31:30.266
keyboard.

00:31:32.856 --> 00:31:34.566
So, going back to our CatChat

00:31:34.566 --> 00:31:35.816
app, it's another pretty good

00:31:35.816 --> 00:31:37.366
example for something that needs

00:31:37.366 --> 00:31:38.266
a custom input view.

00:31:38.556 --> 00:31:41.186
Why? Well, right now, we have a

00:31:41.186 --> 00:31:42.586
way to talk to our pets, but our

00:31:42.586 --> 00:31:43.436
pets don't have a way to talk

00:31:43.436 --> 00:31:44.066
back to us.

00:31:45.046 --> 00:31:46.466
And that's because, they have a

00:31:46.466 --> 00:31:47.476
lot of trouble using the QWERTY

00:31:47.476 --> 00:31:47.946
keyboard.

00:31:48.016 --> 00:31:49.376
Their paws are quite large.

00:31:49.686 --> 00:31:50.826
The keys are really small.

00:31:51.306 --> 00:31:52.886
And so, they have a lot of

00:31:52.886 --> 00:31:54.476
difficulty hitting those keys.

00:31:54.886 --> 00:31:56.416
Plus, they have a really limited

00:31:56.416 --> 00:31:57.366
vocabulary too.

00:31:57.706 --> 00:31:58.366
So, they don't really need to

00:31:58.366 --> 00:31:59.076
say a whole lot.

00:32:00.146 --> 00:32:01.666
So, let's say we want to make a

00:32:01.666 --> 00:32:02.656
keyboard just for them,

00:32:02.656 --> 00:32:03.966
accessible to cats and dogs.

00:32:04.966 --> 00:32:06.456
So, maybe we want just large

00:32:06.456 --> 00:32:08.516
graphical buttons to represent

00:32:08.516 --> 00:32:09.926
their entire small vocabulary.

00:32:10.446 --> 00:32:12.216
So, here's what that might look

00:32:12.216 --> 00:32:12.446
like.

00:32:13.016 --> 00:32:16.746
This is our PetChat app, again.

00:32:16.996 --> 00:32:18.506
It's the -- it's got the cool,

00:32:18.506 --> 00:32:20.316
expanding text view that Kasia

00:32:20.316 --> 00:32:21.346
built for us earlier.

00:32:21.756 --> 00:32:24.476
And now, on the pet side, we

00:32:24.476 --> 00:32:25.676
have three, large graphical

00:32:25.676 --> 00:32:27.426
buttons with -- representing

00:32:27.426 --> 00:32:28.476
their entire vocabulary of

00:32:28.476 --> 00:32:29.396
things they might want to say

00:32:29.396 --> 00:32:30.566
like, "I need food," "I want to

00:32:30.566 --> 00:32:31.596
go outside," and "Stop petting

00:32:31.596 --> 00:32:31.696
me."

00:32:31.936 --> 00:32:33.106
Something like that.

00:32:34.436 --> 00:32:37.016
The other cool thing too is that

00:32:37.016 --> 00:32:38.056
this behaves just like the

00:32:38.056 --> 00:32:39.796
system keyboard does.

00:32:39.796 --> 00:32:40.636
It sits at the bottom of the

00:32:40.636 --> 00:32:41.226
screen.

00:32:41.516 --> 00:32:42.696
There's an accessory bar at the

00:32:42.696 --> 00:32:44.046
top that's laid out, right at

00:32:44.046 --> 00:32:44.656
the top of the -- where the

00:32:44.656 --> 00:32:46.036
keyboard would go.

00:32:46.306 --> 00:32:47.596
And then also the scroll view in

00:32:47.596 --> 00:32:48.836
the background, automatically

00:32:48.836 --> 00:32:51.286
adapts its content insets to the

00:32:51.326 --> 00:32:52.916
size of your custom input view.

00:32:53.476 --> 00:32:55.526
So, let's go into a little bit

00:32:55.526 --> 00:32:57.266
more detail, about how to build

00:32:57.266 --> 00:32:58.196
something like this.

00:32:59.086 --> 00:33:01.886
So, for our PetChat app, to

00:33:01.886 --> 00:33:02.816
create something like this, all

00:33:02.816 --> 00:33:04.826
we need to do is subclass UI

00:33:04.826 --> 00:33:05.826
Input View Controller.

00:33:06.296 --> 00:33:07.726
And by doing that, we get a lot

00:33:07.726 --> 00:33:09.436
of stuff for free, such as the

00:33:09.436 --> 00:33:10.936
blurry gray background that

00:33:10.936 --> 00:33:12.436
mimics the system keyboard's

00:33:12.436 --> 00:33:12.876
appearance.

00:33:13.566 --> 00:33:15.836
But most importantly, we provide

00:33:15.836 --> 00:33:17.216
you a way to access the

00:33:17.216 --> 00:33:18.926
currently interactive text field

00:33:18.926 --> 00:33:19.956
that the user has selected.

00:33:20.586 --> 00:33:21.716
And we do this via a special

00:33:21.716 --> 00:33:23.546
property, called Text Document

00:33:23.546 --> 00:33:24.036
Proxy.

00:33:24.786 --> 00:33:26.026
Now the Text Document Proxy

00:33:26.026 --> 00:33:27.766
allows you to access things like

00:33:27.766 --> 00:33:29.096
the text input traits for the

00:33:29.096 --> 00:33:30.336
currently selected text field.

00:33:30.686 --> 00:33:31.656
So, that would be stuff like

00:33:31.656 --> 00:33:33.096
whether or not it's a password

00:33:33.096 --> 00:33:34.736
field, what kind of content type

00:33:34.736 --> 00:33:36.726
it prefers, and even what kind

00:33:36.726 --> 00:33:37.736
of keyboard type it prefers.

00:33:37.736 --> 00:33:39.186
So, you can adapt as necessary.

00:33:39.996 --> 00:33:41.496
But most importantly, the Text

00:33:41.496 --> 00:33:43.286
Document Proxy also allows you

00:33:43.286 --> 00:33:45.036
to insert text into the text

00:33:45.036 --> 00:33:47.336
field, via a simple method

00:33:47.336 --> 00:33:48.506
called Insert Text, which just

00:33:48.506 --> 00:33:49.046
takes a string.

00:33:49.816 --> 00:33:50.716
Oh, and one more thing that you

00:33:50.716 --> 00:33:51.846
can do with the Text Document

00:33:51.846 --> 00:33:52.526
Proxy too.

00:33:52.786 --> 00:33:53.786
You can access where the

00:33:53.786 --> 00:33:55.756
insertion point position is, and

00:33:55.756 --> 00:33:57.526
the text before and after the

00:33:57.526 --> 00:33:58.186
insertion point.

00:33:59.156 --> 00:33:59.576
Pretty cool.

00:34:00.196 --> 00:34:01.726
So, let's talk about how we can

00:34:01.726 --> 00:34:03.406
actually get this inside of our

00:34:03.406 --> 00:34:03.946
PetChat app.

00:34:04.026 --> 00:34:04.956
Well, let's go back to our old

00:34:04.956 --> 00:34:06.556
friend here, the conversation

00:34:06.556 --> 00:34:07.226
view controller.

00:34:08.466 --> 00:34:09.476
So, to get it to show up in our

00:34:09.476 --> 00:34:10.906
conversation view controller, we

00:34:10.906 --> 00:34:13.116
simply need to instantiate our

00:34:13.116 --> 00:34:14.485
custom input view as a member

00:34:14.485 --> 00:34:14.996
variable.

00:34:15.686 --> 00:34:17.076
And then, override a UI

00:34:17.076 --> 00:34:18.226
Responder method called Can

00:34:18.226 --> 00:34:19.646
Become First Responder, to

00:34:19.646 --> 00:34:21.485
return True, so that it becomes

00:34:21.485 --> 00:34:22.426
a part of the responder chain.

00:34:22.876 --> 00:34:25.246
And then lastly, all we need to

00:34:25.246 --> 00:34:26.556
do, is override this other UI

00:34:26.556 --> 00:34:27.806
Responder method called Input

00:34:27.806 --> 00:34:28.076
View.

00:34:28.076 --> 00:34:30.056
And then just return our custom

00:34:30.056 --> 00:34:30.936
input view instance.

00:34:31.886 --> 00:34:33.106
Now, if you're using things like

00:34:33.106 --> 00:34:35.306
UI Text View or UI Text Field,

00:34:35.565 --> 00:34:36.565
you actually don't need to do

00:34:36.565 --> 00:34:37.386
most of this.

00:34:37.775 --> 00:34:39.406
UI Text View and UI Text Field,

00:34:39.406 --> 00:34:41.696
the input view property is a

00:34:41.696 --> 00:34:42.626
writable property.

00:34:42.946 --> 00:34:44.085
So, all you really need to do is

00:34:44.085 --> 00:34:45.946
actually just assign your custom

00:34:45.946 --> 00:34:49.016
input view instance to the input

00:34:49.016 --> 00:34:49.505
view property.

00:34:50.076 --> 00:34:52.686
So, now, our pets have a way of

00:34:52.686 --> 00:34:54.456
talking back to us in the

00:34:54.456 --> 00:34:56.726
PetChat app, but let's say they

00:34:56.726 --> 00:34:57.596
actually do kind of want to

00:34:57.596 --> 00:34:59.026
break out a little bit and start

00:34:59.026 --> 00:35:00.126
Tweeting or maybe writing a

00:35:00.126 --> 00:35:00.526
blog.

00:35:00.916 --> 00:35:01.716
I'm sure they have a lot of

00:35:01.716 --> 00:35:02.776
interesting things to say with

00:35:02.776 --> 00:35:06.176
that small vocabulary of theirs.

00:35:06.346 --> 00:35:07.866
So, in iOS 8, we actually added

00:35:07.866 --> 00:35:09.426
the ability to create custom

00:35:09.426 --> 00:35:10.866
keyboard extensions, so that it

00:35:10.866 --> 00:35:12.126
runs anywhere in the system.

00:35:12.126 --> 00:35:13.076
This is actually our first time

00:35:13.076 --> 00:35:14.486
talking about it at WWDC.

00:35:15.796 --> 00:35:18.086
So, here's what our custom

00:35:18.086 --> 00:35:19.216
keyboard extension might look

00:35:19.216 --> 00:35:20.366
like, running inside of

00:35:20.366 --> 00:35:20.896
messages.

00:35:21.406 --> 00:35:23.486
So, you can -- your pets can

00:35:23.486 --> 00:35:25.456
chat anywhere, or type into

00:35:25.456 --> 00:35:26.476
Twitter or keep a blog or

00:35:26.476 --> 00:35:26.856
something.

00:35:27.636 --> 00:35:29.456
So, it's actually really easy to

00:35:29.456 --> 00:35:31.216
go from an input view into a

00:35:31.216 --> 00:35:32.216
custom keyboard extension.

00:35:32.216 --> 00:35:33.536
And so, I'm going to give you a

00:35:33.536 --> 00:35:34.756
quick demo and show you how to

00:35:34.756 --> 00:35:35.126
do that.

00:35:35.626 --> 00:35:36.456
So, let's switch over to the

00:35:36.456 --> 00:35:39.316
computer here.

00:35:39.526 --> 00:35:41.556
Okay, so this is our custom

00:35:42.866 --> 00:35:44.396
input view controller here.

00:35:44.446 --> 00:35:45.476
I'm not going to go into too

00:35:45.476 --> 00:35:46.506
much detail about how it was

00:35:46.506 --> 00:35:47.946
built, but our sample code is

00:35:47.946 --> 00:35:48.936
uploaded online.

00:35:49.106 --> 00:35:50.186
So, you can download all this

00:35:50.186 --> 00:35:51.196
yourself if you want to take a

00:35:51.196 --> 00:35:51.636
look at it.

00:35:52.916 --> 00:35:54.666
But to take -- let's go ahead

00:35:54.666 --> 00:35:55.796
and build and run this first to

00:35:55.796 --> 00:35:57.006
see what it looks like inside of

00:35:57.526 --> 00:36:00.446
our app.

00:36:00.716 --> 00:36:01.896
Build and run.

00:36:15.116 --> 00:36:16.476
Alright, so here's our custom

00:36:16.476 --> 00:36:17.656
input view running inside of our

00:36:17.656 --> 00:36:17.746
app.

00:36:17.746 --> 00:36:18.996
And so, I'm going to pretend

00:36:18.996 --> 00:36:20.596
like I'm a pet and just start

00:36:20.596 --> 00:36:21.356
saying what I'm feeling.

00:36:21.356 --> 00:36:22.186
I didn't have breakfast this

00:36:22.186 --> 00:36:24.466
morning, so I'll do something

00:36:24.466 --> 00:36:24.836
like that.

00:36:25.676 --> 00:36:27.166
So, now, if we actually want to

00:36:27.166 --> 00:36:28.586
take this custom input view and

00:36:28.586 --> 00:36:29.516
convert it into a third-party

00:36:29.516 --> 00:36:30.736
keyboard extension, it's quite

00:36:30.736 --> 00:36:31.126
easy.

00:36:31.316 --> 00:36:32.306
So, let's switch back over to

00:36:32.306 --> 00:36:33.366
Xcode here and I'll show you how

00:36:33.366 --> 00:36:33.836
to do that.

00:36:33.836 --> 00:36:36.296
So, first, I'm going to go over

00:36:36.296 --> 00:36:37.816
here to the top left, to the

00:36:37.816 --> 00:36:38.586
Project Settings.

00:36:39.206 --> 00:36:40.386
And I'm going to create a new

00:36:40.386 --> 00:36:42.096
target by clicking this plus

00:36:42.096 --> 00:36:43.066
button at the bottom here.

00:36:43.606 --> 00:36:45.676
And so, I'm going to go ahead

00:36:45.676 --> 00:36:47.846
and choose the custom keyboard

00:36:47.846 --> 00:36:49.676
extension template, and click

00:36:49.676 --> 00:36:50.066
Next.

00:36:50.816 --> 00:36:51.516
And give it a name.

00:36:52.636 --> 00:36:53.326
I'll just call it Animal

00:36:53.326 --> 00:36:53.806
Keyboard.

00:36:55.376 --> 00:36:57.006
So, now, by doing this, Xcode

00:36:57.006 --> 00:36:58.136
actually already gives us a

00:36:58.136 --> 00:36:59.586
bunch of stuff for free.

00:37:00.306 --> 00:37:01.986
For instance, it sets it up so

00:37:01.986 --> 00:37:02.726
that this extension is

00:37:02.726 --> 00:37:04.106
automatically embedded inside of

00:37:04.106 --> 00:37:04.746
your app bundle.

00:37:04.746 --> 00:37:05.666
So, you don't need to mess with

00:37:05.666 --> 00:37:07.056
build settings or build phases

00:37:07.056 --> 00:37:07.716
or anything like that.

00:37:08.746 --> 00:37:11.406
And it also gives us a template,

00:37:12.076 --> 00:37:13.806
UI Input View Controller, here.

00:37:14.296 --> 00:37:15.156
But we actually don't need to

00:37:15.156 --> 00:37:16.226
use this because we already

00:37:16.226 --> 00:37:16.706
wrote one.

00:37:17.036 --> 00:37:18.026
So, I'm just going to tweak

00:37:18.026 --> 00:37:18.976
around with a couple of settings

00:37:18.976 --> 00:37:20.606
here, so that our extension

00:37:20.606 --> 00:37:22.416
loads are already built, Custom

00:37:22.416 --> 00:37:23.506
Input View Controller, instead

00:37:23.506 --> 00:37:24.326
of the one that the template

00:37:24.326 --> 00:37:24.886
gives us.

00:37:25.316 --> 00:37:27.646
So, I'm going to go over here to

00:37:27.646 --> 00:37:28.516
our Custom Input View

00:37:28.516 --> 00:37:29.716
Controller, and I'm going to

00:37:29.716 --> 00:37:31.796
check the box over here for our

00:37:31.796 --> 00:37:33.096
keyboard extension so that it's

00:37:33.096 --> 00:37:34.216
a member of that target.

00:37:34.816 --> 00:37:37.756
And then, our keyboard uses a

00:37:37.756 --> 00:37:38.966
couple of other resources.

00:37:39.216 --> 00:37:40.386
It has a couple of localized

00:37:40.386 --> 00:37:40.966
strings.

00:37:40.966 --> 00:37:41.976
So, I'm also going to go ahead

00:37:41.976 --> 00:37:43.636
and switch to localized strings

00:37:43.636 --> 00:37:45.246
and check this checkbox to make

00:37:45.246 --> 00:37:46.136
sure it's part of that target.

00:37:46.616 --> 00:37:47.896
And then lastly, it also has a

00:37:47.896 --> 00:37:50.406
couple of assets that it uses

00:37:50.736 --> 00:37:51.566
for images.

00:37:51.566 --> 00:37:52.736
So, I'm going to check this box.

00:37:53.276 --> 00:37:55.376
And then, one more thing I have

00:37:55.376 --> 00:37:55.536
to do.

00:37:55.536 --> 00:37:56.616
I'm going to go over to the info

00:37:56.616 --> 00:37:58.716
P-list here, that it generated

00:37:58.716 --> 00:38:00.246
for our custom keyboard

00:38:00.246 --> 00:38:01.716
extension, and change its

00:38:01.716 --> 00:38:03.016
principle class to the one that

00:38:03.016 --> 00:38:04.696
we already made, from the one

00:38:04.696 --> 00:38:05.656
that the template gave us.

00:38:11.026 --> 00:38:12.046
And that's pretty much it.

00:38:12.046 --> 00:38:14.486
So, I'm going to switch back to

00:38:14.486 --> 00:38:16.576
the app target here and build

00:38:16.576 --> 00:38:16.976
and run.

00:38:22.956 --> 00:38:24.086
So, now that the app is

00:38:24.086 --> 00:38:25.316
installed on the system, the

00:38:25.316 --> 00:38:26.986
extension came along with it.

00:38:27.656 --> 00:38:30.186
And there used to be -- now we

00:38:30.186 --> 00:38:31.816
have to enable the custom

00:38:31.816 --> 00:38:33.426
keyboard extension in the System

00:38:33.426 --> 00:38:34.726
Settings, and there used to be a

00:38:34.726 --> 00:38:35.926
really convoluted way to do

00:38:35.926 --> 00:38:36.256
that.

00:38:36.446 --> 00:38:38.276
But in new, in iOS 11, we

00:38:38.276 --> 00:38:39.586
actually made it much simpler

00:38:39.586 --> 00:38:40.856
for your users to enable your

00:38:40.856 --> 00:38:41.916
custom keyboard extension.

00:38:42.106 --> 00:38:42.826
So, I'm going to show you how

00:38:42.826 --> 00:38:43.616
that works right now.

00:38:43.616 --> 00:38:46.086
So, I'm going to go back to

00:38:46.086 --> 00:38:46.896
Settings.

00:38:48.426 --> 00:38:50.166
So, all you need to do, to

00:38:50.166 --> 00:38:51.826
enable your -- to allow your

00:38:51.826 --> 00:38:52.976
users to enable your custom

00:38:52.976 --> 00:38:54.966
keyboard, is provide your app

00:38:54.966 --> 00:38:56.076
with a Settings Bundle.

00:38:56.396 --> 00:38:57.396
It can be empty or it can

00:38:57.396 --> 00:38:58.586
contain some of your settings.

00:38:59.116 --> 00:39:01.666
And we have this new option,

00:39:01.736 --> 00:39:02.856
right underneath there, under

00:39:02.856 --> 00:39:04.036
Siri and search that just says,

00:39:04.036 --> 00:39:04.676
"keyboards."

00:39:05.096 --> 00:39:06.836
And by clicking this, the user

00:39:06.836 --> 00:39:08.146
-- all the user has to do is

00:39:08.146 --> 00:39:09.546
check this one switch.

00:39:09.546 --> 00:39:10.626
And now the keyboard's enabled.

00:39:11.516 --> 00:39:15.446
[ Applause ]

00:39:15.946 --> 00:39:17.346
I'm sure you third-party

00:39:17.346 --> 00:39:18.276
keyboard developers are going to

00:39:18.276 --> 00:39:18.986
love that.

00:39:19.046 --> 00:39:20.416
So, now, I'm just going to go

00:39:20.416 --> 00:39:21.356
over to messages here.

00:39:21.906 --> 00:39:26.106
And then, I'm going to switch to

00:39:26.106 --> 00:39:27.406
our custom keyboard extension.

00:39:28.226 --> 00:39:28.796
And there we go.

00:39:28.856 --> 00:39:30.026
Now we have it running, all over

00:39:30.026 --> 00:39:30.516
the system.

00:39:31.116 --> 00:39:32.176
And so, I'm just going to

00:39:32.176 --> 00:39:33.906
express how I'm feeling about

00:39:33.906 --> 00:39:34.656
the demo right now.

00:39:35.076 --> 00:39:38.056
And that's all it takes.

00:39:38.936 --> 00:39:39.696
So, let's go back over to the

00:39:39.696 --> 00:39:39.976
slides.

00:39:40.516 --> 00:39:44.756
[ Applause ]

00:39:45.256 --> 00:39:48.146
Thanks. So, this is actually my

00:39:48.146 --> 00:39:49.616
personally recommended way for

00:39:49.616 --> 00:39:51.136
you to develop third-party

00:39:51.136 --> 00:39:51.726
keyboards.

00:39:51.796 --> 00:39:53.516
It's really easy to test it

00:39:53.516 --> 00:39:55.116
inside of your app first, just

00:39:55.116 --> 00:39:56.286
as a custom input view.

00:39:56.526 --> 00:39:58.126
And then, as you saw, going from

00:39:58.126 --> 00:39:59.476
a custom input view to a custom

00:39:59.476 --> 00:40:00.576
keyboard extension is really

00:40:00.576 --> 00:40:00.916
easy.

00:40:01.066 --> 00:40:06.286
So, that's really the way to go.

00:40:06.526 --> 00:40:08.136
So, just a quick recap of how to

00:40:08.136 --> 00:40:09.516
convert from a custom input view

00:40:09.516 --> 00:40:10.776
to a keyboard extension.

00:40:11.136 --> 00:40:12.616
We just made a new target and we

00:40:12.686 --> 00:40:14.406
used the Custom Keyboard

00:40:14.406 --> 00:40:15.506
Extension Template.

00:40:16.706 --> 00:40:17.886
You can either fill in the

00:40:17.886 --> 00:40:19.116
provided UI Input View

00:40:19.116 --> 00:40:21.166
Controller Subclass, or change

00:40:21.166 --> 00:40:23.036
it so that it works with your

00:40:23.036 --> 00:40:23.316
own.

00:40:24.146 --> 00:40:25.206
And then lastly, I showed you a

00:40:25.206 --> 00:40:27.396
cool, new user acceleration or a

00:40:27.396 --> 00:40:28.526
cool new acceleration for your

00:40:28.526 --> 00:40:29.736
users to enable your keyboard

00:40:29.736 --> 00:40:30.566
from within your Settings

00:40:30.566 --> 00:40:30.906
Bundle.

00:40:31.456 --> 00:40:33.506
But that's not all.

00:40:33.776 --> 00:40:35.036
We have a couple of new APIs in

00:40:35.036 --> 00:40:37.636
iOS 11 that I want to share with

00:40:37.636 --> 00:40:41.236
you tonight -- or today.

00:40:41.416 --> 00:40:42.816
So, you can now access the

00:40:42.816 --> 00:40:44.446
currently selected text that the

00:40:44.446 --> 00:40:46.066
user has selected, which is

00:40:46.066 --> 00:40:47.416
pretty useful if you want to do

00:40:47.416 --> 00:40:49.386
retro correction with your Auto

00:40:49.386 --> 00:40:51.016
Complete Engine, for instance.

00:40:51.326 --> 00:40:52.486
Or provide some kind of cool

00:40:52.486 --> 00:40:54.346
context around the text that the

00:40:54.406 --> 00:40:56.506
user had selected.

00:40:56.506 --> 00:40:57.576
We also provide you this new

00:40:57.576 --> 00:40:58.906
thing called the Document

00:40:58.906 --> 00:41:00.546
Identifier Handle, which is just

00:41:00.546 --> 00:41:03.156
a UUID, that uniquely identifies

00:41:03.196 --> 00:41:04.446
one text field from the next.

00:41:05.356 --> 00:41:06.846
Now, this is real useful for a

00:41:06.846 --> 00:41:08.076
lot of things, but one of the

00:41:08.076 --> 00:41:09.626
things that it's useful for is

00:41:09.626 --> 00:41:11.306
for resetting your keyboard

00:41:11.306 --> 00:41:12.876
state when the user switches

00:41:12.876 --> 00:41:14.676
text fields, so you can clear

00:41:14.676 --> 00:41:15.836
your predictions if you have

00:41:15.836 --> 00:41:17.806
predictions displayed, or switch

00:41:17.806 --> 00:41:19.486
back to the alphabetic plane if

00:41:19.486 --> 00:41:20.496
the user had switched to your

00:41:20.496 --> 00:41:21.656
numeric plane, or something like

00:41:21.656 --> 00:41:22.000
that.

00:41:24.176 --> 00:41:25.416
And lastly, we also added the

00:41:25.416 --> 00:41:26.596
ability for you to query whether

00:41:26.596 --> 00:41:27.816
or not the user has granted your

00:41:27.816 --> 00:41:29.126
extension full access.

00:41:29.296 --> 00:41:30.416
And I'll go over what full

00:41:30.416 --> 00:41:31.446
access means in just a moment,

00:41:31.446 --> 00:41:32.316
in case you're not familiar.

00:41:33.496 --> 00:41:34.476
But first, I want to talk about

00:41:34.476 --> 00:41:35.756
some other lesser known,

00:41:35.756 --> 00:41:37.036
third-party keyboard APIs that

00:41:37.036 --> 00:41:37.836
maybe you didn't know about.

00:41:39.216 --> 00:41:40.986
So, in iOS 10, we actually added

00:41:40.986 --> 00:41:41.886
the ability for you to

00:41:41.886 --> 00:41:43.446
incorporate the System Globe

00:41:43.776 --> 00:41:45.536
Menu inside of your keyboard,

00:41:45.916 --> 00:41:47.146
which is really nice so that

00:41:47.146 --> 00:41:48.466
your user can quickly switch

00:41:48.466 --> 00:41:49.896
between all of the keyboards

00:41:49.896 --> 00:41:50.646
that they have selected.

00:41:50.646 --> 00:41:51.856
It's a lot better than that next

00:41:51.856 --> 00:41:52.726
keyboard thing that we had

00:41:52.726 --> 00:41:53.156
before.

00:41:54.246 --> 00:41:54.786
Oh, thanks.

00:41:55.516 --> 00:41:58.516
[ Applause ]

00:41:59.016 --> 00:42:00.326
You can also personalize your

00:42:00.326 --> 00:42:01.276
auto complete results with

00:42:01.276 --> 00:42:02.066
something that we call the

00:42:02.066 --> 00:42:03.356
Supplementary Lexicon.

00:42:03.666 --> 00:42:05.066
The Supplementary Lexicon is

00:42:05.066 --> 00:42:06.646
basically just a list of words

00:42:06.646 --> 00:42:07.836
containing the portion of the

00:42:07.836 --> 00:42:09.606
user's address book, so you can

00:42:09.606 --> 00:42:11.446
auto complete various names and

00:42:11.446 --> 00:42:13.546
stuff, that the user might be

00:42:13.546 --> 00:42:15.156
referencing in the text that

00:42:15.156 --> 00:42:15.496
they type.

00:42:16.546 --> 00:42:17.836
And finally, tying back to some

00:42:17.836 --> 00:42:19.136
of the multilingual support that

00:42:19.136 --> 00:42:21.386
we added in iOS 11, that Shuchen

00:42:21.386 --> 00:42:22.766
was talking about earlier, your

00:42:22.766 --> 00:42:24.166
keyboard can use those document

00:42:24.166 --> 00:42:25.486
identifier handle things that I

00:42:25.486 --> 00:42:26.856
was mentioning before, as a

00:42:26.856 --> 00:42:27.706
multilingual hint.

00:42:27.706 --> 00:42:29.516
So, if your keyboard supports

00:42:29.516 --> 00:42:31.416
multiple languages, you too can

00:42:32.076 --> 00:42:33.306
behave like the system keyboard

00:42:33.306 --> 00:42:34.536
does, and change when

00:42:34.536 --> 00:42:34.966
appropriate.

00:42:35.526 --> 00:42:39.046
So, lastly, we can't talk about

00:42:39.046 --> 00:42:40.466
third-party keyboard extensions

00:42:40.466 --> 00:42:41.746
without talking about privacy

00:42:41.746 --> 00:42:42.556
and user trust.

00:42:43.186 --> 00:42:45.936
So, privacy is very much a

00:42:45.936 --> 00:42:48.416
standard iOS feature that users

00:42:48.416 --> 00:42:48.846
expect.

00:42:49.966 --> 00:42:51.846
And users are made aware that

00:42:51.846 --> 00:42:52.926
all of their keystrokes are

00:42:52.926 --> 00:42:54.046
handled by your extension.

00:42:54.546 --> 00:42:55.426
So, if you're doing something

00:42:55.426 --> 00:42:56.786
with those keystrokes, such as

00:42:56.886 --> 00:42:58.286
sending them offsite or

00:42:58.536 --> 00:43:00.056
analyzing them in some way, you

00:43:00.056 --> 00:43:01.066
should make sure to inform the

00:43:01.066 --> 00:43:02.716
user about this, and anonymize

00:43:02.716 --> 00:43:03.866
the data that's coming in, if

00:43:03.866 --> 00:43:04.836
you are sending it offsite.

00:43:05.856 --> 00:43:07.826
And lastly, most applications

00:43:07.976 --> 00:43:09.836
shouldn't actually need it, but

00:43:10.346 --> 00:43:12.226
you can ask the user to provide

00:43:12.226 --> 00:43:14.046
your extension with full access,

00:43:14.276 --> 00:43:15.666
which means access to some lower

00:43:15.666 --> 00:43:16.786
level parts of the system.

00:43:17.266 --> 00:43:18.826
Let's talk a little bit about

00:43:18.826 --> 00:43:20.106
what full access really means.

00:43:20.646 --> 00:43:23.076
So, first of all, there's

00:43:23.076 --> 00:43:24.576
actually quite a bit of value in

00:43:24.576 --> 00:43:26.076
not asking for full access.

00:43:26.356 --> 00:43:27.626
This is why we built the full

00:43:27.626 --> 00:43:28.636
access switch to begin with.

00:43:28.716 --> 00:43:30.126
It's not a speed bump for you

00:43:30.126 --> 00:43:30.666
guys.

00:43:30.906 --> 00:43:32.586
Instead, our Apple customers are

00:43:32.586 --> 00:43:33.816
very privacy conscious.

00:43:34.606 --> 00:43:35.946
Plus, your keyboards already

00:43:35.946 --> 00:43:36.896
provide a lot of awesome

00:43:36.896 --> 00:43:37.806
functionality right out of the

00:43:37.806 --> 00:43:39.676
box, without full access.

00:43:39.826 --> 00:43:40.776
So, granting this should really

00:43:40.776 --> 00:43:42.146
only supplement your existing

00:43:42.146 --> 00:43:42.696
feature set.

00:43:43.066 --> 00:43:44.396
So, some examples of things that

00:43:44.396 --> 00:43:46.476
you might need full access for,

00:43:46.636 --> 00:43:47.826
is communicating with your main

00:43:47.826 --> 00:43:48.086
app.

00:43:48.866 --> 00:43:49.646
So, if you need to build a

00:43:49.646 --> 00:43:51.376
bridge from your main app bundle

00:43:51.376 --> 00:43:52.346
to your custom keyboard

00:43:52.346 --> 00:43:53.736
extension, if you want to access

00:43:53.736 --> 00:43:54.796
like a database or something

00:43:54.796 --> 00:43:55.786
that you have stored there,

00:43:56.046 --> 00:43:57.256
you'll need to request for full

00:43:57.256 --> 00:43:57.906
access for that.

00:43:59.046 --> 00:44:00.296
If you want to access a -- if

00:44:00.666 --> 00:44:02.236
you want to provide your user

00:44:02.236 --> 00:44:03.776
with a repository of gif images

00:44:03.776 --> 00:44:05.636
for instance, then you'll need

00:44:05.636 --> 00:44:07.936
to ask for full access to grant

00:44:07.936 --> 00:44:09.596
access to the networking stack

00:44:09.596 --> 00:44:10.336
on iOS.

00:44:12.016 --> 00:44:14.026
So, for current location, in

00:44:14.026 --> 00:44:15.456
case you want to enrich your

00:44:15.456 --> 00:44:17.266
auto complete results with

00:44:17.266 --> 00:44:18.836
references to locations that the

00:44:18.836 --> 00:44:20.776
user might be referencing to in

00:44:20.776 --> 00:44:22.486
the text that they type, you'll

00:44:22.486 --> 00:44:24.006
need to request for full access

00:44:24.006 --> 00:44:24.926
for the current location.

00:44:25.106 --> 00:44:26.346
And you'll also have to have the

00:44:26.346 --> 00:44:29.096
user grant your main app access

00:44:29.096 --> 00:44:30.176
to your current location too.

00:44:30.326 --> 00:44:31.136
So, keep that in mind.

00:44:31.706 --> 00:44:34.576
And for the address book, most

00:44:34.576 --> 00:44:35.906
applications don't actually need

00:44:35.906 --> 00:44:37.206
this because of what I said

00:44:37.206 --> 00:44:39.046
about the supplementary lexicon.

00:44:39.276 --> 00:44:40.766
So, you actually don't need full

00:44:40.766 --> 00:44:41.746
access to get to the address

00:44:41.746 --> 00:44:41.986
book.

00:44:42.366 --> 00:44:43.446
But, if you want to access some

00:44:43.446 --> 00:44:44.666
more of the address book, like

00:44:44.666 --> 00:44:46.516
the notes fields, or nickname,

00:44:46.516 --> 00:44:47.246
or something like that.

00:44:47.496 --> 00:44:48.446
Then you will need full access

00:44:48.446 --> 00:44:49.886
for that.

00:44:50.066 --> 00:44:51.326
And lastly, make sure that your

00:44:51.326 --> 00:44:52.726
keyboard works without

00:44:52.726 --> 00:44:53.996
requesting for full access.

00:44:54.386 --> 00:44:55.676
Like I said, there's a lot of

00:44:55.676 --> 00:44:57.416
value in not asking for full

00:44:58.746 --> 00:44:59.996
access, and plus, your app will

00:44:59.996 --> 00:45:01.406
actually get rejected if it

00:45:01.406 --> 00:45:01.756
doesn't.

00:45:02.096 --> 00:45:03.036
Take a look at the App Store

00:45:03.036 --> 00:45:04.266
Guidelines for more information

00:45:04.266 --> 00:45:05.226
about that.

00:45:06.256 --> 00:45:07.876
So, just a quick summary before

00:45:07.876 --> 00:45:09.376
I leave you tonight, or today,

00:45:09.376 --> 00:45:09.756
sorry.

00:45:09.756 --> 00:45:11.886
I did that again.

00:45:12.246 --> 00:45:13.606
Kasia showed you how to design

00:45:13.606 --> 00:45:14.476
your app with the keyboard in

00:45:14.476 --> 00:45:15.756
mind and about keyboard

00:45:15.756 --> 00:45:16.266
avoidance.

00:45:17.066 --> 00:45:18.086
Actually, we don't say

00:45:18.086 --> 00:45:18.556
"avoidance."

00:45:18.556 --> 00:45:19.906
We say, "embrace the keyboard."

00:45:20.266 --> 00:45:21.426
Don't avoid it.

00:45:22.076 --> 00:45:23.316
And Shuchen mentioned some

00:45:23.316 --> 00:45:24.686
advanced traits to enhance the

00:45:24.686 --> 00:45:26.126
user's experience with some of

00:45:26.126 --> 00:45:27.506
the built-in system keyboards

00:45:27.556 --> 00:45:28.406
that you can pick from.

00:45:28.926 --> 00:45:31.446
And if that wasn't enough, we

00:45:31.446 --> 00:45:32.636
showed you how to build custom

00:45:32.636 --> 00:45:33.936
keyboard extensions and custom

00:45:33.936 --> 00:45:35.576
input views, and how going from

00:45:35.576 --> 00:45:36.426
a custom input view to a

00:45:36.426 --> 00:45:37.506
keyboard extension, is actually

00:45:37.506 --> 00:45:38.426
quite a lot easier than you

00:45:38.426 --> 00:45:38.646
think.

00:45:40.156 --> 00:45:41.606
So, make sure to like, comment,

00:45:41.606 --> 00:45:43.406
and subscribe, or check out our

00:45:43.706 --> 00:45:46.096
sample page or sample app, here

00:45:46.216 --> 00:45:48.816
at WWDC 17, Session 242.

00:45:49.116 --> 00:45:50.936
All the code that you saw today,

00:45:51.166 --> 00:45:52.366
is right there.

00:45:52.726 --> 00:45:54.306
So, all the sample code that you

00:45:54.306 --> 00:45:55.216
saw today is right there.

00:45:55.506 --> 00:45:56.226
So, go check it out.

00:45:56.516 --> 00:45:59.006
Here's some related sessions.

00:45:59.006 --> 00:46:00.566
The Password Autofill for Apps

00:46:00.566 --> 00:46:01.366
is definitely a good one to

00:46:01.366 --> 00:46:01.906
check out.

00:46:02.266 --> 00:46:03.406
Mysteries of Auto Layout is

00:46:03.406 --> 00:46:05.476
great too for keyboard avoidance

00:46:05.476 --> 00:46:06.836
and -- or keyboard embracing.

00:46:07.666 --> 00:46:07.976
Thank you.

00:46:08.516 --> 00:46:12.500
[ Applause ]