WEBVTT

00:00:10.220 --> 00:00:15.330
The conference and to the first of
two back-to-back printing sessions.

00:00:15.510 --> 00:00:17.950
Two and a half hours of printing
for those of you who are going

00:00:17.950 --> 00:00:19.100
to stay for both sessions.

00:00:19.100 --> 00:00:20.600
Could be worse.

00:00:20.630 --> 00:00:26.260
I was up in Seattle in May this year
and sat through almost a whole day

00:00:26.260 --> 00:00:29.420
of printing so only two and a half.

00:00:29.900 --> 00:00:33.600
The title of this slide says "Advances
in Application Printing" and we are going

00:00:33.600 --> 00:00:35.830
to talk about the Print Dialog a lot.

00:00:35.830 --> 00:00:39.810
But if any of you work on printer
drivers and other kinds of software

00:00:39.810 --> 00:00:42.800
related to the printing system,
this session is still for you.

00:00:42.800 --> 00:00:45.800
We do have content in here
that's directly relevant.

00:00:45.800 --> 00:00:50.980
So don't go out for coffee yet.

00:00:52.210 --> 00:00:54.560
I'd like to say that, you know, by now,
I mean,

00:00:54.560 --> 00:00:56.340
Mac OS X is more than five years old.

00:00:56.340 --> 00:00:59.850
And I think we're getting close to that
point in time when you guys know what

00:00:59.900 --> 00:01:01.260
your code is supposed to do to print.

00:01:01.260 --> 00:01:03.690
And then we know what our
code is supposed to do.

00:01:03.700 --> 00:01:06.560
And I'd like to think we're
getting close to that point in

00:01:06.560 --> 00:01:08.360
time when printing just works.

00:01:08.360 --> 00:01:10.910
But there's still plenty of work to do.

00:01:10.920 --> 00:01:14.860
And I hope after you've heard what we've
had to say in the next hour or two,

00:01:14.860 --> 00:01:17.020
you'll agree that we're
getting closer to that goal.

00:01:17.020 --> 00:01:19.990
And if you support us,
do some of the things we're

00:01:19.990 --> 00:01:21.640
asking you to do today.

00:01:22.200 --> 00:01:25.050
I'm sure that Leopard customers
will be much more happy with

00:01:25.060 --> 00:01:28.470
printing compared with Tiger and
earlier versions of Mac OS X.

00:01:30.730 --> 00:01:34.120
So, as this slide says,
we're going to talk

00:01:34.240 --> 00:01:36.280
about the print dialog.

00:01:36.280 --> 00:01:38.690
Not just the print dialog,
but that's a major topic.

00:01:38.690 --> 00:01:42.850
And you all know that
printing is a team effort.

00:01:42.850 --> 00:01:46.000
Applications do your work,
printer drivers do their work,

00:01:46.010 --> 00:01:49.550
and somewhere in the middle,
some Apple code gets to do its stuff.

00:01:50.100 --> 00:01:52.790
And if we all do the right things,
then everything you see in your

00:01:52.790 --> 00:01:56.030
document window gets put down on paper
in the right place and the right color,

00:01:56.030 --> 00:01:56.360
etc.

00:01:56.360 --> 00:02:00.250
But we all need to play our
respective parts and try not

00:02:00.250 --> 00:02:02.590
to step on each other's toes.

00:02:02.670 --> 00:02:08.100
And the Print Dialog, I guess,
is the most critical part of that system

00:02:08.100 --> 00:02:09.980
where we all have to get along together.

00:02:09.980 --> 00:02:15.630
Maybe it's the most contested
piece of screen real estate we have

00:02:15.630 --> 00:02:19.700
because it's a threesome effort
to get everything working together.

00:02:19.700 --> 00:02:22.240
You know, those questions of who
owns the Print Dialog,

00:02:22.240 --> 00:02:25.780
the priorities of various features,
how they interact with each other.

00:02:27.000 --> 00:02:30.760
And so, of course,
with the new version of Mac OS X,

00:02:30.760 --> 00:02:33.530
we've had to put some thought into
how to make all that work well.

00:02:34.820 --> 00:02:38.270
As a prelude to this discussion,
I went looking for old screenshots.

00:02:38.290 --> 00:02:41.240
And to tell you the truth,
it's not that hard to

00:02:41.350 --> 00:02:43.130
find the really old ones.

00:02:43.130 --> 00:02:47.750
Here's one from,
I guess this is about 13 years ago,

00:02:47.750 --> 00:02:51.440
early version of the LaserWriter driver.

00:02:51.440 --> 00:02:54.120
And back then,
the driver owned the Print Dialog,

00:02:54.160 --> 00:02:56.710
and the application had
to ask Pretty Please if it

00:02:56.720 --> 00:02:58.440
wanted to add any settings.

00:02:58.440 --> 00:03:00.790
And if you look closely,
you'll see a couple of

00:03:00.800 --> 00:03:04.150
checkboxes that the application's
added to the Print Dialog.

00:03:05.620 --> 00:03:09.400
Around the same vintage,
we had another printing system and

00:03:09.400 --> 00:03:13.270
this had a slightly different print
dialog and a different mechanism for

00:03:13.270 --> 00:03:17.190
applications to be able to add their
controls for print time features.

00:03:17.200 --> 00:03:21.200
So back then it was kind of a pain for
applications to be able to do what they

00:03:21.320 --> 00:03:25.550
wanted to do with all the different
print drivers out there at the time.

00:03:25.560 --> 00:03:27.900
By the way, this one had a nice feature.

00:03:27.900 --> 00:03:29.740
If you see,
there's a fewer choices button.

00:03:29.740 --> 00:03:32.820
So there was a simplified and
advanced view of the print dialog.

00:03:33.630 --> 00:03:36.210
Quite a good innovation at the time.

00:03:36.970 --> 00:03:40.460
Another thing that we've had to deal
with as the Print Dialogs evolved

00:03:40.520 --> 00:03:44.080
is just the growing list of things
that you can do at print time.

00:03:44.080 --> 00:03:47.720
Growing list of things that
applications want to allow you to do

00:03:47.720 --> 00:03:49.380
to customize what comes out on paper.

00:03:49.380 --> 00:03:53.230
A growing list of things that the
printer and its driver wants to

00:03:53.260 --> 00:03:57.160
make available to you when the
time comes to print your document.

00:03:57.160 --> 00:04:02.150
That's about,
I forget how long ago this is,

00:04:02.150 --> 00:04:06.330
but at least six years I guess, since...

00:04:06.600 --> 00:04:08.890
That's when we started to add
extra panels to the Print Dialog.

00:04:08.970 --> 00:04:11.750
LaserWriteRate had a drop-down
menu so that you could switch

00:04:11.820 --> 00:04:12.840
between different panels.

00:04:12.860 --> 00:04:15.740
That, of course,
introduced topics like how do

00:04:15.870 --> 00:04:18.540
you deal with interdependencies
between various features.

00:04:20.100 --> 00:04:23.290
And we weren't the only ones who
were working on the Print Dialog.

00:04:23.540 --> 00:04:25.580
Here's one, kind of recent.

00:04:25.610 --> 00:04:28.700
This is PostScript printing on Windows.

00:04:29.010 --> 00:04:31.020
and another one,
this is Printing Joy and Inkjet,

00:04:31.020 --> 00:04:33.380
Raster Printer on Windows.

00:04:33.380 --> 00:04:35.290
And we even have...

00:04:35.470 --> 00:04:39.440
Screenshot from one of the Linux distros.

00:04:39.540 --> 00:04:42.940
So I guess the point I'm trying
to make is lots of people

00:04:42.940 --> 00:04:43.920
working on the Print Dialog.

00:04:43.950 --> 00:04:48.130
We've got to this point today with
Tiger and we're starting to realize

00:04:48.130 --> 00:04:50.870
that there isn't a Print Dialog,
sorry,

00:04:50.870 --> 00:04:55.480
there isn't a perfect Print Dialog,
but we have to make the Print Dialog as

00:04:55.480 --> 00:05:00.180
simple as possible and we have to make
it as easy as possible for you to extend

00:05:00.180 --> 00:05:05.380
the Print Dialog if you need to and do
it in a way that doesn't confuse you.

00:05:05.440 --> 00:05:07.140
confuse the user.

00:05:07.360 --> 00:05:09.890
I'd have to say that if
you look at Tiger today,

00:05:09.890 --> 00:05:13.540
and this is what you
get with some printers,

00:05:13.540 --> 00:05:17.170
you just have an intimidating
experience when you click on

00:05:17.340 --> 00:05:19.060
that Print Dialog Extension menu.

00:05:19.060 --> 00:05:20.150
Just too many features.

00:05:20.160 --> 00:05:24.320
So for Leopard,
and anybody who's actually installed

00:05:24.320 --> 00:05:29.450
Leopard will already have known this,
we kind of went back to square one.

00:05:29.450 --> 00:05:33.120
And we thought this was quite
a nice printing experience.

00:05:33.120 --> 00:05:34.670
Works for me.

00:05:34.680 --> 00:05:37.260
And you know,
the printing system's just going

00:05:37.260 --> 00:05:40.780
to use extra sensory perception
to figure out what you want

00:05:40.790 --> 00:05:41.780
and just do the right thing.

00:05:41.780 --> 00:05:45.310
But of course, life's a little bit more
complicated than that.

00:05:45.460 --> 00:05:50.130
So we've ended up with this as the first
view that the user gets when they go

00:05:50.170 --> 00:05:53.290
to print from a particular application.

00:05:53.360 --> 00:05:55.120
Of course, there's more to it than that,
and that's what we're going

00:05:55.120 --> 00:05:56.470
to explain this morning.

00:05:56.480 --> 00:06:00.100
I just want to make a
couple of quick points.

00:06:00.190 --> 00:06:04.480
One is that what you got today with
your Leopard Seed is not the last word.

00:06:04.680 --> 00:06:09.260
We've got more improvements
in the pipeline.

00:06:09.260 --> 00:06:12.060
The other thing I want to say is,
although there's not a

00:06:12.060 --> 00:06:15.340
lot of time to do this,
based on what you hear this morning,

00:06:15.340 --> 00:06:16.800
give us your feedback.

00:06:16.800 --> 00:06:21.790
We may be able to incorporate some
of your changes and suggestions.

00:06:22.470 --> 00:06:27.800
That said, I think we've done a good
job making it easier for you

00:06:27.800 --> 00:06:29.920
to extend the Print Dialog,
customize it.

00:06:30.010 --> 00:06:34.390
I just want to finish by saying
please try to keep things simple.

00:06:34.650 --> 00:06:37.720
Go for consistency.

00:06:37.720 --> 00:06:41.330
And if you have any issues, talk to us.

00:06:41.570 --> 00:06:47.510
Try not to work around the way we've
implemented the Print Dialog and the way

00:06:47.510 --> 00:06:50.430
we've made it easy for you to enhance it.

00:06:50.430 --> 00:06:50.430
And with that,

00:06:51.060 --> 00:06:54.100
I'm going to hand over for
the technical stuff to Alan.

00:06:54.120 --> 00:06:56.990
He's going to show you how to work
with the Print Dialog in Leopard.

00:06:57.080 --> 00:06:58.990
Thanks very much.

00:07:03.410 --> 00:07:03.800
Thank you.

00:07:03.800 --> 00:07:04.730
I'm Alan Beck.

00:07:04.770 --> 00:07:08.860
I've been at Apple 15 years
now and 13 of those past 15

00:07:08.860 --> 00:07:10.370
years have been in printing.

00:07:10.460 --> 00:07:11.400
So I've been there a long time.

00:07:11.400 --> 00:07:15.840
I know all those dialogues
that Paul showed and some

00:07:15.910 --> 00:07:17.070
of the ones before that.

00:07:17.110 --> 00:07:20.030
So it's been quite a ride.

00:07:20.050 --> 00:07:23.260
So now on to the...

00:07:23.450 --> 00:07:24.740
Simple Print Dialog.

00:07:24.740 --> 00:07:26.990
This is the first major redesign
of the Print Dialog we have

00:07:27.000 --> 00:07:28.530
done in over seven years.

00:07:28.630 --> 00:07:35.040
Basically, since we started your first
developer preview for OS X.

00:07:35.050 --> 00:07:40.210
That was when we basically,
the system took over the Print Dialog

00:07:40.290 --> 00:07:44.960
and we didn't have the drivers
in charge of the Print Dialog.

00:07:45.490 --> 00:07:48.160
We have found that the
majority of our users just do a

00:07:48.200 --> 00:07:50.250
Command P and return to print.

00:07:50.300 --> 00:07:54.060
It's mainly about what some
of the application developers

00:07:54.070 --> 00:07:56.770
want or driver developers want,
but that is the reality of the world.

00:07:56.780 --> 00:08:02.280
So we wanted to make the first dialog,
Print Dialog, that the user sees simple.

00:08:02.280 --> 00:08:05.930
To give the users the minimum
number of options to choose from.

00:08:05.940 --> 00:08:09.760
Simplicity is the user
doesn't have to make a choice.

00:08:09.780 --> 00:08:13.850
So here we have given the user the
choice of selecting the printer,

00:08:14.760 --> 00:08:18.850
selecting a preset if they want to,
and we've given them the PDF workflow

00:08:18.850 --> 00:08:23.350
button and the preview button,
and of course the cancel and print.

00:08:24.350 --> 00:08:28.380
We've already gotten the bug,
where did my print options go?

00:08:28.550 --> 00:08:31.660
So you guys don't need to write that bug,
we already have it.

00:08:31.770 --> 00:08:34.830
So what the user would have to do to
get the rest of the buttons is just

00:08:35.120 --> 00:08:37.480
click the little disclosure button.

00:08:37.720 --> 00:08:40.020
And we do get the expanded dialog.

00:08:40.020 --> 00:08:43.250
And this is where the full
functionality of the drivers and

00:08:43.250 --> 00:08:44.600
the applications can be seen.

00:08:44.600 --> 00:08:47.720
And if you just want to get
back to the simple print dialog,

00:08:47.720 --> 00:08:48.980
just click the button again.

00:08:52.020 --> 00:08:54.720
Now let's talk a little about
the interaction of the simple

00:08:54.720 --> 00:08:56.400
and the expanded Print Dialog.

00:08:56.400 --> 00:08:59.660
The state of the closure button
is saved on a per application,

00:08:59.660 --> 00:09:00.840
per user basis.

00:09:00.900 --> 00:09:04.140
In other words,
the next time you bring up the

00:09:04.520 --> 00:09:07.380
Print Dialog in your application,
it will open up the state

00:09:07.380 --> 00:09:08.900
that the user last had it as.

00:09:08.900 --> 00:09:13.970
So this allows a user to say in mail,
always have the simple

00:09:13.970 --> 00:09:14.900
Print Dialog shown.

00:09:14.900 --> 00:09:17.770
They really don't care about
any of the... they have their

00:09:17.850 --> 00:09:19.700
preset already set for mail.

00:09:19.910 --> 00:09:20.840
They know how to print.

00:09:20.910 --> 00:09:24.690
But say if you want to go to Word or
Pages or any other complex app

00:09:24.910 --> 00:09:29.220
where the user does want control,
they can have the expanded Print Dialog

00:09:29.220 --> 00:09:34.900
in that app and still have the simple
Print Dialog in your other app.

00:09:34.900 --> 00:09:37.900
One thing I'd like to say is the
application does not control this.

00:09:37.900 --> 00:09:42.130
It is a per user... it is
controlled by the user.

00:09:42.410 --> 00:09:44.270
Now let's talk a little bit
about the expanded print dialog.

00:09:44.270 --> 00:09:48.670
One of the major changes we've done is
we've made the application print panel

00:09:48.920 --> 00:09:50.320
the first panel that the user sees.

00:09:50.320 --> 00:09:53.990
We have been noticing that some
of the important print options

00:09:53.990 --> 00:09:56.030
the users weren't able to find.

00:09:56.040 --> 00:10:00.990
The application print panel was buried
deep down in the PDE menu and the

00:10:01.160 --> 00:10:03.340
users just did not know how to find it.

00:10:03.410 --> 00:10:06.460
So we brought the application
panel up front and it was the

00:10:06.460 --> 00:10:08.130
first panel this user sees.

00:10:08.750 --> 00:10:11.520
We've also brought the copies
and page range above the line.

00:10:11.520 --> 00:10:13.450
It is now in the top
portion of the dialog.

00:10:13.460 --> 00:10:18.270
So the user can always get to these
options without having to change panels.

00:10:18.380 --> 00:10:23.440
One other thing we've done is we've
promoted the two-sided printing.

00:10:23.620 --> 00:10:26.840
More and more printers are
coming standard with the duplex

00:10:26.920 --> 00:10:30.670
option and the users are saying,
"How do I get two-sided printing

00:10:30.670 --> 00:10:35.520
with this new feature that came with
my printer?" So we have promoted

00:10:35.570 --> 00:10:37.730
it to the top portion of the dialog.

00:10:37.740 --> 00:10:38.700
That way the user can see it.

00:10:38.700 --> 00:10:40.470
always find it.

00:10:42.030 --> 00:10:47.270
Paul alluded earlier to the panel pop-up
menu has become kind of unmanageable,

00:10:47.540 --> 00:10:49.580
confusing,
and it's really kind of hard to

00:10:49.580 --> 00:10:50.770
find what you're looking for.

00:10:50.800 --> 00:10:53.200
In Leopard,
we've organized it a little bit

00:10:53.230 --> 00:10:55.340
to alleviate some of the concerns.

00:10:55.340 --> 00:10:58.270
We've added a separator
after the application panels,

00:10:58.270 --> 00:11:01.650
and we've put separators around
the printer-specific panels.

00:11:01.660 --> 00:11:04.000
In the short time that
we've been using it,

00:11:04.000 --> 00:11:06.770
I've been using it,
it makes a big difference.

00:11:06.860 --> 00:11:09.680
You wouldn't think three lines
can make such a big difference

00:11:09.840 --> 00:11:11.940
in navigating this venue,
but it does.

00:11:14.950 --> 00:11:19.950
We've also added the concept of last
used settings for another preset.

00:11:20.100 --> 00:11:23.220
So we've had requests
from many users to say,

00:11:23.260 --> 00:11:25.980
I want to print this document
the same way I just printed it.

00:11:26.030 --> 00:11:27.980
Or say I have another document
I want to print it the same way

00:11:27.980 --> 00:11:30.180
I just printed this last document.

00:11:30.240 --> 00:11:33.340
What we do in the printing system
is every time the user hits Print,

00:11:33.390 --> 00:11:37.900
we capture and save off the print
settings that they just printed with.

00:11:37.980 --> 00:11:40.300
And then when the user goes
back to the Print Dialog,

00:11:40.340 --> 00:11:43.260
they can just go ahead and select
this last used print settings and

00:11:43.260 --> 00:11:47.460
we will load those settings in
the Print Dialog and users will be

00:11:47.560 --> 00:11:49.660
able to print using those settings.

00:11:50.880 --> 00:11:53.240
Another thing we've added,
we've had a lot of user requests

00:11:53.240 --> 00:11:55.400
for this and developer requests.

00:11:55.460 --> 00:12:01.160
We've added adding the page setup
functionality to the Print Dialog.

00:12:03.480 --> 00:12:06.120
We are now allowing
applications to add paper size,

00:12:06.350 --> 00:12:09.470
orientation,
and scale to the Print Dialog.

00:12:09.960 --> 00:12:13.120
We mainly see this for applications
that are not document based.

00:12:13.170 --> 00:12:16.980
We still have the page setup menu
for the users to use if you want to,

00:12:16.980 --> 00:12:18.900
or for the application
users to use if you want to.

00:12:18.910 --> 00:12:22.900
It reduces the number of page
setup and print dialog round trips.

00:12:22.920 --> 00:12:24.900
How many times have you
brought up a web browser,

00:12:24.900 --> 00:12:31.810
gone to print, didn't quite fit,
cancel out, go up to page setup,

00:12:31.960 --> 00:12:36.540
set the scale, go through that,
bring up the print dialog, print again,

00:12:36.540 --> 00:12:37.900
it's still not quite right.

00:12:37.930 --> 00:12:42.660
Or another case is,
I know this will fit orientation,

00:12:42.700 --> 00:12:45.000
I'm in the print dialog, oh,
I have to cancel out,

00:12:45.000 --> 00:12:46.900
go to page setup and set orientation.

00:12:46.900 --> 00:12:50.900
So now we are allowing applications
to opt in to this functionality.

00:12:50.900 --> 00:12:55.550
They can choose which of the
page format options they want

00:12:55.550 --> 00:12:58.020
to show in the print dialog.

00:12:58.220 --> 00:12:59.930
And we were saying apps,
you can even remove the page

00:13:00.050 --> 00:13:02.490
setup menu item if it makes sense
for your application if you've

00:13:02.490 --> 00:13:04.690
added them to the print dialog.

00:13:05.350 --> 00:13:07.590
Another thing we're allowing
the application to do is we can

00:13:07.630 --> 00:13:10.870
put these page attributes not in
the top portion of the dialog,

00:13:11.020 --> 00:13:14.280
but you can make it its
own little PDE as well.

00:13:15.850 --> 00:13:17.380
Print Selection.

00:13:17.440 --> 00:13:22.420
We are now providing a system,
a print system consistent way for

00:13:22.420 --> 00:13:23.720
the user to select print selection.

00:13:23.720 --> 00:13:27.130
Currently, it's kind of haphazard based
on the application buried deep

00:13:27.220 --> 00:13:29.020
down in the application panel.

00:13:29.020 --> 00:13:33.260
We are providing a consistent UI by
adding a third radio button to the pages,

00:13:33.260 --> 00:13:35.720
to the page range where
the user can select,

00:13:35.720 --> 00:13:37.980
I just want to print the selection.

00:13:37.980 --> 00:13:40.130
Problem is we can't do that by ourselves.

00:13:40.230 --> 00:13:42.020
We need the application's help.

00:13:42.050 --> 00:13:45.010
You know what the selection is,
we can't print the selection.

00:13:45.850 --> 00:13:50.100
So as herein is that the application
has to opt in to give us functionality

00:13:50.870 --> 00:13:55.250
and when the user selects selection,
we will add the KPM Print Selection

00:13:55.250 --> 00:13:58.600
Only key to the print settings,
then use the application,

00:13:58.610 --> 00:14:02.730
we have to read that and only
print what the user has selected.

00:14:04.070 --> 00:14:07.110
Another way of allowing the
application to do is override

00:14:07.110 --> 00:14:09.000
our copies and page range.

00:14:09.050 --> 00:14:11.940
You can specify that the copies and
page range not be shown altogether.

00:14:11.940 --> 00:14:14.220
If it doesn't make sense for
your application to show copies,

00:14:14.280 --> 00:14:15.900
don't show it.

00:14:16.520 --> 00:14:18.800
And if your application can
do a better job of something,

00:14:18.800 --> 00:14:21.990
let's say page range,
you can hide ours and show yours.

00:14:22.120 --> 00:14:24.140
In this example,
you have a word processor.

00:14:24.140 --> 00:14:29.650
It can do a better page range by
doing discontinuous page numbers.

00:14:29.650 --> 00:14:35.080
So what your application would do would
be hide our page range and show theirs.

00:14:35.710 --> 00:14:38.520
Now, talk about some of the APIs that
gives us functionality.

00:14:38.520 --> 00:14:39.240
It's pretty simple.

00:14:39.240 --> 00:14:40.100
It's an option field.

00:14:40.100 --> 00:14:43.980
So here in Cocoa, you have these enums.

00:14:43.980 --> 00:14:47.160
You have Show Copies, Page Range,
Paper Size, Orientation, Scaling.

00:14:47.160 --> 00:14:52.320
And if you want to set them,
the NS Print Panel has added

00:14:52.320 --> 00:14:55.330
these two methods for set options
so you can set the options and

00:14:55.760 --> 00:14:57.550
actually get the current options.

00:14:57.560 --> 00:15:00.500
We will be adding the options
for the Print Selection and

00:15:00.500 --> 00:15:02.760
Page Attributes Panel in a future seed.

00:15:02.760 --> 00:15:04.970
It's not quite there yet.

00:15:06.760 --> 00:15:09.110
And here's the new printing,
the Carbon Printing APIs.

00:15:09.320 --> 00:15:12.310
Same thing, option,
we have the option bits, we have copies,

00:15:12.440 --> 00:15:12.910
page range.

00:15:13.140 --> 00:15:15.870
Here we have the page range with
selection which will add that third

00:15:15.870 --> 00:15:17.520
radio button that I showed you.

00:15:17.520 --> 00:15:21.700
Paper size, orientation scale,
and the ability to show the page

00:15:21.700 --> 00:15:23.810
attributes in its own separate PDE.

00:15:23.820 --> 00:15:29.350
We also added a couple more APIs to
show the print dialog with options.

00:15:29.350 --> 00:15:32.540
As you can see,
one of the last parameters is where you

00:15:32.540 --> 00:15:34.880
pass in the print dialog options flags.

00:15:35.660 --> 00:15:39.400
Another thing you might want to notice
here is page format is no longer const.

00:15:39.400 --> 00:15:42.500
The application has to be able,
be ready to handle a page

00:15:42.500 --> 00:15:44.480
format that has been modified.

00:15:44.540 --> 00:15:45.620
That is not true today.

00:15:45.750 --> 00:15:48.600
Currently in the print,
any of the print dialog commands,

00:15:48.600 --> 00:15:51.080
it's const and we don't
change the page format.

00:15:51.080 --> 00:15:55.990
But from now on,
we may be changing it for you or to you.

00:15:58.120 --> 00:16:00.960
So let's just go over the demo apps.

00:16:01.030 --> 00:16:03.690
Go over to--

00:16:08.600 --> 00:16:14.640
This is purely a demo app.

00:16:14.700 --> 00:16:16.580
It is not anything the user would see.

00:16:16.580 --> 00:16:18.360
We had that confusion
a little bit earlier.

00:16:18.360 --> 00:16:23.680
It is just to show you basically how an
application could turn on and off these

00:16:24.080 --> 00:16:27.140
different fields on the Print Dialog.

00:16:27.160 --> 00:16:29.100
I'm just saying this
is the default state.

00:16:29.220 --> 00:16:30.500
Copies and page regions on.

00:16:30.540 --> 00:16:32.720
Let's go ahead and bring
up the Print Dialog.

00:16:32.740 --> 00:16:35.280
As you can see,
here's a simple Print Dialog.

00:16:35.580 --> 00:16:39.510
have you can select the printer,

00:16:40.360 --> 00:16:45.280
We have all the standard presets,
the help button, the PDF workflow,

00:16:45.400 --> 00:16:46.890
preview, and the cancel and print.

00:16:46.900 --> 00:16:48.830
Now let's go ahead and expand it.

00:16:48.920 --> 00:16:52.240
As you can see,
we have the copies and page range,

00:16:52.490 --> 00:16:56.820
the two-sided and the pages.

00:16:56.820 --> 00:17:00.780
And this application doesn't
have an app-specific pane,

00:17:00.780 --> 00:17:03.950
so we go to our first pane,
the system pane.

00:17:03.960 --> 00:17:06.610
As you can see here,
here again we have the

00:17:06.800 --> 00:17:09.910
printer-specific PDEs being shown here.

00:17:10.310 --> 00:17:11.200
So let's cancel out of this.

00:17:11.300 --> 00:17:16.580
Now let's go ahead and add
the page format options.

00:17:17.070 --> 00:17:20.390
Here again you can see
we've added paper size,

00:17:20.680 --> 00:17:27.460
full paper size pop up and we
tell you if it changes here.

00:17:27.490 --> 00:17:31.840
We've added the orientation,
changed orientation and

00:17:31.840 --> 00:17:34.070
we can change scale.

00:17:34.170 --> 00:17:36.340
Let's go ahead and
cancel back out of this.

00:17:36.390 --> 00:17:38.600
And here again, it's like, okay,
say I don't want

00:17:38.700 --> 00:17:40.340
orientation and page range.

00:17:40.360 --> 00:17:45.340
Okay, if I'm an app, I now say, okay,
look,

00:17:45.340 --> 00:17:47.780
those options don't make sense to me.

00:17:47.780 --> 00:17:49.920
I just want page size and scale.

00:17:49.940 --> 00:17:51.820
You know,
just the scale moved over because we

00:17:51.820 --> 00:17:58.480
didn't have the orientation as well,
and we don't have page range anymore.

00:17:59.720 --> 00:18:04.400
Now let's just show it as the panel.

00:18:04.580 --> 00:18:05.400
Here it is.

00:18:05.400 --> 00:18:07.400
Okay, now we have the -- still
don't have page range,

00:18:07.400 --> 00:18:12.400
as you can see, but we do have the page
attributes as a panel.

00:18:12.400 --> 00:18:16.430
And lastly,
I'd like to show you the print selection.

00:18:17.740 --> 00:18:20.360
Here again,
here we have the copies and we've added

00:18:20.360 --> 00:18:23.770
the third radio button for the user
to select saying they want to print

00:18:23.940 --> 00:18:26.000
just the selection that the app has.

00:18:28.970 --> 00:18:31.580
What is really nice is,
let's close out of this,

00:18:31.710 --> 00:18:36.320
is I have made a single
line change in Safari.

00:18:36.690 --> 00:18:42.740
to add the print options to the page
format options to the Print Dialog.

00:18:45.760 --> 00:18:47.860
And as you can see, here they are.

00:18:47.930 --> 00:18:48.850
This is the standard web page.

00:18:48.940 --> 00:18:51.240
Let's go ahead and preview this.

00:18:51.260 --> 00:18:54.460
You know, standard, you know, US letter.

00:18:56.880 --> 00:19:02.560
What is nice about Cocoa is
with this one line change,

00:19:02.560 --> 00:19:06.070
I'm now able to say,
let's go to number 10 envelope,

00:19:06.160 --> 00:19:11.660
do a landscape,
and let's reduce it 50 cents,

00:19:11.660 --> 00:19:16.310
50%. Preview this, as you can see,
without any changes to the

00:19:16.780 --> 00:19:20.330
Safari code other than the one
line code to add to set what print

00:19:20.330 --> 00:19:24.120
options the user wants to see,
we now have

00:19:25.290 --> 00:19:31.980
We now have that, we now have,
it's showing 50% on a envelope.

00:19:37.410 --> 00:19:40.330
Now we are also working on
stuff that didn't quite make it

00:19:40.340 --> 00:19:42.420
into the seed that you do have.

00:19:42.420 --> 00:19:44.910
So if we switch back over to here.

00:19:47.870 --> 00:19:48.640
Here we go.

00:19:48.640 --> 00:19:51.390
Back there.

00:19:51.440 --> 00:19:54.860
Now this is an unmodified
version of TextEdit.

00:19:55.160 --> 00:19:57.130
I have made no changes
to TextEdit whatsoever.

00:19:57.140 --> 00:19:59.290
We have done some stuff on
the printing system though.

00:19:59.430 --> 00:20:02.070
This is like a 14 page document.

00:20:02.810 --> 00:20:05.800
It was quite long, total gibberish.

00:20:05.830 --> 00:20:08.390
Now let's go ahead and
bring up the Print Dialog.

00:20:09.220 --> 00:20:14.510
We are working on adding inline
preview to the Print Dialog without

00:20:14.740 --> 00:20:17.290
the app having to do anything.

00:20:18.600 --> 00:20:21.940
As you can see, it is a live preview.

00:20:22.200 --> 00:20:25.890
You can go forward and back, back,
forward.

00:20:26.380 --> 00:20:32.310
We don't have all the controls
enabled to basically zoom in,

00:20:32.310 --> 00:20:32.310
zoom out.

00:20:32.400 --> 00:20:37.170
and uh... basically as you change
stuff over here it would change

00:20:37.780 --> 00:20:40.780
the preview that you actually see.

00:20:40.890 --> 00:20:43.170
So this is still a work in progress.

00:20:43.360 --> 00:20:48.810
It didn't make it onto the Leopard
Sea but it is something that will be in

00:20:49.500 --> 00:20:52.880
FutureSeed and in the
GM version of Leopard.

00:20:52.880 --> 00:20:55.820
So if we go back over to slides.

00:21:02.410 --> 00:21:05.020
To go along with this
refined print dialog,

00:21:05.080 --> 00:21:08.760
we also have "refined"
the Page Setup dialog.

00:21:09.300 --> 00:21:12.140
It now contains only the options
that affect document format.

00:21:12.150 --> 00:21:13.780
Scaling is gone.

00:21:13.780 --> 00:21:16.890
Applications are now
added to the Print Dialog.

00:21:17.010 --> 00:21:20.020
If you think about scaling,
it wasn't so much page format.

00:21:20.020 --> 00:21:24.040
It is how the data got put onto the page.

00:21:24.060 --> 00:21:26.710
Reverse landscape has
been removed as well.

00:21:26.710 --> 00:21:32.700
We've added a reverse page
orientation to the layout panel.

00:21:33.140 --> 00:21:39.960
This way we can actually get that fourth
little button for reverse portrait

00:21:40.070 --> 00:21:41.560
that users have been asking for.

00:21:43.740 --> 00:21:47.200
And we were saying only document-based
applications should need a page setup.

00:21:47.200 --> 00:21:51.620
Non-document-based applications can put
it in their print dialog and just remove

00:21:51.620 --> 00:21:54.410
the whole page setup menu entirely.

00:21:55.430 --> 00:21:58.160
So summary, customizing the Print Dialog.

00:21:58.160 --> 00:22:00.540
Your application panel is
now the first panel shown.

00:22:00.580 --> 00:22:02.200
That's a major change.

00:22:02.240 --> 00:22:03.900
If your application
is not document based,

00:22:03.900 --> 00:22:06.640
you now have the option to remove
the page setup menu and add the

00:22:06.640 --> 00:22:08.800
controls to the Print Dialog.

00:22:08.830 --> 00:22:13.240
We now have a standard way for the
user to select print selection.

00:22:13.280 --> 00:22:16.850
And you as the application can specify
what is shown in the Print Dialog

00:22:16.850 --> 00:22:19.140
that makes sense for your application.

00:22:19.150 --> 00:22:21.590
And lastly,
the page setup contains only the

00:22:21.590 --> 00:22:23.870
options that affect document format.

00:22:24.960 --> 00:22:27.600
Let's move on to the
printing API in general.

00:22:27.700 --> 00:22:31.480
If you have a Cocoa app,
you should use the Cocoa printing APIs.

00:22:31.520 --> 00:22:34.880
It's a better fit for
the Cocoa applications.

00:22:35.210 --> 00:22:39.900
To use the Printing System APIs, yes,
Carbon applications have to do it,

00:22:39.900 --> 00:22:43.520
and currently your Cocoa app needs to
use it if they need more control over

00:22:43.520 --> 00:22:44.900
the print settings and such like that.

00:22:45.010 --> 00:22:49.100
But we are working very hard to bring
these two into parity by Leopard GM.

00:22:52.270 --> 00:22:57.120
So here's a very simple example
of how to use the Cocoa APIs.

00:22:57.200 --> 00:23:02.300
For most Cocoa APIs,
NSPrint operation is all that you need.

00:23:02.370 --> 00:23:05.660
Basically you create a print operation,
tell it the view that you want to print,

00:23:05.720 --> 00:23:08.340
and give it the print info,
and then you just run it

00:23:08.510 --> 00:23:12.060
modally for the window,
giving it your document window,

00:23:12.110 --> 00:23:16.710
and the selector is gonna be
called when the dialog goes away.

00:23:17.680 --> 00:23:21.080
Here it is, and here you can just add a
few lines of code to get the

00:23:21.150 --> 00:23:22.220
new Print Dialog features.

00:23:22.220 --> 00:23:25.650
Here I get the print panel out
of the print operation and just

00:23:25.650 --> 00:23:26.840
go ahead and set the options.

00:23:26.840 --> 00:23:29.790
I get the current options
and I say I want to add,

00:23:29.920 --> 00:23:33.810
I want to show paper size, orientation,
and scaling.

00:23:35.270 --> 00:23:39.040
NS Print Accessory Controller is a
new file that has been added to Cocoa.

00:23:39.100 --> 00:23:42.120
It's a simple way for the
Cocoa applications to add panels to

00:23:42.120 --> 00:23:44.200
the print and page setup dialogs.

00:23:44.270 --> 00:23:47.860
The NS Print Panel and NS Page Layout
Set Accessory View is now deprecated.

00:23:47.860 --> 00:23:50.590
This is the new way for
Cocoa applications to add

00:23:50.680 --> 00:23:52.110
panels to the print dialog.

00:23:52.270 --> 00:23:54.500
It allows for multiple
application panels,

00:23:54.500 --> 00:23:56.200
which you couldn't do before.

00:23:56.230 --> 00:23:58.110
It allows you to specify
the title for the panel,

00:23:58.340 --> 00:23:59.200
something you couldn't do before.

00:23:59.200 --> 00:24:03.020
And in the future,
Leopard Seed will allow you to provide

00:24:03.160 --> 00:24:05.790
summary information that will be shown.

00:24:05.810 --> 00:24:10.040
in the summary panel of the Print Dialog.

00:24:10.120 --> 00:24:14.240
This is kind of a word of wisdom for you.

00:24:14.240 --> 00:24:16.220
For panels that are added
to the Print Dialog,

00:24:16.400 --> 00:24:18.390
they should only be used
to provide print options,

00:24:18.410 --> 00:24:19.700
not formatting options.

00:24:22.010 --> 00:24:26.470
Here are the new NS Print Accessory
methods that have been added to the

00:24:26.470 --> 00:24:27.900
print panel and the layout panel.

00:24:28.140 --> 00:24:31.000
Basically you add a controller,
remove the controller,

00:24:31.020 --> 00:24:32.900
and get a list of the
current controllers.

00:24:33.130 --> 00:24:35.900
And here's a simple
example of how to use it.

00:24:35.900 --> 00:24:36.900
You allocate a
Print Accessory Controller,

00:24:36.900 --> 00:24:40.900
give it the name of where your

00:24:41.450 --> 00:24:44.480
Panel lives and give it a title.

00:24:44.490 --> 00:24:47.410
Then you add it to the accessory control,
you add it to the print panel

00:24:47.420 --> 00:24:49.880
with the add accessory controller
and then you release it,

00:24:49.920 --> 00:24:50.440
you're done with it.

00:24:50.620 --> 00:24:52.330
The system will take
care of displaying it.

00:24:52.330 --> 00:24:57.410
There again, look, there's a new file,
nsprintaccessorycontroller.h

00:24:57.410 --> 00:24:59.410
in the AppKit interfaces.

00:24:59.550 --> 00:25:02.460
So take a look at that for more
details and the AppKit release notes

00:25:02.470 --> 00:25:04.280
for more details on how to use this.

00:25:07.370 --> 00:25:11.150
Moving on to how Carbon Apps and
Print Driver developers can

00:25:11.150 --> 00:25:12.300
add stuff to the print panel.

00:25:12.300 --> 00:25:16.420
You've heard me talk before
about Cocoa-based print panels.

00:25:16.420 --> 00:25:21.110
We couldn't release them due to
some runtime issues we were trying

00:25:21.110 --> 00:25:25.560
to deal with and work through,
but now we are releasing them for Leopard

00:25:25.560 --> 00:25:28.280
and they will run on 10.4 or later.

00:25:28.300 --> 00:25:32.240
They're much slimmer to write,
no more boilerplate code,

00:25:32.880 --> 00:25:40.700
and it takes about 25% the amount of
code as the old carbon-based PDEs.

00:25:40.780 --> 00:25:47.700
Another thing that's very important
is these PDEs will run in 64-bit mode.

00:25:48.010 --> 00:25:50.870
The old Carbon are 32-bit only.

00:25:50.900 --> 00:25:53.180
It also gives you the
resolution independence,

00:25:53.180 --> 00:25:57.550
if you've gone to some of the
other talks that you'll need.

00:25:57.580 --> 00:26:00.080
Another thing is it allows
for PPD constraints handling.

00:26:00.080 --> 00:26:01.980
That is something that we
have added for Leopard.

00:26:02.490 --> 00:26:06.720
If you run these PDEs back in 10.4, no,
you won't get the constraints handling,

00:26:06.720 --> 00:26:08.180
but it is something we
have added for Leopard.

00:26:08.180 --> 00:26:13.740
And we have released a
Cocoa-based PDE sample code.

00:26:13.740 --> 00:26:15.130
It's the Output Bins PDE.

00:26:15.140 --> 00:26:17.080
If you look,
it's attached to this session.

00:26:17.080 --> 00:26:20.770
Just go up to the sample code,
and it is available for you to look at.

00:26:22.650 --> 00:26:24.980
Do a little bit about some
of the interface into the

00:26:24.980 --> 00:26:26.960
Cocoa-based Print Dialog Extension.

00:26:27.100 --> 00:26:30.570
It's all defined in
PDE plugin interface.h.

00:26:30.580 --> 00:26:34.100
First of all,
we have the PDE plugin protocol.

00:26:34.120 --> 00:26:36.470
Basically,
we're going to ask your plugin to give me

00:26:36.470 --> 00:26:40.410
all your panels for this particular type,
whether it be page setup or print.

00:26:40.660 --> 00:26:46.080
And the plugin would then return an
array of the PDE panel instances.

00:26:46.580 --> 00:26:48.370
We go to PD panels.

00:26:48.370 --> 00:26:49.560
We are going to ask you for your view.

00:26:49.560 --> 00:26:51.840
We're going to tell you when
we're going to show you.

00:26:51.840 --> 00:26:54.840
In other words,
the user has selected your panel.

00:26:54.840 --> 00:26:58.530
We will tell you that you should hide.

00:26:58.530 --> 00:27:02.440
This is your chance to validate
your user interface item and say,

00:27:02.490 --> 00:27:04.470
oh, something's out of range.

00:27:04.500 --> 00:27:08.450
Put up a dialog and return false and
then we won't switch and we won't

00:27:08.450 --> 00:27:10.760
let the user switch to the panel.

00:27:10.760 --> 00:27:13.940
Save values is basically when
we want you to write out your

00:27:14.000 --> 00:27:15.740
settings to the print info.

00:27:16.500 --> 00:27:19.330
And restore values is when we
want you to read the print info.

00:27:19.330 --> 00:27:20.920
Say the user selected a preset.

00:27:20.920 --> 00:27:24.600
We will then call your Print Dialog
Extension to say go back,

00:27:24.600 --> 00:27:27.240
go reread the values and update your UI.

00:27:27.240 --> 00:27:29.650
And the last one is PPD option
key value did change.

00:27:29.760 --> 00:27:32.370
It has to do with constraints
handling which I'm going to

00:27:32.370 --> 00:27:34.080
talk about in just a little bit.

00:27:36.400 --> 00:27:40.750
This will add to the PDE plugin callback
protocol and this is how the PDE can

00:27:40.750 --> 00:27:45.300
get information from the system and tell
the system it needs to do something.

00:27:45.300 --> 00:27:49.560
So you can get the print session,
the settings, the format, the printer,

00:27:49.560 --> 00:27:50.300
the PPD file.

00:27:50.300 --> 00:27:56.290
And PanelView did resize saying,
"I'm the PDE, I changed my size.

00:27:56.290 --> 00:28:00.820
I want the printing system to resize
the dialog around me." So that's

00:28:00.820 --> 00:28:04.120
a call you would make and we tell
us that you changed the size.

00:28:04.120 --> 00:28:08.300
We will reformat the dialog
so nothing gets hidden.

00:28:08.510 --> 00:28:10.990
Here again,
this is the last one is another

00:28:11.060 --> 00:28:15.300
PPD constraints call and we'll
talk about that in a little bit.

00:28:16.250 --> 00:28:19.980
Now how do we get these PDEs to
show up in the Print Dialog?

00:28:20.240 --> 00:28:23.440
For Carbon applications,
you just need to add the Print Dialog

00:28:23.520 --> 00:28:27.740
Extension's key to your InfoP list,
which can give it the

00:28:27.740 --> 00:28:31.970
PDEs that you want to show up,
and put the plug-in in your

00:28:31.970 --> 00:28:34.560
application's plug-in directory.

00:28:34.960 --> 00:28:37.530
For printer drivers,
you would just add this line

00:28:37.530 --> 00:28:41.210
sum of this to your actual PPD,
AP Dialog Extension,

00:28:41.210 --> 00:28:43.790
and then give us a path to your bundle.

00:28:45.150 --> 00:28:48.100
PPD Constrain Handling is
something new in Leopard.

00:28:48.150 --> 00:28:49.860
We've been talking about it for a while.

00:28:50.010 --> 00:28:52.250
So application developers,
you can cover your ears

00:28:52.250 --> 00:28:53.800
for the next couple,
three slides.

00:28:53.870 --> 00:28:56.610
I'm sure some of the
developers back at Apple,

00:28:56.740 --> 00:28:59.840
my coworkers would love to do,
but they can't.

00:29:00.190 --> 00:29:04.160
It allows the user to resolve
conflicts between PPD-based features.

00:29:04.280 --> 00:29:08.190
A simple example of this is,
say a printer can't

00:29:08.190 --> 00:29:09.990
do duplex on envelope.

00:29:10.230 --> 00:29:14.140
On previous systems,
we would just gray out

00:29:14.160 --> 00:29:16.260
the conflicting items.

00:29:16.330 --> 00:29:23.490
So say if they selected an envelope,
we would gray out the two-sided option.

00:29:23.600 --> 00:29:26.890
The user would have no idea
why two-sided was grayed out.

00:29:27.010 --> 00:29:28.300
They just know it was grayed out.

00:29:28.360 --> 00:29:32.400
The other problem is it could
be in a totally separate panel.

00:29:32.450 --> 00:29:37.550
The user has no clue
as to why something is

00:29:37.760 --> 00:29:42.500
So what we are doing in Leopard
is the system is going to do the

00:29:42.540 --> 00:29:48.720
constraint checking and then do the user
interaction to handle the conflicts.

00:29:48.820 --> 00:29:52.440
So in this example,
we have the user selected

00:29:53.210 --> 00:29:55.500
finishing options to staple.

00:29:55.500 --> 00:29:59.990
The problem is output
destination is set to left bin.

00:30:00.020 --> 00:30:01.080
You can't have both.

00:30:01.160 --> 00:30:04.830
So what we do as a printing system,
we notice that and we

00:30:04.830 --> 00:30:06.280
let the user choose.

00:30:07.930 --> 00:30:11.430
Do they want to set output
destination to stapler,

00:30:11.430 --> 00:30:14.610
which would allow them to set
the finishing options to staple,

00:30:14.660 --> 00:30:18.660
or they can cancel out and say,
leave it the way it is,

00:30:18.660 --> 00:30:19.560
I don't want to change it.

00:30:19.640 --> 00:30:23.080
So as a PDE,
when the user makes a selection,

00:30:23.140 --> 00:30:27.900
the PDE needs to make the callback,
we'll change PPD option key

00:30:28.150 --> 00:30:31.680
value pair with the requested
PPD option choice pair.

00:30:31.680 --> 00:30:35.330
In other words, this case it would be,
the PDE would say the user chose

00:30:35.330 --> 00:30:37.580
finishing options setting to staple.

00:30:39.190 --> 00:30:42.700
And then we would go through
all the PPD keywords,

00:30:42.700 --> 00:30:44.680
make sure there wasn't any conflicts.

00:30:44.720 --> 00:30:47.930
And if there was,
we would put up this dialogue to the user

00:30:48.440 --> 00:30:51.000
and the user would decide what to do.

00:30:51.350 --> 00:30:57.170
And we will return true to the
PDE if the user accepted the change

00:30:57.760 --> 00:31:02.660
and also if no conflicts existed,
we return true.

00:31:02.670 --> 00:31:06.460
Or true if there was a conflict and
the user said go ahead and change it.

00:31:06.470 --> 00:31:09.740
A false return value
means the user said no,

00:31:09.740 --> 00:31:11.060
I don't want to do anything.

00:31:11.170 --> 00:31:17.500
So that PDE would then have to restore
the old UI to the previous settings.

00:31:17.700 --> 00:31:19.070
Now what about the other person?

00:31:19.270 --> 00:31:23.770
The PDE, the option that the
user did want to change.

00:31:23.950 --> 00:31:28.090
So in this case,
output destination was set to stapler.

00:31:30.760 --> 00:31:34.860
So if the user does accept a change
of the resolution that we suggested,

00:31:34.860 --> 00:31:39.980
we're going to make the
method call PPD key value did

00:31:39.980 --> 00:31:41.760
change to the supporting PDE.

00:31:41.760 --> 00:31:44.700
In other words, the PDE that had,
what was it?

00:31:44.790 --> 00:31:46.720
The output destination.

00:31:46.720 --> 00:31:52.200
So we're going to call this method
with output destination set to stapler.

00:31:52.770 --> 00:31:57.300
That other PDE will have to go
through and update its settings to

00:31:57.400 --> 00:32:02.950
say that output is no longer left bin,
the output option is stapler.

00:32:05.930 --> 00:32:11.220
On the topic of print drivers,
there's been a little bit of confusion as

00:32:11.300 --> 00:32:13.320
to 64-bit and dealing with print drivers.

00:32:13.320 --> 00:32:15.890
There's several aspects of this.

00:32:16.070 --> 00:32:18.980
First one is the driver portions
that run in the application process.

00:32:18.980 --> 00:32:22.900
If the application process
is running at 64-bit,

00:32:22.900 --> 00:32:26.570
the PDEs need to have a 64-bit
slice in order to be loaded

00:32:26.710 --> 00:32:28.960
into that 64-bit application.

00:32:28.960 --> 00:32:32.670
The problem is the CF plug-in
carbon-based PDEs can

00:32:32.670 --> 00:32:35.950
only be built as 32-bit,
so they will not be loaded.

00:32:35.960 --> 00:32:40.910
This is due to many things,
some of them being the

00:32:40.970 --> 00:32:44.470
non-composited window,
quick draw drawing that the

00:32:44.590 --> 00:32:48.930
carbon-based PDEs are based on,
and many other issues.

00:32:49.540 --> 00:32:51.300
Our solution is the CocoaBase PDEs.

00:32:51.420 --> 00:32:55.730
They can be built and run
in a 64-bit application.

00:32:56.850 --> 00:32:58.680
Cups, Filters, and Backends.

00:32:58.680 --> 00:33:02.870
Unless there's a compelling need,
there's no need to be

00:33:03.000 --> 00:33:19.800
[Transcript missing]

00:33:19.980 --> 00:33:21.380
And the same thing with
Tyga printer drivers.

00:33:21.520 --> 00:33:24.060
They are 32-bit only,
but they're in their own

00:33:24.150 --> 00:33:26.070
process and they can still run.

00:33:26.080 --> 00:33:28.040
They may be depth-created,
but they will still run.

00:33:31.370 --> 00:33:34.250
Now, let's change gears again.

00:33:34.600 --> 00:33:36.930
Let's talk about printer setup utility.

00:33:38.820 --> 00:33:41.000
Currently we have three ways
to get the printer browser.

00:33:41.170 --> 00:33:46.900
We have through the Print Dialog,
through the Print and Fax Pref pane,

00:33:47.160 --> 00:33:49.380
and through Print Center.

00:33:49.900 --> 00:33:51.710
We have two ways to
show a desktop printer.

00:33:52.050 --> 00:33:55.200
Base again,
we have the Print and Fax Prep pane

00:33:55.200 --> 00:33:57.790
and the Printer Setup Utility.

00:33:58.010 --> 00:33:58.860
And then there's this.

00:33:59.020 --> 00:34:02.670
It's a quite convoluted way for the user
to interact with the printing system.

00:34:02.680 --> 00:34:07.880
There are too many ways for the user
to interact with the printing system.

00:34:07.880 --> 00:34:09.940
A lot of users are being confused.

00:34:09.940 --> 00:34:14.950
Okay, I don't know where to go to get to,
let's say, a desktop printer or

00:34:15.040 --> 00:34:16.150
how to change something.

00:34:16.160 --> 00:34:17.660
Do I go to the FaxPref?

00:34:17.660 --> 00:34:19.120
Do I go to PrinterSight Utility?

00:34:19.120 --> 00:34:19.820
What do I do?

00:34:19.820 --> 00:34:21.770
We've solved that.

00:34:21.860 --> 00:34:26.340
PrinterSight Utility is
going away in Leopard.

00:34:29.580 --> 00:34:32.030
It is no longer part of Leopard
and the functionality has been

00:34:32.210 --> 00:34:36.730
split between the Print & Fax Pref
pane and the desktop printers.

00:34:37.430 --> 00:34:39.660
This is the current
PrintFX Printing Leopard.

00:34:39.780 --> 00:34:41.840
It is currently a work in progress.

00:34:42.000 --> 00:34:44.210
We expect many changes
for this to happen,

00:34:44.300 --> 00:34:46.590
printing it up and such forth.

00:34:46.720 --> 00:34:49.840
For now, we've added the action menu
to do some of the old printer

00:34:49.840 --> 00:34:54.480
sub-utility tasks such as ink levels,
create a printer pool,

00:34:54.670 --> 00:34:58.540
open the printer utility,
or to reset printing system.

00:35:00.480 --> 00:35:02.920
Then we are using the printer
setup button to get and change

00:35:02.920 --> 00:35:04.230
information about the printer.

00:35:04.430 --> 00:35:08.840
Click this button, you'll get a sheet,
no more get info panel

00:35:08.840 --> 00:35:10.840
with a little apply button.

00:35:10.960 --> 00:35:13.430
We will,
and if you click on the general pane,

00:35:13.430 --> 00:35:16.560
it allows for the renaming and
setting of the location and provides

00:35:16.660 --> 00:35:18.460
information about the print queue.

00:35:18.620 --> 00:35:22.570
Click on the driver panel,
you'll be able to change the

00:35:22.570 --> 00:35:25.580
PPD associated with the printer
and change the installable

00:35:25.580 --> 00:35:27.210
options for that printer.

00:35:29.150 --> 00:35:30.780
We've also revamped the desktop printer.

00:35:30.820 --> 00:35:33.860
A little bit of UI change,
but a lot more underneath.

00:35:33.890 --> 00:35:36.540
One of the things we've changed is you
can always see the printer status no

00:35:36.540 --> 00:35:40.010
matter which view you're looking at,
whether it be your current

00:35:40.020 --> 00:35:41.800
jobs or your history.

00:35:41.830 --> 00:35:44.100
We also are displaying
multiple error messages.

00:35:44.170 --> 00:35:47.800
This is where the major change in
the desktop printer has happened.

00:35:47.850 --> 00:35:52.340
We have totally revamped the status
handling of the desktop printers.

00:35:52.430 --> 00:35:56.000
So we're now able to show multiple
error messages at the same time.

00:35:56.120 --> 00:35:59.890
So you will know that you're low on
yellow ink and you're out of paper,

00:35:59.890 --> 00:36:02.200
not just that you're low on yellow ink.

00:36:02.250 --> 00:36:04.670
And another thing we've added,
there's no more three button alert

00:36:04.770 --> 00:36:07.720
that does not have the button you want.

00:36:12.670 --> 00:36:15.800
We've added a new printer browser,
another release of Operating Systems,

00:36:15.800 --> 00:36:17.600
we have a new printer browser.

00:36:17.600 --> 00:36:21.100
We actually call it the
Uber browser internally.

00:36:21.100 --> 00:36:23.100
It displays multiple types of printers.

00:36:23.100 --> 00:36:26.150
We display USB printers, Bonjour,
Share printers,

00:36:26.190 --> 00:36:29.850
AppleTalk printers in your default zone,
Open Directory printers,

00:36:29.850 --> 00:36:33.390
Bluetooth printers,
and SMP lookup printers via CUPS.

00:36:33.760 --> 00:36:38.380
As you can imagine back at Apple on
the printing local network,

00:36:38.380 --> 00:36:41.080
we have quite a few printers
that show up on our network.

00:36:41.150 --> 00:36:44.880
So we are now allowing filtering
based on multiple columns.

00:36:44.940 --> 00:36:49.160
And here I am just showing of the
hundreds of printers that are on our net,

00:36:49.180 --> 00:36:52.120
I just want to look at
all Bonjour HP printers.

00:36:52.120 --> 00:36:57.340
Then we'll filter that list to show only
the printers that you're interested in.

00:36:57.340 --> 00:36:59.640
And the same thing when
you're looking for a PPD.

00:37:00.440 --> 00:37:05.480
Now I'm looking for the HP 9500,
I just type HP 9500 and it will only

00:37:05.480 --> 00:37:10.690
show those PPDs that match those words.

00:37:12.130 --> 00:37:15.760
Talk a little bit about
deprecated printing APIs.

00:37:15.780 --> 00:37:19.460
The current printing APIs that
are deprecated will not be

00:37:19.460 --> 00:37:21.040
available to 64-bit applications.

00:37:21.040 --> 00:37:23.040
They're not in the binary.

00:37:23.200 --> 00:37:27.030
We've deprecated quite a few

00:37:27.380 --> 00:37:29.320
methods and functions over the years.

00:37:29.470 --> 00:37:35.390
And our header files have been getting
harder and harder to read to determine

00:37:35.560 --> 00:37:37.820
what is deprecated and what is not.

00:37:37.900 --> 00:37:41.790
So one of the engineers at Apple took
great pains and a lot of work-- thank

00:37:41.790 --> 00:37:47.170
you-- to basically split out all of our
deprecated functions into separate files.

00:37:47.330 --> 00:37:51.190
Now we have PM definitions,
and we've added PM definitions

00:37:51.300 --> 00:37:55.920
deprecated.h that will include all
the methods that have been deprecated.

00:37:56.140 --> 00:38:01.960
Same thing for PM core, PM application,
PM printing dialog extensions,

00:38:01.960 --> 00:38:03.540
and such-fors.

00:38:03.560 --> 00:38:11.970
Only valid functions and constants
are now in the main header files.

00:38:12.930 --> 00:38:15.360
Let's talk a little bit about the
APIs that have been decorated.

00:38:15.360 --> 00:38:19.950
We've been telling you for quite
a number of years these printing

00:38:19.950 --> 00:38:21.580
APIs are going away and guess what?

00:38:21.690 --> 00:38:23.790
They're gone,
especially for 64-bit applications.

00:38:23.800 --> 00:38:25.570
Quick Draw is gone.

00:38:25.980 --> 00:38:28.650
Functions that deal with
PIC with PostScript are gone.

00:38:28.760 --> 00:38:30.710
Functions that deal with
the current session,

00:38:30.820 --> 00:38:33.700
the old non-session APIs are gone.

00:38:34.030 --> 00:38:37.300
Functions that deal with
current printer are gone.

00:38:38.500 --> 00:38:39.920
Another thing, these are really old.

00:38:40.100 --> 00:38:42.150
Functions that deal with handles,
functions that deal with

00:38:42.150 --> 00:38:45.460
the Mac OS 9 print records,
and the old append-dental

00:38:45.460 --> 00:38:48.510
method of adding items to
the print dialogs are gone.

00:38:50.070 --> 00:38:53.280
The last item on deprecated APIs.

00:38:53.320 --> 00:38:57.990
The Carbon, as I mentioned before,
the Carbon PDE API is 32-bit only.

00:38:58.430 --> 00:39:00.430
Use the CocoaBase PDs instead.

00:39:00.560 --> 00:39:06.420
The PPD is 32-bit only as well,
as well as Tiger printer drivers.

00:39:08.170 --> 00:39:10.590
And I know Rich talked
about this last year,

00:39:10.600 --> 00:39:13.380
I'm going to talk about it again.

00:39:13.380 --> 00:39:16.420
Another call for WYSIWYG.

00:39:16.420 --> 00:39:19.930
Where possible, use your document window
to show your print view.

00:39:19.980 --> 00:39:22.340
Don't do it in the print dialog.

00:39:22.420 --> 00:39:27.460
Let the user reformat the page and edit
the data while they're in the print view.

00:39:27.460 --> 00:39:31.140
If it's a good print view,
if it's a good print format,

00:39:31.200 --> 00:39:34.460
it's likely to be a good
presentation format.

00:39:34.800 --> 00:39:38.690
We are working very hard on making this
much easier for Cocoa applications.

00:39:38.690 --> 00:39:42.370
It's not in the seed yet,
but we are working on,

00:39:42.370 --> 00:39:44.790
for Cocoa applications,
providing a print view,

00:39:44.790 --> 00:39:49.380
providing controls that will allow
the application developer to change

00:39:49.380 --> 00:39:53.320
aspects dealing with the print view.

00:39:54.450 --> 00:39:58.720
This is an example of a good example,
the iPhoto card calendar and book view.

00:39:58.720 --> 00:40:03.430
This is what's going to be printed,
but yet it allows you to edit

00:40:03.910 --> 00:40:04.800
while you're in this view.

00:40:04.800 --> 00:40:08.850
Here you can change the picture,
change the size, move it around,

00:40:08.850 --> 00:40:09.680
edit the text.

00:40:09.920 --> 00:40:15.800
You can do everything you want to that
would affect how this card is printed.

00:40:17.410 --> 00:40:20.130
Other good examples are
FileMaker PrintView,

00:40:20.130 --> 00:40:23.990
Pages, TextEdit with Raptor Page,
the Chronos, Soho, Labels and Envelopes,

00:40:24.170 --> 00:40:25.020
and Adobe Lightroom.

00:40:25.040 --> 00:40:30.070
These are all great examples that
allow you to edit while you're seeing

00:40:30.190 --> 00:40:32.650
what's going to actually print.

00:40:32.990 --> 00:40:36.320
And as Paul mentioned, not Paul,
Rich mentioned last year,

00:40:36.320 --> 00:40:39.870
bad examples are sadly still too many and

00:40:40.220 --> 00:40:45.480
and too embarrassing to enumerate all the
things that we would like to see changed.

00:40:45.480 --> 00:40:48.720
We ask that you avoid a separate dialogue
before putting up the print dialogue.

00:40:48.720 --> 00:40:51.600
Realize we are on the way
for some of the applications.

00:40:51.600 --> 00:40:55.610
We are working to remove those obstacles,
but please if you can't,

00:40:55.680 --> 00:40:58.390
avoid a separate dialogue before
bringing up the print dialogue.

00:40:58.420 --> 00:41:01.250
Another thing is you may be heading
in the wrong direction if you're

00:41:01.350 --> 00:41:05.690
adding formatting options that cannot
be previewed by your application.

00:41:07.580 --> 00:41:10.820
So in summary,
the application now determines

00:41:10.820 --> 00:41:14.530
what options are available to
the user in the Print Dialog.

00:41:14.890 --> 00:41:19.910
Page Setup should only
be for Document Format.

00:41:20.650 --> 00:41:22.450
If you're a non-document
based application,

00:41:22.450 --> 00:41:25.730
it might make sense for you to
add the Page Active Use options

00:41:25.730 --> 00:41:27.310
to the Print Dialog.

00:41:27.910 --> 00:41:30.900
We're asking Cocoa applications
to switch using the new

00:41:30.900 --> 00:41:32.800
NS Print Accessory Controllers.

00:41:32.880 --> 00:41:35.680
And Carbon applications and
print driver developers should

00:41:35.800 --> 00:41:38.020
switch to using COCO-based PDEs.