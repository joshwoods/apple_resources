WEBVTT

00:00:10.410 --> 00:00:14.800
We're going to give you guys a little bit
of detail about Apple Remote Desktop and

00:00:14.800 --> 00:00:16.300
I'm going to just do a brief intro.

00:00:16.300 --> 00:00:21.790
I'm the manager of the management and
collaboration group which includes ARD.

00:00:21.800 --> 00:00:31.030
And in case you don't already know,
ARD 3 is out.

00:00:33.090 --> 00:00:36.020
We've been working on this for a long
time and it's great to have it out there,

00:00:36.020 --> 00:00:39.160
but it also, it being out there,
gives us an opportunity at WWDC to

00:00:39.160 --> 00:00:42.860
kind of take a little different angle
on it in terms of a presentation.

00:00:42.860 --> 00:00:47.550
So, just a little bit of a rah-rah,
a little bit of cheerleading about ARD,

00:00:47.550 --> 00:00:51.940
some quotes about how it's being
received out there in the market.

00:00:51.940 --> 00:00:55.620
This is a gentleman who's really,
really happy that we spent a lot

00:00:55.630 --> 00:00:57.700
of time improving the file copy.

00:00:58.220 --> 00:01:00.180
It's a simple little,
it's a simple little,

00:01:00.200 --> 00:01:03.110
it's not a simple little task,
but it's something that people do a lot,

00:01:03.130 --> 00:01:04.360
copying bits from A to B.

00:01:04.360 --> 00:01:07.490
We spent a lot of time on that
and this guy seems to like it.

00:01:07.500 --> 00:01:12.620
Then we've got a very different customer,
Pulitzer Prize winning photographer,

00:01:12.620 --> 00:01:14.720
Vincent something last name.

00:01:14.720 --> 00:01:19.300
And again, he's sitting here using the
remote access functionality.

00:01:19.300 --> 00:01:22.670
And what I like about these two
quotes is that it shows something

00:01:22.670 --> 00:01:26.120
about ARD that we really serve
a lot of different customers.

00:01:26.120 --> 00:01:28.200
Obviously an IT product,
but a lot of different customers.

00:01:28.220 --> 00:01:31.810
different people get a lot of
different value out of the product.

00:01:31.910 --> 00:01:34.820
So, I'm going to give you guys a little
brief history of the product.

00:01:34.820 --> 00:01:37.240
And then we're going to get
into the real meat of the

00:01:37.250 --> 00:01:40.260
presentation with Mark Whitemore,
the ARD engineering manager.

00:01:40.260 --> 00:01:43.460
This is going to be different because
what we're going to do is we're going to

00:01:43.460 --> 00:01:47.000
get really under the hood of the product
and show you how it all fits together.

00:01:47.000 --> 00:01:50.890
ARD 3 introduces the task server
concept and that makes yet

00:01:50.890 --> 00:01:55.410
another process that's running as
part of the whole ARD ecosystem.

00:01:55.420 --> 00:01:59.380
And we wanted to give you really good
details about how that all works.

00:02:00.020 --> 00:02:02.810
The other thing is, is we get a lot of,

00:02:03.390 --> 00:02:08.580
Creative feedback about how
ARD is being used out there.

00:02:08.580 --> 00:02:11.240
And I think we got a lot of
good advice and ideas about

00:02:11.240 --> 00:02:13.290
how you can use it even better.

00:02:13.310 --> 00:02:16.300
And we've got demos all over the place.

00:02:16.300 --> 00:02:17.810
So we're going to show
you how we're using it,

00:02:17.920 --> 00:02:23.580
some fun ones and some great examples
of how you can use ARD right.

00:02:23.800 --> 00:02:26.520
So I'm not going to go into all the
features that we've been doing since

00:02:26.550 --> 00:02:30.400
I got here about four years ago,
but obviously we've done a lot of

00:02:30.400 --> 00:02:32.480
releases of ARD over the past four years.

00:02:32.480 --> 00:02:35.650
What I want you to look
at is sort of that curve,

00:02:35.670 --> 00:02:37.940
the innovation curve there.

00:02:37.940 --> 00:02:40.740
We started with the first release
just getting it running under

00:02:40.740 --> 00:02:43.840
Mac OS X a bunch of years ago,
and then we started adding more features,

00:02:43.840 --> 00:02:45.540
and we started adding more features.

00:02:45.540 --> 00:02:47.940
And then with ARD 3,
Apple Remote Desktop 3,

00:02:47.950 --> 00:02:51.450
we added a bunch more features,
the task server, remote drag and drop,

00:02:51.450 --> 00:02:52.820
automator support.

00:02:54.000 --> 00:02:55.880
Obviously,
we're done with the current release,

00:02:55.880 --> 00:02:58.920
but as we get to Q&A here at the end,
I'm really interested

00:02:58.920 --> 00:03:00.520
to hear your feedback,
how you like it,

00:03:00.520 --> 00:03:02.470
what you'd like to see in
future releases as well,

00:03:02.470 --> 00:03:04.770
because we're going to keep
on pushing this product.

00:03:04.780 --> 00:03:07.510
We're going to keep on adding
more great features to it.

00:03:09.470 --> 00:03:13.060
When you think about the product,
I'm fond of calling

00:03:13.060 --> 00:03:14.900
ARD a Swiss Army knife.

00:03:14.990 --> 00:03:18.370
When you compare us to the
different products out there in

00:03:18.380 --> 00:03:22.350
terms of these five or six buckets,
you are often comparing to

00:03:22.350 --> 00:03:24.240
individual products out there.

00:03:24.340 --> 00:03:27.340
ARD is an all-in-one solution.

00:03:27.420 --> 00:03:30.950
It's a software distribution
solution via the install package,

00:03:30.980 --> 00:03:32.150
the copy items tasks.

00:03:32.160 --> 00:03:35.460
It's the asset management
via the dizzying array of

00:03:35.460 --> 00:03:38.100
different reporting tools,
reports that we have in there.

00:03:38.100 --> 00:03:41.220
It's the remote administration,
the remote assistance,

00:03:41.220 --> 00:03:46.280
the feature that everyone can see
where we allow admins and IT types,

00:03:46.280 --> 00:03:50.370
labs, lab IT types,
teachers to help via remotely

00:03:50.380 --> 00:03:53.300
observing and controlling machines.

00:03:54.200 --> 00:03:55.140
It's automation.

00:03:55.140 --> 00:03:58.690
With the automated support that
you have in Apple Remote Desktop 3,

00:03:58.770 --> 00:04:01.740
we've given you a tool
to build more tools.

00:04:01.740 --> 00:04:03.710
And that's one of the things
I like about the product.

00:04:03.740 --> 00:04:08.110
Tools like Send Unix that really allow
you to extend the functionality to

00:04:08.110 --> 00:04:10.240
adapt it to how you want to use it.

00:04:10.300 --> 00:04:11.500
And again, the setup.

00:04:11.510 --> 00:04:15.100
How you actually go and use the product,
configure the product to get it

00:04:15.100 --> 00:04:16.900
working in large deployments.

00:04:18.900 --> 00:04:23.640
I'd encourage you if you have more
questions to go to the site and also

00:04:23.640 --> 00:04:25.160
give us great feedback at the end.

00:04:25.160 --> 00:04:27.800
But with that,
I'd like to bring Mark Whitemore

00:04:27.800 --> 00:04:31.680
up who's going to give us some
of the in-depth inside what's

00:04:31.680 --> 00:04:34.230
going on inside of ARD slides.

00:04:34.280 --> 00:04:34.830
Mark?

00:04:34.840 --> 00:04:36.110
Mark?

00:04:40.680 --> 00:04:41.100
Thank you, Michael.

00:04:41.100 --> 00:04:44.740
Good morning.

00:04:44.740 --> 00:04:45.620
Thanks for coming.

00:04:45.620 --> 00:04:47.580
Let's get started.

00:04:47.580 --> 00:04:49.760
Let's get under the hood of
Apple Remote Desktop here.

00:04:49.760 --> 00:04:55.260
So I'm going to talk about the
processes that make up Remote Desktop,

00:04:55.260 --> 00:04:57.720
talk about what each
of these processes do.

00:04:57.720 --> 00:04:59.700
We're going to take a
look at the preferences.

00:04:59.700 --> 00:05:03.430
This is going to be interesting for
those of you who are creating system

00:05:03.430 --> 00:05:06.890
images and deploying them because you
might be wanting to tweak some stuff

00:05:06.890 --> 00:05:08.320
after you get your image deployed.

00:05:08.320 --> 00:05:11.680
I'm going to talk about how
these processes communicate with

00:05:11.680 --> 00:05:17.680
one another so you know what
UDP TCP ports you need to be aware of.

00:05:17.780 --> 00:05:20.240
We're going to talk a little bit
about network design because some

00:05:20.240 --> 00:05:22.880
people have issues with how their
network is configured and how

00:05:23.130 --> 00:05:25.510
Remote Desktop behaves on their network.

00:05:25.520 --> 00:05:28.150
And so we're going to take a look
at that and try to hopefully give

00:05:28.150 --> 00:05:31.040
you guys some ideas of how you
can resolve any issues you have.

00:05:31.040 --> 00:05:34.350
And then lastly,
we'll do a little demo with scanners,

00:05:34.360 --> 00:05:38.040
task server, and reporting so that
when you guys use it,

00:05:38.060 --> 00:05:40.640
you can build it more successful
in actually using those features.

00:05:43.080 --> 00:05:46.210
First, let's talk a little bit about
Apple Remote Desktop technology so that

00:05:46.210 --> 00:05:50.240
for those of you who are maybe not as
familiar with others for the program,

00:05:50.300 --> 00:05:53.820
we'll all be on the same page as
far as what I'm talking about here.

00:05:53.820 --> 00:05:55.970
So clients,
these are the machines that you're

00:05:56.000 --> 00:05:59.640
actually managing with Remote Desktop and
they're the ones you've got deployed

00:05:59.640 --> 00:06:01.300
throughout your organization.

00:06:01.350 --> 00:06:05.270
The administrator console is the
program that you have RemoteDesktop.app

00:06:05.270 --> 00:06:09.280
running on and the machine from which
you're controlling all these machines.

00:06:09.280 --> 00:06:13.180
And their task server is a lot like
an administrator but it doesn't

00:06:13.180 --> 00:06:15.580
run the Remote Desktop.app program.

00:06:15.840 --> 00:06:20.190
On the task server,
it requires a license just like the

00:06:20.190 --> 00:06:24.850
administrator but this is the machine
to which you can delegate tasks that

00:06:24.850 --> 00:06:27.800
you've set up on your administrator
console like install package.

00:06:27.830 --> 00:06:30.920
So your administrator console can,
you can do something else

00:06:31.160 --> 00:06:34.290
instead of hanging around waiting
for your task to complete.

00:06:35.660 --> 00:06:37.120
So this is how they all tie together.

00:06:37.120 --> 00:06:38.700
Basically,
everything kind of communicates

00:06:38.780 --> 00:06:39.470
with everything else.

00:06:39.540 --> 00:06:41.360
You've got your administrator
talks to your task server,

00:06:41.360 --> 00:06:44.080
your task server talks to your client,
and your administrator

00:06:44.120 --> 00:06:45.230
talks to your client.

00:06:45.260 --> 00:06:48.600
We're going to get into more detail
though about exactly what communication

00:06:48.600 --> 00:06:50.950
is going on here in just a moment.

00:06:51.380 --> 00:06:54.530
So, let's talk about processes.

00:06:54.600 --> 00:06:57.050
What are the processes that are
running on each type of computer

00:06:57.090 --> 00:06:58.600
and what are these processes doing?

00:06:58.600 --> 00:07:01.250
Because what you're going to see
is that some of the process runs

00:07:01.250 --> 00:07:04.460
on each different type of computer,
the administrator, the clients,

00:07:04.460 --> 00:07:06.930
the task server,
but they serve very different

00:07:06.930 --> 00:07:09.410
roles on each of these machines.

00:07:09.910 --> 00:07:11.560
So on the client, we have ARD Helper.

00:07:11.560 --> 00:07:13.040
This is what kind of
kicks the whole thing off.

00:07:13.100 --> 00:07:17.580
In system preferences and sharing,
when you turn on Remote Desktop,

00:07:17.580 --> 00:07:20.170
you're actually enabling
the helper to start up.

00:07:20.250 --> 00:07:22.460
And when the helper starts up,
when the machine starts up,

00:07:22.460 --> 00:07:23.730
that kicks off the ARD agent.

00:07:23.740 --> 00:07:26.960
The ARD agent on the client
machine is responsible for

00:07:26.960 --> 00:07:29.060
actually performing the task.

00:07:29.070 --> 00:07:31.400
It's the workhorse for Remote Desktop.

00:07:31.400 --> 00:07:33.160
You do a send Unix command to a client.

00:07:33.220 --> 00:07:35.910
This is the process that's
actually running and executing

00:07:35.910 --> 00:07:39.260
it and sending the response back
to an agent on the administrator.

00:07:39.260 --> 00:07:39.880
We'll get to that in a second.

00:07:40.900 --> 00:07:42.230
Apple VNC Server on a client.

00:07:42.230 --> 00:07:45.560
This is a separate process that
when you do a control screen,

00:07:45.600 --> 00:07:49.360
is grabbing the screen contents
and sending it back to the admin.

00:07:49.360 --> 00:07:52.260
And this gets launched
by ARD agent startup.

00:07:54.370 --> 00:07:56.880
On the administrator console, of course,
the app that you are all familiar

00:07:56.880 --> 00:07:58.700
with is Apple Remote Desktop.app.

00:07:58.710 --> 00:08:00.620
This is the main GUI console.

00:08:00.620 --> 00:08:05.280
On the administrator side,
if you don't have access turned on,

00:08:05.280 --> 00:08:08.200
what gets the agent launched
is Remote Desktop itself.

00:08:08.200 --> 00:08:10.810
So when you launch that,
the agent isn't already running.

00:08:10.830 --> 00:08:13.580
If you don't have access turned on,
it kicks up the agent.

00:08:13.580 --> 00:08:16.420
Now, on the administrator console,
the agent has a slightly different

00:08:16.420 --> 00:08:18.060
role than it does on a client machine.

00:08:18.060 --> 00:08:20.170
It still does all the same
things it does on the client,

00:08:20.170 --> 00:08:21.850
but in addition to that,
it acts as a conduit

00:08:21.850 --> 00:08:23.150
for Remote Desktop.app.

00:08:23.280 --> 00:08:26.260
So when I do that send unix command,
it isn't the admin app that's

00:08:26.330 --> 00:08:28.300
directly communicating over
the network to the client.

00:08:28.300 --> 00:08:31.430
It's actually going through the agent,
and the agent is communicating

00:08:31.860 --> 00:08:34.480
to a similar agent on a
client machine and saying,

00:08:34.480 --> 00:08:36.810
here's the send unix command,
please perform this,

00:08:36.810 --> 00:08:38.440
and then it sends the status back.

00:08:38.460 --> 00:08:41.090
Now,
the Apple VNC server on the admin machine

00:08:41.090 --> 00:08:43.410
also has a slightly different role.

00:08:43.760 --> 00:08:46.230
Whereas on a client,
it's grabbing the screen changes

00:08:46.230 --> 00:08:48.180
and sending them back to the admin.

00:08:48.180 --> 00:08:52.180
When you do a share screen on the admin,
the VNC server there takes the admin,

00:08:52.860 --> 00:08:56.750
the screen contents,
and sends them out to all the clients.

00:08:59.820 --> 00:09:02.490
On the task server,
so on the task server ARD Agent does

00:09:02.490 --> 00:09:05.770
the same thing that it does on a client,
but in addition to that,

00:09:05.770 --> 00:09:08.220
it handles all the responsibilities
of the task server.

00:09:08.220 --> 00:09:10.460
It handles the delegated
tasks like install package.

00:09:10.460 --> 00:09:15.660
It stores all the files that are
part of the install package task.

00:09:15.800 --> 00:09:20.110
It communicates with all the clients
and distributes the files out.

00:09:20.120 --> 00:09:23.420
It accumulates the results and
sends them back to the administrator

00:09:23.420 --> 00:09:25.340
when the administrator is online.

00:09:26.340 --> 00:09:31.990
RMDB, that is our database in which we
store all the system information,

00:09:31.990 --> 00:09:34.540
application usage,
and user reporting information.

00:09:34.540 --> 00:09:35.530
It's a SQL database.

00:09:35.530 --> 00:09:36.840
It's PostgreSQL.

00:09:37.050 --> 00:09:40.760
You can set it up to communicate with
it across the network if you want to.

00:09:40.760 --> 00:09:43.620
And the ARD helper and VNC server
on the task server work the

00:09:43.700 --> 00:09:45.370
same way they do on the client.

00:09:47.670 --> 00:09:49.340
Okay, preferences.

00:09:49.370 --> 00:09:52.160
What are the important preference
files and what are these files contain?

00:09:52.160 --> 00:09:54.960
There's tons of preference
files in Remote Desktop.

00:09:55.010 --> 00:09:58.230
In fact,
I often forget how many there are and

00:09:58.230 --> 00:10:00.600
I have to dig around and rediscover them.

00:10:00.600 --> 00:10:03.380
But I'll go through what some of
the important ones are and why

00:10:03.380 --> 00:10:06.590
it is you might be interested in
knowing a little bit about them.

00:10:08.100 --> 00:10:12.280
Okay, first one is the preference file
for Remote Desktop.app itself.

00:10:12.350 --> 00:10:15.630
This lives in your own library
preferences directory inside

00:10:15.640 --> 00:10:17.430
whatever account it is you're
running Remote Desktop.

00:10:17.500 --> 00:10:20.740
And the reason you might want to
know about this is because some of

00:10:20.740 --> 00:10:25.050
these things are things that you,
if you want to transfer your preferences

00:10:25.050 --> 00:10:29.130
to another admin on another machine,
if you've gone to the trouble of setting

00:10:29.130 --> 00:10:32.230
up lots of computers and lists and
scanners and save tasks and you don't

00:10:32.400 --> 00:10:35.080
want to have to duplicate that work,
you can take a look at

00:10:35.190 --> 00:10:37.340
this preference file,
copy out the values assigned

00:10:37.340 --> 00:10:39.980
to some of these keys and move
them over to the other machine.

00:10:39.980 --> 00:10:42.240
Now, in the case of computers,
your passwords are

00:10:42.240 --> 00:10:43.480
stored in the key chain.

00:10:43.480 --> 00:10:46.580
They're not going to follow with
you when you bring that stuff over,

00:10:46.580 --> 00:10:47.830
so you're going to have
to re-authenticate,

00:10:47.950 --> 00:10:52.460
but that you can do a multi-get info
and type in the password as long as

00:10:52.490 --> 00:10:55.930
you don't have a different username
and password for each machine.

00:10:56.550 --> 00:11:00.460
Now, the main preference file for
the agent is ardagent.plist.

00:11:00.460 --> 00:11:01.760
This is a global one.

00:11:01.760 --> 00:11:03.280
It lives in slash library preferences.

00:11:03.280 --> 00:11:06.740
Now, these particular preferences that
I have up here are the ones that

00:11:06.740 --> 00:11:10.330
are specific to the agent when it is
running in the role of the client.

00:11:10.350 --> 00:11:12.320
Because remember I said
it runs on the admin,

00:11:12.320 --> 00:11:14.560
it runs on the task server,
it runs on the client.

00:11:14.570 --> 00:11:16.350
In each case, it has a different role.

00:11:16.350 --> 00:11:19.200
In this case, these preferences are
for the client side.

00:11:19.200 --> 00:11:21.890
There are other preferences
that the agent uses that

00:11:21.890 --> 00:11:23.540
are located in other places.

00:11:23.540 --> 00:11:25.200
Like, for instance,
when it's acting as a task server,

00:11:25.200 --> 00:11:26.380
there's some root readers that
are located in the client side.

00:11:26.400 --> 00:11:29.060
But it only preferences
in another location.

00:11:29.060 --> 00:11:31.270
Now, the one that is probably of,
might be of greatest

00:11:31.270 --> 00:11:33.340
interest to most of you,
well, actually, there's a couple that are

00:11:33.340 --> 00:11:34.200
pretty interesting here.

00:11:34.200 --> 00:11:35.710
But one is ardagent log level.

00:11:35.710 --> 00:11:38.440
And if you are trying to debug
an issue with Remote Desktop,

00:11:38.440 --> 00:11:41.050
if things are just not behaving
right and you'd want to get

00:11:41.050 --> 00:11:43.980
a little more information,
you can set this log level higher.

00:11:43.980 --> 00:11:45.440
Right now, it's set to three.

00:11:45.440 --> 00:11:48.190
You can set it all the way up to seven,
get maximum logging.

00:11:48.190 --> 00:11:50.620
You restart the agent and
you look in system.log and

00:11:50.620 --> 00:11:52.330
you'll see all kinds of stuff.

00:11:52.330 --> 00:11:56.380
And the cache policies,
when you set up a reporting policy,

00:11:56.390 --> 00:12:01.980
on a client using the admin,
an array of those policies is

00:12:01.980 --> 00:12:03.460
located inside of this file.

00:12:03.460 --> 00:12:06.140
So you can go and double check
that everything looks good

00:12:06.140 --> 00:12:07.040
on that side if you want to.

00:12:07.040 --> 00:12:10.260
And it's also useful for debugging
in a situation I'm going to

00:12:10.260 --> 00:12:12.490
talk about a little bit later.

00:12:13.610 --> 00:12:14.820
Okay, hidden prefs.

00:12:14.820 --> 00:12:19.420
There aren't a lot of them,
but some of them are going to be useful.

00:12:19.420 --> 00:12:22.040
I'm not going to talk about all of
them here because I'm going to be at

00:12:22.040 --> 00:12:24.240
the 2 o'clock session this afternoon.

00:12:24.240 --> 00:12:26.540
So don't go ahead and try to
write them all down right now.

00:12:26.540 --> 00:12:27.200
Come and see me.

00:12:27.280 --> 00:12:29.860
I'll have this stuff for you
there and you can copy it down.

00:12:30.020 --> 00:12:33.030
But basically,
there's some prefs to control your

00:12:33.030 --> 00:12:37.140
transition and multi-observer if
you want to play around with that.

00:12:37.190 --> 00:12:40.150
Show the short name instead of the
long name inside of the computer list.

00:12:40.270 --> 00:12:44.030
And then there's some preferences
that affect control screen,

00:12:44.030 --> 00:12:47.530
the VNC server part of it,
as well as some things relating to

00:12:47.530 --> 00:12:50.050
file copying with multicast and so on.

00:12:52.160 --> 00:12:53.670
Okay, lines of communication.

00:12:53.780 --> 00:12:57.150
So I'm going to talk about

00:12:57.760 --> 00:13:00.110
Who communicates with who
and what they communicate?

00:13:00.110 --> 00:13:03.100
Or what protocols they're using, sorry.

00:13:03.800 --> 00:13:06.200
So here's the basic diagram
for Apple Remote Desktop.

00:13:06.200 --> 00:13:08.920
You've got your administrator,
your client, and your task server.

00:13:09.000 --> 00:13:12.480
And there's all kinds of communication
going on constantly between them.

00:13:12.480 --> 00:13:16.060
I mean, not that it's chatty,
but they're always communicating.

00:13:16.240 --> 00:13:20.290
So with the administrator console,
when it talks to the client,

00:13:20.290 --> 00:13:24.300
for instance,
it communicates over UDP port 3283.

00:13:24.380 --> 00:13:27.050
Also on the task server,
since that agent acts

00:13:27.050 --> 00:13:30.340
as a client as well,
it communicates over 3283

00:13:30.340 --> 00:13:31.840
UDP with that as well.

00:13:31.840 --> 00:13:35.490
But it also has a persistent connection,
a TCP connection to the task server.

00:13:35.490 --> 00:13:37.950
So when you launch your admin,
your task server is out

00:13:37.950 --> 00:13:40.720
there on a separate machine,
it's always connected.

00:13:40.720 --> 00:13:46.200
Now the task server also communicates
with clients over port 3283 UDP.

00:13:46.290 --> 00:13:47.100
So it's not just a TCP and TCP.

00:13:47.210 --> 00:13:49.260
Whenever the client is in
the middle of receiving

00:13:49.260 --> 00:13:51.800
information from the task server,
like an install packet,

00:13:51.800 --> 00:13:53.620
it does that over a TCP connection.

00:13:55.470 --> 00:13:58.400
Now when your Remote Desktop.app
is doing a screen control,

00:13:58.400 --> 00:14:00.900
it communicates with the
Apple VNC server on the client.

00:14:00.900 --> 00:14:05.780
It does so over TCP port 5900 and 21.

00:14:05.780 --> 00:14:09.000
Now 21 is the SSH port,
and that's the one that's going

00:14:09.000 --> 00:14:12.240
to be used if you're doing
an encrypted control screen.

00:14:12.280 --> 00:14:15.630
Now it's the case that
always the command,

00:14:15.630 --> 00:14:21.380
the mouse gestures and the keyboard
characters are always encrypted,

00:14:21.380 --> 00:14:23.660
but if you want to additionally
encrypt the screen data,

00:14:23.660 --> 00:14:25.280
that's when port 21 gets used.

00:14:25.400 --> 00:14:28.380
Now when you do a share screen,
we share the screen

00:14:28.380 --> 00:14:29.940
in a multicast manner.

00:14:29.940 --> 00:14:33.770
And so that's done from the
Apple VNC server on the admin

00:14:33.770 --> 00:14:38.480
machine to an application called
ARD Force Viewer on the client machine.

00:14:38.480 --> 00:14:42.370
So that's actually an app that gets
launched and is what displays the admin

00:14:42.370 --> 00:14:44.620
screen on each of the client machines.

00:14:44.620 --> 00:14:47.960
And so that gets its
communication over port 5900.

00:14:47.960 --> 00:14:50.530
So the reason this stuff is
important to know is if you're

00:14:50.530 --> 00:14:53.580
going to be setting up firewalls,
you want to make sure that you've

00:14:53.580 --> 00:14:55.350
got the right kinds of ports open.

00:14:55.400 --> 00:14:58.720
And we're going to talk a little
bit about firewalls later.

00:15:00.350 --> 00:15:01.910
Actually,
we're coming up to it real soon here.

00:15:01.960 --> 00:15:04.060
So network design.

00:15:04.080 --> 00:15:07.740
What are the common issues and how
should your network be configured?

00:15:07.740 --> 00:15:12.300
Now, when I talk about our kind of remote
desktop's ideal network configuration,

00:15:12.300 --> 00:15:14.920
this may not be something that's
going to be totally practical

00:15:14.920 --> 00:15:18.580
for in your organization,
but at least it's going to give

00:15:18.580 --> 00:15:22.950
you an idea as to what ARG's
basic network requirements are.

00:15:23.180 --> 00:15:29.940
So common issues: firewalls, NAT routers,
multi-homing and just

00:15:29.940 --> 00:15:32.980
multicast configuration.

00:15:32.980 --> 00:15:36.400
So starting with firewalls, you know,
firewalls can be in lots of different

00:15:36.400 --> 00:15:38.160
places in your organization.

00:15:38.290 --> 00:15:40.420
They can be on your admin side,
on the host side.

00:15:40.420 --> 00:15:45.420
It can be inside of your switch or your
router or it can be on your client side.

00:15:45.500 --> 00:15:47.550
So the thing to keep
in mind is that when,

00:15:47.710 --> 00:15:50.890
if you do have issues,
make sure that these ports and

00:15:50.890 --> 00:15:54.210
these other requirements are
met so that on your switches,

00:15:54.260 --> 00:15:56.040
for instance, you allow broadcast.

00:15:56.150 --> 00:15:58.940
Broadcast is needed for upgrade client.

00:15:58.940 --> 00:16:02.230
If you turn off broadcast,
you're not going to be able,

00:16:02.230 --> 00:16:06.380
you're not going to be successful at
upgrading your clients over the network.

00:16:06.440 --> 00:16:08.990
Multicast is needed for file
copying on the local network.

00:16:09.060 --> 00:16:12.910
It does that in order to reduce the
amount of bandwidth that's used.

00:16:13.010 --> 00:16:17.460
Ping, the scanner,
the local scanner and the range scanners,

00:16:17.500 --> 00:16:20.510
the first thing they send out
is an ICMP packet in order to

00:16:20.510 --> 00:16:21.880
try to find these machines.

00:16:21.880 --> 00:16:24.190
If it's successful,
then it communicates with them

00:16:24.190 --> 00:16:28.580
in report 3283 to try to get more
Apple Remote Desktop specific

00:16:28.580 --> 00:16:29.580
information.

00:16:29.580 --> 00:16:32.860
So if Ping is disabled,
you're not going to be able to find them.

00:16:32.860 --> 00:16:36.790
And one thing to keep in mind is
that it's easy to accidentally

00:16:36.790 --> 00:16:41.300
disable Ping because in the network
control panel or under sharing,

00:16:41.300 --> 00:16:44.880
I think under firewall,
there's a stealth mode option.

00:16:44.880 --> 00:16:47.140
You turn that on,
that actually turns off ICMP.

00:16:47.140 --> 00:16:49.460
It doesn't say that,
but that's the net effect.

00:16:49.460 --> 00:16:51.880
So make sure that that's not
turned on in your client machines.

00:16:51.900 --> 00:16:53.060
Thank you.

00:16:55.080 --> 00:16:59.540
Also, your internet service provider may
also have a firewall that's preventing

00:16:59.540 --> 00:17:01.870
certain traffic like UDP packets,
for instance,

00:17:01.930 --> 00:17:03.270
from getting back and forth.

00:17:03.340 --> 00:17:06.040
Now,
one of the symptoms that you might see

00:17:06.040 --> 00:17:09.580
if you've got a firewall issue and UDP,
for instance,

00:17:09.580 --> 00:17:11.520
which is critical to Remote Desktop,
is blocked,

00:17:11.520 --> 00:17:16.750
is that you may see a machine show up
that just says VNC only or VNC on instead

00:17:16.750 --> 00:17:22.880
of actually seeing the nice blue computer
with all the status that you're used to.

00:17:23.430 --> 00:17:26.630
And the reason you see this is
because when Remote Desktop app

00:17:26.630 --> 00:17:30.570
is trying to find these clients,
the first thing it does is it tries to

00:17:30.580 --> 00:17:33.600
send out a packet of 3283 to communicate.

00:17:33.610 --> 00:17:37.170
And if that isn't successful,
it tries to do a VNC connection

00:17:37.170 --> 00:17:40.280
on 5900 because for all it knows,
it may be a PC that

00:17:40.280 --> 00:17:41.440
it's communicating with.

00:17:42.800 --> 00:17:45.480
So if you know that A or D,
the agent is up and running on a

00:17:45.480 --> 00:17:48.590
client and you're seeing B and C,
then think about checking your firewall

00:17:48.590 --> 00:17:52.060
settings and make sure you don't have an
issue between your admin and your client.

00:17:53.740 --> 00:17:55.600
So NAT routers.

00:17:55.600 --> 00:18:00.600
NAT routers are more or less a no-go for
Remote Desktop because all the clients

00:18:00.600 --> 00:18:05.970
on the LAN side of your router show
up as one address to Remote Desktop.

00:18:05.970 --> 00:18:08.570
So it's not going to be able
to successfully administer

00:18:08.570 --> 00:18:09.740
all those machines.

00:18:09.740 --> 00:18:13.030
So in order to deal with that,
there's a couple options.

00:18:13.050 --> 00:18:14.980
One is port forwarding and one is VPN.

00:18:14.980 --> 00:18:16.940
If you want to go the
port forwarding route,

00:18:16.940 --> 00:18:21.600
make sure you've forwarded all the
necessary ports and do that to a

00:18:21.600 --> 00:18:24.780
machine that you're going to run a
second copy of Apple Remote Desktop on.

00:18:24.780 --> 00:18:29.300
That way you can do a control
session to Remote Desktop running

00:18:29.760 --> 00:18:34.700
from the WAN side into the LAN side
and that RemoteDesktop.app can

00:18:34.780 --> 00:18:39.610
then see all the machines that
are on the LAN side of the NAT.

00:18:42.590 --> 00:18:45.880
And VPN will also work for you as well.

00:18:45.880 --> 00:18:49.490
If you can VPN into the
LAN side of that NAT,

00:18:49.520 --> 00:18:53.000
that's going to give your administrator
machine an IP address that's going

00:18:53.020 --> 00:18:55.060
to appear to be on that same network.

00:18:55.290 --> 00:18:57.450
Then you can use this remote
desktop from your administrator

00:18:57.490 --> 00:18:58.910
console to see all these machines.

00:18:58.920 --> 00:19:03.650
This is how when I go home,
I VPN into work and I'm on the

00:19:03.730 --> 00:19:08.860
same network as I would be if
I was at Apple and I can control

00:19:08.860 --> 00:19:08.860
all the machines from home.

00:19:09.980 --> 00:19:11.060
Okay, multi-homing.

00:19:11.060 --> 00:19:14.640
This is a mid-limitation
of Apple Remote Desktop.

00:19:14.640 --> 00:19:19.060
It does not handle
multi-homed clients very well,

00:19:19.060 --> 00:19:24.530
mainly if the two different networks
or all the different networks

00:19:24.540 --> 00:19:28.110
that your interfaces are on can
end up routing back to the same

00:19:28.310 --> 00:19:30.260
network that your client is on.

00:19:30.260 --> 00:19:35.010
And what happens from the client
perspective is that the admin sends

00:19:35.010 --> 00:19:41.130
out a packet over 3283 and it doesn't
know down at the networking level which

00:19:41.170 --> 00:19:42.400
interfaces it's going to go out of.

00:19:42.400 --> 00:19:43.710
It's beyond its control.

00:19:43.710 --> 00:19:46.680
It's beyond the control of any
network app what port this stuff

00:19:46.680 --> 00:19:49.400
is going to ultimately get out
of if your app is written as a

00:19:49.400 --> 00:19:51.510
well-behaved network application.

00:19:51.520 --> 00:19:56.020
So it may be at one point that
the client receives a UDP packet

00:19:56.020 --> 00:19:59.520
from what looks like 20.001.

00:20:00.100 --> 00:20:02.030
And in another case,
it'll receive maybe the

00:20:02.050 --> 00:20:03.900
next packet from 10.001.

00:20:03.900 --> 00:20:07.210
But the client, when the administrator
authenticates to it,

00:20:07.380 --> 00:20:11.090
now has a session going with the
administrator and it's expecting all

00:20:11.090 --> 00:20:13.190
packets to come from one address.

00:20:13.200 --> 00:20:16.040
It's not expecting this kind
of flip-flopping of addresses

00:20:16.040 --> 00:20:17.200
as data is sent to it.

00:20:17.200 --> 00:20:20.780
And particularly for copy items,
it's really bad.

00:20:20.780 --> 00:20:23.600
So if you're kind of
getting sketchy status like,

00:20:23.600 --> 00:20:26.890
oh, I got status from the machine
when I first started up,

00:20:26.890 --> 00:20:29.700
but then it kind of went
away after a minute.

00:20:29.940 --> 00:20:33.510
And you know that your machine
has multiple interfaces going,

00:20:33.620 --> 00:20:36.220
you might want to consider turning
off one of those interfaces or making

00:20:36.220 --> 00:20:40.320
sure that both those interfaces
can't route back to the same

00:20:40.330 --> 00:20:42.240
network that your clients are on.

00:20:42.340 --> 00:20:44.940
And in this case, in this example,
it's real easy to end up doing

00:20:44.940 --> 00:20:47.740
that because a lot of machines
have both Ethernet and AirPort.

00:20:47.740 --> 00:20:51.410
And a lot of times when I'm at work,
I'm plugged into both and I control a

00:20:51.410 --> 00:20:53.770
machine and I might have issues with it.

00:20:54.770 --> 00:20:57.140
Okay, multicast configuration.

00:20:57.200 --> 00:21:01.010
Basically just make sure in order to
support file copy on your local area

00:21:01.010 --> 00:21:04.340
network that if you've got switches,
make sure that it's enabled.

00:21:04.510 --> 00:21:07.600
And in some cases,
some switches or routers

00:21:07.850 --> 00:21:12.250
support bandwidth limiting,
so just make sure that whatever

00:21:12.250 --> 00:21:15.710
bandwidth limiting you want to use,
just make sure it's appropriate

00:21:15.710 --> 00:21:19.660
and relatively high in order to
support efficient transfer of data

00:21:19.850 --> 00:21:22.600
when you're sending out copy items.

00:21:23.820 --> 00:21:26.740
Okay,
so basically in summary of all this,

00:21:26.740 --> 00:21:31.440
what we recommend is to
have a nice switch network.

00:21:31.520 --> 00:21:34.360
So because we're using a lot of UDP,
you don't end up with

00:21:34.360 --> 00:21:36.300
too many retransmissions.

00:21:36.300 --> 00:21:38.250
Make sure that your firewall
settings are correct.

00:21:38.340 --> 00:21:41.740
If you're using multi-homing,
make sure there aren't multiple,

00:21:41.740 --> 00:21:44.420
no routes between your
multi-homed interfaces.

00:21:44.420 --> 00:21:49.520
Use smaller subnets and ideally
an administrator console

00:21:49.520 --> 00:21:52.190
and task server per subnet.

00:21:52.300 --> 00:21:54.270
But I know for some of you that's
not particularly realistic.

00:21:54.320 --> 00:21:57.390
So in a larger kind of
network environment,

00:21:57.390 --> 00:22:01.520
you could have a router,
you can have an administrator,

00:22:01.520 --> 00:22:05.700
one single administrator that can then,
on one subnet,

00:22:05.700 --> 00:22:09.180
that can then control an administrator
on each of your other subnets.

00:22:09.180 --> 00:22:12.870
And for instance, in copy items,
if you've got dozens

00:22:13.110 --> 00:22:14.980
and dozens of subnets,
if you,

00:22:14.980 --> 00:22:19.270
from let's say the administrator here,
1003.1, the guy at the top,

00:22:19.290 --> 00:22:22.280
if you do a copy items out to all
the different machines on each,

00:22:22.280 --> 00:22:25.130
to those subnets,
it's going to do it in a unicast manner.

00:22:25.140 --> 00:22:27.720
And so it's going to take a long
time for that data to get out.

00:22:27.740 --> 00:22:30.750
If instead you have an administrator
on each of those networks,

00:22:30.810 --> 00:22:34.090
you can either do a control
screen to each of those different

00:22:34.090 --> 00:22:37.250
administrators and from there
kick off your copy items task and

00:22:37.250 --> 00:22:39.160
that'll do it in a multicast manner.

00:22:39.160 --> 00:22:43.160
Or through Apple script,
you could actually script something

00:22:43.260 --> 00:22:47.370
that would allow you to send from
your administrator the items that

00:22:47.370 --> 00:22:50.700
you want to copy to the administrator
machine on each of those subnets.

00:22:51.090 --> 00:22:53.800
And then from there,
automatically kick off a second

00:22:53.810 --> 00:22:57.030
copy items task on each of those
subnets that will then distribute

00:22:57.140 --> 00:22:58.980
the data to the rest of the machines.

00:22:58.980 --> 00:23:02.680
And so it can happen from your
perspective relatively automatically,

00:23:02.680 --> 00:23:05.010
a fairly easy thing to do.

00:23:05.520 --> 00:23:07.940
Okay, so I'm going to bring
up someone to assist me,

00:23:07.940 --> 00:23:10.540
Adam Eath, who's one of the engineers
on Apple Remote Desktop,

00:23:10.570 --> 00:23:15.090
to help me demo some of these
features and talk about basically

00:23:15.630 --> 00:23:18.390
how we think they should be used.

00:23:29.600 --> 00:23:30.520
I think this works.

00:23:30.560 --> 00:23:31.580
Hello?

00:23:31.580 --> 00:23:32.170
All right.

00:23:32.220 --> 00:23:40.160
Okay.

00:23:40.160 --> 00:23:42.220
Let this Apple script run.

00:23:42.220 --> 00:23:46.760
Boy, that's speedy.

00:23:46.830 --> 00:23:47.350
There we go.

00:23:51.460 --> 00:23:57.840
So when you have a brand new
Apple Remote Desktop and you launch it,

00:23:57.840 --> 00:24:00.600
after you get through the setup,
the first thing that comes up

00:24:00.600 --> 00:24:01.930
is the scanner window here.

00:24:01.940 --> 00:24:05.240
And so one of the things
I want to point out is how does

00:24:05.240 --> 00:24:08.640
Apple Remote Desktop come up with the,
you know,

00:24:08.640 --> 00:24:10.020
how does it fill in the computer name?

00:24:10.020 --> 00:24:11.980
The first thing it does is
when it scans the network,

00:24:11.980 --> 00:24:13.700
it gets a response back from the machine.

00:24:13.700 --> 00:24:15.190
The only thing it knows
about is the IP address,

00:24:15.190 --> 00:24:17.060
and that's the first thing
that goes in the name field.

00:24:17.060 --> 00:24:19.000
Then a lot of stuff happens
like in a split second,

00:24:19.000 --> 00:24:20.960
so you never actually
get to see this going on.

00:24:21.000 --> 00:24:22.440
But I'm going to tell you what
happens behind the scenes.

00:24:22.440 --> 00:24:27.300
Next, it does a reverse lookup on the
name and tries to get your DNS name.

00:24:27.300 --> 00:24:30.140
So if you have a really slow DNS server,
which some people do,

00:24:30.140 --> 00:24:32.640
that can actually sort
of bog this thing down.

00:24:32.640 --> 00:24:35.970
Once it gets the DNS name,
simultaneously with that,

00:24:35.970 --> 00:24:41.360
it's also sending out the packet over
3283 to communicate with the clients.

00:24:41.360 --> 00:24:43.290
And once it does that,
it gets back to the

00:24:43.290 --> 00:24:44.640
computer sharing name.

00:24:44.640 --> 00:24:47.680
And that's what it ultimately puts
or tries to put into the name field.

00:24:47.700 --> 00:24:51.380
I don't know if you could
just... If you could just widen

00:24:51.460 --> 00:24:55.710
the screen a little bit more,
I'm going to show them the network field.

00:24:56.250 --> 00:24:59.640
Okay, so there's sometimes there's
some confusion as to exactly

00:24:59.640 --> 00:25:03.200
what do these values mean inside
of the network interface field.

00:25:03.200 --> 00:25:06.240
This is the network interface
on your computer from which

00:25:06.240 --> 00:25:08.050
you are seeing these clients.

00:25:08.060 --> 00:25:10.880
So you see the one on the bottom,
the ARD administrator machine

00:25:10.880 --> 00:25:14.020
says this computer because it's
just looking through the loopback

00:25:14.020 --> 00:25:15.140
device and finding this machine.

00:25:15.140 --> 00:25:19.110
In the case of the other clients that
it's seeing on that rack over there,

00:25:19.110 --> 00:25:22.760
it's communicating with all
those via its built-in Ethernet.

00:25:23.120 --> 00:25:26.510
And if you look up at the top where
in the little search bubble it just

00:25:26.510 --> 00:25:28.640
says searching built-in Ethernet.

00:25:28.640 --> 00:25:31.510
And Adam, if you kind of go over
that for just a second,

00:25:31.660 --> 00:25:35.810
there'll be a tool tip that'll come up
and it'll tell you what the range is.

00:25:35.820 --> 00:25:39.010
So if you just hover over the where
it says searching colon built-in

00:25:39.020 --> 00:25:40.980
Ethernet next to the local network.

00:25:40.980 --> 00:25:41.410
Got that.

00:25:43.180 --> 00:25:45.520
So that tells you what
Remote Desktop thinks is

00:25:45.520 --> 00:25:47.740
your local subnet range.

00:25:59.350 --> 00:26:03.100
Okay, so Adam selected several machines
and dragged them to the all

00:26:03.100 --> 00:26:06.000
computers list and this brings
down the add computer dialog.

00:26:06.000 --> 00:26:10.470
So when you add multiple machines,
in fact when you add any machine,

00:26:10.470 --> 00:26:13.080
it's going to add them by IP address.

00:26:13.080 --> 00:26:16.520
Even though it shows you the
DNS name for this first machine here,

00:26:16.520 --> 00:26:21.680
it's only going to store that
for informational purposes only,

00:26:21.680 --> 00:26:25.260
but it's not going to use it in the
future to try to resolve the machine.

00:26:25.380 --> 00:26:29.370
And the reason is that,
the reason we chose to do it this way

00:26:29.400 --> 00:26:32.980
is because a lot of people use DHCP.

00:26:32.980 --> 00:26:35.790
And so in that case,
storing that DNS name as a way to

00:26:35.790 --> 00:26:39.460
forward look up the address to find
the machine later on is generally

00:26:39.460 --> 00:26:40.360
not going to be very reliable.

00:26:40.400 --> 00:26:43.040
It's not going to be any more reliable
than just storing the IP address.

00:26:43.040 --> 00:26:47.400
So we opt just to store the IP address
in this case and just kind of

00:26:47.400 --> 00:26:49.770
skip the step of looking it up.

00:26:49.820 --> 00:26:54.650
So go ahead and add those machines.

00:27:00.210 --> 00:27:05.150
So you can get info on
one of these machines.

00:27:05.370 --> 00:27:09.120
Okay, so as I mentioned before,
the primary lookup in this

00:27:09.130 --> 00:27:11.620
particular case is the IP address.

00:27:11.620 --> 00:27:15.310
Now,
if you edit this and you clear out the

00:27:15.310 --> 00:27:20.610
IP address field and just hit done,
that's going to then change how

00:27:20.690 --> 00:27:22.940
Remote Desktop looks up this machine.

00:27:22.940 --> 00:27:25.170
This says, okay,
I really want to look this

00:27:25.170 --> 00:27:26.620
thing up by the DNS name.

00:27:28.140 --> 00:27:30.550
So from this point on,
what's going to happen is that

00:27:30.550 --> 00:27:33.500
when you launch Remote Desktop,
the first thing it's going to try

00:27:33.610 --> 00:27:36.700
to do is it's going to use the last
known IP address because it may get

00:27:36.700 --> 00:27:38.650
lucky the machine may still be there.

00:27:38.660 --> 00:27:41.950
If that doesn't work,
it's going to resolve the DNS name and if

00:27:42.030 --> 00:27:46.390
it resolves to something different than
the IP address that it was last known at,

00:27:46.390 --> 00:27:49.460
then it's going to try the new
IP address and hopefully the

00:27:49.460 --> 00:27:51.380
machine will be found there.

00:27:53.800 --> 00:27:57.250
So, a lot of people when they're
setting up their network,

00:27:57.370 --> 00:27:59.500
they end up with a lot
of different scanners.

00:27:59.500 --> 00:28:02.580
They set up scanners for each of
their subnets because that's how

00:28:02.580 --> 00:28:06.470
they go find their machines and
that's kind of where it ends.

00:28:06.520 --> 00:28:10.510
They then use those scanners from
that point on to actually organize

00:28:10.940 --> 00:28:15.050
their machines and go to those lists
and that's not the most effective way

00:28:15.050 --> 00:28:19.120
to use your remote desktop because
you're doing a lot of unnecessary

00:28:19.180 --> 00:28:21.790
scanning of the network in that case.

00:28:22.640 --> 00:28:26.110
So,
we're going to talk about using lists for

00:28:26.110 --> 00:28:30.370
these machines in just a minute as the
way that you really should be organizing

00:28:30.370 --> 00:28:31.750
your computers once you've found them.

00:28:31.800 --> 00:28:36.410
Now, another reason that people tend to
stick with scanners is because they

00:28:36.410 --> 00:28:41.280
feel like they've kind of been burned
with machines that have disappeared

00:28:41.280 --> 00:28:44.280
and they've got to keep on re-scanning
for them in order to find them,

00:28:44.280 --> 00:28:46.040
so why not just keep
on using the scanners?

00:28:46.040 --> 00:28:51.200
One particular instance of that
is an IP address will go to 0000

00:28:51.200 --> 00:28:51.480
and it's confusing as to why.

00:28:51.550 --> 00:28:53.580
And it's confusing as
to why that happens.

00:28:53.730 --> 00:28:57.800
But the reason that that happens
is that especially in a case where

00:28:57.800 --> 00:29:02.900
you've got DHCP for your clients
is that another machine on your

00:29:02.900 --> 00:29:07.680
network has actually taken the
IP address of a previous machine,

00:29:07.680 --> 00:29:09.360
the machine that went to 0000.

00:29:09.360 --> 00:29:13.420
So, let's say machine A had an
address but it went to 0.

00:29:13.600 --> 00:29:15.840
Some other machine,
machine B for instance,

00:29:15.900 --> 00:29:18.760
comes up and has that address
and remote desktop sees that.

00:29:18.990 --> 00:29:20.320
From its perspective,
it knows for a fact.

00:29:20.320 --> 00:29:23.250
That A no longer has this address.

00:29:23.460 --> 00:29:26.280
So, it goes ahead and clears it out
and that's why you see that.

00:29:26.330 --> 00:29:29.530
Now, if your remote desktop that
app is not running at the time

00:29:29.530 --> 00:29:31.910
when this address changes,
that's what happens.

00:29:31.930 --> 00:29:32.590
And that's why if you are
experiencing this problem,

00:29:32.590 --> 00:29:33.520
it's really a good idea to have a
separate task server because in addition

00:29:33.520 --> 00:29:34.410
to taking the load off the admin as
far as doing install package tasks,

00:29:34.410 --> 00:29:35.510
it also will constantly track
DHCP changes on your clients.

00:29:35.520 --> 00:29:36.010
Or just to give you a
little bit of a hint,

00:29:36.010 --> 00:29:36.780
if you're using a remote desktop
that's not running at the time

00:29:36.780 --> 00:29:37.560
when this address changes,
that's what happens.

00:29:37.650 --> 00:29:39.210
And that's why if you are
experiencing this problem,

00:29:39.210 --> 00:29:41.360
it's really a good idea to have a
separate task server because in addition

00:29:41.360 --> 00:29:43.430
to taking the load off the admin as
far as doing install package tasks,

00:29:43.710 --> 00:29:49.610
it also will constantly track
DHCP changes on your clients.

00:29:49.680 --> 00:29:54.280
Or just when clients just move
from one network to another,

00:29:54.300 --> 00:29:56.680
your clients know about the task server.

00:29:56.680 --> 00:29:58.190
And when they start up,
the very first thing they

00:29:58.210 --> 00:29:59.850
do is they check in with the
task server and they say,

00:29:59.910 --> 00:30:00.870
"Hey, here I am.

00:30:00.880 --> 00:30:02.680
And by the way,
here's my IP address." And the

00:30:02.680 --> 00:30:04.240
task server makes a note of that.

00:30:04.330 --> 00:30:07.570
And the next time your admin comes up,
the first thing it does is it syncs with

00:30:07.660 --> 00:30:10.980
the task server to make sure that it
knows what all the current addresses are

00:30:10.980 --> 00:30:12.630
as far as the task server is concerned.

00:30:13.050 --> 00:30:16.270
And it's a really great way to
avoid having a situation where

00:30:16.270 --> 00:30:18.960
machines are changing IP addresses
and your administrators are all

00:30:18.960 --> 00:30:18.960
going to be doing the same thing.

00:30:18.960 --> 00:30:21.460
So if your administrator is offline,
next time he goes up,

00:30:21.460 --> 00:30:24.560
someone else has stolen somebody
else's address and Rope Desktop doesn't

00:30:24.560 --> 00:30:26.960
know what to do with the guy who
used to have that address because

00:30:26.960 --> 00:30:31.670
he's not around anymore and he's
not communicating with the admin.

00:30:33.200 --> 00:30:40.410
Okay, so let's take a look at,
assuming you've got yourself set

00:30:40.470 --> 00:30:45.920
up with a remote task server,
what the best way is then to organize

00:30:46.030 --> 00:30:55.940
these machines and in my opinion is
to use a feature called Smart Lists.

00:30:55.940 --> 00:30:55.940
And so let's say you have,
let's say you have a remote

00:30:55.940 --> 00:30:55.940
task server and you're

00:30:57.400 --> 00:30:59.280
So,
if you have a bunch of different subnets

00:30:59.360 --> 00:31:03.700
and you've got the machines named a
certain way in each of the subnets

00:31:03.700 --> 00:31:08.510
or you've got an IP address range,
you can set up your smart list

00:31:08.630 --> 00:31:12.300
to just filter down on those
machines that match that criteria.

00:31:12.300 --> 00:31:19.180
So, if one subnet is 10.0.0 or in 10.0.1,
you can set up a smart list that's

00:31:19.180 --> 00:31:21.300
going to have just those machines in it.

00:31:21.300 --> 00:31:26.860
In this case,
Adam's doing it by name here.

00:31:26.860 --> 00:31:26.860
And if you hit OK,

00:31:28.230 --> 00:31:31.580
There's no machines because they have
no machines because we've got to change.

00:31:31.640 --> 00:31:34.720
We're going to go ahead and change
the name on these machines so that

00:31:35.010 --> 00:31:38.610
they're going to match with the
criteria for that smart list and

00:31:38.610 --> 00:31:39.960
they're going to show up in there.

00:31:39.960 --> 00:31:41.210
Bam.

00:31:41.210 --> 00:31:48.990
So now they show up
inside that smart list.

00:31:53.830 --> 00:31:56.050
All right,
I think that's probably a good enough

00:31:56.130 --> 00:31:59.580
demo for basically the smart list.

00:32:00.890 --> 00:32:05.600
So let's review what it is,
what we just talked about here.

00:32:05.600 --> 00:32:07.800
If we can switch back to this.

00:32:07.800 --> 00:32:15.240
So scanners primarily use them for
finding machines and for adding them.

00:32:15.240 --> 00:32:17.900
Use your smart list, not your scanners,
for organizing your

00:32:17.920 --> 00:32:19.300
clients after the fact.

00:32:19.300 --> 00:32:25.060
Use the task server to track
IP address changes on your clients.

00:32:25.060 --> 00:32:28.250
Client IPs change to zero for a reason,
as I explained.

00:32:28.250 --> 00:32:31.720
And you really should be using
scanners as a last resort to

00:32:31.830 --> 00:32:33.540
find machines that you've lost.

00:32:33.540 --> 00:32:35.800
Really the thing you should be
doing is setting up a task server.

00:32:35.800 --> 00:32:39.900
But I certainly understand if
you don't have that set up,

00:32:40.000 --> 00:32:44.390
scanners are a good way to fall back
and try to relocate your machines again.

00:32:46.450 --> 00:32:51.990
Okay, so let's do a little demo
of the task server here.

00:32:55.970 --> 00:33:00.260
So in this case,
we've got on this rack here a

00:33:00.260 --> 00:33:01.870
remote task server already set up.

00:33:01.960 --> 00:33:05.850
This is a machine that has a second
Apple Remote Desktop license,

00:33:05.850 --> 00:33:08.700
and we're going to configure
our admin to use that machine.

00:33:11.280 --> 00:33:14.980
I think it's just www.dc-ard-9.

00:33:14.980 --> 00:33:16.470
OK.

00:33:16.490 --> 00:33:18.810
WMDs.

00:33:26.340 --> 00:33:27.180
Does that look good?

00:33:27.180 --> 00:33:30.330
That looks good.

00:33:30.410 --> 00:33:33.050
So in this case,
it's asking for the username and password

00:33:33.120 --> 00:33:35.510
because we have to authenticate to it.

00:33:36.210 --> 00:33:38.910
Now, in addition to setting up,
if you've already got your remote

00:33:38.910 --> 00:33:41.760
task server set up and you can
do it at startup like that,

00:33:42.060 --> 00:33:44.880
you can also do it after the fact if
you set up your task server later.

00:33:45.130 --> 00:33:50.100
If you go to preferences and
go to the task server tab,

00:33:50.220 --> 00:33:52.080
you can see what your
task server settings are.

00:33:52.180 --> 00:33:54.670
In this case,
it shows you that we've got a

00:33:54.720 --> 00:33:56.890
remote task server set up here.

00:34:03.510 --> 00:34:08.140
Okay, so we're going to go ahead and
add a few more machines here.

00:34:11.240 --> 00:34:16.140
And so,
let's see if there's anything else.

00:34:16.390 --> 00:34:19.800
So here, when we add these machines,

00:34:20.180 --> 00:34:23.440
The administrator is going to tell
the task server about these machines

00:34:23.440 --> 00:34:27.120
so that it's going to be able to
track all the changes for you.

00:34:32.930 --> 00:34:35.480
And we're going to,
I think we want to put maybe a

00:34:35.490 --> 00:34:38.900
couple of them to sleep to kind
of demonstrate that when you're

00:34:38.900 --> 00:34:42.950
using the task server for a task,
like install a package for instance,

00:34:42.950 --> 00:34:45.980
it doesn't matter whether or
not the clients are asleep.

00:34:45.980 --> 00:34:49.970
This is one of the things that the
task server is going to handle for

00:34:50.000 --> 00:34:54.250
you is making sure that the task gets
done on those machines that are not

00:34:54.250 --> 00:34:56.860
online at the time the task is started.

00:34:56.860 --> 00:34:58.730
So they can come on,
they can start up later on,

00:34:58.730 --> 00:35:00.670
and then when they check
in with the task server,

00:35:00.670 --> 00:35:03.440
the task server is going to tell them,
hey, I've actually got

00:35:03.440 --> 00:35:04.280
something for you to do.

00:35:04.280 --> 00:35:06.200
I've got an install
package for you to perform.

00:35:06.200 --> 00:35:11.040
So in this case, Adam's going to pick
that package right there.

00:35:11.040 --> 00:35:13.620
He's going to select using
the remote task server.

00:35:13.620 --> 00:35:15.900
And we're going to put a little
bandwidth limit here just to make

00:35:15.900 --> 00:35:17.300
the thing go a little bit slower.

00:35:17.300 --> 00:35:20.960
Now, when we kick this off,
another thing too is that in addition

00:35:20.960 --> 00:35:25.240
to the task server communicating with
the clients and syncing up with them,

00:35:25.240 --> 00:35:27.230
it also syncs up with the admin.

00:35:27.230 --> 00:35:31.110
So as soon as we kick off this task,
once the package actually gets

00:35:31.110 --> 00:35:34.100
sent down to the task server,
we can go ahead and quit the admin.

00:35:34.100 --> 00:35:35.420
We don't even have to
hang around anymore.

00:35:35.420 --> 00:35:36.600
We could shut the machine down.

00:35:36.600 --> 00:35:38.730
So go ahead and do that.

00:35:38.820 --> 00:35:41.520
And right now,
it says that it's sending it over there.

00:35:41.520 --> 00:35:43.240
So now the package has
actually got there.

00:35:43.240 --> 00:35:46.070
Adam can go ahead and
quit remote desktop.

00:35:46.150 --> 00:35:49.080
And we can sort of just
hang out for a moment here.

00:35:49.080 --> 00:35:54.200
And you can go ahead and
fire up remote desktop again.

00:35:54.200 --> 00:35:58.920
And it'll either be in the middle
of installing the package to

00:35:58.920 --> 00:36:02.880
those machines that were online
or maybe have already succeeded.

00:36:02.900 --> 00:36:04.290
did.

00:36:06.600 --> 00:36:07.900
Hope this works.

00:36:07.900 --> 00:36:12.980
So we're gonna go ahead and wake up
those machines that were offline.

00:36:15.500 --> 00:36:18.030
And once they wake up,
they're going to check

00:36:18.030 --> 00:36:19.530
in with the task server.

00:36:19.650 --> 00:36:21.640
And once they become available,
the task server is going to

00:36:21.640 --> 00:36:24.300
go ahead and start installing
the package on those machines.

00:36:24.300 --> 00:36:30.630
So as you can see, it's kicking off the
install on those guys.

00:36:32.100 --> 00:36:35.680
I'm not exactly sure what's up
with number four and five there,

00:36:35.680 --> 00:36:38.640
but those are the guys
that were online before?

00:36:38.640 --> 00:36:39.060
Yeah.

00:36:39.060 --> 00:36:40.800
Yeah, that's unusual.

00:36:49.430 --> 00:37:01.320
Why don't you try restarting those guys
and see if... These are all Intel iMacs,

00:37:01.360 --> 00:37:03.860
so they should restart
pretty quickly here.

00:37:03.860 --> 00:37:09.370
There we go.

00:37:19.600 --> 00:37:22.440
So as I mentioned before,
when they start up,

00:37:22.480 --> 00:37:25.740
they should be checking
in with their task server.

00:37:25.740 --> 00:37:28.250
And hopefully the task server knows
that they've got something to do.

00:37:28.270 --> 00:37:30.940
So right now you can see that
in the current status column,

00:37:30.940 --> 00:37:33.880
they say that they're
inactive once they start up.

00:37:34.040 --> 00:37:35.620
That should change.

00:37:35.680 --> 00:37:38.820
And hopefully if we're lucky here, hey,
there we go.

00:37:39.050 --> 00:37:42.660
So it eventually figured out
what it is that it needed to do.

00:37:51.000 --> 00:37:52.000
Hooray!

00:37:52.000 --> 00:37:55.000
It works.

00:37:55.000 --> 00:37:56.880
It does work.

00:37:57.020 --> 00:38:05.960
Okay, so let's look at in summary what
it is that we just saw there.

00:38:05.960 --> 00:38:07.840
So the task server
requires its own license.

00:38:07.840 --> 00:38:12.840
When you set up the task
server remote machine,

00:38:12.840 --> 00:38:16.020
launch Remote Desktop just
once to configure access.

00:38:16.020 --> 00:38:18.530
There's a preference that
says allow other machines to

00:38:18.530 --> 00:38:19.740
use this as a task server.

00:38:19.830 --> 00:38:21.030
You want to check that.

00:38:21.150 --> 00:38:22.400
After that, you can quit the admin.

00:38:22.400 --> 00:38:26.560
You don't have to keep Remote Desktop,
that app, running on your task server.

00:38:26.560 --> 00:38:29.080
You don't have to add the same
machines that you're adding to

00:38:29.170 --> 00:38:30.720
your other admins to that machine.

00:38:30.720 --> 00:38:33.940
The admin that's using that
task server is going to go ahead

00:38:33.940 --> 00:38:35.770
and take care of that for you.

00:38:35.780 --> 00:38:39.480
The task server distributes
its data in a unicast manner,

00:38:39.480 --> 00:38:43.730
so it does, for any task,
up to 10 machines simultaneously,

00:38:43.730 --> 00:38:47.140
so it's not going to try
to overload your network.

00:38:47.140 --> 00:38:50.890
And as machines finish,
other machines are going to be started.

00:38:50.890 --> 00:38:55.080
The task server is going to keep
retrying the job until it can get done.

00:38:56.120 --> 00:39:00.540
So if the machine sleeps or
crashes or gets shut down

00:39:00.540 --> 00:39:04.420
in the middle of an install,
the task server will make sure

00:39:04.590 --> 00:39:06.000
that eventually it gets done.

00:39:06.040 --> 00:39:09.290
You can use bandwidth throttling to
limit how fast you send stuff out.

00:39:09.350 --> 00:39:11.600
The bandwidth throttling
applies everywhere.

00:39:11.600 --> 00:39:14.200
It applies to your administrator
talking to your task server.

00:39:14.200 --> 00:39:16.090
It applies to your task server
talking to your clients.

00:39:16.180 --> 00:39:20.600
And the best use of the task server
for install packages is when the

00:39:20.600 --> 00:39:23.160
machines are actually not online.

00:39:23.160 --> 00:39:25.680
If they're all online,
and especially if they're local,

00:39:25.680 --> 00:39:28.860
it's probably better to not use the task
server and just do the immediate mode

00:39:28.970 --> 00:39:33.610
because it's going to be faster for you,
unless you really need to close the

00:39:33.610 --> 00:39:37.670
thing down and go do something else.

00:39:38.540 --> 00:39:42.120
Okay, so lastly,
we're going to do a reporting demo.

00:39:47.860 --> 00:39:51.260
So basically we're going to set
up our remote task server again.

00:39:51.260 --> 00:39:55.820
So this machine is going to receive
all the caches from the clients.

00:39:55.820 --> 00:39:58.870
When they get generated,
it's going to store those.

00:40:09.130 --> 00:40:13.620
Okay, so when you're setting up a
remote desktop for the first time,

00:40:13.620 --> 00:40:17.500
some of you have probably come
across this setup pane here.

00:40:17.500 --> 00:40:20.960
And this is for setting a
default reporting policy.

00:40:20.960 --> 00:40:26.960
This is a policy that's going to tell the
clients what caches that you want built.

00:40:26.980 --> 00:40:30.130
And it gets applied to these
machines as soon as you add

00:40:30.130 --> 00:40:32.110
the machines to your computer.

00:40:32.120 --> 00:40:35.810
This is not going to overwrite the
policy of any existing machines

00:40:35.860 --> 00:40:37.590
that you've got out there.

00:40:39.100 --> 00:40:42.320
When we set this up,
we had a problem with the

00:40:42.320 --> 00:40:43.650
original remote desktop.

00:40:43.660 --> 00:40:47.700
We had a feeling that a lot of
people didn't really get about

00:40:47.900 --> 00:40:50.420
setting up these report policies.

00:40:50.420 --> 00:40:52.700
And so we kind of put this in
here to make sure that this was

00:40:52.930 --> 00:40:55.590
kind of right in your face and you
saw it and you thought about it.

00:40:55.690 --> 00:40:58.730
I think we've sort of got the
converse problem now where everyone

00:40:58.730 --> 00:41:00.460
has reporting policies set up.

00:41:00.460 --> 00:41:03.610
And if you've got multiple administrators
managing the same machines,

00:41:03.610 --> 00:41:06.320
every administrator is shoving
their policy down this machine.

00:41:06.320 --> 00:41:09.080
So this was really kind of
intended for the single-player.

00:41:09.100 --> 00:41:11.620
This is a real admin case where
one administrator was managing a

00:41:11.620 --> 00:41:13.130
set of machines and not multiple.

00:41:13.180 --> 00:41:15.580
If you're in an environment where
there are several administrators

00:41:15.580 --> 00:41:17.810
all managing the same machines,
you probably don't

00:41:17.810 --> 00:41:18.970
really want this set up.

00:41:19.110 --> 00:41:23.060
You should probably uncheck this
and go ahead and just one person

00:41:23.510 --> 00:41:26.230
should be responsible for setting
these policies or at least coordinate

00:41:26.290 --> 00:41:29.000
between people when you're setting
up these reporting policies.

00:41:29.060 --> 00:41:35.300
And before when I was showing you the
preferences for ARD Agent and I said,

00:41:35.340 --> 00:41:39.640
"Here you can look to see what reporting
policies are set up." If you think you've

00:41:39.640 --> 00:41:43.020
got a situation where now that you've
heard what I've said here about this,

00:41:43.320 --> 00:41:47.660
where several of your admins are all
sending their reporting policies down.

00:41:47.660 --> 00:41:49.940
And keep in mind,
these things do not overwrite each other.

00:41:50.160 --> 00:41:52.900
They just get added on there because
each one is a separate admin.

00:41:53.020 --> 00:41:57.780
You can check that preferences
file and see whether or not that's

00:41:57.780 --> 00:42:02.550
actually the case because there'll
be an entry for each that's keyed

00:42:02.550 --> 00:42:04.700
by the Ethernet zero address.

00:42:04.820 --> 00:42:07.030
And check in there and you'll be
able to see whether or not you've

00:42:07.030 --> 00:42:09.850
got multiple admins putting these
reporting policies down and you'll

00:42:09.860 --> 00:42:13.720
be able to hopefully relatively easy
identify who it is in your organization

00:42:13.720 --> 00:42:16.720
that's putting these policies in
there that you don't want because

00:42:16.720 --> 00:42:20.520
their EN zero address is in there.

00:42:20.520 --> 00:42:24.570
So okay,
let's go ahead and kick this up here.

00:42:28.500 --> 00:42:36.830
So go ahead and add some machines.

00:42:36.860 --> 00:42:40.760
So here we've got the checkbox that
says apply default data upload schedule.

00:42:40.940 --> 00:42:44.290
So when you've got that checked,
this is going to apply that schedule

00:42:44.330 --> 00:42:45.940
that we had set when we came in.

00:42:45.940 --> 00:42:50.100
Now, the times that are set for that are
basically seven days a week at midnight.

00:42:50.100 --> 00:42:51.250
That's the default.

00:42:51.250 --> 00:42:54.070
You don't see that stuff,
but that's what it's set to.

00:42:54.070 --> 00:42:57.150
And we can go ahead and
review that in just a minute.

00:42:57.160 --> 00:42:59.150
So we're going to add
these guys here like this.

00:42:59.160 --> 00:43:03.030
Now, we're going to add a few more,
but we're going to turn off that

00:43:03.120 --> 00:43:07.070
checkbox so we can see what it looks
like when they're not set and then

00:43:07.070 --> 00:43:09.390
talk about how to add them manually.

00:43:12.020 --> 00:43:18.070
Okay, so go ahead and do a get info
on one of those machines.

00:43:18.080 --> 00:43:20.910
We'll take a look at
the data settings here.

00:43:22.670 --> 00:43:23.690
So go ahead and click "Edit" here.

00:43:23.700 --> 00:43:28.600
So here's kind of the big pain
where all of these settings

00:43:28.600 --> 00:43:30.750
are set for your cache policy.

00:43:30.860 --> 00:43:32.670
And so this is what a
default one looks like.

00:43:32.750 --> 00:43:37.190
Now, for those of you who are upgrading
from 2.0 and you already had

00:43:37.190 --> 00:43:40.030
your reporting policy set,
one of the new things

00:43:40.030 --> 00:43:44.690
in Remote Desktop is app
usage and user accounting.

00:43:44.750 --> 00:43:48.680
Those things are not
getting set by default.

00:43:48.700 --> 00:43:51.700
So you need to actually go
and select all your machines,

00:43:51.700 --> 00:43:54.830
do a "Get Info" on all
of them simultaneously,

00:43:54.830 --> 00:43:58.700
and you can edit the schedule
information for all of them at once.

00:43:58.720 --> 00:44:02.410
And you want to turn on those top two,
the ones that say "Collect

00:44:02.410 --> 00:44:06.620
Application Usage" and "Collect
User Accounting." So in this case,

00:44:06.690 --> 00:44:09.700
Adam selected some that
have kind of a mixed result.

00:44:09.700 --> 00:44:13.380
So if he were to check over those things,
that's then going to

00:44:13.380 --> 00:44:14.700
go ahead and do that.

00:44:14.700 --> 00:44:17.690
And if he applies this now,
it's going to push those down.

00:44:17.770 --> 00:44:21.770
Now, another thing is when I talked about
multiple administrators putting

00:44:21.770 --> 00:44:25.860
their cache policies on an agent,
it's not enough just to go into

00:44:25.860 --> 00:44:29.670
that agent and manually edit the
P-List and pull out the cache

00:44:29.710 --> 00:44:30.700
policies that you don't want.

00:44:30.720 --> 00:44:35.660
Because each time that agent is
authenticated to by the admin,

00:44:35.660 --> 00:44:39.700
the admin re-pushes down
its reporting policy.

00:44:39.700 --> 00:44:42.890
So you really need to resolve
the problem at the heart of it

00:44:42.890 --> 00:44:44.700
and go to the administrator.

00:44:44.700 --> 00:44:46.710
So you can go to the administrator
console that may have one

00:44:46.740 --> 00:44:48.700
of these default policies
set up and turn that off.

00:44:48.700 --> 00:44:52.670
If we can just go back to preferences,
the main app preferences

00:44:52.670 --> 00:44:53.990
for just a second.

00:44:55.970 --> 00:44:58.010
and go to the task server.

00:44:58.010 --> 00:45:00.450
So down at the bottom there,
looking slightly different

00:45:00.460 --> 00:45:03.800
than that other pane,
is this is the default information.

00:45:03.800 --> 00:45:08.950
This is where you would go to change that
same default information that you got

00:45:08.950 --> 00:45:12.240
set up when you started up the program.

00:45:12.860 --> 00:45:14.860
So here's where you want to go
to if you think you have another

00:45:14.860 --> 00:45:17.220
admin that's set up with this
stuff and turn this stuff off.

00:45:17.250 --> 00:45:20.670
It's enough just to uncheck those
check boxes on the front part.

00:45:20.680 --> 00:45:24.100
You don't have to go
into here to do that.

00:45:29.330 --> 00:45:33.040
Okay.

00:45:33.040 --> 00:45:39.040
So some folks have some problems
with app usage and user accounting

00:45:39.040 --> 00:45:43.900
because they go and they,
well, either because that stuff isn't set

00:45:43.900 --> 00:45:47.310
up and nothing has been collected
or they just want to try it out

00:45:47.310 --> 00:45:51.330
and they've picked a machine,
they know they've enabled this on

00:45:51.330 --> 00:45:55.560
it and they go and they launch an
app and then they run the report

00:45:55.560 --> 00:45:58.180
and nothing shows up in the report.

00:45:58.180 --> 00:46:00.000
There's a couple of
reasons that might happen.

00:46:00.000 --> 00:46:05.400
One is that if you go ahead and
bring up an app usage report there,

00:46:05.430 --> 00:46:07.580
you notice that the end
date is the day before.

00:46:07.580 --> 00:46:08.880
It's not today.

00:46:08.880 --> 00:46:11.880
So that might be one reason
why you're not seeing anything.

00:46:11.880 --> 00:46:13.910
The other is that...

00:46:16.120 --> 00:46:20.040
The app itself needs to have
some kind of closing event on it.

00:46:20.090 --> 00:46:24.780
So when you launch an application,
nothing has been written yet to disk.

00:46:24.780 --> 00:46:27.850
We don't record that event as, okay,
this app has launched.

00:46:27.950 --> 00:46:30.890
You have to switch out of it
or quit it or log into another

00:46:30.890 --> 00:46:33.090
account and then we'll record that.

00:46:33.140 --> 00:46:36.810
And after that event happens,
if you go ahead and run the report

00:46:37.110 --> 00:46:42.360
and you click rebuild data for report,
you'll be able to see that event happen.

00:46:42.580 --> 00:46:45.970
So I think we've got, yeah, okay,
so we've got some of this stuff

00:46:46.040 --> 00:46:49.820
actually stored there now and you can
see that we've got some of the amount

00:46:49.820 --> 00:46:53.620
of time that the app was front most,
the total amount of time that it ran,

00:46:53.620 --> 00:46:56.710
who ran it and what state it's in,
whether it's quit or in the

00:46:56.710 --> 00:46:59.370
case if it was running and
being switched in and out,

00:46:59.480 --> 00:47:02.400
whether or not it's still
running and what the processes

00:47:02.400 --> 00:47:04.580
are in the computer and so on.

00:47:07.100 --> 00:47:10.740
All right, I think you want to do a user
accounting one real quick too,

00:47:10.750 --> 00:47:13.170
just to show that one off.

00:47:22.120 --> 00:47:28.910
Okay, so we see which user is logged in,
how long they're logged in, and from...

00:47:29.370 --> 00:47:36.630
and others have been involved in the
development of Apple Remote Desktop.

00:47:36.630 --> 00:47:41.480
The latest version of
Apple Remote Desktop is a powerful

00:47:41.480 --> 00:47:41.480
system management platform.

00:47:41.480 --> 00:47:41.480
Find out how to put these features
to use in different environments.

00:47:41.480 --> 00:47:41.480
Find out how to put these features
to use in different environments.

00:47:45.780 --> 00:47:50.420
So the default policy, again,
intended for a single administrator.

00:47:50.420 --> 00:47:53.850
You can change the policy on
any client using Get Info.

00:47:53.850 --> 00:47:58.500
Those policies get sent back down
again every time you authenticate.

00:47:58.500 --> 00:48:01.350
It also gets sent down at exactly
that moment when you change it.

00:48:02.820 --> 00:48:06.990
And look in ARD Agent Preferences
for the cache policies.

00:48:06.990 --> 00:48:13.200
And upgrading,
when you upgrade from 2x to 3o,

00:48:13.200 --> 00:48:17.990
that requires that you actually turn on
that user accounting and reporting stuff.

00:48:18.060 --> 00:48:21.640
Next,
we're going to actually have more demos,

00:48:21.640 --> 00:48:27.000
but these ones are fun demos,
unlike these somewhat academic ones.

00:48:27.000 --> 00:48:28.920
And Steve Hayman is going
to take care of that.

00:48:28.950 --> 00:48:31.060
Adam, thank you very much for
your help with that.

00:48:31.060 --> 00:48:31.940
We appreciate it.

00:48:36.740 --> 00:48:39.180
I'd like to say a special hi to
all the Canadians in the crowd,

00:48:39.180 --> 00:48:41.700
all the Canadians in the crowd.

00:48:41.750 --> 00:48:46.410
Once again, WWDC is on a week when there
was a Canadian holiday.

00:48:46.410 --> 00:48:48.700
Monday was, of course,
Canadian Thanksgiving.

00:48:48.800 --> 00:48:50.700
It's coming a little
earlier than it used to.

00:48:50.700 --> 00:48:54.260
Global warming.

00:48:54.260 --> 00:48:54.290
Anyway, I...

00:48:55.350 --> 00:48:58.720
I was talking with the ARD engineers
over here and I said I thought I had

00:48:58.720 --> 00:49:02.070
some fun demos and they claimed that
ARD was not in fact a fun program.

00:49:02.070 --> 00:49:05.460
Well, of course it's a fun program
because any application that

00:49:05.460 --> 00:49:07.550
has scripting is a fun program.

00:49:07.550 --> 00:49:11.580
And any application that lets you
do something stupid on not just

00:49:11.660 --> 00:49:16.630
your own computer but on nine other
computers or perhaps 500 computers is

00:49:16.630 --> 00:49:19.230
by definition kind of a fun program.

00:49:19.240 --> 00:49:23.030
So I want to talk a little bit
about the scripting and automator

00:49:23.030 --> 00:49:25.560
features that are in Remote Desktop.

00:49:25.610 --> 00:49:28.370
One of the nice things about this is
that I can dream up my own additional

00:49:28.380 --> 00:49:32.590
features now for Apple Remote Desktop and
implement them myself and I don't

00:49:32.590 --> 00:49:33.770
have to bother these guys.

00:49:33.780 --> 00:49:35.930
So here is one simple
example of something a lot of

00:49:35.930 --> 00:49:37.340
people would probably like.

00:49:37.420 --> 00:49:40.510
I've got a list of,
can I say by the way how much fun

00:49:40.510 --> 00:49:44.330
it is to be sitting down there
waiting for your demo watching the

00:49:44.330 --> 00:49:46.940
previous guy renaming the computers.

00:49:46.940 --> 00:49:46.940
You're going, oh my god.

00:49:49.500 --> 00:49:55.770
So, crossing our fingers here.

00:49:55.920 --> 00:49:57.350
Here's a little Apple script.

00:49:57.440 --> 00:50:00.500
This is a remote desktop Apple script.

00:50:00.500 --> 00:50:04.790
If we look in script editor in
the dictionary for remote desktop,

00:50:05.150 --> 00:50:06.390
You can see some of what's available.

00:50:06.390 --> 00:50:10.880
There's a whole suite here of different
tasks you can create and different

00:50:10.880 --> 00:50:13.860
objects such as computers and computer
lists and you can send them messages

00:50:13.860 --> 00:50:17.850
and you can make up your own tasks on
the fly and create scripts and automated

00:50:17.850 --> 00:50:23.010
actions and Cocoa applications that tell
Remote Desktop to go and do something.

00:50:23.290 --> 00:50:24.360
So here's a simple example.

00:50:24.360 --> 00:50:28.160
This is a script that's going to tell
Remote Desktop to look up the selected

00:50:28.160 --> 00:50:33.060
computers and then tell Terminal to
launch an SSH session to each one.

00:50:33.100 --> 00:50:35.870
I'm a command line,
terminal-oriented kind of guy here,

00:50:35.870 --> 00:50:39.280
so I would find it convenient,
and in fact, this actually was a feature

00:50:39.280 --> 00:50:40.780
that I asked the team for.

00:50:40.780 --> 00:50:44.010
Could we not have an easy way
to let me start a new Terminal

00:50:44.090 --> 00:50:46.510
SSH session to the selected computers?

00:50:46.520 --> 00:50:48.940
Well, I don't need to wait for them.

00:50:48.940 --> 00:50:51.280
I can come over here and
select a bunch of computers,

00:50:51.480 --> 00:50:56.790
and I've arranged to have this particular
script in my script menu already.

00:50:57.200 --> 00:50:58.420
I thought I had.

00:50:58.420 --> 00:51:00.750
Well, we'll just run it from here.

00:51:00.880 --> 00:51:02.940
If we run this,
this will actually ask Terminal to

00:51:03.030 --> 00:51:06.980
open a new window with an SSH session
to each of the nine computers.

00:51:06.980 --> 00:51:10.250
So I think for a lot of admins,
this is a script they've already written.

00:51:10.250 --> 00:51:13.580
Once they found that Remote Desktop had
this ability to determine,

00:51:13.580 --> 00:51:15.840
to allow you to determine
the selected computers,

00:51:15.840 --> 00:51:20.440
and knowing that Terminal has the ability
to launch a new command to a new machine,

00:51:20.440 --> 00:51:22.490
you can combine these two things.

00:51:22.490 --> 00:51:23.410
Really interesting.

00:51:23.420 --> 00:51:26.480
Scripting is this sort of order
N squared process where it gets

00:51:26.560 --> 00:51:29.320
much more interesting depending
on how many more applications you

00:51:29.320 --> 00:51:30.460
can roll into the same script.

00:51:30.480 --> 00:51:33.810
So that's a pretty easy one that
I think a lot of administrators

00:51:33.970 --> 00:51:35.590
would find to be very handy.

00:51:35.600 --> 00:51:39.700
Now, because we've got scripting,
we've also got the ability to

00:51:39.700 --> 00:51:44.420
create our own automator workflows
that talk to Apple Remote Desktop.

00:51:44.420 --> 00:51:48.520
Remote Desktop ships with something
like 30 automator actions.

00:51:48.520 --> 00:51:50.840
There are a bunch more you can get.

00:51:50.860 --> 00:51:53.400
If you go to automator.us.

00:51:53.420 --> 00:51:56.180
slash ARD,
you can find another 30 actions.

00:51:56.180 --> 00:51:57.290
I think I've got all of those in here.

00:51:57.400 --> 00:52:01.460
But there are simple actions that will
get the currently selected computers,

00:52:01.460 --> 00:52:04.300
that will ask them all to
open a particular application,

00:52:04.300 --> 00:52:06.320
or to empty the trash, or to restart.

00:52:06.320 --> 00:52:08.650
And you can build your own
little mini applications in

00:52:08.660 --> 00:52:10.520
Automator like this right away.

00:52:10.520 --> 00:52:13.330
Let me start with find
Remote Desktop items.

00:52:13.340 --> 00:52:15.140
We're going to find,
I've got a computer list called

00:52:15.140 --> 00:52:19.650
WWDC that's referring to those
nine computers over there.

00:52:19.660 --> 00:52:22.400
And then I just want to be
able to lock all the screens.

00:52:22.400 --> 00:52:23.250
So this is a very, very simple.

00:52:23.300 --> 00:52:24.920
Workflow.

00:52:25.010 --> 00:52:27.260
Find a computer list,
lock all the screens with

00:52:27.260 --> 00:52:28.590
a particular message.

00:52:32.390 --> 00:52:34.750
And if we run this little workflow,
I can't see the screen,

00:52:34.760 --> 00:52:37.020
so I'm desperately hoping
that they will all lock.

00:52:37.310 --> 00:52:39.210
Have they in fact locked.

00:52:39.700 --> 00:53:07.800
[Transcript missing]

00:53:11.390 --> 00:53:11.840
That's a good one.

00:53:11.840 --> 00:53:12.040
Hang on.

00:53:12.100 --> 00:53:16.160
You know what I'm going to do?

00:53:16.160 --> 00:53:16.860
I had this idea here.

00:53:16.860 --> 00:53:19.720
I'm going to take the opportunity
to have a drink of water right now

00:53:19.720 --> 00:53:20.980
before I get on the plane tomorrow.

00:53:20.980 --> 00:53:22.170
Yeah.

00:53:25.000 --> 00:53:31.600
[Transcript missing]

00:53:36.760 --> 00:53:37.700
How are we doing over there, Bruce?

00:53:37.700 --> 00:53:38.700
We're back?

00:53:38.700 --> 00:53:39.700
They're booting.

00:53:39.700 --> 00:53:40.700
They're booting.

00:53:40.700 --> 00:53:41.060
That's great.

00:53:41.170 --> 00:53:42.700
Bruce is going to give them
the big thumbs up over there.

00:53:42.700 --> 00:53:44.700
Bruce, you've got a speaker badge for
this show just so you could,

00:53:44.700 --> 00:53:47.170
and all you're doing is basically
sitting there and telling

00:53:47.170 --> 00:53:48.620
me what's on those screens,
right?

00:53:48.700 --> 00:53:49.700
Okay.

00:53:49.700 --> 00:53:51.790
In fact,
let me open a little multi-observe

00:53:51.830 --> 00:53:55.000
window here so we can all see
what's on those nine computers.

00:53:55.860 --> 00:54:00.390
Well, I want to show you a couple
other variations on workflows

00:54:00.410 --> 00:54:03.310
and automator ideas.

00:54:03.360 --> 00:54:06.610
Here's one that--

00:54:07.200 --> 00:54:13.440
actually is a sequence of several
actions involving Keynote and

00:54:13.440 --> 00:54:15.930
Automator and Remote Desktop.

00:54:16.220 --> 00:54:19.690
What we're going to do here is build
a new Keynote presentation on the fly.

00:54:19.820 --> 00:54:23.900
Keynote has some Automator actions
that can create a new slide.

00:54:24.020 --> 00:54:27.650
We're going to use an Automator action
that talks to Remote Desktop that

00:54:27.650 --> 00:54:31.220
tells all nine of these machines
to pop up a simple question and

00:54:31.220 --> 00:54:33.160
answer dialogue on the screen.

00:54:33.210 --> 00:54:36.730
The students from my class over here
are going to vote on the questions.

00:54:36.830 --> 00:54:38.570
The data is going to flow
into the final action,

00:54:38.570 --> 00:54:43.490
which is going to use Keynote to
create a pie chart of the results.

00:54:45.030 --> 00:54:46.000
Fingers crossed.

00:54:46.000 --> 00:54:46.380
Are you ready?

00:54:46.400 --> 00:54:48.240
Because I'm going to do this.

00:54:48.300 --> 00:54:48.670
Yep.

00:54:48.780 --> 00:54:49.600
Here we go.

00:54:49.600 --> 00:54:51.740
The interesting one is one
I wrote down here in the middle.

00:54:51.780 --> 00:54:57.120
Ask a question and I will set it so
that it shows the action when run.

00:54:57.120 --> 00:54:59.020
So what's your question?

00:54:59.020 --> 00:55:01.440
What is your favorite CFL team?

00:55:03.050 --> 00:55:04.000
Fingers crossed.

00:55:04.000 --> 00:55:04.380
Are you ready?

00:55:04.380 --> 00:55:06.240
Because I'm going to do this.

00:55:06.240 --> 00:55:06.600
Yep.

00:55:06.700 --> 00:55:07.600
Here we go.

00:55:07.600 --> 00:55:09.720
The interesting one is one
I wrote down here in the middle.

00:55:09.780 --> 00:55:15.120
Ask a question and I will set it so
that it shows the action when run.

00:55:15.120 --> 00:55:17.020
So what's your question?

00:55:17.020 --> 00:55:19.440
What is your favorite CFL team?

00:55:30.760 --> 00:55:31.290
It is fun.

00:55:31.380 --> 00:55:32.570
See, Remote Desktop is fun.

00:55:32.580 --> 00:55:34.330
Here, it is fun.

00:55:34.360 --> 00:55:35.690
Except when you try to unlock the screen.

00:55:35.700 --> 00:55:38.160
So that part's not as much fun.

00:55:38.180 --> 00:55:41.190
Well, I want to do one last thing here.

00:55:42.620 --> 00:55:44.910
Let me just cross my fingers here
and hope that this is going to work.

00:55:45.020 --> 00:55:47.160
Give me one second here.

00:55:47.230 --> 00:55:51.490
I'm not always in front of my computer,
but I have a cell phone.

00:55:51.660 --> 00:55:54.630
I have a cell phone with
Bluetooth and I have Sol and

00:55:54.630 --> 00:55:56.750
Clicker on this cell phone.

00:55:56.790 --> 00:55:58.800
Sol and Clicker,
there are a few tools like this.

00:55:58.870 --> 00:55:59.740
I like Sol and Clicker.

00:55:59.740 --> 00:56:03.600
It executes Apple scripts
in response to phone events.

00:56:03.760 --> 00:56:07.080
And I have a menu on here
that I've set up called ARD.

00:56:07.520 --> 00:56:11.480
And in my ARD menu,
I can ask all nine of those machines

00:56:11.580 --> 00:56:13.770
to display their IP address.

00:56:13.860 --> 00:56:14.700
Oh, I'll put up the big window.

00:56:14.700 --> 00:56:15.340
Yep.

00:56:15.390 --> 00:56:17.000
If you can't, I'll see it.

00:56:17.020 --> 00:56:18.720
Thank you, Bruce.

00:56:18.850 --> 00:56:21.600
I would like all nine of these machines,
me clicking on the phone,

00:56:21.680 --> 00:56:28.330
to display their IP address.

00:56:31.610 --> 00:56:33.360
How full is the disk?

00:56:33.380 --> 00:56:33.820
OK.

00:56:33.860 --> 00:56:38.190
Show me the host name.

00:56:38.850 --> 00:56:40.540
The machine name got changed,
but not the host name.

00:56:40.610 --> 00:56:42.280
Show me the host name.

00:56:43.010 --> 00:56:45.700
And we spent an awful lot of money
to have a mixer over here to take

00:56:45.790 --> 00:56:48.280
the audio output from these nine
machines just so that I can do this.

00:56:48.410 --> 00:56:50.510
Say the host name.

00:56:50.990 --> 00:56:55.480
Welcome to WWDC from WWDC ARD Summit.

00:56:55.480 --> 00:56:57.550
Hey!

00:57:01.400 --> 00:57:08.500
How much did that mixer cost
just for this bit right here?

00:57:10.210 --> 00:57:12.430
This, what I'm doing here is kind of
a commercial for a session we're

00:57:12.480 --> 00:57:15.540
doing tomorrow on automating
Apple Remote Desktop at 9 o'clock.

00:57:15.540 --> 00:57:17.360
If you want to come to that session,
I'll explain exactly

00:57:17.770 --> 00:57:18.440
what's going on here.

00:57:18.440 --> 00:57:22.760
But I think you'll find that a few
simple little scripts can make Automator

00:57:22.760 --> 00:57:25.060
and Remote Desktop work together.

00:57:25.060 --> 00:57:27.180
I got one more I just thought of.

00:57:28.490 --> 00:57:28.900
Dangerous.

00:57:28.900 --> 00:57:30.260
Well,
you made the mistake of finishing early.

00:57:30.260 --> 00:57:30.920
That was your problem.

00:57:30.920 --> 00:57:32.700
You went too fast here.

00:57:32.720 --> 00:57:36.070
Let's just see here.

00:57:37.200 --> 00:57:39.090
Is there any reason this
is not going to work?

00:57:39.090 --> 00:57:40.710
Let's see here.

00:57:41.020 --> 00:57:48.490
Yeah, there's a Sudoku puzzle
on all nine computers.

00:57:52.470 --> 00:57:54.860
Alright, that's just a brief look at
what you can do with scripting.

00:57:54.860 --> 00:57:58.400
I'm so glad that they put that feature
into Remote Desktop because that keeps,

00:57:58.530 --> 00:57:59.910
A, it keeps me off their case.

00:57:59.910 --> 00:58:02.310
B, it means I can go off and
implement my own features,

00:58:02.310 --> 00:58:04.380
either as saved tasks,
automated workflows,

00:58:04.380 --> 00:58:06.020
even custom Cocoa applications.

00:58:06.110 --> 00:58:08.270
So if you can,
come to tomorrow morning's session

00:58:08.270 --> 00:58:11.340
and we'll go into great detail on
how a lot of this is actually done.