WEBVTT

00:00:10.310 --> 00:00:11.040
Good afternoon.

00:00:11.040 --> 00:00:12.460
My name is JD Mankovsky.

00:00:12.490 --> 00:00:17.320
I manage the Apple's enterprise
consulting services team.

00:00:17.320 --> 00:00:20.860
So we actually do a lot
of Xsan deployments,

00:00:20.860 --> 00:00:22.310
probably two or three a week.

00:00:22.310 --> 00:00:28.980
And I'm here to share with you a lot of
the knowledge that my team has acquired

00:00:28.980 --> 00:00:36.660
over the beta cycle as well as the 1.0
to 1.3 life of Xsan and looking forward

00:00:36.690 --> 00:00:40.180
to Xsan 1.4 in the next couple of years.

00:00:40.210 --> 00:00:45.680
So how many of you here
are running Xsan today?

00:00:45.680 --> 00:00:46.590
Wow.

00:00:46.610 --> 00:00:48.430
Excellent.

00:00:48.560 --> 00:00:51.780
So thank you very much for that.

00:00:51.780 --> 00:00:53.580
This is pretty, pretty amazing.

00:00:53.580 --> 00:00:57.800
And so obviously you guys
are pretty familiar with the

00:00:57.800 --> 00:01:00.040
Xsan and the file system.

00:01:00.040 --> 00:01:03.330
But what I wanted to do just
to put things in context is

00:01:03.330 --> 00:01:07.400
talk a little bit about kind of
the Xsan underpendings first.

00:01:07.400 --> 00:01:10.180
But first let's go through what
we're going to talk about today.

00:01:10.200 --> 00:01:13.240
To make sure that it
hopefully meets your needs.

00:01:13.240 --> 00:01:17.880
First we're going to quickly talk
about how Xsan works and how does it

00:01:17.880 --> 00:01:21.540
actually write to the Xserv rates,
the storage.

00:01:21.540 --> 00:01:24.890
Then we're going to talk about
some of the best Xsan volume

00:01:24.910 --> 00:01:29.240
configurations that we've seen around
as well as talk about affinities,

00:01:29.260 --> 00:01:32.640
talk about permissions,
talk about how to optimize your

00:01:32.660 --> 00:01:37.020
switch and things not to forget
when you configure those switches.

00:01:37.020 --> 00:01:40.180
As well as talk about some
heterogeneous deployments.

00:01:40.200 --> 00:01:43.630
So we're going to talk about some of
the best Xsan deployments that we've

00:01:43.630 --> 00:01:45.740
done using the StoreNext FX product.

00:01:45.740 --> 00:01:50.060
Quickly touch base on backup and then
spend some time on high availability.

00:01:50.060 --> 00:01:54.340
Because I know a lot of you try to
deploy Xsan products in critical,

00:01:54.340 --> 00:01:56.740
mission critical environments.

00:01:56.740 --> 00:02:01.200
And I'm pleased to announce that today
we actually have a solution for you

00:02:01.200 --> 00:02:05.800
in terms of mirroring your storage and
making sure that you have zero points

00:02:05.800 --> 00:02:08.400
of failure in your Xsan deployment.

00:02:12.810 --> 00:02:14.340
I figured that would pique your interest.

00:02:14.360 --> 00:02:18.560
So I put that at the end just
to make sure you stick around.

00:02:18.560 --> 00:02:20.870
So how does Xsan work?

00:02:21.090 --> 00:02:25.540
Well, a lot of you are very familiar with
how a traditional file system works.

00:02:25.540 --> 00:02:29.480
And every day when you plug in your iPod,
when you plug in your

00:02:29.570 --> 00:02:32.410
FireWire hard drive,
it just all works.

00:02:34.440 --> 00:02:38.020
And a great example of
that is HFS and UFS.

00:02:38.200 --> 00:02:40.010
Now,
I don't know if any of you have tried

00:02:40.010 --> 00:02:43.000
to take a FireWire hard drive and
you have two ports and hook up one

00:02:43.010 --> 00:02:44.940
to one machine and one to the other.

00:02:44.940 --> 00:02:47.240
That's not the kind of
stuff you really want to do,

00:02:47.240 --> 00:02:49.780
especially if you don't
want any data corruption.

00:02:49.780 --> 00:02:51.210
And we've seen that happen.

00:02:51.210 --> 00:02:54.320
I mean, we have seen that happen,
especially with XServe RAID,

00:02:54.320 --> 00:02:57.370
where people will just hook up
the RAID to a fiber channel switch

00:02:57.370 --> 00:02:59.280
and forget to do any LAN masking.

00:02:59.280 --> 00:03:02.340
And they have this beautiful volume
show up on a couple of machines.

00:03:02.340 --> 00:03:03.230
And they're like, oh, cool.

00:03:03.250 --> 00:03:06.120
I've got my... I've got a
cheap version of Xsan here.

00:03:06.120 --> 00:03:08.790
It ain't going to last very long,
let me tell you.

00:03:08.820 --> 00:03:14.980
Obviously, network attached storage,
you know, AFP, SMB, NFS,

00:03:14.980 --> 00:03:16.860
those are great protocols.

00:03:16.860 --> 00:03:21.140
Trying to run Final Cut on top of that,
and not quite supported.

00:03:21.140 --> 00:03:27.420
Okay, so you really want something like a
Xsan to do that kind of deployment.

00:03:27.420 --> 00:03:32.330
Obviously, from a permission perspective,
POSIX, ACLs are fully supported

00:03:32.330 --> 00:03:34.080
since we shipped Tiger.

00:03:34.420 --> 00:03:38.750
with those protocols.

00:03:38.770 --> 00:03:43.340
Now, on the SAN file system, obviously,
the disks are attached

00:03:43.340 --> 00:03:46.200
to all the compute,
well, they're attached to the

00:03:46.200 --> 00:03:49.580
fiber channel switch,
which is kind of hidden to the end user.

00:03:49.580 --> 00:03:52.940
All the end user sees is a volume,
and they have no idea how the whole

00:03:52.940 --> 00:03:55.870
underpinnings work on the back end,
and that's what we'll

00:03:55.920 --> 00:03:57.280
talk about very shortly.

00:03:58.540 --> 00:04:05.530
The good news is, on the permission side,
with Xsan 1.4 shipping very shortly,

00:04:05.600 --> 00:04:10.540
you can now have full
ACL support in the 1.4 version.

00:04:10.540 --> 00:04:11.750
So that's great news.

00:04:11.760 --> 00:04:18.180
That's a huge, just a great new feature
for the new product.

00:04:18.180 --> 00:04:19.970
So how does Xsan work?

00:04:20.180 --> 00:04:23.900
Well,
here's a very simple Xsan deployment.

00:04:23.900 --> 00:04:28.520
You have, you know,
right now you have one client machine.

00:04:28.540 --> 00:04:32.820
You have an XServe or two
XServe metadata servers.

00:04:32.820 --> 00:04:39.000
You have a LUN1, which is your metadata,
and you have three data LUNs.

00:04:39.000 --> 00:04:43.540
The LUN1 is always
configured in a RAID 1 setup.

00:04:43.540 --> 00:04:47.860
So we see a lot of customers
who just make everything RAID 5.

00:04:47.860 --> 00:04:49.380
That is not a good idea.

00:04:49.380 --> 00:04:54.500
Okay, so make sure you always configure
your metadata LUN as RAID 1.

00:04:54.520 --> 00:05:00.690
Also, we see a lot of people try to...
take advantage of those extra

00:05:00.690 --> 00:05:02.460
four drives that are in the bay.

00:05:02.460 --> 00:05:04.850
Also not recommended.

00:05:04.850 --> 00:05:07.680
Okay, so when you're writing
data to the metadata LUN,

00:05:07.680 --> 00:05:11.900
the packet sizes are a lot
different than data packet sizes.

00:05:11.900 --> 00:05:16.720
So yes, you have to spend half of a
RAID dedicated for your metadata,

00:05:16.720 --> 00:05:18.070
and that's just the way it is.

00:05:18.080 --> 00:05:22.140
So don't try to run anything
else on those four other disks.

00:05:22.140 --> 00:05:23.260
Use them as hot spares.

00:05:23.260 --> 00:05:27.170
You know, you get extra,
extra redundancy.

00:05:28.410 --> 00:05:34.260
So you go into the Xsan admin
and you select your first

00:05:34.260 --> 00:05:37.870
LUN as your journal data,
as your metadata.

00:05:38.700 --> 00:05:42.300
And, you know,
obviously that's the orange color

00:05:42.300 --> 00:05:44.590
coded here you see on screen.

00:05:44.770 --> 00:05:48.260
And, you know, the client has absolutely
no knowledge of,

00:05:48.260 --> 00:05:50.850
you know, of the file system layout.

00:05:50.880 --> 00:05:55.150
And so when the client wants
to write data to the SAN,

00:05:55.150 --> 00:05:59.500
he doesn't, he'll ask,
he will ask permission to the

00:05:59.500 --> 00:06:03.580
metadata and ask the metadata,
tell me where do I need

00:06:03.580 --> 00:06:06.680
to write this 12K file,
for example.

00:06:07.020 --> 00:06:09.720
And so the client talks
to the controller,

00:06:09.720 --> 00:06:14.450
the controller then, you know,
accesses that LUN, that RAID 1 LUN,

00:06:14.450 --> 00:06:19.180
that metadata LUN,
and the controller will read the

00:06:19.180 --> 00:06:23.160
catalog and give that information
back to the client and say,

00:06:23.160 --> 00:06:27.970
you need to write that file to, you know,
offset to LUN 2, for example,

00:06:27.970 --> 00:06:29.590
at offset 100.

00:06:29.600 --> 00:06:33.880
And then the client will then write
that data directly to that data LUN.

00:06:33.880 --> 00:06:37.000
So what I'm trying to say here.

00:06:37.020 --> 00:06:40.040
Is the, the clients will never
hit the metadata LUN.

00:06:40.080 --> 00:06:40.850
Okay.

00:06:41.160 --> 00:06:44.050
Only the metadata controller
will hit the metadata LUN.

00:06:44.060 --> 00:06:49.240
So, for some security purposes,
you could potentially, you know,

00:06:49.240 --> 00:06:52.330
create a,
a zone on your switch to prevent

00:06:52.330 --> 00:06:57.630
people from going into disk utility,
for example, and, you know,

00:06:57.690 --> 00:07:00.410
doing some nasty,
nasty things to the metadata LUN.

00:07:00.420 --> 00:07:04.540
Just, just, just a recommendation,
something you can potentially do if, if,

00:07:04.580 --> 00:07:06.540
if you feel like people are.

00:07:07.020 --> 00:07:08.510
You know, a little crazy out there.

00:07:08.520 --> 00:07:11.690
Or just remove disk utility from all the,
the client machines.

00:07:11.700 --> 00:07:14.080
That's another way of doing it.

00:07:14.500 --> 00:07:19.510
So then the client finally just
goes and writes to that data line.

00:07:19.680 --> 00:07:22.700
Another important point here is,
as you can see, when you're writing

00:07:22.700 --> 00:07:25.220
directly to a file system,
you've got direct access to the disk.

00:07:25.380 --> 00:07:28.860
Here,
you pretty much have a four-step process

00:07:28.940 --> 00:07:31.380
to actually write data to the SAN.

00:07:31.380 --> 00:07:37.380
So obviously, when we're using Xsan in a
file serving type scenario,

00:07:37.450 --> 00:07:44.250
the performance is really never going
to quite be as fast as direct attached.

00:07:44.910 --> 00:07:48.660
So just keep that in mind because you're
having to go through the metadata.

00:07:48.660 --> 00:07:52.560
You're having to ask permission and ask
for where do I write that file each time.

00:07:52.560 --> 00:07:58.320
And that obviously requires some
CPU cycles and requires some

00:07:58.320 --> 00:08:01.390
time to get the information back.

00:08:03.210 --> 00:08:06.970
Now, the beauty of the SAN is
obviously when you start adding

00:08:07.260 --> 00:08:09.410
a lot more of those data lawns.

00:08:09.530 --> 00:08:16.310
So, for example, if I stripe, well,
if I create a data lawn of two, you know,

00:08:16.310 --> 00:08:19.460
two raids or two
controllers in this case,

00:08:19.460 --> 00:08:23.280
two data lawns,
I am now striping my data across,

00:08:23.280 --> 00:08:26.470
which means that when I'm
actually writing that 12K file,

00:08:26.580 --> 00:08:30.380
again, the client will ask the metadata,
where do I write the file?

00:08:30.380 --> 00:08:35.620
The metadata now will say, well,
that 12K file, I'm going to split it in

00:08:35.620 --> 00:08:37.160
two chunks of 6K each.

00:08:37.160 --> 00:08:40.910
So, you write 6K to one of the
lawns and 6K to the other lawn.

00:08:41.020 --> 00:08:44.930
So, right now, you've basically,
you know, quote, unquote,

00:08:44.930 --> 00:08:46.820
doubled your performance.

00:08:46.820 --> 00:08:47.540
Okay?

00:08:47.540 --> 00:08:50.970
So, from a theoretical perspective,
we always say when you

00:08:50.970 --> 00:08:53.800
write to data lawns,
you're getting about 80

00:08:53.800 --> 00:08:55.220
megabytes per second.

00:08:55.220 --> 00:08:55.900
Okay?

00:08:55.900 --> 00:08:58.220
So, now that we've striped
two lawns together,

00:08:58.220 --> 00:08:59.660
you're getting 160.

00:08:59.660 --> 00:08:59.960
Right?

00:09:00.180 --> 00:09:02.880
If you have four lawns,
you're getting 320.

00:09:03.100 --> 00:09:07.590
Now, obviously, you can't go, you know,
to like 2,000 or 4,000

00:09:07.790 --> 00:09:08.990
megabytes per second.

00:09:08.990 --> 00:09:11.680
You run into some other
issues down the road.

00:09:11.680 --> 00:09:15.740
But that's kind of the theoretical
way of how to stripe your data

00:09:15.800 --> 00:09:19.650
and how to add more lawns to
gain more of that throughput.

00:09:23.140 --> 00:09:26.140
So the point is that from
a client perspective,

00:09:26.140 --> 00:09:28.460
it's totally transparent.

00:09:28.490 --> 00:09:33.860
So as you need more storage,
you can easily grow,

00:09:33.860 --> 00:09:39.360
buy more XR raids and grow those data
lines by creating new storage pools.

00:09:39.360 --> 00:09:42.520
And it's totally independent
of the client because,

00:09:42.520 --> 00:09:46.000
again, the client always talks
through the metadata.

00:09:46.000 --> 00:09:48.060
So you're changing the metadata.

00:09:48.060 --> 00:09:50.520
The metadata has a new
config file that says,

00:09:50.520 --> 00:09:53.080
hey, instead of writing from
block zero to block one,

00:09:53.080 --> 00:09:53.080
you're going to write from
block two to block three.

00:09:53.150 --> 00:09:55.140
So instead of writing
from block one million,

00:09:55.140 --> 00:09:57.710
I can now write data from block
zero to block two million.

00:09:57.740 --> 00:10:00.080
And six months from now,
you add a couple more raids,

00:10:00.080 --> 00:10:02.160
and you can write to block three million.

00:10:02.200 --> 00:10:09.640
So you get the benefit of a
global file system by using Xsan.

00:10:13.840 --> 00:10:17.650
So that was just a quick high-level
overview of how the file system

00:10:17.650 --> 00:10:21.600
and how Xsan writes to the storage.

00:10:22.450 --> 00:10:25.960
When we engage customers
and they tell us,

00:10:25.990 --> 00:10:28.860
hey, we want to deploy Xsan,
we went to NAB, you know,

00:10:28.860 --> 00:10:31.410
we love what we saw, we've got the big,
we've got the checkbook,

00:10:31.410 --> 00:10:32.800
we're ready to spend some money.

00:10:32.800 --> 00:10:34.510
We like that, right?

00:10:34.550 --> 00:10:36.320
Obviously, we all like that.

00:10:36.320 --> 00:10:40.540
But the most important thing to
do first is to really understand,

00:10:40.540 --> 00:10:45.130
you know, the customer's requirements
and their goals when they say,

00:10:45.130 --> 00:10:49.630
hey, I want to go spend, you know,
half a million dollars or a million

00:10:49.630 --> 00:10:51.840
dollars on a SAN deployment.

00:10:52.300 --> 00:10:56.500
Really understanding, you know,
what they're using today, right?

00:10:56.500 --> 00:10:59.620
If they're using, you know,
just a bunch of disks and

00:10:59.790 --> 00:11:03.130
they have direct attach XServe
rates to Final Cut machines,

00:11:03.130 --> 00:11:07.000
what are their requirements,
what are their needs, right?

00:11:07.000 --> 00:11:13.090
Obviously, you know, understanding,
you know, if they're a 24 by 7, you know,

00:11:13.090 --> 00:11:14.140
operation.

00:11:14.140 --> 00:11:17.990
You know, if they're early adopters
of new technologies,

00:11:18.000 --> 00:11:21.100
you know,
do they have any Mac experience?

00:11:21.100 --> 00:11:22.280
Obviously, we're getting to that.

00:11:22.300 --> 00:11:25.350
We're getting a lot of new customers,
as you saw, you know,

00:11:25.430 --> 00:11:28.420
and understanding if they're
a Windows shop or a Mac shop.

00:11:28.510 --> 00:11:34.070
Those are all important key tidbits
that will let you know how easy or how

00:11:34.070 --> 00:11:39.920
hard the Xsan adoption and deploying
a SAN will be within that customer.

00:11:44.340 --> 00:11:46.490
Also, the scope is really important.

00:11:46.560 --> 00:11:52.320
So understanding if it's a four-node SAN,
a 10-node SAN, or a 60-node SAN,

00:11:52.620 --> 00:11:55.440
things are a lot, you know, very,
very different in terms of how

00:11:55.440 --> 00:11:57.160
you approach the deployment.

00:11:59.380 --> 00:12:09.590
So, how is their IT staff?

00:12:09.640 --> 00:12:19.380
How technical they are?

00:12:19.610 --> 00:12:19.690
So by going in and meeting them,
you can very quickly gauge, you know,

00:12:19.690 --> 00:12:19.690
how technical these people are
if they've deployed SANs before.

00:12:19.690 --> 00:12:19.690
You can bring that conversation
to a whole other level.

00:12:19.690 --> 00:12:19.690
You know, very important to understand,
you know,

00:12:19.690 --> 00:12:19.690
how you're going to be able to do that.

00:12:19.850 --> 00:12:21.950
Xsan Mankovsky:
How they're going to react towards

00:12:21.950 --> 00:12:23.560
the this this this new technology.

00:12:23.580 --> 00:12:27.260
Xsan Mankovsky: And like I said,
really understanding if they know the

00:12:27.260 --> 00:12:29.140
Mac or if they don't know the Mac.

00:12:29.140 --> 00:12:31.670
What kind of training and certification.

00:12:31.670 --> 00:12:33.530
Are they willing to go through.

00:12:33.560 --> 00:12:35.490
That's something really important.

00:12:35.490 --> 00:12:39.220
So You know,
you can go and do the deployment.

00:12:39.220 --> 00:12:42.940
But once you leave and you go to another
customer to go to the next deployment.

00:12:43.710 --> 00:12:45.830
You don't want to start
getting those calls,

00:12:45.830 --> 00:12:49.130
you know, on the weekends or, you know,
at three o'clock in the morning

00:12:49.210 --> 00:12:53.500
because the sand's down Okay,
so it's really important to make

00:12:53.500 --> 00:12:57.110
sure that you leave documentation
and that the people know how to

00:12:57.110 --> 00:12:59.430
maintain How to maintain the system.

00:12:59.570 --> 00:13:01.710
Now, obviously,
if you sell seven by 24 support,

00:13:01.710 --> 00:13:03.400
you know, and you're willing to do that.

00:13:03.400 --> 00:13:05.250
That's a whole different ballgame.

00:13:05.250 --> 00:13:06.180
Okay.

00:13:08.000 --> 00:13:09.240
So training is important.

00:13:09.490 --> 00:13:11.770
Understanding how Xsan
works is important.

00:13:11.780 --> 00:13:14.720
Understanding their workflow.

00:13:14.940 --> 00:13:18.480
How are they accustomed
to work with their data?

00:13:18.730 --> 00:13:20.780
So if they're in a
video editing scenario,

00:13:20.850 --> 00:13:23.650
how are they moving those files?

00:13:23.720 --> 00:13:25.240
How are they ingesting their data?

00:13:25.600 --> 00:13:31.740
Those are all important things to
understand within their workflow.

00:13:31.820 --> 00:13:37.950
And obviously, a great situation is,
are the people that are going to be

00:13:37.990 --> 00:13:41.860
working on the SAN full-time employees?

00:13:41.980 --> 00:13:47.660
Or are those freelancers that they
hire as they have a big job coming in?

00:13:47.660 --> 00:13:50.800
Or they just hire people off
the street to come and do work?

00:13:50.890 --> 00:13:56.690
That's also another behavior
because maybe those freelancers

00:13:56.690 --> 00:13:59.540
have never used a SAN before,
and there definitely are some

00:14:00.790 --> 00:14:03.090
You know,
they have to understand again how

00:14:03.090 --> 00:14:07.820
to behave and how they write to the
SAN and if they copy files from an

00:14:07.820 --> 00:14:14.010
external hard drive onto the SAN,
there's some technical needs

00:14:14.050 --> 00:14:15.700
they need to really focus on.

00:14:15.700 --> 00:14:19.700
We'll talk about that a little later.

00:14:21.700 --> 00:14:24.700
Up time requirements
are also very important.

00:14:24.700 --> 00:14:28.700
Down time,
understanding their down time window.

00:14:28.700 --> 00:14:30.690
So when I talk to a
customer and they tell me,

00:14:30.710 --> 00:14:32.650
you know,
we have to be up and running 7 by 24

00:14:32.700 --> 00:14:36.080
or we have a 6 hour backup window,
you have to make sure that

00:14:36.080 --> 00:14:39.090
you build in the right,
you know,

00:14:39.090 --> 00:14:42.700
tape backup system to make sure you can
fit within their 6 hour backup window.

00:14:42.700 --> 00:14:47.090
So those are all important
points to bring up.

00:14:47.500 --> 00:16:27.300
[Transcript missing]

00:16:27.640 --> 00:16:32.570
mention who it is but it was it was
and literally four months later that

00:16:32.650 --> 00:16:36.420
you know they finally had the power so
we had to literally take each machine

00:16:36.420 --> 00:16:40.340
configure it turn it off take another
machine out of the box and we return it

00:16:40.340 --> 00:16:44.220
off until they had the right you know
proper cooling within the organization

00:16:44.240 --> 00:16:49.100
so you know we had we had another
customer who same thing we showed

00:16:49.100 --> 00:16:54.200
him the spreadsheet and we showed him
the Btu requirements and you know they

00:16:54.200 --> 00:16:58.250
told us well you know that room that we
had in mind just is not going to work

00:16:58.250 --> 00:17:02.560
and you know what it was great because
they took the time to go back find the

00:17:02.560 --> 00:17:07.450
right room and say okay we'll deploy
this in four months but unfortunately

00:17:07.450 --> 00:17:12.430
most of the time when we work with
those big agencies they want the sand

00:17:12.460 --> 00:17:17.680
yesterday okay they have the money
they're ready they got the check they

00:17:17.680 --> 00:17:22.890
finally they're finally ready to spend
it and they don't care right they don't

00:17:22.900 --> 00:17:26.460
care they're going live September you
know September 8th are going live and

00:17:26.460 --> 00:17:32.860
no matter what it has to go and it's
like make it happen and those are the

00:17:32.860 --> 00:17:38.210
scary ones those are really the scary
ones you have to be really careful about

00:17:39.570 --> 00:17:41.440
Understanding their
break-fix requirements.

00:17:41.820 --> 00:17:47.200
Again, if they want someone on site
within the next two hours,

00:17:47.200 --> 00:17:50.460
those are very expensive support
contracts to put in place.

00:17:50.460 --> 00:17:57.520
With the XServe and the XServe RAID,
we have a RAID kit for spare.

00:17:57.520 --> 00:18:00.220
We have an XServe kit.

00:18:00.260 --> 00:18:05.820
Make sure that when you deploy
your SAN that you have spares kits.

00:18:05.980 --> 00:18:09.330
We make it very easy on the
XServe and on the RAID to

00:18:09.330 --> 00:18:13.100
quickly replace a motherboard,
replace a power supply,

00:18:13.100 --> 00:18:14.300
replace a controller.

00:18:14.300 --> 00:18:20.140
Our recommendation is if the
customer buys five XServe RAIDs,

00:18:20.460 --> 00:18:22.240
get one spares kit.

00:18:22.250 --> 00:18:24.970
If they buy ten, buy a second spares kit.

00:18:24.980 --> 00:18:27.410
Our ratio usually is one to five.

00:18:27.410 --> 00:18:31.930
If you think about it,
five XServe RAIDs is ten controllers.

00:18:32.630 --> 00:18:37.880
Having one spare controller for each
ten RAID controllers is probably

00:18:37.880 --> 00:18:40.380
a good number to have in mind.

00:18:40.530 --> 00:18:44.710
Plus,
make sure you have plenty of spare disks.

00:18:46.980 --> 00:18:54.320
And back on the cooling thing,
make sure you monitor those XServe rates.

00:18:54.580 --> 00:18:57.520
So many times have we seen
those XServe raids run at over

00:18:57.520 --> 00:19:01.240
100 degrees Fahrenheit or,
you know, and it's really, you know,

00:19:01.240 --> 00:19:04.340
it really drastically lowers your mean
time between failure on the disks.

00:19:04.340 --> 00:19:06.420
So make sure you monitor that.

00:19:08.650 --> 00:19:11.430
Data migration is another great one.

00:19:11.530 --> 00:19:13.950
That's when the other bell, you know,
the other alert comes out in

00:19:13.950 --> 00:19:16.700
my head when customer says,
well, we'd like you to do data migration.

00:19:16.700 --> 00:19:20.220
That's also very,
that also is very time consuming.

00:19:20.220 --> 00:19:24.460
So make sure that you plan that
properly and that the customer can,

00:19:24.460 --> 00:19:27.340
if possible,
do a backup before you show up to

00:19:27.340 --> 00:19:31.670
deploy the SAN and they have all
their data backed up properly.

00:19:33.250 --> 00:19:35.560
Obviously, budget is very important.

00:19:35.570 --> 00:19:39.600
If the customer has a fixed budget,
it's a lot harder because

00:19:39.600 --> 00:19:43.080
you have to make sure you
don't forget any single cable,

00:19:43.080 --> 00:19:44.120
any single transceiver.

00:19:44.120 --> 00:19:47.920
So make sure you build always
kind of an N plus one situation,

00:19:47.980 --> 00:19:48.830
I call it.

00:19:48.840 --> 00:19:54.070
So when the customer buys 20
PowerMax and 20 fiber channel cards,

00:19:54.120 --> 00:19:58.360
make sure you put in an extra
fiber channel card for a spare.

00:19:58.710 --> 00:20:02.040
Because if a fiber channel card goes
bad and they're in a 7 by 24 shop,

00:20:02.040 --> 00:20:03.180
it's better for them to buy a 7 by 24.

00:20:03.200 --> 00:20:04.570
So just to have a spare.

00:20:04.570 --> 00:20:07.860
They can always call
AppleCare afterwards and get a swap.

00:20:07.860 --> 00:20:10.870
But it's always good to have
some spare transceivers,

00:20:10.880 --> 00:20:13.910
some spare cables,
some spare fiber channel cards.

00:20:13.910 --> 00:20:17.000
Just make sure you have
that built into your quote.

00:20:23.740 --> 00:20:28.820
Another really important point
is stay within a certified

00:20:28.820 --> 00:20:31.260
and tested environment.

00:20:31.260 --> 00:20:36.100
Try not to deviate too much from
our best practices documentation

00:20:36.100 --> 00:20:37.680
that we have out there.

00:20:37.690 --> 00:20:40.190
Make sure to stay within that.

00:20:40.220 --> 00:20:45.250
If you go too far out,
then you're going to run into issues.

00:20:45.260 --> 00:20:49.040
There's too many components in a SAN.

00:20:49.350 --> 00:20:53.920
You've got the PowerMax,
you've got the fiber channel switches,

00:20:53.920 --> 00:20:59.220
you have the cables, you have the RAIDs,
you have this whole environment.

00:20:59.220 --> 00:21:04.180
And there's so many variables that you
want to make sure that you pick the

00:21:04.390 --> 00:21:07.120
components that Apple has certified.

00:21:07.120 --> 00:21:14.860
So when I have a customer that tells me,
hey, I'm interested in buying a MGE UPS.

00:21:15.420 --> 00:21:18.710
Because the APC UPS is, you know,
100 bucks more.

00:21:18.720 --> 00:21:22.790
And I'm going to go and tell them, well,
you know what, we've certified, you know,

00:21:22.790 --> 00:21:23.580
the APC UPS.

00:21:23.580 --> 00:21:25.050
You know, it's been tested.

00:21:25.050 --> 00:21:25.660
It works.

00:21:25.660 --> 00:21:29.180
You can do, you know,
controlled shutdown.

00:21:29.180 --> 00:21:30.580
That's all been tested.

00:21:30.580 --> 00:21:33.520
We haven't done any testing with MGE.

00:21:33.520 --> 00:21:37.160
So we'd rather you get, you know,
an APC UPS.

00:21:37.160 --> 00:21:37.590
Right.

00:21:37.590 --> 00:21:40.730
So you have to be, you know,
really honest and say, we'd rather just,

00:21:40.760 --> 00:21:42.160
let's just stay focused.

00:21:42.160 --> 00:21:44.410
And to make sure this thing
works within your timeline.

00:21:45.250 --> 00:21:47.750
Let's stay within, you know,
this tested environment that we

00:21:47.750 --> 00:21:50.220
feel comfortable and that we've
been deploying for the past,

00:21:50.270 --> 00:21:51.760
you know, 12, 18 months.

00:21:54.250 --> 00:21:56.640
Also,
make sure you understand their future

00:21:56.640 --> 00:21:58.540
growth and future requirements.

00:21:58.540 --> 00:22:03.420
Okay,
so when you buy a Qlogic switch and,

00:22:03.420 --> 00:22:06.600
you know, the Qlogic switch comes
in an 8-port config,

00:22:06.680 --> 00:22:12.280
12-port config, 16-port config, or,
you know, the fully unlocked 20-port.

00:22:12.760 --> 00:22:16.590
If the customer is going to be deploying
this within a small environment and

00:22:16.590 --> 00:22:19.780
you know they're never going to grow,
that it's really just for

00:22:19.780 --> 00:22:22.120
two or three workstations,
then fine.

00:22:22.120 --> 00:22:24.980
They can buy, you know,
the entry-level Qlogic switch.

00:22:24.980 --> 00:22:27.790
But if they're going to grow
the system in six months,

00:22:27.980 --> 00:22:30.570
you know, just have them spend the money,
you know,

00:22:30.590 --> 00:22:32.750
on the fully unlocked Qlogic switch.

00:22:32.840 --> 00:22:36.590
Don't have them go and spend
$2,000 for each four ports after

00:22:36.670 --> 00:22:40.080
that because then the price gets,
you know, exorbitant.

00:22:40.140 --> 00:22:42.530
So make sure you understand
their requirements.

00:22:42.760 --> 00:22:46.450
For the next year, for the next,
you know, 18 months to make sure

00:22:46.540 --> 00:22:48.540
you build this properly,
right?

00:22:48.540 --> 00:22:52.240
If you, if they have 10 machines and
you're putting in a 24-port

00:22:52.240 --> 00:22:56.210
Ethernet switch for your metadata,
and, but they're planning on deploying

00:22:56.350 --> 00:23:00.120
30 machines in six months,
just put in a 48-port Ethernet switch,

00:23:00.120 --> 00:23:00.700
right?

00:23:00.700 --> 00:23:04.920
Don't go and put a 24-port and
then cascade another 24-port.

00:23:04.920 --> 00:23:07.610
Those are, that's a bad idea, right?

00:23:07.870 --> 00:23:09.620
Especially because, you know,
as you know,

00:23:09.620 --> 00:23:12.390
the metadata network has to be
very efficient and very fast.

00:23:12.810 --> 00:23:15.000
So by cascading this,
you're adding more latency.

00:23:15.000 --> 00:23:18.440
So just those kind of little
tidbits that you just,

00:23:18.460 --> 00:23:22.750
you know, you want to make sure you
get it right the first time.

00:23:22.780 --> 00:23:26.620
And again, set proper expectations, okay?

00:23:26.620 --> 00:23:28.440
Rome was not built in a day.

00:23:28.460 --> 00:23:31.180
So make sure they understand that.

00:23:31.200 --> 00:23:34.010
And that's not always easy, especially,
you know,

00:23:34.010 --> 00:23:38.130
in the movie industry and in the,
you know, the TV industry because, again,

00:23:38.130 --> 00:23:40.520
they want everything now or yesterday.

00:23:43.150 --> 00:23:47.170
So let's talk a little bit about
some third-party add-ons that

00:23:47.170 --> 00:23:52.630
we feel are a requirement every
time you put a SAN together.

00:23:54.150 --> 00:23:56.330
Before that,
I just wanted to put up there the power

00:23:56.340 --> 00:23:59.550
distribution to make sure you guys
understand some of the requirements

00:23:59.650 --> 00:24:01.020
for some of the products up there.

00:24:01.100 --> 00:24:07.100
Okay, so you're putting a sandbox to,
that's a 7,000 watt product.

00:24:07.210 --> 00:24:10.070
Okay, so make sure you're aware of that.

00:24:10.100 --> 00:24:17.420
You put in a quad core, you know, G5,
you know, that's 550 watts.

00:24:17.420 --> 00:24:20.900
But that's while you're
using the product.

00:24:21.010 --> 00:24:25.330
Okay, on startup,
that thing will draw seven amps.

00:24:25.420 --> 00:24:30.670
Okay, so make sure that you don't put
four machines on a 20 amp circuit,

00:24:31.050 --> 00:24:32.810
because guess what?

00:24:33.090 --> 00:24:36.380
Your circuit is not going to-- I mean,
if you have to reboot those machines,

00:24:36.410 --> 00:24:38.960
your circuit will just blow up.

00:24:38.980 --> 00:24:40.360
It's that simple.

00:24:40.360 --> 00:24:42.090
So make sure you keep that in mind.

00:24:42.100 --> 00:24:44.150
It's not just while I'm running it.

00:24:44.160 --> 00:24:48.410
It's what happens if the power goes down,
like we had a few weeks

00:24:48.590 --> 00:24:50.190
ago with the heat.

00:24:50.340 --> 00:24:53.570
If the power goes down,
the bring up procedure is

00:24:53.570 --> 00:24:55.160
really important as well.

00:24:55.240 --> 00:24:59.230
And making sure that you can bring that
up without bringing your entire building

00:24:59.290 --> 00:25:01.990
down is probably a really good idea.

00:25:05.160 --> 00:25:06.730
On the cooling side, same thing.

00:25:06.970 --> 00:25:09.260
My recommendation,
just put a spreadsheet together,

00:25:09.260 --> 00:25:12.450
make sure people really understand that.

00:25:12.470 --> 00:25:15.010
This is another really funny story.

00:25:15.010 --> 00:25:20.130
We're in the data center and we're like,
damn, it's pretty hot in there.

00:25:20.130 --> 00:25:23.800
We're looking at the temperature of
the rays and they're like 90 degrees.

00:25:23.800 --> 00:25:27.770
We're looking at the air
conditioning up there and we're like,

00:25:28.010 --> 00:25:29.570
that thing's not blowing.

00:25:29.570 --> 00:25:31.560
It's not cooling or barely.

00:25:31.960 --> 00:25:35.620
Well, yeah, because the air conditioning
was pointing towards the air

00:25:35.640 --> 00:25:37.270
conditioning sensor in the room.

00:25:37.270 --> 00:25:41.470
So basically they were cooling the
sensor and the sensor was like,

00:25:41.590 --> 00:25:44.380
oh, cool, it's really cool in this room.

00:25:44.380 --> 00:25:47.920
But the rest of the room was
like running at over 90 degrees.

00:25:47.920 --> 00:25:53.310
So it seems really basic,
but it happens every week.

00:25:53.310 --> 00:25:55.240
It just happens.

00:25:55.240 --> 00:25:57.800
So I thought I'd share that with you.

00:25:57.800 --> 00:25:59.610
The customer's not in the room,
by the way.

00:26:01.870 --> 00:26:02.680
Hardware setup.

00:26:02.680 --> 00:26:05.970
Again, you're not going to run in
this with the Mac Pro line,

00:26:06.080 --> 00:26:08.280
but this is something that we ran into.

00:26:08.280 --> 00:26:12.080
And I'm sure a lot of you have
Power Mac G5s and are using that today,

00:26:12.080 --> 00:26:13.020
obviously.

00:26:13.070 --> 00:26:17.120
So when you BTO a Power Mac,
BTO is built to order.

00:26:17.120 --> 00:26:23.520
So if you get it from the Apple store,
as you know, there's a 133 PCIX slot and

00:26:23.790 --> 00:26:26.360
there's some slower PCI slots.

00:26:26.360 --> 00:26:31.670
So make sure that you put the
gigabit Ethernet NIC in there.

00:26:31.680 --> 00:26:32.720
Hardware setup.

00:26:32.720 --> 00:26:36.010
Again, you're not going to run in
this with the Mac Pro line,

00:26:36.010 --> 00:26:38.210
but this is something that we ran into.

00:26:38.210 --> 00:26:42.740
So if you get it from the Apple store,
as you know, there's a 133 PCIX slot and

00:26:42.740 --> 00:26:44.560
there's some slower PCI slots.

00:26:44.560 --> 00:26:48.260
So make sure that you put the
gigabit Ethernet NIC in there.

00:26:48.430 --> 00:26:54.150
Thank God we have built-in
video in the new XServe.

00:26:55.440 --> 00:26:58.140
So I want to personally
thank Doug Brooks for that.

00:26:58.170 --> 00:27:01.420
But the video card is
a 66 megahertz card.

00:27:01.520 --> 00:27:04.110
So make sure that if you
don't use the video card,

00:27:04.120 --> 00:27:05.610
if you don't need it, remove it.

00:27:05.670 --> 00:27:07.500
Because obviously,
if you put a fiber channel

00:27:07.500 --> 00:27:12.550
card that's a PCI-X card,
the lowest common denominator between the

00:27:12.550 --> 00:27:17.660
VGA card and the PCI fiber channel card,
it'll run at 66 megahertz.

00:27:17.660 --> 00:27:19.170
So just get rid of that video card.

00:27:19.240 --> 00:27:21.160
Use Apple Remote Desktop.

00:27:21.160 --> 00:27:23.810
It's fantastic.

00:27:24.150 --> 00:27:26.540
When you put in your code
and you buy XServe rates,

00:27:26.550 --> 00:27:28.410
make sure you don't forget the cables.

00:27:28.480 --> 00:27:30.540
Okay, the cables come with the XServe.

00:27:30.700 --> 00:27:33.890
There's no SFP to SFP cables
that come with the XServe rate.

00:27:33.960 --> 00:27:38.750
So make sure you don't forget to add
some additional SFP to SFP cables.

00:27:40.210 --> 00:27:42.810
When your customer,
when you're going in and this is a

00:27:42.810 --> 00:27:46.520
new installation and the customer
has to pull fiber optic cables,

00:27:46.520 --> 00:27:48.730
this is really, really important.

00:27:48.730 --> 00:27:49.420
Okay.

00:27:49.450 --> 00:27:52.530
I've been to customers
where first of all,

00:27:52.530 --> 00:27:57.150
they're like, yeah,
you need a pair of cables.

00:27:57.170 --> 00:28:01.620
So in their understanding is
one pair of cables will work,

00:28:01.620 --> 00:28:06.050
will actually allow you to plug
in both fiber channel ports

00:28:06.050 --> 00:28:08.340
in the back of the Power Mac.

00:28:08.420 --> 00:28:11.370
So we specify in our statement it works.

00:28:11.530 --> 00:28:14.440
You need two pairs of
fiber channel cables.

00:28:14.440 --> 00:28:16.820
Because again,
some people have never dealt

00:28:16.820 --> 00:28:18.260
with fiber channel cable.

00:28:18.260 --> 00:28:20.960
So they'll just take one
cable and they see two strands

00:28:20.960 --> 00:28:23.800
of optic and they're like,
okay, what do I do with that?

00:28:23.910 --> 00:28:24.380
Right.

00:28:24.380 --> 00:28:27.580
So just make sure you specify
two pairs of optical cables.

00:28:27.580 --> 00:28:31.690
And then the other thing we see is
if you see a customer pulling cable

00:28:31.690 --> 00:28:34.300
like the day before you show up,
you know,

00:28:34.300 --> 00:28:39.030
through the ceiling or something,
that's when you get a little concerned.

00:28:39.030 --> 00:28:39.710
Okay.

00:29:10.040 --> 00:29:14.140
Once you deploy the SAN and the
customer starts dropping frames or the

00:29:14.180 --> 00:29:18.170
volume doesn't mount on the machine,
it usually points back to who

00:29:18.170 --> 00:29:22.140
pulled your fiber and what happened
while that fiber was pulled.

00:29:22.270 --> 00:29:22.760
Right.

00:29:22.760 --> 00:29:26.340
Who kicked the fiber when they
were sitting at their desk?

00:29:26.340 --> 00:29:26.840
Okay.

00:29:26.840 --> 00:29:30.490
That's another thing that we've
seen quite often is make sure

00:29:30.610 --> 00:29:34.070
that Power Mac is in a corner
and that the fiber coming is well

00:29:34.070 --> 00:29:38.000
protected so that when the editor
is editing at the workstation,

00:29:38.000 --> 00:29:43.840
they're not, you know,
kicking in it with their feet and having

00:29:43.840 --> 00:29:46.820
you pull a whole new strand of 100 meter,
you know, optical cable.

00:29:46.820 --> 00:29:47.630
That would not be good.

00:29:50.520 --> 00:29:53.770
On the XServe RAID, make sure that both
Ethernet's are plugged in.

00:29:53.850 --> 00:29:55.890
So that's really important.

00:29:57.480 --> 00:30:00.770
So, you know, you don't need a gigabit
switch for the XServe raids.

00:30:00.980 --> 00:30:03.400
You know, if you have some nice
100 base T switches,

00:30:03.400 --> 00:30:07.120
I'm sure plenty of you have old
100 base T switches lying around.

00:30:07.120 --> 00:30:10.780
Those are perfect to monitor your
XServe raids and make sure that

00:30:10.780 --> 00:30:14.640
they're able to send notifications
if something would go bad.

00:30:14.650 --> 00:30:18.800
That is something else that we see
where you want to make sure your

00:30:18.860 --> 00:30:21.170
XServe raids are on the LAN network.

00:30:21.460 --> 00:30:24.450
Okay, don't put them on the metadata
network unless you set up,

00:30:24.470 --> 00:30:27.370
you know, a mail gateway of some sort
so it can send notifications.

00:30:27.400 --> 00:30:30.350
Xsan, you're going to want to make sure
that you're sending notifications out

00:30:30.350 --> 00:30:33.180
because you'd like to know if you have
a drave that's getting ready to fail.

00:30:33.270 --> 00:30:35.300
It'd be nice to know that it is failing,
right?

00:30:35.300 --> 00:30:40.210
And the email notification is a
fantastic feature that we have built in,

00:30:40.290 --> 00:30:43.090
so make sure you take advantage of it.

00:30:48.920 --> 00:30:53.610
When you deploy Xsan,
the most important thing to

00:30:53.870 --> 00:30:56.790
have part of your Xsan is a UPS.

00:30:57.010 --> 00:30:58.260
That is really important.

00:30:58.410 --> 00:31:02.000
Again, we meet with a lot of
customers who tell us,

00:31:02.000 --> 00:31:03.850
"Oh, we've got central UPS.

00:31:03.880 --> 00:31:04.750
Everything is cool.

00:31:04.760 --> 00:31:05.400
No problem.

00:31:05.400 --> 00:31:13.310
We don't need any UPS." Well,
I always take that with a grain of salt.

00:31:13.380 --> 00:31:18.870
Too many times I ran into a situation
where the customer said they had

00:31:18.980 --> 00:31:22.800
central UPS and you know what,
it wasn't the central UPS that failed,

00:31:22.840 --> 00:31:28.030
it was a fuse between the UPS,
the generator,

00:31:28.030 --> 00:31:31.650
and where all the hardware was
plugged in that blew up and the

00:31:31.680 --> 00:31:35.880
customer got into a pretty bad
situation in terms of data loss.

00:31:35.880 --> 00:31:39.500
Because obviously when you go into
the RAID and configure your RAID,

00:31:39.510 --> 00:31:42.960
it says make sure you have
UPS before turning drive cache on.

00:31:43.010 --> 00:31:45.120
Well, I mean, that is,
you have to make sure you

00:31:45.120 --> 00:31:46.690
have a UPS in the middle,
right?

00:31:46.750 --> 00:31:50.360
So I would at least
recommend to have UPSs,

00:31:50.360 --> 00:31:56.580
you know, at least on your XSERV RAIDs
and on your metadata servers.

00:31:56.580 --> 00:31:59.890
And obviously,

00:32:00.160 --> 00:32:03.880
When you're when you're to make
sure you have a schedule shut

00:32:03.880 --> 00:32:08.660
down and proper shutdown working,
the XSERS will shut down using

00:32:08.660 --> 00:32:12.800
this network management card,
which is that AP 9617 you see up there.

00:32:12.830 --> 00:32:14.560
That's a network management card.

00:32:14.620 --> 00:32:18.470
And that goes in the back of their on
each APC UPS is a slot in the back.

00:32:18.470 --> 00:32:23.500
So you buy that it's about a $230 product
you slide that in there you configure it.

00:32:23.500 --> 00:32:25.810
We'll talk about that in a second.

00:32:26.330 --> 00:32:29.860
And then you you install some software
on the XSERS and then you have

00:32:29.860 --> 00:32:33.920
this parachute software which will
gracefully shut down the XSERS when

00:32:34.060 --> 00:32:38.010
when you know your power gets below,
you know, a specific threshold.

00:32:38.020 --> 00:32:43.060
So that makes basically means that,
you know, with the XSERS being shut down.

00:32:43.060 --> 00:32:46.600
There's no more data being
written to the SAN and that makes,

00:32:46.600 --> 00:32:50.380
you know, the fact that, you know,
there's no Possibility really have

00:32:50.380 --> 00:32:52.220
you losing any any of your data.

00:32:52.230 --> 00:32:54.330
So that's that's really critical.

00:32:54.450 --> 00:32:55.420
Another component.

00:32:55.420 --> 00:32:59.750
Is the AP 9270 or 9207 I'm sorry.

00:32:59.750 --> 00:33:03.390
That is the what's called
a serial concentrator.

00:33:03.390 --> 00:33:05.630
You guys have noticed that on
the back of the XSERS RAID.

00:33:05.630 --> 00:33:06.970
We've got this little serial port.

00:33:07.210 --> 00:33:09.640
Okay, it's it you should use that.

00:33:09.760 --> 00:33:13.930
Okay, so using the little cable,
which is the Well,

00:33:13.930 --> 00:33:19.310
that's the Apple part number
TC 547 LL/A that's it's called

00:33:19.310 --> 00:33:20.740
a simple signaling cable.

00:33:20.740 --> 00:33:25.210
On the back of the APC serial
consider you have eight ports.

00:33:25.660 --> 00:33:31.070
So what you do is you hook up the
serial box that serial concentrator

00:33:31.080 --> 00:33:34.760
to the back of the UPS and then you
have eight ports available for you

00:33:34.900 --> 00:33:36.570
to plug in up to eight XSERS RAID.

00:33:36.750 --> 00:33:39.150
Okay, you only need one cable
for each XSERS RAID.

00:33:39.160 --> 00:33:40.530
You don't need to plug both of them.

00:33:40.530 --> 00:33:47.020
Okay, so That will make sure that
when the power goes down,

00:33:47.020 --> 00:33:51.150
it's going to send a flush
cache command on the RAID.

00:33:51.240 --> 00:33:54.560
And so from now on the data will
be written directly to disk.

00:33:54.590 --> 00:33:55.560
It won't go through the drive.

00:33:55.560 --> 00:33:56.560
Cache anymore.

00:33:56.560 --> 00:34:01.830
And when the power goes down, it's the,
you know, no problem.

00:34:01.970 --> 00:34:05.160
First of all, the XSERS will be shut down
because they're shut down through

00:34:05.160 --> 00:34:06.460
the network management card.

00:34:06.460 --> 00:34:08.470
And then the RAIDs have
all their data flushed.

00:34:08.560 --> 00:34:09.810
So you're you're good.

00:34:09.860 --> 00:34:10.660
You're good to go.

00:34:12.300 --> 00:34:15.120
The most important thing that
we also noticed is if you have

00:34:15.120 --> 00:34:17.660
a network management card,
it's obviously Ethernet.

00:34:17.720 --> 00:34:21.560
So that network management
card plugs into a switch,

00:34:21.820 --> 00:34:25.120
a gigabit Ethernet switch,
and then your XSERVs plug into

00:34:25.150 --> 00:34:26.680
that gigabit Ethernet switch.

00:34:26.830 --> 00:34:31.590
We'll make sure that gigabit Ethernet
switch is also plugged into the UPS.

00:34:32.590 --> 00:34:35.260
Because if it's not plugged
in and the power goes down,

00:34:35.300 --> 00:34:38.800
how the hell is it going to send
the signal to shut down the XSERVs?

00:34:38.870 --> 00:34:40.540
Just little things.

00:34:40.660 --> 00:34:42.540
Just little things.

00:34:44.460 --> 00:34:46.990
This is a fantastic user interface.

00:34:47.080 --> 00:34:49.440
So when you buy the
network management card,

00:34:49.480 --> 00:34:51.390
make sure you configure it.

00:34:51.430 --> 00:34:54.440
Okay, so it's not the easiest
thing to configure,

00:34:54.440 --> 00:34:55.360
unfortunately.

00:34:55.570 --> 00:34:59.590
It's not like APC has a default
IP address that you can just,

00:34:59.590 --> 00:35:00.620
you know, connect to.

00:35:00.890 --> 00:35:04.590
You have to basically hook up
the Ethernet to your PowerBook,

00:35:04.630 --> 00:35:09.240
and you send this ARP request with
the IP address and the MAC address.

00:35:09.240 --> 00:35:11.320
So on the card is
actually the MAC address.

00:35:11.360 --> 00:35:14.380
There's also a little receipt
that comes with it that has that

00:35:14.380 --> 00:35:16.330
MAC address written on top of it.

00:35:16.330 --> 00:35:19.170
Make sure you keep that
inside of your database.

00:35:19.350 --> 00:35:23.710
And so you basically send the
IP address you want to set that up.

00:35:23.800 --> 00:35:28.130
Then you send a ping request,
and then the name and password is APC.

00:35:28.130 --> 00:35:31.800
Okay, so then you can telnet into that,
configure the subnet,

00:35:31.820 --> 00:35:34.890
configure the router, configure,
you know, the DNS.

00:35:34.890 --> 00:35:38.100
And then finally,
you can then bring up Safari and,

00:35:38.100 --> 00:35:41.990
you know, start, you know,
using the web interface.

00:35:42.860 --> 00:35:46.760
So remember we talked about
simple signaling and using

00:35:46.760 --> 00:35:48.690
the simple signaling cable?

00:35:48.900 --> 00:35:54.310
Well, you want to make sure that you
enable the simple signaling shutdown.

00:35:54.340 --> 00:35:56.330
Because by default, it's disabled.

00:35:56.340 --> 00:35:59.040
So make sure you go into that
web interface and enable the

00:35:59.040 --> 00:36:00.700
simple signaling shutdown.

00:36:00.700 --> 00:36:03.040
If not,
it's not going to give you anything.

00:36:03.040 --> 00:36:09.630
What I also like about this web interface
is once you configure everything,

00:36:09.630 --> 00:36:13.660
you can actually
simulate a power failure.

00:36:13.660 --> 00:36:17.640
And it'll actually calculate
exactly how much uptime you have.

00:36:17.640 --> 00:36:20.420
So that's just a beautiful tool built in.

00:36:20.420 --> 00:36:22.350
Make sure you run this so
you can tell your customer,

00:36:22.450 --> 00:36:25.000
hey, you know what,
you've got about 15 minutes uptime.

00:36:25.000 --> 00:36:28.900
There's also email notification built
into the web interface for the APC.

00:36:28.980 --> 00:36:30.690
Make sure you configure that.

00:36:30.720 --> 00:36:32.070
Because what it'll do
is that every month,

00:36:32.070 --> 00:36:34.880
it'll basically... run a
self-test and send you an email

00:36:34.880 --> 00:36:36.400
saying everything is good.

00:36:36.490 --> 00:36:37.680
I like those emails.

00:36:37.910 --> 00:36:39.440
Everything is good.

00:36:39.510 --> 00:36:40.250
Perfect.

00:36:40.250 --> 00:36:43.260
And so it just runs a self-test
to make sure... because obviously

00:36:43.260 --> 00:36:44.810
the batteries have to be replaced.

00:36:44.930 --> 00:36:47.310
Every year, year and a half,
you have to make sure you replace

00:36:47.410 --> 00:36:48.740
your batteries on your UPS.

00:36:48.740 --> 00:36:50.500
It just doesn't keep on working.

00:36:53.260 --> 00:36:55.000
Upon power failure.

00:36:55.080 --> 00:36:59.470
So what happens if there
is a power failure?

00:36:59.470 --> 00:36:59.470
Well,

00:37:00.400 --> 00:37:05.350
Everyone familiar with the bring
down and bring up procedure of a SAN?

00:37:06.010 --> 00:37:07.700
Yes, very important.

00:37:07.980 --> 00:37:13.500
So when you shut down a SAN,
obviously the first thing you want to

00:37:13.500 --> 00:37:16.200
do is bring down all the workstations.

00:37:16.200 --> 00:37:20.720
Stop the SAN if you can, obviously,
with the Xsan admin.

00:37:20.720 --> 00:37:24.930
Bring all the workstations down,
the client machines.

00:37:26.740 --> 00:37:31.750
Then you can shut down the Xsers,
the metadata servers,

00:37:31.770 --> 00:37:37.470
and then you can shut down the
RAIDs and the Fibre Channel switch,

00:37:37.530 --> 00:37:38.850
if need be.

00:37:38.880 --> 00:37:44.290
On a bring-up procedure,
you want to do the exact opposite.

00:37:44.290 --> 00:37:48.220
So what you want to do is first
you want to bring up the QLogic

00:37:48.220 --> 00:37:50.960
switch or your Fibre Channel switch.

00:37:50.960 --> 00:37:54.440
You want to wait until that is booted up,
fully booted up.

00:37:54.520 --> 00:37:56.220
Then you want to bring up the RAIDs.

00:37:56.320 --> 00:37:59.020
Make sure the RAIDs are fully booted up,
and then you want to bring

00:37:59.020 --> 00:38:00.280
up your metadata servers.

00:38:00.320 --> 00:38:05.310
And the reason for that is those
Xsers boot pretty fast now,

00:38:05.310 --> 00:38:06.540
as you've noticed.

00:38:06.560 --> 00:38:13.640
If the Xsers boots up and it doesn't see
the switch and it doesn't see the RAIDs,

00:38:13.700 --> 00:38:15.370
it's going to freak out.

00:38:15.440 --> 00:38:18.660
So make sure that you do that properly.

00:38:18.680 --> 00:38:21.690
And we have this fantastic
feature built into the

00:38:21.690 --> 00:38:24.520
Apple Remote Desktop called System Setup.

00:38:24.640 --> 00:38:25.380
Set wait.

00:38:25.900 --> 00:38:28.890
And you can set that up for
startup after power failure.

00:38:28.900 --> 00:38:31.390
So set that up to two minutes.

00:38:31.400 --> 00:38:34.310
Now obviously you want to make
sure you tell the customer that.

00:38:34.430 --> 00:38:36.870
Because when they hit the power
button in the front of the Xsers,

00:38:36.940 --> 00:38:38.320
it's not going to boot up.

00:38:38.320 --> 00:38:43.470
It's going to wait for 30 seconds,
60 seconds, and they're going to be like,

00:38:43.480 --> 00:38:45.110
"It's not working.

00:38:45.120 --> 00:38:47.740
It's not working." And then all of a
sudden it's just going to start up.

00:38:47.740 --> 00:38:50.580
So set that up so that
your RAIDs come up,

00:38:50.740 --> 00:38:53.440
your QLogic switch or your
Fibre Channel switch comes up,

00:38:53.500 --> 00:38:55.480
and then your metadata
controllers come up,

00:38:55.480 --> 00:38:59.660
and all your other servers
and Power Mac clients.

00:39:00.760 --> 00:39:04.750
On the tape library side,
I just wanted to make a quick point.

00:39:05.020 --> 00:39:10.400
How long does it take to backup
6 terabytes with an LTO3 device?

00:39:10.500 --> 00:39:12.210
Anyone know?

00:39:12.680 --> 00:39:15.100
It's about 26 hours.

00:39:15.430 --> 00:39:19.600
So make sure that, again,
when you have a conversation

00:39:19.600 --> 00:39:23.100
with a customer in terms of
what is your backup strategy,

00:39:23.190 --> 00:39:24.940
just keep that in mind.

00:39:24.950 --> 00:39:32.480
Also, our recommendation is when
you hook up a LTO3 device,

00:39:32.510 --> 00:39:36.220
you usually have a server running
backbone or running a tempo.

00:39:36.220 --> 00:39:41.020
And what we usually do is we hook
up the-- we usually either add a

00:39:41.020 --> 00:39:45.400
second fiber channel card into that
backup machine and just plug in

00:39:45.400 --> 00:39:49.280
the Exabyte tape device directly
on the back of that machine.

00:39:49.280 --> 00:39:54.500
Or what we'll do is at least
put the management arm,

00:39:54.500 --> 00:39:58.150
the one gig management arm,
directly on the back of the machine

00:39:58.150 --> 00:40:05.060
and then put the IBM LTO3 tape library
mechanism into the fiber channel switch.

00:40:05.060 --> 00:40:10.020
We've seen some issues where we have
a fiber channel balancing driver.

00:40:10.020 --> 00:40:14.430
And there's been some issues
with backbone where the backup

00:40:14.430 --> 00:40:16.070
might fail if you don't do that.

00:40:16.110 --> 00:40:19.810
So our recommendation is just keep
it simple and just hook up the

00:40:19.860 --> 00:40:23.620
tape backup device directly to
the back of the server that will

00:40:23.620 --> 00:40:26.560
be acting as your backup server.

00:40:26.560 --> 00:40:30.560
And then again, when you quote those
types of backup devices,

00:40:30.560 --> 00:40:32.760
a lot of them have an
LC connector on the back.

00:40:32.760 --> 00:40:35.410
So they require optical.

00:40:35.420 --> 00:40:39.520
So make sure you don't forget the
transceivers and the optical cables.

00:40:39.520 --> 00:40:41.820
And put those on the quote.

00:40:41.820 --> 00:40:43.610
Or when you buy that,
just don't forget the optical

00:40:43.720 --> 00:40:45.710
cables that go with that.

00:40:48.050 --> 00:40:50.710
So some of the best practices.

00:40:50.770 --> 00:40:55.040
So when I have a customer that tells me,
hey, you know, we're going to be putting,

00:40:55.040 --> 00:40:58.810
you know,
40 terabytes or 40 or 50 terabytes,

00:40:58.820 --> 00:41:02.250
you know, volume, you know,
the most important thing is to

00:41:02.250 --> 00:41:06.280
make sure that you understand the,
what kind of video, what kind of codec

00:41:06.280 --> 00:41:08.000
they're going to be using.

00:41:08.000 --> 00:41:09.980
You know, is it going to be DV25?

00:41:09.980 --> 00:41:11.840
Is it going to be uncompressed HD?

00:41:11.840 --> 00:41:15.780
Obviously, you know,
DV25 is 3.5 megs per second

00:41:15.810 --> 00:41:17.980
and uncompressed HD 10-bit
is 3.5 megs per second.

00:41:18.000 --> 00:41:21.120
DV25 is 165 megabytes per second.

00:41:21.120 --> 00:41:25.420
So depending on their requirements,
you'll want to configure

00:41:25.420 --> 00:41:27.770
your storage pools,
you know, differently.

00:41:27.940 --> 00:41:28.320
Okay.

00:41:28.320 --> 00:41:31.820
When the customer has a
requirement for 40 terabytes,

00:41:31.820 --> 00:41:36.020
just don't build one single storage
pool and put all the LUNs in there.

00:41:36.020 --> 00:41:37.630
That's a really bad idea.

00:41:37.630 --> 00:41:38.120
Okay.

00:41:38.120 --> 00:41:40.500
Unless they're doing like HD, right?

00:41:40.500 --> 00:41:44.000
And then they need, you know,
they need the throughput.

00:41:44.000 --> 00:41:47.980
But if they're doing DV25,
it's probably better to build, you know,

00:41:48.020 --> 00:41:50.270
let's assume you have 12 data LUNs.

00:41:50.510 --> 00:41:54.560
It's probably better to build, you know,
four storage pools of four LUNs,

00:41:54.560 --> 00:41:56.470
data LUNs each, right?

00:41:56.630 --> 00:42:01.330
So you can take advantage of, you know,
the rotate capabilities, you know,

00:42:01.390 --> 00:42:05.000
in the XSAN admin, you know,
the rotate feature and take

00:42:05.040 --> 00:42:09.780
advantage of the parallelism when
it writes the data onto the SAN.

00:42:11.640 --> 00:42:17.330
What we've also seen is customers
who already have XServe RAIDs.

00:42:17.370 --> 00:42:20.130
Obviously, the RAID has been around
for many years now.

00:42:20.130 --> 00:42:25.920
So we go into customers and customers
have bought RAIDs with 180 gig drives,

00:42:25.920 --> 00:42:29.420
RAIDs with 250 gig drives,
RAID with 400 gig drives,

00:42:29.420 --> 00:42:32.520
and they're buying some new
RAIDs with 500 gig drives.

00:42:32.560 --> 00:42:41.670
So how do you build your SAN with
a mixture of different drive

00:42:42.810 --> 00:42:47.330
Thank you for joining us.

00:42:47.330 --> 00:42:56.400
We're going to talk about the
best practices for use in a

00:42:56.400 --> 00:43:01.530
variety of configurations.

00:43:01.530 --> 00:43:10.400
Come to this session to
learn best practices on SAN.

00:43:10.400 --> 00:43:14.730
JD Mankovsky Thank you for joining us.

00:43:14.730 --> 00:43:18.600
We're going to talk about the
best practices for use in a

00:43:18.600 --> 00:43:20.790
variety of configurations.

00:43:20.810 --> 00:43:24.710
Come to this session to
learn best practices on SAN.

00:43:24.710 --> 00:43:24.710
JD Mankovsky

00:43:25.930 --> 00:43:29.370
Well,
you've now put your critical catalog,

00:43:29.370 --> 00:43:33.360
your data, right,
on drives that have been around

00:43:33.360 --> 00:43:34.620
for about three to four years.

00:43:34.620 --> 00:43:37.870
You have no idea if they were
just sitting on someone's desk

00:43:37.870 --> 00:43:41.460
running at 90 degrees Fahrenheit,
you know, for the past four years.

00:43:41.460 --> 00:43:44.240
You know, where has that RAID been,
right?

00:43:44.240 --> 00:43:46.920
Just by looking at the dust,
probably built in,

00:43:47.020 --> 00:43:49.090
it'll give you a pretty good idea.

00:43:49.480 --> 00:43:53.270
Okay, so just make sure that you just be
upfront with the customer and say,

00:43:53.270 --> 00:43:56.030
you know what,
why don't we get a couple of, you know,

00:43:56.030 --> 00:43:59.120
let's get three new 500 gig
drives and let's just build a

00:43:59.200 --> 00:44:01.140
clean new set with brand new,
you know,

00:44:01.270 --> 00:44:05.970
500 gig hard drives and let's just
shell those 180 gig drives from now on.

00:44:05.980 --> 00:44:06.900
Okay.

00:44:06.900 --> 00:44:10.780
In the RAID admin,
if you haven't seen that in the 1.5,

00:44:10.780 --> 00:44:12.720
there's actually an uptime.

00:44:12.780 --> 00:44:16.710
It'll actually tell you for how
long those drives have been up,

00:44:16.710 --> 00:44:19.430
how many hours they've been running.

00:44:19.440 --> 00:44:23.120
So if you see, you know,
anything over 30,000 hours,

00:44:23.120 --> 00:44:25.170
it's probably time to replace them.

00:44:25.220 --> 00:44:26.780
It's probably a good idea.

00:44:26.800 --> 00:44:29.120
Okay, so just keep that in mind.

00:44:29.120 --> 00:44:33.390
We had a customer who had three
XR RAIDs of 250 gig drives and

00:44:33.630 --> 00:44:36.390
three XR RAIDs of 400 gig drives.

00:44:36.390 --> 00:44:40.670
And, you know, they were like, well,
how do we do this?

00:44:40.750 --> 00:44:43.950
Well, obviously,
since we're striping all the data, right,

00:44:43.950 --> 00:44:47.270
if you build one storage pool,
you're not going to take advantage

00:44:47.270 --> 00:44:49.110
of all the storage available.

00:44:49.120 --> 00:44:49.280
Right.

00:44:49.480 --> 00:44:52.740
So what we decided to do is just
build one storage pool with,

00:44:52.740 --> 00:44:57.180
you know, five LUNs of 250 gig drives and
one storage pool with six LUNs of,

00:44:57.180 --> 00:44:59.320
you know, 400 gig drives.

00:44:59.320 --> 00:45:01.040
And that worked pretty well.

00:45:01.080 --> 00:45:04.920
And we were going to, you know,
we asked them about deploying affinities,

00:45:04.960 --> 00:45:08.010
potentially also doing an affinity,
and they opted not to do

00:45:08.030 --> 00:45:10.720
that because affinity,
we'll talk about that.

00:45:10.720 --> 00:45:14.990
Affinities get a little bit more
complicated in some situations.

00:45:15.000 --> 00:45:18.400
Network configuration, DNS.

00:45:19.480 --> 00:45:22.630
DNS is essential in a
next-hand configuration.

00:45:22.640 --> 00:45:26.500
So make sure that your DNS is
working or that the customer has

00:45:26.500 --> 00:45:28.700
DNS working before you show up.

00:45:28.780 --> 00:45:31.910
Or if you have to set up DNS,
make sure that's the first thing you do.

00:45:31.920 --> 00:45:34.690
Tree spanning,
make sure they turn that off

00:45:34.690 --> 00:45:36.860
or they have port fast enabled.

00:45:36.860 --> 00:45:39.140
Make sure they don't have any QoS.

00:45:39.140 --> 00:45:42.790
And especially, you know,
if you sell them a 3Com switch or

00:45:42.790 --> 00:45:45.970
an Asante switch for the metadata,
that's great.

00:45:45.980 --> 00:45:49.360
Or an HP switch, they have, you know,
they have tree spanning.

00:45:49.500 --> 00:45:51.090
They're going to be
turned off by default.

00:45:51.110 --> 00:45:53.720
But if the customer wants
to use Cisco equipment,

00:45:53.720 --> 00:45:56.930
make sure that, you know,
you're either Cisco certified or you're

00:45:56.930 --> 00:45:58.890
going to be talking to their Cisco guy.

00:45:58.920 --> 00:46:02.140
Make sure they turn all that stuff
off because you have to make the

00:46:02.140 --> 00:46:05.620
metadata switch as dumb as a layer 2
switch pretty much to make sure that

00:46:05.620 --> 00:46:12.000
you're getting the best performance
when you're on your metadata network.

00:46:12.310 --> 00:46:14.200
Deploy a directory.

00:46:14.240 --> 00:46:18.250
Okay, so I know it's, you know,
you can probably run it without a

00:46:18.250 --> 00:46:21.880
directory in a small environment,
you know, make every user 501 users,

00:46:21.880 --> 00:46:23.540
and everything's happy.

00:46:23.540 --> 00:46:27.330
But as soon as you create a new user,
and that user is a 502 user,

00:46:27.600 --> 00:46:31.710
next time he creates a folder on the SAN,
he'll have access and no one else will.

00:46:31.710 --> 00:46:34.760
So just make it by default,
just build an open directory

00:46:34.760 --> 00:46:37.240
environment and configure it properly.

00:46:38.700 --> 00:46:42.940
If possible, I'd rather have the
DNS and the DHCP separate,

00:46:42.940 --> 00:46:44.030
if possible.

00:46:44.260 --> 00:46:46.660
Not always the case.

00:46:46.730 --> 00:46:53.050
If the customer has a specific,
very tight budget, not always possible,

00:46:53.050 --> 00:46:55.420
but usually it's a good thing.

00:46:56.000 --> 00:47:01.080
On the Final Cut Studio side, obviously,
we don't have any bandwidth

00:47:01.080 --> 00:47:03.460
reservation built into Xsan.

00:47:03.460 --> 00:47:08.470
So what I would recommend is use the
limit real-time video to put a specific

00:47:08.470 --> 00:47:13.810
number in there so that you don't have,
again, a freelance editor going in and

00:47:13.810 --> 00:47:18.130
putting like 12 tracks of video
and wanting to have a little bit

00:47:18.140 --> 00:47:21.800
of fun there and take all the
bandwidth from all the other users.

00:47:21.800 --> 00:47:24.010
So usually, though,
it's the kind of question

00:47:24.010 --> 00:47:27.500
that we'll ask the customer,
which is, "Well, how many tracks of video

00:47:27.500 --> 00:47:29.650
are you really going to,
each workstation,

00:47:29.650 --> 00:47:31.120
what are you going to be using?

00:47:31.190 --> 00:47:34.000
Two tracks, three tracks,
four tracks?" And then we'll

00:47:34.000 --> 00:47:37.100
set up that bandwidth limit
in the Final Cut application.

00:47:38.660 --> 00:47:41.440
And then obviously,
once the SAN is up and running,

00:47:41.490 --> 00:47:45.030
make sure you use the Xsan tuning tool.

00:47:45.140 --> 00:47:50.200
That'll give you a pretty good idea,
at least in terms of making sure that the

00:47:50.200 --> 00:47:55.030
cables and that there's no bad optical
or bad transceiver or something going on.

00:47:55.050 --> 00:47:57.620
But the real test is Final Cut.

00:47:57.620 --> 00:47:59.860
That's really your real test.

00:47:59.860 --> 00:48:01.170
So work with the editors.

00:48:01.170 --> 00:48:04.600
Once you have the SAN up and running,
make sure they start doing editing

00:48:04.600 --> 00:48:08.480
and kind of get into their workflow so
they can actually do some real testing.

00:48:08.600 --> 00:48:12.390
And make sure that they're not dropping
frames within the environment that

00:48:12.390 --> 00:48:14.660
they're going to be working in every day.

00:48:18.880 --> 00:48:27.820
So some of the best configurations,
you know, limit the number of volumes.

00:48:27.820 --> 00:48:27.820
So, you know,

00:48:28.730 --> 00:48:31.820
We've run into situations where,
you know, at the time,

00:48:31.820 --> 00:48:36.240
at the early stages of the Xsan,
you know, 1.0 days, we're like, well,

00:48:36.240 --> 00:48:39.800
maybe we should do one volume for ingest,
you know, one volume for editing,

00:48:39.800 --> 00:48:41.100
and one volume for playout.

00:48:41.110 --> 00:48:42.660
It was a bad idea.

00:48:42.660 --> 00:48:43.360
Okay.

00:48:43.360 --> 00:48:47.150
So our recommendation usually
is one big volume for editing,

00:48:47.150 --> 00:48:49.920
ingest and editing,
and then another volume

00:48:49.920 --> 00:48:51.710
potentially for playout.

00:48:51.740 --> 00:48:55.180
Again, it all depends on the
customer requirements.

00:48:55.180 --> 00:48:58.340
And obviously,
if they're going live to air,

00:48:58.600 --> 00:49:03.410
on their playout volume, like a TV,
you know, broadcast scenario,

00:49:03.650 --> 00:49:07.240
you don't want the editing people to
take the bandwidth and start dropping

00:49:07.310 --> 00:49:08.850
frames while you're playing on air.

00:49:08.850 --> 00:49:11.970
So those are the kind of
situations where you probably

00:49:11.970 --> 00:49:14.000
want a separate playout volume.

00:49:14.570 --> 00:49:18.100
Another thing you can do is,
even though we don't have

00:49:18.100 --> 00:49:22.720
any bandwidth limitation,
what you can do potentially is go

00:49:22.720 --> 00:49:27.580
into the QLogic fabric and limit
the port to a gig per second.

00:49:27.610 --> 00:49:31.280
So as you know, we can go up to two
gigs on the performance.

00:49:31.280 --> 00:49:36.060
But if you're only doing DV 25,
or a lower throughput type, you know,

00:49:36.180 --> 00:49:38.980
codec,
you can just go into the QLogic switch

00:49:38.980 --> 00:49:43.260
and limit at least your clients to,
you know, one gig per second,

00:49:43.260 --> 00:49:48.210
which would be plenty in many of the
codecs that you're using out there.

00:49:49.250 --> 00:49:54.830
What I also see a lot is editors
with their FireWire hard drives

00:49:54.920 --> 00:49:59.060
and plugging in or copying data,
large chunk of data from

00:49:59.060 --> 00:50:00.800
the finder over to the SAN.

00:50:00.850 --> 00:50:05.760
And that's something you have to be
aware of or make note of because when

00:50:05.760 --> 00:50:10.200
you're copying a large amount of data
from a local hard drive over to the SAN,

00:50:10.200 --> 00:50:14.100
the finder is like, oh, wow,
I've got all that throughput available.

00:50:14.100 --> 00:50:17.060
Let me just copy that as fast as I can.

00:50:17.060 --> 00:50:19.870
And what happens is that it'll
kill the bandwidth of all the

00:50:19.870 --> 00:50:23.790
other editors that are working,
and then they'll start dropping frames.

00:50:23.810 --> 00:50:26.890
So make sure you're aware of that.

00:50:26.900 --> 00:50:30.840
And again, by limiting to one gig per
second on the workstations,

00:50:30.840 --> 00:50:35.440
that's something you can prevent
because then they can't go beyond 100

00:50:35.440 --> 00:50:38.290
megabytes per second on each workstation.

00:50:40.840 --> 00:50:42.660
Don't cut corners.

00:50:42.660 --> 00:50:44.660
I mean, you know,
I see that way too much.

00:50:44.660 --> 00:50:48.790
I see people asking me, you know, hey,
JD, could we just buy one metadata

00:50:48.810 --> 00:50:51.940
server and just use one of the
Power Macs or one of the Mac Pros or

00:50:51.940 --> 00:50:54.000
as my second metadata controller?

00:50:54.000 --> 00:50:55.890
That's a bad idea.

00:50:55.890 --> 00:50:58.370
Because, you know,
software update comes up.

00:50:58.560 --> 00:51:00.840
Oh,
would you like to reboot your machine?

00:51:00.920 --> 00:51:04.780
And you had no idea that it actually
failed over to the failover metadata,

00:51:04.780 --> 00:51:07.600
which is now one of your
editor's workstations.

00:51:07.600 --> 00:51:10.680
And the editor just decides
to reboot the machine.

00:51:10.700 --> 00:51:12.840
Not a situation you want to get into.

00:51:12.840 --> 00:51:17.700
So make sure you spend, you know,
you spend the money and get two

00:51:17.760 --> 00:51:20.520
Xsers as your metadata servers.

00:51:22.510 --> 00:51:25.240
Make sure you configure the
metadata LAN as a RAID 1.

00:51:25.240 --> 00:51:28.670
That's really important.

00:51:28.670 --> 00:51:28.670
And again,

00:51:30.370 --> 00:51:33.540
You need about 10 gig of
space for 10 million files.

00:51:33.580 --> 00:51:35.520
So that is something
you need to be aware of.

00:51:35.540 --> 00:51:40.830
We had a customer who was doing,
they actually, so you know when a company

00:51:40.830 --> 00:51:42.940
sues another company,
they have to,

00:51:42.940 --> 00:51:46.610
they get all those big hard drives
full of like exchange PST files and

00:51:46.610 --> 00:51:50.860
a lot of Word documents and they scan
all that information with a bunch of,

00:51:50.860 --> 00:51:56.440
you know, servers and then all that gets
transferred into a large storage volume.

00:51:56.470 --> 00:52:01.730
So we install that and this
customer had or potentially would

00:52:01.770 --> 00:52:04.180
have up to 600 million files.

00:52:04.370 --> 00:52:04.860
Okay.

00:52:04.860 --> 00:52:10.770
So then that RAID 1 configuration with
two 500 gig drives is not going to work.

00:52:10.790 --> 00:52:15.180
So make sure that you have enough
space available on your metadata

00:52:15.180 --> 00:52:19.700
LUN to sustain some of those,
you know, extreme deployments.

00:52:23.940 --> 00:52:26.260
Make sure you take advantage of striping.

00:52:26.350 --> 00:52:30.300
Make sure you leverage the multi-pathing
that's built into our driver.

00:52:30.430 --> 00:52:36.210
Again, combine the LUNs with drives
of similar characteristics.

00:52:36.420 --> 00:52:40.660
Make sure you don't combine
400s with 500s or 250 with 500s.

00:52:41.010 --> 00:52:44.210
Make sure you do it right.

00:52:46.230 --> 00:52:50.440
Here's an example of a
potential typical deployment.

00:52:50.440 --> 00:52:53.100
You've got your metadata on one,
you've got your audio

00:52:53.100 --> 00:52:57.890
storage pool on another one,
and here you would basically create an

00:52:57.890 --> 00:53:00.040
affinity for the audio storage pool.

00:53:00.040 --> 00:53:04.150
You have your video storage pool,
which is comprised of four LUNs,

00:53:04.150 --> 00:53:07.380
and so that would give you,
from a total throughput,

00:53:07.600 --> 00:53:11.740
approximately 320 megabytes
per second on the video pool.

00:53:13.940 --> 00:53:19.540
Again, if people are doing audio work,
the audio characteristics are very

00:53:19.540 --> 00:53:24.700
different from the video world,
so make sure you don't have 10

00:53:24.700 --> 00:53:31.380
audio workstations sharing the same
SAN with a bunch of video people,

00:53:31.380 --> 00:53:34.380
because that's going to
cause a lot of issues,

00:53:34.380 --> 00:53:37.940
because the audio files are
usually very small files,

00:53:37.940 --> 00:53:40.880
and it will cause drop
frames on your SAN.

00:53:41.020 --> 00:53:43.750
Xsan Mankovsky: Obviously they're all
grouped in one volume.

00:53:43.750 --> 00:53:46.820
But again, with the beauty of affinities,
you can have a folder called

00:53:46.820 --> 00:53:48.240
audio and you can tag,
you know,

00:53:48.240 --> 00:53:51.380
you can have the audio guys right
directly to to the audio folder and

00:53:51.600 --> 00:53:54.330
that then they have a dedicated,
you know,

00:53:54.330 --> 00:53:56.750
lawn for their for their audio work.

00:53:58.870 --> 00:54:00.110
Directory integration.

00:54:00.380 --> 00:54:06.570
So a lot of that stuff is going to change
obviously in the Xsan 1.4 timeframe,

00:54:06.800 --> 00:54:08.320
thanks to ACLs.

00:54:08.690 --> 00:54:14.100
But up until the Xsan 1.4, you know,
Xsan 1.4, what's really important is

00:54:14.100 --> 00:54:17.770
what we usually do is we
create a group called editors.

00:54:18.010 --> 00:54:20.050
And let's say it's called 1025.

00:54:20.240 --> 00:54:23.160
And we put all the users in that group,
that editor group,

00:54:23.160 --> 00:54:25.090
and we make it the primary group ID.

00:54:25.130 --> 00:54:28.770
So we change the primary
group ID from 80 to 1025.

00:54:28.810 --> 00:54:32.620
You know,
obviously this is not a mobile home user,

00:54:32.620 --> 00:54:36.800
but what you do is you then
go in and create slash users.

00:54:36.800 --> 00:54:42.330
And you can see that it'll basically
create a local home to slash

00:54:42.330 --> 00:54:47.000
user slash Michael in this case,
and slash user slash

00:54:47.000 --> 00:54:49.800
Dan for Dan in this example.

00:54:50.520 --> 00:54:54.520
And then what you would do, and again,
that was not a supported configuration,

00:54:54.520 --> 00:54:57.500
but the good news is you won't have to
do that anymore because you got ACLs.

00:54:57.500 --> 00:55:02.670
But what we would do is we'd go in
and change the defaults right of

00:55:02.670 --> 00:55:07.970
the finder and some other little
fun apps to make sure that...

00:55:08.180 --> 00:55:12.100
Any user that would create
a folder on the SAN,

00:55:12.100 --> 00:55:16.240
the group assignment to
that folder would be 1025.

00:55:16.240 --> 00:55:19.840
Because obviously when you
create a folder in the finder,

00:55:19.840 --> 00:55:24.100
the user has rewrite access,
but the group has read-only access.

00:55:24.100 --> 00:55:27.150
So you need to make sure that
the owner has rewrite access

00:55:27.150 --> 00:55:30.320
as well as your Xsan group,
which is all your editors.

00:55:30.320 --> 00:55:32.790
So this is the way to do that.

00:55:33.940 --> 00:55:37.000
We had a support article as well,
which had a little Apple script

00:55:37.010 --> 00:55:41.200
droplet that would change
permissions on your SAN.

00:55:41.200 --> 00:55:42.770
But this was a lot easier.

00:55:42.790 --> 00:55:46.910
What we would do is go into the user
default template and change that.

00:55:46.960 --> 00:55:50.370
So if the customer creates or
every time a new user would log in,

00:55:50.370 --> 00:55:52.770
they'd go in and it
would already be done.

00:55:52.780 --> 00:55:53.840
They wouldn't have to do anything.

00:55:53.840 --> 00:55:58.390
And we had a little package that we
just pushed over ARD that would change

00:55:58.390 --> 00:56:00.580
all that on all the workstations.

00:56:00.580 --> 00:56:02.110
So it would be done once and for all.

00:56:04.120 --> 00:56:06.640
Again, ACLs are beautiful.

00:56:06.740 --> 00:56:07.800
Don't have to deal with that anymore.

00:56:07.800 --> 00:56:12.400
Implementing affinities.

00:56:12.400 --> 00:56:16.200
Affinities are fantastic,
especially if you want to make sure

00:56:16.200 --> 00:56:20.750
that the two HD workstations that
you have in your environment have a

00:56:20.750 --> 00:56:26.770
dedicated set of RAIDs and that the
other guys that are doing DV or SD are

00:56:26.770 --> 00:56:32.670
not impeding on the bandwidth available
to your uncompressed HD workstations.

00:56:32.680 --> 00:56:36.790
And what affinities do is you can
basically assign a set of LUNs,

00:56:37.110 --> 00:56:41.320
create a folder on the volume and say,
this is like my fast affinity.

00:56:41.320 --> 00:56:45.070
And anyone who's writing
to that fast affinity has a

00:56:45.120 --> 00:56:49.920
dedicated set of XSERV RAIDs and
data LUNs available for them.

00:56:49.920 --> 00:56:52.970
So if you're doing 2K,
we had a church that

00:56:52.970 --> 00:56:54.920
was doing 2K editing.

00:56:54.920 --> 00:57:00.100
What we did is we basically
built a set of four data LUNs,

00:57:00.100 --> 00:57:02.180
set up an affinity.

00:57:02.720 --> 00:57:04.980
And their 2K editor is
like happy as can be.

00:57:04.980 --> 00:57:08.250
They're doing all their editing
and no drop frames whatsoever.

00:57:08.520 --> 00:57:11.150
And then all the other
people that are doing SD,

00:57:11.260 --> 00:57:15.190
they have their own dedicated
storage pool as well.

00:57:17.530 --> 00:57:22.730
The most important thing to
know about affinities is,

00:57:22.900 --> 00:57:27.950
well let me go to the next slide,
is really when you create an affinity,

00:57:28.260 --> 00:57:48.550
And you move,
let's say you have an affinity,

00:57:48.550 --> 00:57:48.550
you have a movie or a
file in the affinity.

00:57:48.550 --> 00:57:48.550
If you move that file out of the
affinity into another folder,

00:57:48.550 --> 00:57:48.550
it doesn't actually move the file.

00:57:48.550 --> 00:57:48.550
Okay, so that's really important.

00:57:48.550 --> 00:57:48.550
So,

00:57:49.580 --> 00:57:53.380
Let's assume you have,
you want to set up an ingest affinity.

00:57:53.380 --> 00:57:58.050
Okay, so you want to make sure that
when you're doing ingest,

00:57:58.200 --> 00:58:01.500
that you have a dedicated 180
megabytes per second throughput.

00:58:01.500 --> 00:58:04.300
So you basically take one,
two data LANs and set up

00:58:04.300 --> 00:58:07.230
an affinity and that's my,
and you call it ingest.

00:58:07.260 --> 00:58:09.140
That's your ingest folder.

00:58:09.140 --> 00:58:12.600
And you have one workstation
or two workstations that

00:58:12.600 --> 00:58:14.620
are doing your ingest work.

00:58:14.620 --> 00:58:19.140
And then you have another folder
where your editors then start editing.

00:58:19.500 --> 00:58:23.540
So you can see that the editor
is still in the ingest affinity.

00:58:23.540 --> 00:58:26.560
So then,
what happens when you move the file?

00:58:26.560 --> 00:58:31.590
Well, the editor takes that ingested file
and moves it into another folder.

00:58:31.590 --> 00:58:33.980
It doesn't actually move that file.

00:58:34.060 --> 00:58:37.800
Okay, it moves the header of the file,
but the data is still

00:58:37.800 --> 00:58:39.420
in the ingest affinity.

00:58:39.450 --> 00:58:40.430
So then,

00:58:40.650 --> 00:58:42.480
The ingest guy starts ingesting again.

00:58:42.480 --> 00:58:45.540
The editor starts editing
the file you just ingested.

00:58:45.540 --> 00:58:49.710
And basically, you now have--

00:58:50.300 --> 00:58:51.700
There's no bandwidth available.

00:58:51.710 --> 00:58:54.200
The guy's ingesting,
the editor's dropping frames.

00:58:54.200 --> 00:58:59.770
So you want to make sure that there's
a couple ways to go around that.

00:58:59.840 --> 00:59:03.880
First, you can hold down the option key
so it actually does a real copy.

00:59:03.880 --> 00:59:09.060
You can copy the file locally or
anyone here have Xsan support?

00:59:10.580 --> 00:59:14.260
Yes, you should all have-- all
the hands should have raised.

00:59:14.470 --> 00:59:18.290
You should all have Xsan
support when you deploy Xsan.

00:59:18.300 --> 00:59:21.220
But actually,
the AppleCare team has a little script

00:59:21.220 --> 00:59:23.870
that you can set up as a cron job.

00:59:23.930 --> 00:59:28.800
And what it'll do is that every night
or however you set it up in the cron tab

00:59:28.800 --> 00:59:35.870
will basically then kind of move that
file and reassemble that file properly.

00:59:35.880 --> 00:59:39.610
So that's something that's available.

00:59:41.070 --> 00:59:46.000
On the Qlogic optimization settings,
so that's another fun one.

00:59:46.000 --> 00:59:54.560
How many people here have more than
one Qlogic switch in their fabric?

00:59:54.560 --> 00:59:54.560
OK.

00:59:55.370 --> 01:00:01.090
So a very important point
to make is in your switch,

01:00:01.190 --> 01:00:01.580
right?

01:00:01.580 --> 01:00:03.800
Again, assume there's a power failure.

01:00:03.800 --> 01:00:06.680
And those two switches,
which are interconnected

01:00:06.780 --> 01:00:08.690
using 10 gig cables,
right?

01:00:08.700 --> 01:00:11.070
You've got the 10 gig
interconnects on the 5200s.

01:00:11.100 --> 01:00:13.960
Assume those two switches
come up at the same time.

01:00:13.960 --> 01:00:16.480
You've got this thing called domain ID.

01:00:16.480 --> 01:00:18.680
Okay, remember the old scuzzy days,
right?

01:00:18.680 --> 01:00:21.240
Where you can go in your back
of your hard drive and you

01:00:21.240 --> 01:00:22.780
sign an ID from one to seven?

01:00:22.780 --> 01:00:24.400
Okay, with a little wheel.

01:00:24.400 --> 01:00:25.260
Remember those days?

01:00:25.300 --> 01:00:27.620
Same thing here.

01:00:27.620 --> 01:00:31.420
You have to go in and once you bring
up your SAN for the first time,

01:00:31.420 --> 01:00:35.300
you want to make sure that you
lock the ID of the QLogic switch.

01:00:35.300 --> 01:00:36.660
The default is always one.

01:00:36.660 --> 01:00:39.430
So make sure that you set
up your first switch to one,

01:00:39.430 --> 01:00:42.360
your second switch to two,
your third switch to three,

01:00:42.380 --> 01:00:43.800
and fourth switch to four.

01:00:43.800 --> 01:00:45.900
Because on a power failure,
if they all come back

01:00:45.910 --> 01:00:48.510
up at the same time,
they're all going to take the ID of one.

01:00:48.510 --> 01:00:51.470
And then they're not going to
know what the hell they're doing.

01:00:52.780 --> 01:00:54.360
So that's the first thing.

01:00:54.360 --> 01:00:58.700
And then obviously on the client side,
you want to make sure that you

01:00:58.700 --> 01:01:03.070
turn on IO Stream Guard and you
want to disable device scan.

01:01:03.070 --> 01:01:06.140
That's on the clients and
obviously on the metadata servers.

01:01:06.140 --> 01:01:09.290
On the RAIDs, you don't want to do that.

01:01:09.340 --> 01:01:11.880
You don't need
IO Stream Guard on any target.

01:01:11.880 --> 01:01:14.140
You want to do that on the initiators.

01:01:15.950 --> 01:01:20.040
Here's an example of a three
sandbox three configuration.

01:01:20.040 --> 01:01:22.030
And you can see we have ISLs.

01:01:22.130 --> 01:01:28.980
We have like eight ISLs between
the three sandbox two setups.

01:01:29.530 --> 01:01:30.500
So that's really important.

01:01:30.500 --> 01:01:32.570
Make sure you configure
the sandbox switch as well.

01:01:32.600 --> 01:01:35.840
By default, you've got an IP address.

01:01:35.990 --> 01:01:37.770
Just make sure you go
in and monitor that.

01:01:37.790 --> 01:01:40.300
Make sure you set up the
notifications on that as well.

01:01:40.300 --> 01:01:41.140
It's really important.

01:01:43.950 --> 01:01:46.660
There's a lot of
different configurations,

01:01:46.660 --> 01:01:50.620
again,
depending on how many ports you need.

01:01:50.620 --> 01:01:53.630
And that's all available
on the Qlogic website.

01:01:53.700 --> 01:01:58.020
On the ADEC side, there's some really
interesting capabilities there.

01:01:58.020 --> 01:02:01.760
So I'll tell you a story
of one customer we did.

01:02:02.090 --> 01:02:05.700
It was an all-Windows shop,
but they love the XServe

01:02:05.700 --> 01:02:09.540
rates for the cost,
and they do a lot of web serving.

01:02:09.610 --> 01:02:13.140
So what they did is they have
Windows servers for their web serving,

01:02:13.140 --> 01:02:15.080
because I guess they're
using IIS or something.

01:02:15.100 --> 01:02:17.170
Bad decision, but anyway.

01:02:17.180 --> 01:02:20.300
And what they wanted is they want
to use XServe rate and store NextFX.

01:02:20.300 --> 01:02:21.980
So we basically set that up.

01:02:21.980 --> 01:02:25.140
And for web serving, it's fantastic,
because when you need

01:02:25.140 --> 01:02:28.200
to upload new content,
again, because of the SAN,

01:02:28.230 --> 01:02:31.200
you just have to upload it once,
and then everything gets distributed to

01:02:31.200 --> 01:02:36.200
all the IIS or the Apache web servers
that are serving those web pages.

01:02:36.210 --> 01:02:38.290
So it makes it really neat.

01:02:38.810 --> 01:02:42.400
On the StoreNext FX 2.7,
they actually added

01:02:42.400 --> 01:02:44.160
Active Directory support.

01:02:44.160 --> 01:02:49.100
Prior to that,
they only supported NIS and PCNFSD.

01:02:49.100 --> 01:02:51.640
How many people know what PCNFSD is?

01:02:51.660 --> 01:02:53.030
Yeah, that's what I thought.

01:02:53.030 --> 01:02:53.610
One person.

01:02:53.610 --> 01:02:54.310
There you go.

01:02:54.310 --> 01:02:56.340
You must have been
around for a long time.

01:02:58.400 --> 01:02:59.960
NIS is another fun one.

01:02:59.960 --> 01:03:04.070
At the time, you could do an LDAP to
NIS gateway and everything,

01:03:04.070 --> 01:03:06.370
but thank God that's all over now.

01:03:06.370 --> 01:03:10.180
AD and LDAP are fully
supported with StoreNext 2.7,

01:03:10.180 --> 01:03:14.280
which integrates very well
with our directory services.

01:03:16.690 --> 01:03:19.180
A lot of tweaking on the PC side.

01:03:19.180 --> 01:03:21.940
If you're configuring a PC,
make sure you go into the

01:03:21.940 --> 01:03:27.640
Ethernet NIC and turn off the QoS,
disable QoS on the servers

01:03:27.640 --> 01:03:30.750
or on the machines,
the workstations, if they're, you know,

01:03:30.760 --> 01:03:32.320
whatever workstations they might be.

01:03:32.580 --> 01:03:36.080
Just make sure you go into
the NIC and turn off the QoS.

01:03:36.080 --> 01:03:38.100
A lot of caching parameters.

01:03:38.100 --> 01:03:41.750
We usually just leave those, you know,
as default.

01:03:42.550 --> 01:03:44.900
How to repair your SAN volume.

01:03:44.920 --> 01:03:48.470
Obviously, this applies to Xsan 1.3,
but I'll just refer you to the

01:03:48.470 --> 01:03:53.180
article number and just make
sure you follow those guidelines.

01:03:53.250 --> 01:03:58.910
And obviously, if a problem is detected,
you want to unmount all the volumes,

01:03:58.910 --> 01:04:01.820
stop the SAN, and then run CVFS-CK.

01:04:03.360 --> 01:04:05.800
Backing up your SAN and your config file.

01:04:05.900 --> 01:04:10.550
So many times have I seen you set up
a SAN and you don't go in and do a

01:04:10.550 --> 01:04:13.300
CV gather on your metadata servers.

01:04:13.300 --> 01:04:19.030
This is basically your information,
your SAN information on how you've

01:04:19.210 --> 01:04:22.180
configured those data lines,
how you've configured your metadata.

01:04:22.180 --> 01:04:26.350
So make sure that you do a
CV gather or at least back up

01:04:26.350 --> 01:04:29.190
the config file and store that.

01:04:29.320 --> 01:04:33.080
Burn a CD, send it to your mother,
email it to your friend.

01:04:33.440 --> 01:04:37.200
Just sort in multiple locations to
make sure that you have a backup.

01:04:37.200 --> 01:04:40.230
And every time you do a
change to your configuration,

01:04:40.230 --> 01:04:43.180
make sure you go back and
run another CV gather.

01:04:43.180 --> 01:04:48.290
Our recommendation is to basically
set up a cron job and just back up

01:04:48.360 --> 01:04:51.320
your lock files on a regular basis.

01:04:51.320 --> 01:04:54.090
Because if something happens,
if an error gets detected,

01:04:54.170 --> 01:04:57.090
what's going to happen is that
that error is going to repeat,

01:04:57.090 --> 01:04:59.710
repeat, repeat,
and it's going to fill in your logs,

01:04:59.710 --> 01:05:02.920
and it's not going to keep
track of what actually happened.

01:05:03.380 --> 01:05:05.650
When the error occurred,
because it's going to fill the

01:05:05.650 --> 01:05:08.000
log afterwards with all you
know a whole bunch of an error

01:05:08.000 --> 01:05:09.410
occurred something happened.

01:05:09.410 --> 01:05:11.310
You want to you want
to keep track of that.

01:05:11.310 --> 01:05:13.440
So make sure you back up
this on a regular basis.

01:05:15.550 --> 01:05:17.040
Backup is essential.

01:05:17.120 --> 01:05:19.180
Too many times do I see people just say,
hey,

01:05:19.180 --> 01:05:23.820
I just have enough money to buy a SAN,
and I got no money to spend on

01:05:23.820 --> 01:05:27.400
disk-to-disk or disk-to-disk-to-tape.

01:05:27.660 --> 01:05:30.910
If this is your bread and butter,
you better make sure that you

01:05:31.200 --> 01:05:33.670
have another RAID or that you
have a tape backup and you

01:05:33.710 --> 01:05:35.400
can take that data offsite.

01:05:35.400 --> 01:05:38.580
It's not because you're in
a RAID 5 configuration that

01:05:38.730 --> 01:05:40.020
something can't happen.

01:05:40.140 --> 01:05:41.230
There's always something can happen.

01:05:41.230 --> 01:05:49.230
I've done work where I'm in a data center
and I have sprinklers over my head.

01:05:49.460 --> 01:05:51.720
Xsan Mankovsky: Okay,
it's just not the kind

01:05:51.720 --> 01:05:54.870
of stuff you want to,
you know, if the sprinklers turn on,

01:05:54.930 --> 01:05:58.670
you're pretty much guaranteed your
data is not going to be around.

01:05:59.540 --> 01:06:01.940
On the backup matrix,
we've done a lot of work

01:06:01.940 --> 01:06:03.520
with ATempo and Backbone.

01:06:03.550 --> 01:06:06.880
So those are kind of the
two solutions we recommend.

01:06:06.880 --> 01:06:12.070
Just make sure you use an
enterprise backup solution.

01:06:12.330 --> 01:06:17.370
Again, don't try to cut corners
and spend $300 on brew.

01:06:17.480 --> 01:06:18.320
It ain't going to work.

01:06:18.320 --> 01:06:22.790
So just make sure you stick
with enterprise solutions,

01:06:22.790 --> 01:06:25.860
and Backbone and ATempo work great.

01:06:28.010 --> 01:06:33.370
So now let's talk about
high availability.

01:06:33.810 --> 01:06:37.210
What I wanted to spend a few
minutes on is talk about ViCom.

01:06:37.300 --> 01:06:42.740
And ViCom is a company that has put
together a fantastic product that allows

01:06:42.740 --> 01:06:47.940
you to do full mirroring on your SAN.

01:06:47.940 --> 01:06:51.360
Now, there's been other vendors
out there that have done that.

01:06:51.360 --> 01:06:56.140
They're not in business anymore because
they tried to do too many things,

01:06:56.140 --> 01:06:56.860
right?

01:06:56.860 --> 01:07:00.710
They tried to be a fiber channel switch
vendor as well as do the mirroring.

01:07:01.000 --> 01:07:05.900
And then they were selling their product
in the $50,000 range to $100,000 range.

01:07:05.900 --> 01:07:09.900
And most customers don't have
that money to spend for mirroring.

01:07:09.900 --> 01:07:14.540
So what ViCom did is they're
very specific and very focused

01:07:14.540 --> 01:07:16.890
on the mirroring engines.

01:07:17.660 --> 01:07:22.250
It's plug and play, real time mirroring.

01:07:22.260 --> 01:07:23.900
The installation is pretty simple.

01:07:23.930 --> 01:07:29.110
And what it gives you is no single
point of failure in your SAN deployment.

01:07:29.170 --> 01:07:31.660
The back is pretty straightforward.

01:07:31.700 --> 01:07:35.220
You have an in point and
you have an out point.

01:07:35.390 --> 01:07:37.360
And you've got obviously
dual power supplies.

01:07:37.360 --> 01:07:38.540
Everything is fully redundant.

01:07:38.540 --> 01:07:40.300
You've got dual Ethernet, dual serial.

01:07:40.300 --> 01:07:44.540
And it fits very nicely in a 1U box.

01:07:49.560 --> 01:07:53.940
They will be shipping very shortly
their new ViCom admin user interface,

01:07:54.000 --> 01:07:56.600
which will allow you to configure this.

01:07:57.300 --> 01:08:00.430
Xsan Mankovsky, Chief Executive Officer,
San Diego State University:

01:08:00.460 --> 01:08:01.520
And here's a typical, you know,
example of a small

01:08:01.520 --> 01:08:03.310
video broadcast example,
and I'll show you a bigger

01:08:03.310 --> 01:08:04.550
one in just a few minutes.

01:08:04.620 --> 01:08:07.630
But what you have is you have
basically two sets of raids

01:08:07.640 --> 01:08:08.640
that are fully mirrored.

01:08:08.660 --> 01:08:11.570
And so obviously what you would
want to do is mirror one half of

01:08:11.570 --> 01:08:14.820
the raid to the other side and one
half of the other raid to the other,

01:08:14.820 --> 01:08:16.980
you know, make sure you have that set up.

01:08:17.060 --> 01:08:19.580
The two sets of raids can
be in different locations.

01:08:19.670 --> 01:08:23.000
So you could have one and, you know,
one set of the building and another

01:08:23.000 --> 01:08:24.990
set and the other set of the building.

01:08:26.260 --> 01:08:27.500
Again, just think of the sprinklers.

01:08:27.500 --> 01:08:29.680
You have your ViCom appliances.

01:08:29.680 --> 01:08:33.440
You've got some LUN masking,
which I'm not showing here.

01:08:33.440 --> 01:08:36.690
But what you do is you do
some LUN masking at the

01:08:36.690 --> 01:08:39.870
fiber channel switch level.

01:08:39.920 --> 01:08:42.300
And then you have your workstations.

01:08:42.300 --> 01:08:45.260
And again, you know,
you have your metadata.

01:08:45.260 --> 01:08:48.780
Each metadata server, you know,
each fiber channel port is

01:08:48.780 --> 01:08:50.250
plugged into each switch.

01:08:50.300 --> 01:08:52.100
So make sure you have redundancy.

01:08:52.100 --> 01:08:55.160
Each client is hooked up to
each of the Q-Logic switches.

01:08:55.160 --> 01:08:57.110
So, you know,
reality is you've got no single

01:08:57.110 --> 01:08:58.540
point of failure whatsoever.

01:08:58.540 --> 01:09:02.000
You've got two V-mirror engines per side.

01:09:02.000 --> 01:09:05.360
So you've now built a
fully redundant system.

01:09:05.360 --> 01:09:07.330
And we've done some pretty
interesting testing,

01:09:07.330 --> 01:09:08.900
which I'll tell you in just a second.

01:09:11.330 --> 01:09:14.810
You know,
same similar deployment but more on

01:09:14.810 --> 01:09:17.390
the IT side for an IT data center.

01:09:17.410 --> 01:09:19.200
If you're running some
kind of database server,

01:09:19.200 --> 01:09:20.600
that's another perfect scenario.

01:09:20.600 --> 01:09:24.110
And again, because of the cost of
the XServe RAID and,

01:09:24.110 --> 01:09:28.230
you know, the $1.83 per gigabyte or less,
you know,

01:09:28.340 --> 01:09:30.520
the vMirror fits perfectly into this.

01:09:30.520 --> 01:09:33.320
Now, granted, we don't have, you know,
as you know, the XServe RAID does not

01:09:33.330 --> 01:09:34.660
have redundant controllers.

01:09:34.660 --> 01:09:38.670
But again, the reason why we designed the
XServe RAID that way is for

01:09:38.670 --> 01:09:41.010
sheer performance and throughput.

01:09:41.360 --> 01:09:41.550
Right?

01:09:41.930 --> 01:09:45.920
The RAID does fantastic on doing
uncompressed HD and that's really

01:09:45.920 --> 01:09:49.580
what the RAID was designed for,
for very, very fast throughput.

01:09:49.600 --> 01:09:53.000
And now with vMirror,
you can add this box in the middle

01:09:53.000 --> 01:09:57.540
which gives you that redundancy
for your playout deployments,

01:09:57.540 --> 01:10:00.210
for your on-air deployments
to make sure you get,

01:10:00.360 --> 01:10:03.290
you know,
you get a fully redundant system.

01:10:04.440 --> 01:10:08.370
You know, deployment guidelines,
you know, from a throughput perspective,

01:10:08.380 --> 01:10:11.870
a dual vMirror will give
you about 350 megabytes per

01:10:11.870 --> 01:10:13.210
second on the throughput side.

01:10:13.210 --> 01:10:17.870
What we usually do is on a, you know,
if it's a large deployment and if

01:10:17.870 --> 01:10:22.590
it's people that are going into the
uncompressed HD or in the HD world,

01:10:22.590 --> 01:10:27.390
what we usually do is we do, you know,
a set of RAIDs, a set of XRRAIDs,

01:10:27.390 --> 01:10:32.460
and we put one vMirror engine per
pair of XRRAIDs or per set of XRRAIDs.

01:10:33.010 --> 01:10:35.210
Obviously, if the customer is doing,
you know,

01:10:35.210 --> 01:10:38.570
lower type bandwidth requirement,
has lower bandwidth requirements,

01:10:38.590 --> 01:10:39.900
you can scale that down.

01:10:39.900 --> 01:10:43.860
So, just something to, again,
consider and, again,

01:10:43.860 --> 01:10:47.940
understand depending on
the customer requirements.

01:10:47.940 --> 01:10:51.700
Here's a real deployment.

01:10:51.700 --> 01:10:57.310
So, this is with a, again,
a three-letter, anyone watch football?

01:10:57.460 --> 01:10:58.690
There you go.

01:10:58.710 --> 01:11:02.150
So, this is a deployment that we did.

01:11:03.130 --> 01:11:07.080
about a month and a half ago.

01:11:07.280 --> 01:11:13.620
And you can see here you've
got the seven V-Mirror engines.

01:11:13.680 --> 01:11:17.600
You've got your back-end Q-Logic setup.

01:11:17.600 --> 01:11:19.840
And you've got ISL connections.

01:11:19.840 --> 01:11:21.980
You've got the 10 gig
ISLs between the two.

01:11:21.980 --> 01:11:26.260
So again, if any of those two switches,
Q-Logic switches, would go down,

01:11:26.260 --> 01:11:27.760
it wouldn't matter.

01:11:27.760 --> 01:11:29.060
You've got the 10 gig ISLs.

01:11:29.060 --> 01:11:30.580
You've got the sets of V-Mirror.

01:11:30.950 --> 01:11:34.670
We literally, what we did,
just for the heck of it,

01:11:34.820 --> 01:11:38.630
is we literally pulled three
RAID controllers out while we

01:11:38.630 --> 01:11:40.280
were ingesting into the system.

01:11:40.280 --> 01:11:42.660
And there was not even a
single blip in the system.

01:11:42.660 --> 01:11:44.660
So that's pretty neat.

01:11:44.740 --> 01:11:48.030
It also means that, let's say, you know,
you have to do some

01:11:48.030 --> 01:11:49.580
maintenance on the RAIDs.

01:11:49.580 --> 01:11:52.030
You can do some
maintenance on seven RAIDs.

01:11:52.030 --> 01:11:54.600
Let's say update firmware, for example.

01:11:54.600 --> 01:11:57.220
You still have your other
seven RAIDs fully working.

01:11:57.220 --> 01:12:00.330
And then you bring your mirror back up.

01:12:00.330 --> 01:12:00.920
And then you can do maintenance.

01:12:00.920 --> 01:12:01.300
And then you bring your mirror back up.

01:12:01.310 --> 01:12:01.890
And then you can do
maintenance on the other set.

01:12:01.900 --> 01:12:06.970
Okay, so it gives you that seven
by 24 without any downtime.

01:12:06.980 --> 01:12:07.780
Right?

01:12:07.800 --> 01:12:09.300
So that's huge.

01:12:09.300 --> 01:12:13.230
And then obviously on the front end,
we've got another stack of

01:12:13.230 --> 01:12:15.400
Q-Logic switches in this case.

01:12:15.400 --> 01:12:18.940
And you've noticed that they're
not interconnected between the two.

01:12:18.940 --> 01:12:23.580
There's no 10 gig stacks that
interconnect those four sets of switches.

01:12:23.580 --> 01:12:25.870
And that's for all the
client workstations.

01:12:25.880 --> 01:12:28.470
And again,
if any of the ports would go bad or

01:12:28.470 --> 01:12:32.140
any of the switches would go bad,
you've got the full redundancy

01:12:32.140 --> 01:12:34.550
on the front end as well.

01:12:37.070 --> 01:12:40.030
So again, just in final,
some of the best practices,

01:12:40.240 --> 01:12:42.240
make sure you've got DNS working.

01:12:42.240 --> 01:12:45.560
If your Xsan admin tool is slow,
it's probably a DNS issue.

01:12:45.560 --> 01:12:50.780
Oh, another thing is make sure you've got
your NTP time synchronized properly.

01:12:50.780 --> 01:12:52.720
That is really essential.

01:12:52.720 --> 01:12:56.950
So if you're,
you can connect to time.apple.com,

01:12:56.950 --> 01:13:00.540
that's great, but if you're setting up an
environment where you're not

01:13:00.610 --> 01:13:06.320
connected to the outside world,
make sure you configure

01:13:06.320 --> 01:13:07.600
an NTP server properly.

01:13:11.320 --> 01:13:14.710
I would recommend not to run or
have Final Cut projects or launch

01:13:14.710 --> 01:13:16.820
Final Cut projects off the SAN.

01:13:17.040 --> 01:13:20.610
Just copy them locally and run
them locally and then copy them

01:13:20.610 --> 01:13:24.860
back or set up the autosave
to save them back to the SAN.

01:13:25.470 --> 01:13:28.320
Make sure you don't connect to
the two metadata servers in the

01:13:28.320 --> 01:13:30.140
same power distribution circuit.

01:13:30.140 --> 01:13:31.360
It's not a good idea.

01:13:31.360 --> 01:13:33.430
Same thing with the XServe raids.

01:13:33.470 --> 01:13:34.740
Make sure they're on different circuits.

01:13:34.740 --> 01:13:38.260
Make sure you have UPS and take
advantage of the email notification.

01:13:40.800 --> 01:13:43.450
On the Xsan 1.4 side,
I'm not going to spend a lot of time.

01:13:43.510 --> 01:13:47.990
It's all published on the website,
but ACLs is the big feature here.

01:13:49.270 --> 01:13:53.360
And then as a wrap up,
I wanted to thank you for using Xsan

01:13:53.920 --> 01:13:57.840
and just plan your deployment properly.

01:13:58.110 --> 01:14:00.040
Let us know if we can help.

01:14:00.470 --> 01:14:03.860
My team is all around the country.

01:14:04.240 --> 01:14:09.120
You can go to our website,
apple.com/services or consulting

01:14:09.120 --> 01:14:12.280
services at apple.com and we'll be glad
to help you with your Xsan deployment.

01:14:12.410 --> 01:14:13.050
Thank you.