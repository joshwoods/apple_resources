WEBVTT

00:00:08.700 --> 00:00:10.390
Thank you very much for coming.

00:00:10.640 --> 00:00:14.500
We're going to give you a little
bit of time because it's early.

00:00:14.560 --> 00:00:18.070
It's late in the week and it's early.

00:00:19.370 --> 00:00:23.720
They seem to give me the big ones,
the ones that encompass 1,500

00:00:23.720 --> 00:00:27.400
different options they want
to put into one session.

00:00:27.470 --> 00:00:30.190
So a lot of stuff.

00:00:30.210 --> 00:00:34.460
I'm very confident about the demos,
that this all works.

00:00:34.520 --> 00:00:38.580
So we got some real-world
experience that we'll be doing here.

00:00:38.610 --> 00:00:43.640
It has made me appreciate
OS X more to do this.

00:00:43.720 --> 00:00:48.630
So integrating OS X into a
heterogeneous environment.

00:00:48.820 --> 00:00:54.340
I'm Joel Rennich, consulting engineer,
Apple Enterprise Consulting Services.

00:00:54.340 --> 00:00:56.660
Introduction.

00:00:56.660 --> 00:00:59.280
Using OS X with other directory services.

00:00:59.280 --> 00:01:02.430
This is how to get people to
play nice with each other.

00:01:02.440 --> 00:01:05.370
If you were here on Tuesday,
we talked about Active Directory and

00:01:05.430 --> 00:01:08.440
how to integrate with
Active Directory using the AD plugin.

00:01:08.440 --> 00:01:10.800
This time,
we're going to concentrate more

00:01:10.800 --> 00:01:12.160
on the LDAP side of the house.

00:01:12.160 --> 00:01:15.080
Using the LDAP plugin,
talk a little bit about Novell,

00:01:15.080 --> 00:01:17.030
talk about the different
ways that you can do that.

00:01:17.830 --> 00:01:21.000
I've had a number of people over
the years ask me about integrating

00:01:21.000 --> 00:01:22.320
Linux into Open Directory.

00:01:22.320 --> 00:01:26.920
More and more,
we have... I've seen places that

00:01:26.920 --> 00:01:29.930
want to use the flexibility,
the administration tools of

00:01:29.960 --> 00:01:31.780
Open Directory to run everything.

00:01:31.780 --> 00:01:34.620
And so how do you get your Linux boxes,
your Solaris boxes,

00:01:34.620 --> 00:01:38.000
and stuff like that integrated in so
you can use a common user database?

00:01:38.000 --> 00:01:39.710
So we'll definitely talk about that.

00:01:39.760 --> 00:01:40.590
So we'll go both ways.

00:01:40.600 --> 00:01:44.640
OS X to Linux, Linux to Open Directory,
back and forth.

00:01:46.400 --> 00:01:49.560
Hopefully you'll pull out of
this how to do this on your own,

00:01:49.660 --> 00:01:50.570
give you some tips and tricks.

00:01:50.660 --> 00:01:54.110
There's too many different variables for
too many different situations to really

00:01:54.110 --> 00:01:57.240
give you much of a cookbook for this,
but at least you'll get an idea of it.

00:01:57.300 --> 00:02:00.110
I was amazed at how easy and
how simple this was the first

00:02:00.110 --> 00:02:01.460
time I went out with it.

00:02:01.490 --> 00:02:05.040
So hopefully that's going to be your
experience also when you do this.

00:02:05.060 --> 00:02:07.650
We'll also talk a little bit
about different file sharing,

00:02:07.650 --> 00:02:09.910
how to integrate file
sharing into the network.

00:02:09.930 --> 00:02:12.650
We'll hit a couple of brief
discussion about some of that and

00:02:12.650 --> 00:02:15.730
also some backup solutions that
you might want to take a look at.

00:02:17.580 --> 00:02:19.110
So first off,
we're going to start with the

00:02:19.200 --> 00:02:22.180
traditional Mac OS X island.

00:02:22.190 --> 00:02:26.500
You've got a grouping of machines,
maybe a graphic design,

00:02:26.700 --> 00:02:29.500
maybe a specific department
within the university,

00:02:29.600 --> 00:02:32.500
some other form of island of OS X.

00:02:32.710 --> 00:02:34.610
So you've got to integrate
with other systems.

00:02:34.660 --> 00:02:36.490
You've got to play nice with others.

00:02:36.520 --> 00:02:38.410
Active Directory Plugin
is one way to do it.

00:02:38.420 --> 00:02:41.860
The other way is to do some of the stuff
that we're going to talk about today.

00:02:41.880 --> 00:02:44.340
Just as a side note,
it's been very interesting to me

00:02:44.340 --> 00:02:48.580
as we have progressed into being
much more of a good citizen,

00:02:48.580 --> 00:02:52.300
much more corporate awareness,
much more organizational awareness

00:02:52.300 --> 00:02:55.680
of what OS X can do and how
it can interact with others.

00:02:55.680 --> 00:03:00.280
And when we were with OS 9,
we'd almost refuse help.

00:03:00.280 --> 00:03:03.270
We'd almost refuse the attention
of the IT departments because

00:03:03.270 --> 00:03:04.490
we wanted to stay hidden.

00:03:04.500 --> 00:03:05.990
We didn't want them to see us.

00:03:06.180 --> 00:03:07.010
They didn't want to see us.

00:03:07.110 --> 00:03:08.190
We didn't want to see them.

00:03:08.380 --> 00:03:10.440
So we stayed secluded away.

00:03:10.490 --> 00:03:12.980
More and more,
when we go in and I go into clients

00:03:12.980 --> 00:03:16.620
and I integrate OS X-- OS X into
third party directory services,

00:03:16.620 --> 00:03:21.340
into AD, into LDAP, into Novell,
you get pulled into the fold.

00:03:21.340 --> 00:03:24.810
And at first,
the users are a little bit upset at

00:03:24.920 --> 00:03:27.470
suddenly having all this management,
at suddenly being locked down

00:03:27.480 --> 00:03:30.960
and micromanaged with the
MCX preferences and things like that.

00:03:30.970 --> 00:03:34.760
But the end result usually is a
really corporate organizational

00:03:34.760 --> 00:03:37.980
awakening that OS X is a valid citizen.

00:03:37.980 --> 00:03:40.740
OS X does have lots
and lots of strengths.

00:03:40.740 --> 00:03:43.980
And so suddenly,
I see IT staff being devoted to it.

00:03:43.980 --> 00:03:46.690
I see budget being devoted to it
because you've suddenly appeared on

00:03:46.690 --> 00:03:50.400
the radar because you've integrated
into the other directory services.

00:03:50.400 --> 00:03:53.170
Hopefully,
something that's what you'll find also.

00:03:54.080 --> 00:03:56.600
Key theme to OS X,
we've talked about this before,

00:03:56.600 --> 00:03:58.340
but it plays well with others.

00:03:58.340 --> 00:04:00.580
We make it very,
very easy for you to integrate with

00:04:00.930 --> 00:04:02.900
unknown third-party directory services.

00:04:02.950 --> 00:04:04.540
So we'll definitely hit a lot about that.

00:04:04.560 --> 00:04:06.670
Also with file sharing,
we accept a lot of

00:04:06.760 --> 00:04:09.320
file sharing protocols,
and then we have lots and

00:04:09.320 --> 00:04:12.550
lots of backup client software
that we have out there now.

00:04:13.530 --> 00:04:17.040
First and probably the most important,
because it's maybe the most complex,

00:04:17.070 --> 00:04:18.740
is the directory services.

00:04:18.810 --> 00:04:21.490
And that's primarily getting
identification and authentication

00:04:21.550 --> 00:04:26.000
to work from an OS X machine
going back to another system.

00:04:26.490 --> 00:04:29.100
We have a couple of
different options for this.

00:04:29.140 --> 00:04:32.490
Most of these are laid out in
the directory access plugins.

00:04:32.490 --> 00:04:35.610
NIS, LDAP, Active Directory,
things like that.

00:04:36.290 --> 00:04:37.440
NIST.

00:04:37.530 --> 00:04:38.160
We only do NIST.

00:04:38.200 --> 00:04:39.800
We don't do NIST Plus.

00:04:40.070 --> 00:04:41.200
All right?

00:04:41.200 --> 00:04:44.990
And I would strongly urge you that
if you're in a NIST environment,

00:04:44.990 --> 00:04:47.600
you're probably already interested
in migrating off of it anyway,

00:04:47.600 --> 00:04:50.820
and that's going to be a
better option for you for OS X.

00:04:50.820 --> 00:04:53.510
We'll play with it,
but we don't do it as well as we do a

00:04:53.510 --> 00:04:55.700
lot of the other directory services.

00:04:55.700 --> 00:04:59.810
And I can't say that we're probably going
to devote a lot of resources to that.

00:05:00.520 --> 00:05:01.540
Active Directory.

00:05:01.660 --> 00:05:02.660
There's the AD plugin.

00:05:02.660 --> 00:05:03.760
Gets you up and running.

00:05:03.760 --> 00:05:04.900
Gets a lot of good features.

00:05:04.900 --> 00:05:08.470
Incredible new features in OS X4
that gets you some new stuff with it.

00:05:08.490 --> 00:05:10.210
Also, there's Thursby Admin Mac.

00:05:10.270 --> 00:05:12.890
So if you want the DFS and the
signing support and the other things,

00:05:12.890 --> 00:05:14.660
certainly take a look at their product.

00:05:14.660 --> 00:05:17.580
And then finally, we've, like I said,
we covered this in other sessions,

00:05:17.580 --> 00:05:19.570
so we're not going to
really touch on this much.

00:05:20.320 --> 00:05:21.820
Which brings us to LDAP.

00:05:21.820 --> 00:05:25.300
Lightweight Directory Access Protocol.

00:05:25.300 --> 00:05:30.300
By far, this is closest to the
universal directory service.

00:05:30.300 --> 00:05:32.740
Active Directory is a form of LDAP.

00:05:32.840 --> 00:05:34.540
Novell is a form of LDAP.

00:05:34.660 --> 00:05:36.790
iPlanet, Sun1, they are LDAP.

00:05:37.050 --> 00:05:38.790
OpenLDAP, it is LDAP.

00:05:38.800 --> 00:05:43.060
We have a common denominator between
all of these modern directory services.

00:05:43.060 --> 00:05:45.470
And so we can use LDAP to
interact with that.

00:05:45.500 --> 00:05:48.270
In a little bit, we've got a red hat box
here running OpenLDAP,

00:05:48.270 --> 00:05:50.150
and we're going to integrate with that.

00:05:50.320 --> 00:05:52.940
everything works like we think it should.

00:05:53.170 --> 00:05:56.400
So LDAP should be your closest and
your easiest way of integrating

00:05:56.400 --> 00:05:57.300
with these other services.

00:05:57.300 --> 00:06:00.620
And it's most likely your best
chance for interoperability.

00:06:00.620 --> 00:06:03.230
So definitely take a look at this
as you're going through here.

00:06:03.240 --> 00:06:05.280
A couple of different ways to integrate.

00:06:05.280 --> 00:06:08.540
One is you can actually
use existing attributes.

00:06:08.580 --> 00:06:11.940
You can go out, you can find the
attributes that are there,

00:06:11.940 --> 00:06:12.620
you can use them.

00:06:12.620 --> 00:06:15.910
Two, you can kind of take
over unused attributes.

00:06:15.960 --> 00:06:18.070
You can also go in,
and I'll talk about static

00:06:18.070 --> 00:06:19.480
and variable assignment.

00:06:19.480 --> 00:06:22.530
Two incredibly powerful ways of
extending your directory without

00:06:22.800 --> 00:06:24.060
actually touching the directory.

00:06:24.060 --> 00:06:26.260
And finally, extending the schema.

00:06:28.070 --> 00:06:30.760
So if you want to use the
existing data in schema,

00:06:30.760 --> 00:06:34.520
hopefully a top priority is to use
attributes in the directory as intended.

00:06:34.520 --> 00:06:38.360
So if you have a UID value in there,
go use that UID value.

00:06:38.360 --> 00:06:41.130
You don't want to go out of
your way and use your own stuff.

00:06:41.160 --> 00:06:42.900
That's just going to
make things a lot harder.

00:06:42.900 --> 00:06:46.080
In many directory services,
you're going to find the basic

00:06:46.080 --> 00:06:47.760
information that you need.

00:06:47.760 --> 00:06:51.880
In any directory service that's
catering towards a Unix system,

00:06:51.900 --> 00:06:54.650
a Unix client,
you're going to find username,

00:06:54.650 --> 00:06:57.610
short name, group ID, user ID,
that kind of stuff.

00:06:57.910 --> 00:06:59.200
And you'll be up and running immediately.

00:06:59.200 --> 00:07:04.790
I've got OpenLDAP here on a Red Hat box,
completely Linux-based.

00:07:04.800 --> 00:07:06.450
So we're going to integrate with that.

00:07:06.500 --> 00:07:08.540
It's nothing specific for Apple.

00:07:08.540 --> 00:07:10.550
I'll show you how easy
that is to work with that.

00:07:10.560 --> 00:07:12.990
So in many cases,
a lot of the information that you need

00:07:12.990 --> 00:07:15.030
for basic integration is already there.

00:07:15.040 --> 00:07:17.480
You can go in later and backfill
with some of the other stuff

00:07:17.480 --> 00:07:20.180
like network home directory,
paths, and things like that.

00:07:20.240 --> 00:07:23.480
When you get into LDAP,
there's a big temptation to kind

00:07:23.570 --> 00:07:25.520
of recycle unused attributes.

00:07:25.570 --> 00:07:27.720
If you remember some
of the documentation.

00:07:27.720 --> 00:07:30.110
There was a presentation that
was out around 10.2 about

00:07:30.110 --> 00:07:33.660
how to integrate OS X into
Active Directory with an LDAP client.

00:07:33.720 --> 00:07:37.140
We talked a lot about using the
secondary fax number because

00:07:37.350 --> 00:07:40.420
precious few people had the
primary fax number in their record,

00:07:40.540 --> 00:07:42.120
let alone a secondary fax number.

00:07:42.160 --> 00:07:43.960
So you could just go in there
and you could put whatever

00:07:43.970 --> 00:07:45.200
information you wanted in there.

00:07:45.540 --> 00:07:47.980
Perhaps a home folder location,
maybe a home URL,

00:07:47.980 --> 00:07:49.750
something along those lines.

00:07:49.780 --> 00:07:53.370
It's a good idea for testing,
but this really can come around and

00:07:53.370 --> 00:07:57.580
turn and bite you in the rear when
you install a piece of software that

00:07:57.580 --> 00:08:01.080
expects the ability to overwrite that
file or overwrite that attribute.

00:08:01.200 --> 00:08:03.840
So really caution people
to stay away from this.

00:08:03.840 --> 00:08:05.570
If you're going to do this, do it right.

00:08:05.680 --> 00:08:09.260
Either extend the scheme in the
full way or do the static mapping

00:08:09.260 --> 00:08:11.670
on the client side to get that.

00:08:13.040 --> 00:08:14.640
Static assignment.

00:08:14.680 --> 00:08:18.240
This is a really,
really cool thing that we can do on OS X.

00:08:18.280 --> 00:08:22.650
And it allows us to create entries,
to create changes on the OS X client

00:08:22.670 --> 00:08:27.960
side that reflect how we read or how
we pull data out of the LDAP database.

00:08:28.100 --> 00:08:30.550
For example,
perhaps you're integrating with a

00:08:30.560 --> 00:08:32.960
system that isn't very Unix aware.

00:08:33.000 --> 00:08:37.050
And you don't have a primary group
ID specified with your user record.

00:08:37.280 --> 00:08:40.370
If you look on your OS X server,
you'll find that every single user

00:08:40.380 --> 00:08:44.300
on your OS X server has a primary
group ID of 20 or the staff group.

00:08:44.320 --> 00:08:47.860
This is a static attribute that
could be associated with every

00:08:47.860 --> 00:08:49.640
single user that you create.

00:08:49.710 --> 00:08:52.590
Instead of putting that information
inside the LDAP directory,

00:08:52.590 --> 00:08:55.440
we can actually statically
map that on the client side.

00:08:55.500 --> 00:08:58.090
We go into directory access--
I'll show you a quick example

00:08:58.190 --> 00:09:02.100
of this-- and actually use a
pound sign and put in that value.

00:09:02.100 --> 00:09:04.140
Now,
directory services on the client machine

00:09:04.140 --> 00:09:07.520
will no longer go to the LDAP directory
to look for that information.

00:09:07.530 --> 00:09:11.460
Instead, it'll go directly read its local
pref file and always return,

00:09:11.460 --> 00:09:17.120
in this case, the value of 2004 for the
primary group ID attribute.

00:09:17.150 --> 00:09:18.520
But what if that's not enough?

00:09:18.540 --> 00:09:23.700
What if you have variables that
you need dynamic information?

00:09:23.780 --> 00:09:26.070
Well, that's why we have
variable assignment here.

00:09:26.360 --> 00:09:28.900
So now we can take a static assignment.

00:09:28.900 --> 00:09:31.680
We can take a static chunk of
information-- and the best example

00:09:31.690 --> 00:09:35.660
of this is the bottom one on here,
where we actually map over

00:09:35.660 --> 00:09:37.730
a home folder URL there.

00:09:38.020 --> 00:09:39.960
Notice that we've got a
big chunk of static stuff,

00:09:39.960 --> 00:09:41.800
and there's a little
thing in orange there.

00:09:41.800 --> 00:09:44.500
And that's string UID string.

00:09:44.590 --> 00:09:45.820
That's our variable.

00:09:45.850 --> 00:09:49.090
We now read in the UID attribute,
whatever that may be,

00:09:49.090 --> 00:09:51.910
out of the LDAP database,
and we turn that into our

00:09:52.000 --> 00:09:53.380
string of information.

00:09:53.610 --> 00:09:56.670
So we look that up on the fly,
and that allows us to do things

00:09:56.670 --> 00:09:58.720
like this home URL very easily.

00:09:58.770 --> 00:10:01.640
Because this home URL has
to have your username in it,

00:10:01.700 --> 00:10:03.410
because you go directly into that folder.

00:10:03.530 --> 00:10:06.430
So now we have a little bit of static
assignment with a variable lookup,

00:10:06.470 --> 00:10:09.470
and we don't have to put that
information into the LDAP directory.

00:10:09.480 --> 00:10:11.580
All right?

00:10:11.580 --> 00:10:13.540
All your clients have to
be mapped the same way,

00:10:13.540 --> 00:10:16.620
and they have to have this config file,
the LDAP P list in library

00:10:16.620 --> 00:10:18.210
preferences directory services.

00:10:18.400 --> 00:10:19.920
That's a good way of doing this.

00:10:19.920 --> 00:10:22.000
And again,
makes it really easy for us to integrate.

00:10:22.000 --> 00:10:23.300
So let me show you a demo of this.

00:10:23.300 --> 00:10:29.790
I've got an OS X server.

00:10:35.440 --> 00:10:40.580
Now I'm just going to CD into my
own-- it's a Open Directory master.

00:10:40.580 --> 00:10:43.870
And you can see we've got a couple
of users here in our LDAP database.

00:10:43.920 --> 00:10:46.470
And we've got a test bunny user.

00:10:46.630 --> 00:10:52.740
If I read that in,
my user shell is /bin/bash.

00:10:52.780 --> 00:10:56.180
What if I wanted to override that?

00:10:56.200 --> 00:10:58.500
I can come into here.

00:10:59.560 --> 00:11:01.960
If I remember the password.

00:11:01.960 --> 00:11:03.440
There we go.

00:11:03.500 --> 00:11:06.090
And I can edit my mappings.

00:11:06.940 --> 00:11:09.890
Right now we're using the default
open directory server mappings,

00:11:10.000 --> 00:11:11.200
but I can go down here into users.

00:11:11.200 --> 00:11:13.480
I'm going to pretend this is a
third-party directory server.

00:11:19.780 --> 00:11:20.660
Can I zoom in?

00:11:21.000 --> 00:11:24.900
That means I'm going to have
to remember that key command.

00:11:25.010 --> 00:11:25.830
Command Option 8.

00:11:25.990 --> 00:11:29.520
See, always somebody yells it
out when that happens.

00:11:29.610 --> 00:11:32.310
Command Option 8 not
doing anything for me.

00:11:32.380 --> 00:11:34.860
And now everybody's mumbling.

00:11:35.830 --> 00:11:39.010
Universal access,
we'll do it the old-fashioned way.

00:11:39.020 --> 00:11:41.900
Seeing Zoom is on.

00:11:41.910 --> 00:11:43.890
Command.

00:11:44.470 --> 00:11:45.120
That's on.

00:11:45.250 --> 00:11:45.700
And zoom in.

00:11:45.700 --> 00:11:46.480
All right, so plus.

00:11:46.480 --> 00:11:47.560
There we go.

00:11:47.560 --> 00:11:47.990
How about that?

00:11:48.020 --> 00:11:50.340
That's going to make me sick up here.

00:11:50.340 --> 00:11:50.990
Thank you.

00:11:51.040 --> 00:11:52.230
Here all week.

00:11:55.400 --> 00:11:57.640
So these are our attributes that
we're going to be looking for

00:11:57.640 --> 00:11:58.970
when we go through the system.

00:11:58.980 --> 00:12:00.700
All right,
so these are the attributes that we're

00:12:00.700 --> 00:12:02.820
associating with the user record.

00:12:02.870 --> 00:12:05.120
We've got a user shell attribute in here.

00:12:05.180 --> 00:12:11.190
Right now it's mapped to login shell,
but if I put pound bin KSH, right,

00:12:11.250 --> 00:12:14.980
and hit OK, I've changed that mapping.

00:12:15.050 --> 00:12:18.780
If I now go back, Command Option 8, boom,
there we go.

00:12:18.780 --> 00:12:19.980
How about that?

00:12:20.120 --> 00:12:20.890
Quit out of Diskl.

00:12:20.950 --> 00:12:22.040
Go back into Diskl.

00:12:22.040 --> 00:12:23.790
CDL dApp.

00:12:23.860 --> 00:12:26.840
Users, read Test Bunny.

00:12:26.890 --> 00:12:29.460
Notice that my user shell has been KSH.

00:12:29.510 --> 00:12:33.570
All right, so that's a client-side
change that I've made.

00:12:33.660 --> 00:12:35.590
And I didn't have to write
that information back to

00:12:35.590 --> 00:12:37.220
the LDAP directory server.

00:12:37.270 --> 00:12:39.280
This is killer when
dealing with eDirectory.

00:12:39.280 --> 00:12:41.530
This is killer when dealing with Sun 1.

00:12:41.750 --> 00:12:45.680
This is killer when dealing
with a recalcitrant LDAP admin,

00:12:45.910 --> 00:12:46.730
right?

00:12:46.900 --> 00:12:48.720
If you can't get them to
change the information,

00:12:48.720 --> 00:12:51.820
you can change your client machines,
and you might be able to work

00:12:51.820 --> 00:12:53.370
around a lot of this stuff.

00:12:53.540 --> 00:13:01.410
If I go back into here, Command Option 8,
zoom, go back to these mappings.

00:13:03.220 --> 00:13:05.250
Let me back it out a little bit there.

00:13:05.280 --> 00:13:07.640
All right, how about that?

00:13:07.730 --> 00:13:10.840
Man, people ask for it and
then they don't like it.

00:13:11.390 --> 00:13:17.700
User shell, and I can come into here,
and I can map it over just to a value,

00:13:17.700 --> 00:13:20.760
so string UID, for example,
which means it's going to look

00:13:20.830 --> 00:13:24.110
up whatever the UID attribute
is in this user's LDAP record,

00:13:24.110 --> 00:13:26.550
then going to swap it in here on the fly.

00:13:26.560 --> 00:13:31.020
Hit OK, hit OK, going to do that,
back to here, quit,

00:13:31.020 --> 00:13:33.550
starting to get good at this.

00:13:33.550 --> 00:13:37.790
Users, read test bunny,
and now my user shell is

00:13:37.790 --> 00:13:40.480
slash bin slash test bunny.

00:13:41.410 --> 00:13:46.190
All right, if I read my Dura Admin,
notice it's the same thing, well,

00:13:46.200 --> 00:13:48.140
with the variable involved at least.

00:13:48.200 --> 00:13:50.400
So definitely we're getting
variable mappings here.

00:13:50.490 --> 00:13:54.500
We're pulling that information out,
and we're changing it on the client side.

00:13:54.570 --> 00:13:57.380
When you're experimenting with this,
it's always nice if you go

00:13:57.380 --> 00:14:01.240
back in and change it back to
open directory server there.

00:14:01.280 --> 00:14:04.420
All right, that helps us,
the rest of the demos go better.

00:14:04.490 --> 00:14:06.460
Back to the slides, please.

00:14:08.930 --> 00:14:10.840
Static and variable mappings.

00:14:10.870 --> 00:14:13.610
Very, very cool, very,
very powerful stuff.

00:14:13.810 --> 00:14:15.800
Keep this in mind as you're
working with the other

00:14:15.800 --> 00:14:18.370
LDAP directories as you go out there.

00:14:18.580 --> 00:14:20.430
If that's not enough,
or if you really want to

00:14:20.430 --> 00:14:23.120
do this the right way,
and by the right way I mean

00:14:23.120 --> 00:14:25.300
putting it all where it
should be in a central place.

00:14:25.300 --> 00:14:27.750
Directory services is the whole
idea that you don't have to

00:14:27.750 --> 00:14:29.110
micromanage things anymore.

00:14:29.120 --> 00:14:30.560
You don't have to do workarounds.

00:14:30.560 --> 00:14:32.300
You don't have to do hacks
to get things to work.

00:14:32.340 --> 00:14:34.620
This is a political issue, though.

00:14:34.620 --> 00:14:41.420
This means going into the LDAP database
to add the attribute specific to Apple,

00:14:41.530 --> 00:14:43.290
specific to OS X.

00:14:43.300 --> 00:14:44.640
You can do this with AD.

00:14:44.640 --> 00:14:46.260
You can also do this with LDAP.

00:14:46.280 --> 00:14:48.400
It's a little easier when you're
dealing with an LDAP directory

00:14:48.400 --> 00:14:51.510
service because most LDAP admins are
interested in this kind of thing.

00:14:51.520 --> 00:14:52.660
They can roll it back.

00:14:52.730 --> 00:14:54.340
They're aware of the schema files.

00:14:54.340 --> 00:14:56.080
That way you go in.

00:14:56.080 --> 00:14:57.620
You do it the way it was intended.

00:14:57.620 --> 00:15:00.430
You do it the way it's been
QA'd for and everything else.

00:15:00.440 --> 00:15:01.820
You're going to get a
much better experience.

00:15:01.820 --> 00:15:04.000
That's not to say that
static mapping doesn't work.

00:15:04.100 --> 00:15:06.390
We have lots of places doing
that because they have to.

00:15:06.420 --> 00:15:09.420
However, in a perfect world,
you'd be putting it all in the

00:15:09.430 --> 00:15:11.580
directory service where it should live.

00:15:14.000 --> 00:15:19.200
[Transcript missing]

00:15:19.660 --> 00:15:23.470
I have a lot of people that have
good success with using LDAP,

00:15:23.500 --> 00:15:25.130
the LDAP plug-in to connect to Novell.

00:15:25.140 --> 00:15:27.680
Dan Sinema has done a great
job of putting out some of this

00:15:27.680 --> 00:15:29.420
information on how to integrate.

00:15:29.420 --> 00:15:33.150
MacEnterprise.org has some
of this information on there.

00:15:33.160 --> 00:15:38.280
Also, we have a third-party plug-in now
from Condry Consulting called Kanaka,

00:15:38.280 --> 00:15:39.540
which allows you.

00:15:39.540 --> 00:15:42.530
It's an open directory plug-in
that integrates with Novell.

00:15:42.540 --> 00:15:44.790
It makes it a little easier
to mount the home folder,

00:15:44.790 --> 00:15:47.340
do some other things like that,
and certainly makes it easier

00:15:47.340 --> 00:15:48.600
from an administration side.

00:15:49.060 --> 00:15:50.980
So if you're interested in
integrating with Novell,

00:15:50.980 --> 00:15:54.070
please take a look at this,
as it may be very interesting to you.

00:15:56.770 --> 00:16:02.020
The thing I like most about OS X as
a directory service is the ease of

00:16:02.020 --> 00:16:05.260
use we have in combining multiple
directory services together.

00:16:05.260 --> 00:16:08.400
We can have an LDAP server
hosted on an OS X server,

00:16:08.400 --> 00:16:10.960
use Open Directory to connect to that.

00:16:10.980 --> 00:16:14.030
We can have an Open LDAP server,
use LDAP to connect to that.

00:16:14.150 --> 00:16:16.620
We can throw in the AD plugin,
connect to that.

00:16:16.670 --> 00:16:19.680
And if you really enjoy root
canals without Novocaine,

00:16:19.680 --> 00:16:22.820
you could probably go further and
throw in NIST and a few other things.

00:16:24.160 --> 00:16:25.620
All of that will be useful.

00:16:25.620 --> 00:16:28.470
All of that will be usable users
that we can authenticate from.

00:16:28.480 --> 00:16:30.080
All at the same time.

00:16:30.080 --> 00:16:32.570
Your authentication path and
directory access determines how

00:16:32.570 --> 00:16:33.980
you're going to go through that.

00:16:34.000 --> 00:16:36.270
So it's a really,
really cool way of going through

00:16:36.590 --> 00:16:37.720
combining the best parts.

00:16:37.760 --> 00:16:40.070
If you've heard me talk before,
you've probably heard me talk

00:16:40.070 --> 00:16:42.220
about the magic triangle,
the reverse magic triangle,

00:16:42.230 --> 00:16:43.000
things like that.

00:16:43.000 --> 00:16:46.020
Because of our ability to work
with multiple directory servers,

00:16:46.020 --> 00:16:48.820
we have that ability to combine
the best parts of both to

00:16:48.820 --> 00:16:50.290
get what we need out of it.

00:16:50.340 --> 00:16:51.970
That and sell more XSERVs.

00:16:52.000 --> 00:16:53.700
Very important.

00:16:54.160 --> 00:16:56.640
Here's an example of using
a secondary directory.

00:16:56.640 --> 00:16:59.300
You have to keep the records together.

00:16:59.300 --> 00:17:01.640
So, for example,
if I have a user record in one,

00:17:01.640 --> 00:17:03.780
the entire user record has to be there.

00:17:03.780 --> 00:17:07.600
I'm not going to have lookups from one
user record that refer to attributes

00:17:07.600 --> 00:17:09.650
over here in another LDAP database.

00:17:09.660 --> 00:17:11.650
Then you just add them
both into the LDAP plugin,

00:17:11.800 --> 00:17:13.580
and then you go to your
authentication path,

00:17:13.580 --> 00:17:15.420
and you'd add them both into there, too.

00:17:15.420 --> 00:17:18.540
So lots of different options,
lots of different flexibilities.

00:17:20.230 --> 00:17:23.620
Here's a quick little rundown of them.

00:17:23.640 --> 00:17:25.580
More information, man.

00:17:25.660 --> 00:17:27.310
You gotta look it on there.

00:17:27.540 --> 00:17:29.160
So use this for reference when
you're going back through,

00:17:29.160 --> 00:17:31.700
but it's essentially the
stuff that we talked about.

00:17:31.700 --> 00:17:33.290
NIST being NIST.

00:17:33.300 --> 00:17:34.990
Active Directory, use the AD plugin.

00:17:35.000 --> 00:17:37.630
There's a few outliers of
why you might wanna use the

00:17:37.630 --> 00:17:40.140
LDAP plugin for Active Directory,
but for the most part,

00:17:40.140 --> 00:17:41.960
you're gonna be happiest,
you're gonna be easiest with

00:17:41.960 --> 00:17:44.940
the Active Directory plugin
for that kind of integration.

00:17:44.940 --> 00:17:48.750
LDAP, fully getting into LDAP,
fully creating an LDAP server,

00:17:48.860 --> 00:17:51.040
putting all the information,
extending the schema,

00:17:51.050 --> 00:17:54.120
is probably gonna be your
best and your happiest,

00:17:54.130 --> 00:17:55.920
your most stable system.

00:17:55.960 --> 00:17:58.340
So I'd push you towards
that if at all possible.

00:17:58.460 --> 00:18:00.730
Third-party plugins,
hopefully we come out with more for

00:18:00.730 --> 00:18:02.640
Open Directory as we mature and grow.

00:18:02.670 --> 00:18:05.350
That's one of the reasons why I really
like to see this one for Novell.

00:18:05.510 --> 00:18:07.760
Not so much just because
it's a one for Novell,

00:18:07.770 --> 00:18:09.430
but because it's also
a third-party plugin,

00:18:09.440 --> 00:18:12.290
a third-party developer that's
creating commercial software

00:18:12.300 --> 00:18:13.410
for the plugin like that.

00:18:13.580 --> 00:18:16.380
And then definitely keep in mind
the idea that you can easily

00:18:16.380 --> 00:18:18.370
use a combination of all this.

00:18:18.800 --> 00:18:23.460
Alright, so now I want to do
an OS X to Linux demo.

00:18:23.820 --> 00:18:23.940
If we go back to the...

00:18:24.860 --> 00:18:26.740
The demo machine here.

00:18:26.770 --> 00:18:33.110
I've got redhatfedoracore.apple.lan.

00:18:33.450 --> 00:18:36.420
All right, so that's my LDAP server that
I'm going to be connecting to.

00:18:36.420 --> 00:18:39.210
If I want to,
I can do a quick LDAP search and

00:18:39.210 --> 00:18:41.560
see if I see the information on it.

00:18:41.570 --> 00:18:45.660
10.0.0.11, search base.

00:18:45.660 --> 00:18:47.840
Get an x in there, search base.

00:18:47.900 --> 00:18:49.630
DC equals redhatfedoracore.

00:18:49.900 --> 00:18:51.900
This is some information
that I would have found out,

00:18:51.930 --> 00:18:54.490
either from my administrator.

00:18:55.310 --> 00:18:57.310
Now I can see a bunch of
responses back from there.

00:18:57.550 --> 00:19:00.540
So now I know I actually have
an LDAP database out there.

00:19:00.580 --> 00:19:02.220
So I just did a quick LDAP search.

00:19:02.230 --> 00:19:04.280
It's common to maybe use an LDAP browser.

00:19:04.300 --> 00:19:07.280
There's a Java LDAP browser out
there that a lot of people like.

00:19:07.290 --> 00:19:09.440
LDAP Manager is a SourceForge project.

00:19:09.440 --> 00:19:11.370
It's a full-blown Cocoa browser.

00:19:11.450 --> 00:19:14.690
PHP LDAP Admin is another
product that I use quite a bit.

00:19:14.710 --> 00:19:17.160
Open source web-based LDAP browser.

00:19:17.390 --> 00:19:19.670
This would give you a good idea
of what's in your directory

00:19:19.680 --> 00:19:21.700
and what you can connect to.

00:19:21.710 --> 00:19:24.480
We're going to go into
directory access here.

00:19:27.910 --> 00:19:31.550
Going to the LDAP,
now I'm going to add a new one.

00:19:31.600 --> 00:19:32.560
I can actually use DNS.

00:19:32.590 --> 00:19:33.470
DNS works.

00:19:33.500 --> 00:19:38.440
Red Hat Fedora Core dot Apple dot LAN.

00:19:38.510 --> 00:19:40.010
Go manual.

00:19:40.060 --> 00:19:42.900
Let's call it Red Hat.

00:19:43.470 --> 00:19:45.560
From server, we're not going to have
the mappings on the server.

00:19:45.560 --> 00:19:49.480
So we're going to pull down
and use the RFC mappings.

00:19:49.570 --> 00:19:53.120
DC Red Hat Fedora Core, DC Apple.

00:19:53.600 --> 00:20:00.120
If you do any LDAP work,
you're going to get really used

00:20:00.120 --> 00:20:00.120
to typing in DC and commas.

00:20:00.530 --> 00:20:01.880
Hit OK.

00:20:02.170 --> 00:20:06.240
If I go to authentication,
I'm going to add it in.

00:20:06.280 --> 00:20:07.790
So now I've got this red hat in here.

00:20:07.960 --> 00:20:09.360
Hit Apply.

00:20:09.370 --> 00:20:13.570
Immediately go down, go back up to Diskl,
Directory Services Command Line.

00:20:13.640 --> 00:20:15.140
See the LDAP.

00:20:15.150 --> 00:20:19.140
In here, I see both my local,
my loopback directory server.

00:20:19.280 --> 00:20:20.770
That's my open directory server.

00:20:20.920 --> 00:20:22.730
I also see my red hat server.

00:20:22.910 --> 00:20:24.570
So I can CD into that.

00:20:24.730 --> 00:20:26.480
See we got some users here.

00:20:26.540 --> 00:20:29.000
Here's the moment of truth.

00:20:29.020 --> 00:20:29.830
We can do an LS.

00:20:29.940 --> 00:20:31.040
We listed that.

00:20:31.070 --> 00:20:33.950
We're getting user records in here.

00:20:33.990 --> 00:20:36.040
This is cool, right?

00:20:36.040 --> 00:20:38.340
That was three minutes, right?

00:20:39.510 --> 00:20:40.660
Shouldn't really congratulate me.

00:20:40.660 --> 00:20:42.310
You should congratulate the
directory services team that

00:20:42.330 --> 00:20:43.160
have put all this together.

00:20:43.160 --> 00:20:45.280
But I'll take it anyway.

00:20:47.120 --> 00:20:49.220
All right,
so now I can do a read of a user.

00:20:49.460 --> 00:20:51.570
Read Elvis.

00:20:51.680 --> 00:20:53.520
Did I put Elvis in here?

00:20:53.580 --> 00:20:55.010
Typing skills help.

00:20:55.260 --> 00:20:58.380
So here's Elvis hanging out
in the LDAP directory system.

00:20:58.450 --> 00:21:03.200
If I quit out of this, ID on Elvis, boom.

00:21:03.710 --> 00:21:08.280
We've got ID user resolution, UID 1000.

00:21:08.330 --> 00:21:11.840
We're actually going to go in here,
and so we don't conflict.

00:21:11.880 --> 00:21:15.860
We're going to-- I'm going to
take myself out of the equation.

00:21:17.190 --> 00:21:18.820
So I'm not authenticating to there.

00:21:18.890 --> 00:21:20.380
At which point I can SU.

00:21:20.380 --> 00:21:22.630
I've got another user in here.

00:21:22.660 --> 00:21:24.900
If I remember the password.

00:21:27.340 --> 00:21:28.740
Here we go.

00:21:29.000 --> 00:21:30.320
Who am I?

00:21:30.660 --> 00:21:32.510
I'm me.

00:21:32.870 --> 00:21:35.040
I can do an ID on myself.

00:21:35.120 --> 00:21:38.750
I'm pulling this out of
the Linux LDAP system.

00:21:38.800 --> 00:21:40.800
All right.

00:21:41.100 --> 00:21:41.790
Done.

00:21:41.790 --> 00:21:44.800
Tea time, 3 o'clock.

00:21:44.800 --> 00:21:47.190
You'll be there.

00:21:49.330 --> 00:21:51.350
Some things that we're missing
from a setup like this is we'd

00:21:51.350 --> 00:21:53.330
be missing the network home
folders and things like that.

00:21:53.380 --> 00:21:56.040
You would have to go in,
extend the schema,

00:21:56.040 --> 00:21:58.960
or go in and do the static and the
variable mappings to get that to

00:21:58.960 --> 00:22:00.160
go through the rest of the way.

00:22:00.160 --> 00:22:01.550
So keep that in mind.

00:22:02.000 --> 00:22:05.860
Another thing that
I really want to point out,

00:22:05.940 --> 00:22:09.050
if you go back into LDAP here
and we edit this system,

00:22:09.050 --> 00:22:12.630
notice in security
everything's unchecked.

00:22:13.840 --> 00:22:17.690
It's best if you go through and you start
checking these boxes and make sure that

00:22:17.690 --> 00:22:19.900
you're using SSL for this kind of stuff.

00:22:19.920 --> 00:22:22.340
You want to make sure that you're
using SSL so you don't leave clear

00:22:22.350 --> 00:22:23.700
text passwords going through.

00:22:23.700 --> 00:22:24.420
We do.

00:22:24.420 --> 00:22:25.360
Let me zoom in on this.

00:22:28.660 --> 00:22:31.660
We do have the ability to
disable clear text passwords,

00:22:31.660 --> 00:22:33.380
which means it won't ever try that.

00:22:33.470 --> 00:22:34.430
This is killer.

00:22:34.570 --> 00:22:36.440
This prevents us from
ever sending that out.

00:22:36.570 --> 00:22:40.450
Use SSL anyway to make sure that even
if you do send a clear text password,

00:22:40.500 --> 00:22:43.040
that you're going to have a little
bit of security wrapped around that.

00:22:43.120 --> 00:22:45.270
Also, we can bind.

00:22:45.600 --> 00:22:47.780
We can bind as a user to
that directory system.

00:22:47.850 --> 00:22:50.660
So we now have a machine account that
we can create and go through there.

00:22:50.740 --> 00:22:52.180
So really, really cool stuff.

00:22:52.340 --> 00:22:56.420
Really, really easy to integrate
all these pieces together.

00:22:56.780 --> 00:22:58.580
Back to the slides.

00:23:02.370 --> 00:23:03.450
File sharing.

00:23:03.510 --> 00:23:06.020
I want to do just a quick rundown of
a couple of different file sharing

00:23:06.110 --> 00:23:08.790
protocols that you might be able
to use here and different things

00:23:08.790 --> 00:23:10.200
that you'll be able to do with them.

00:23:10.200 --> 00:23:15.550
Our big choices are AFP, SMB, NFS, FTP,
WebDAV.

00:23:15.550 --> 00:23:19.790
I just kind of grabbed everything
that Connect2Many can do.

00:23:20.100 --> 00:24:54.500
[Transcript missing]

00:24:55.200 --> 00:24:55.910
SMB.

00:24:55.980 --> 00:24:59.730
A very close second to
AFP as far as home folders.

00:24:59.730 --> 00:25:02.570
We do support SMB home folders for users.

00:25:02.570 --> 00:25:05.450
So if you've got a big NetApp filer
or something else like that and you

00:25:05.450 --> 00:25:08.160
want to do SMB connections to it,
we'll be able to do that.

00:25:08.180 --> 00:25:10.380
Windows servers we definitely work with.

00:25:10.430 --> 00:25:13.150
Make sure you disable the
security policies so that you

00:25:13.160 --> 00:25:16.060
disable signing and encrypting,
and we don't do DFS.

00:25:16.060 --> 00:25:18.400
He's always complaining
about this up front,

00:25:18.400 --> 00:25:21.740
but the only one, all right,
so that's a wonderful gentleman from

00:25:21.760 --> 00:25:23.800
the University of Michigan up here.

00:25:24.170 --> 00:25:26.130
So I'll point them out.

00:25:27.480 --> 00:25:29.920
All right,
so Samba servers we can also do this for,

00:25:29.990 --> 00:25:31.160
and NAS devices, right?

00:25:31.160 --> 00:25:33.150
If you have a NAS device,
a filer of some sort,

00:25:33.150 --> 00:25:36.610
it's many times that you're
using SMB to connect to that.

00:25:37.220 --> 00:25:40.440
Very common in university
situations is NFS.

00:25:40.630 --> 00:25:43.480
Huge amounts of NFS to support the
Unix systems that are already in there.

00:25:43.490 --> 00:25:45.020
We can use that here.

00:25:45.020 --> 00:25:46.780
We can use that for home folders.

00:25:46.780 --> 00:25:49.380
A little bit of an advantage
with fast user switching,

00:25:49.380 --> 00:25:52.040
because we don't have to
disconnect and reconnect.

00:25:52.040 --> 00:25:54.760
So with an NFS home folder mount,
you can do fast user

00:25:55.140 --> 00:25:56.810
switching with network users.

00:25:57.660 --> 00:25:58.940
We can also use it for
serverized supports,

00:25:58.940 --> 00:25:59.650
fast user switching.

00:25:59.920 --> 00:26:02.660
Obviously, this is very popular with
Linux and Unix environments,

00:26:02.660 --> 00:26:06.320
and also NAS devices,
depending on whether you trust

00:26:06.390 --> 00:26:08.980
the SMB or the NFS coming
out of your NAS device more.

00:26:08.980 --> 00:26:10.320
You might use one or the other.

00:26:12.290 --> 00:26:14.940
FTP is not a home folder system.

00:26:14.940 --> 00:26:19.890
You're not going to use
FTP for home folders.

00:26:20.060 --> 00:26:23.590
Great for file sharing, but right,
FTP's got its own issues with security,

00:26:23.680 --> 00:26:24.540
or lack thereof.

00:26:24.540 --> 00:26:27.390
So definitely,
and it's read-only in the Finder,

00:26:27.510 --> 00:26:31.370
so that would really be tough for
a home folder to do anything with.

00:26:32.220 --> 00:26:36.860
WebDAV,
perhaps a nice way to do basic sharing,

00:26:36.860 --> 00:26:40.430
basic cross-platform sharing,
perhaps over web connections with SSL,

00:26:40.430 --> 00:26:41.490
stuff like that.

00:26:41.510 --> 00:26:43.790
It's incredibly improved in Tiger.

00:26:43.820 --> 00:26:45.340
We've got Kerberos support for it.

00:26:45.340 --> 00:26:46.690
We support SSL for it.

00:26:46.690 --> 00:26:49.750
Two big things that we really needed,
we got those in there.

00:26:49.760 --> 00:26:52.440
However, you're not going to use
it for home directories,

00:26:52.480 --> 00:26:54.690
and in many times,
if you've ever administered

00:26:54.690 --> 00:26:57.630
a WebDAV server,
it's a little weird on the permissions.

00:26:57.630 --> 00:27:01.360
So depending on which one you use,
if you're just using ModDAV on Apache.

00:27:01.870 --> 00:27:04.480
Definitely, it's probably not going to be
a very enjoyable experience

00:27:04.480 --> 00:27:05.890
for complex permission schemes.

00:27:09.900 --> 00:27:18.250
OS X comes a very,
very long ways in terms of

00:27:18.300 --> 00:27:19.800
backup support from clients.

00:27:19.800 --> 00:27:24.890
Remember just a short
time ago we had one?

00:27:24.980 --> 00:27:26.230
Now we have many.

00:27:27.300 --> 00:27:31.070
BRU from the Tolis Group, Retrospect,
Atempo, Archea, Tivoli, Veritas,

00:27:31.080 --> 00:27:33.640
Breezehill, Legato, ArcServe, Backbone.

00:27:33.640 --> 00:27:37.300
When I did a quick little search and
looked at some of our product marketing

00:27:37.300 --> 00:27:41.630
literature and stuff like that,
I found that we have software clients

00:27:41.630 --> 00:27:45.160
of some sort for these systems,
either 10.3 or 10.4.

00:27:45.160 --> 00:27:47.090
Definitely check with the
vendor for what they support,

00:27:47.090 --> 00:27:48.790
with 10.4 being pretty new out here.

00:27:48.800 --> 00:27:50.350
So lots and lots of options.

00:27:50.360 --> 00:27:53.300
Some of these are downstairs
in the data center.

00:27:53.300 --> 00:27:54.420
Take a look at them.

00:27:54.420 --> 00:27:55.090
See what you need.

00:27:55.100 --> 00:27:55.970
See what you can use.

00:27:56.350 --> 00:27:58.610
So hopefully we can play well
with a lot of other systems.

00:27:58.640 --> 00:28:00.250
Worst comes to worst, right?

00:28:00.260 --> 00:28:03.660
You go to my scripting session
yesterday and you learn how to back

00:28:03.660 --> 00:28:07.840
it up yourself by sending it off to a
file share or something else like that.

00:28:07.880 --> 00:28:10.350
So it's a lot easier to
integrate with these things now.

00:28:13.260 --> 00:28:14.220
That's cool, right?

00:28:14.400 --> 00:28:17.650
But that's last year.

00:28:18.000 --> 00:28:20.420
That's us integrating with somebody else.

00:28:20.420 --> 00:28:23.540
What happens if we
want to be the top dog?

00:28:23.660 --> 00:28:27.560
What happens if we want to be the
number one directory service and

00:28:27.560 --> 00:28:29.770
have others be subjugated to us?

00:28:30.360 --> 00:28:35.670
Part of plans of world domination,
I'll admit to them right here,

00:28:36.130 --> 00:28:38.030
This was an interesting
experience for me.

00:28:38.160 --> 00:28:41.730
I've been wanting to do this
for quite a while and actually

00:28:41.740 --> 00:28:42.590
sit down and document it.

00:28:42.600 --> 00:28:45.180
You should see some documentation
coming out in a little bit about this.

00:28:45.180 --> 00:28:49.840
You read on the mailing list kind
of whispers here and there of,

00:28:49.880 --> 00:28:52.390
oh, I integrated my Linux box
to open directory and it

00:28:52.390 --> 00:28:53.550
was great and it all worked.

00:28:53.600 --> 00:28:55.190
But then they never tell you how.

00:28:55.190 --> 00:28:57.080
They never tell you the
steps they went through.

00:28:58.490 --> 00:29:00.860
Part of that's because
every Linux distribution,

00:29:00.880 --> 00:29:03.110
certainly between
Linux and Unix and Solaris,

00:29:03.110 --> 00:29:06.690
they're all different and they
all interact with LDAP directory

00:29:06.690 --> 00:29:07.780
systems in different ways.

00:29:07.780 --> 00:29:14.390
So it may or may not be a
simple experience for you.

00:29:14.910 --> 00:29:17.540
was a little more pain for me.

00:29:17.590 --> 00:29:18.900
Linux, though, was pretty easy.

00:29:18.900 --> 00:29:20.610
They have a lot of support for this.

00:29:20.750 --> 00:29:22.090
A lot of clients do this well.

00:29:22.100 --> 00:29:26.310
So I'll hopefully walk you through how
to do this the hard way and the easy way.

00:29:26.890 --> 00:29:30.740
When you're dealing with Open Directory,
just like I like Open Directory because

00:29:30.750 --> 00:29:33.040
it plays well with other
systems as a client,

00:29:33.040 --> 00:29:36.330
we also play fairly well with
other systems as a server.

00:29:36.340 --> 00:29:38.500
We use Open LDAP.

00:29:38.500 --> 00:29:39.690
We use Kerberos.

00:29:39.690 --> 00:29:42.050
All of these are standards.

00:29:42.050 --> 00:29:45.400
We use 100% the MIT Kerberos KDC.

00:29:45.400 --> 00:29:49.110
Open LDAP, very, very much all Open LDAP.

00:29:49.130 --> 00:29:53.510
So we're supplying this so we can easily
integrate with other systems in this way.

00:29:53.740 --> 00:29:56.650
In many cases, when you're dealing
with LDAP integration,

00:29:56.650 --> 00:29:59.240
it's the Mac client that
needs more information.

00:29:59.240 --> 00:30:01.550
In Open Directory,
we put all the stuff in there,

00:30:01.630 --> 00:30:04.150
all the stuff that a
Linux machine is going to use.

00:30:04.160 --> 00:30:06.740
So you're going to see how easy it
is for us to connect up into that.

00:30:06.760 --> 00:30:08.940
So again, we play very well with others.

00:30:10.930 --> 00:30:14.670
So as far as directory services go,
first of all,

00:30:14.680 --> 00:30:18.560
we can talk about an NTPDC real quick.

00:30:18.570 --> 00:30:20.360
It's great that we have the PDC.

00:30:20.360 --> 00:30:24.240
We have a session here right after
this one in this room about it.

00:30:24.240 --> 00:30:26.960
It's great in 10.4 that we now can act,
our replicas can act as a

00:30:26.960 --> 00:30:30.960
backup domain controllers,
so it actually becomes very viable in an

00:30:30.960 --> 00:30:34.790
enterprise and institutional environment.

00:30:35.000 --> 00:30:37.260
I wouldn't use it for more than 100 PCs,
right?

00:30:37.260 --> 00:30:41.190
An NT domain is not even
last year's technology.

00:30:41.200 --> 00:30:44.360
So it's going to be hard to convince
people to do a lot with that.

00:30:44.400 --> 00:30:47.160
So if you're moving
for more than 100 PCs,

00:30:47.160 --> 00:30:49.880
I usually suggest if you
were in my AD session,

00:30:49.880 --> 00:30:52.580
we talked about the
reverse magic triangle.

00:30:52.580 --> 00:30:54.140
We did the Kerberos Cross Realm Trust.

00:30:54.140 --> 00:30:57.180
That's definitely a good
solution for you to go if you've

00:30:57.180 --> 00:30:58.800
got more than 100 PCs or so.

00:30:59.190 --> 00:30:59.800
Definitely give it a go.

00:30:59.800 --> 00:31:00.570
Take a look at it.

00:31:00.600 --> 00:31:03.680
With the backup domain controller,
it becomes a viable solution,

00:31:04.040 --> 00:31:06.780
especially if you only have a half dozen
PCs or something else like that that

00:31:06.790 --> 00:31:08.000
you want to keep around in your network.

00:31:10.030 --> 00:31:12.880
LDAP on Open Directory.

00:31:13.060 --> 00:31:16.030
Common directory service
amongst non-Windows clients.

00:31:16.030 --> 00:31:19.570
So it's a common denominator for most
everything else that's out there.

00:31:19.570 --> 00:31:22.360
Easy integration with
most Linux distributions.

00:31:22.360 --> 00:31:24.700
This is Red Hat Fedora Core up here.

00:31:24.700 --> 00:31:27.450
If you've seen me carrying around
this laptop for three days,

00:31:27.450 --> 00:31:29.830
it's really been kind of
the bane of my existence.

00:31:29.860 --> 00:31:31.510
It's rather heavy.

00:31:31.810 --> 00:31:35.600
It's caused me rather late nights,
and like I said,

00:31:35.600 --> 00:31:38.570
it made me appreciate OS X a lot more.

00:31:39.100 --> 00:31:41.160
But I've gone through the pain,
so you don't have to.

00:31:41.310 --> 00:31:42.700
I took that bullet for the team.

00:31:42.700 --> 00:31:43.950
Happy to do that.

00:31:43.990 --> 00:31:46.250
So we'll do that in a little
bit as we go through there.

00:31:46.250 --> 00:31:48.680
Key note about group membership.

00:31:48.680 --> 00:31:51.720
Other systems won't support
Tiger's nested groups,

00:31:51.720 --> 00:31:55.670
just like you can't do this out of
Windows when you are an LDAP client.

00:31:55.670 --> 00:31:58.290
We can't resolve that back many times.

00:31:58.290 --> 00:31:59.590
Keep that in mind.

00:31:59.920 --> 00:32:01.230
Keep your groups flat.

00:32:01.230 --> 00:32:02.920
That'll make it easier.

00:32:02.920 --> 00:32:06.130
I had a line up here that's
not quite true that we now

00:32:06.130 --> 00:32:08.300
list group members by full DN.

00:32:08.300 --> 00:32:11.090
That's I hope we now list
group members by full DN.

00:32:11.090 --> 00:32:14.090
We do it when we start off,
but we don't actually keep it up.

00:32:14.090 --> 00:32:17.300
So if you have questions about that,
talk to me afterwards.

00:32:17.300 --> 00:32:21.090
Couple of files that you need to
worry about when you're configuring

00:32:21.090 --> 00:32:22.760
Linux for open directory.

00:32:22.780 --> 00:32:23.800
All right.

00:32:23.800 --> 00:32:25.650
Etsy, NSSwitch.conf.

00:32:25.650 --> 00:32:28.480
This is kind of like
the authentication path.

00:32:28.480 --> 00:32:32.040
This is all using the
PAM LDAP modules from Paddle,

00:32:32.040 --> 00:32:33.000
I believe, that gets us.

00:32:33.000 --> 00:32:37.490
Well, the LDAP.conf and the rest.

00:32:37.490 --> 00:32:37.500
NSSwitch.conf is on
most Linux Unix systems.

00:32:37.500 --> 00:32:40.620
Allows you to pick where you're
pulling your authentication and

00:32:40.620 --> 00:32:42.210
where you're pulling your users from.

00:32:42.380 --> 00:32:44.500
So I'll walk you through
doing that real quick.

00:32:44.500 --> 00:32:45.380
LDAP.conf.

00:32:45.380 --> 00:32:47.590
That sets up where
your LDAP directory is,

00:32:47.620 --> 00:32:49.500
what you're going to be connecting into.

00:32:49.500 --> 00:32:50.940
PAMD system auth.

00:32:50.990 --> 00:32:52.850
This is your PAM modules.

00:32:53.030 --> 00:32:55.500
We're going to tell you to use
LDAP for authentication here.

00:32:55.500 --> 00:32:58.460
And then finally,
if you want to support home folders,

00:32:58.490 --> 00:33:01.500
that kind of thing,
you might want to go into Etsy Fstab

00:33:01.500 --> 00:33:03.440
and set up an automount for NFS.

00:33:03.580 --> 00:33:06.700
And that way you can NFS them back from
the OS X server as we go through there.

00:33:06.700 --> 00:33:08.490
as we go through them.

00:33:09.270 --> 00:33:10.880
Kerberos.

00:33:10.900 --> 00:33:14.350
Many of the Linux and Unix distributions
very much support Kerberos very well.

00:33:14.390 --> 00:33:16.420
So you can support single sign-on.

00:33:16.420 --> 00:33:19.750
We've got a standard MIT KDC setup,
so we're going to walk

00:33:19.750 --> 00:33:21.560
through that real quick,
show you how all that works.

00:33:21.560 --> 00:33:26.970
And there's one config file for that,
which is etsykerb5.conf in many cases.

00:33:26.970 --> 00:33:29.360
Solaris will keep this in
slightly different places.

00:33:29.360 --> 00:33:31.110
Other Linux distributions may also.

00:33:31.110 --> 00:33:33.760
But that's kind of the file
that you're looking for.

00:33:34.580 --> 00:33:37.860
And you can copy that direct
from library preferences,

00:33:37.860 --> 00:33:40.050
edu, MIT, Kerberos on the OS X side.

00:33:40.060 --> 00:33:42.750
I don't like to type,
so you're going to see me do that.

00:33:42.780 --> 00:33:44.110
KAdmin you could use.

00:33:44.110 --> 00:33:48.180
You could actually create service
principles for your Linux servers,

00:33:48.190 --> 00:33:50.760
for your web servers,
for latest versions of

00:33:50.760 --> 00:33:52.520
Samba and stuff like that.

00:33:52.560 --> 00:33:55.490
You could utilize that with
our KDC and open directory.

00:33:55.490 --> 00:33:58.250
So a lot of possibilities
for interoperability there.

00:33:58.260 --> 00:34:01.610
So back to the demos.

00:34:03.250 --> 00:34:09.020
I'm doing my own stunts on this one,
so hopefully it works out okay.

00:34:09.580 --> 00:34:10.340
Clear this off.

00:34:10.340 --> 00:34:14.140
First thing that we're going to do,
let's exit out back to myself.

00:34:14.160 --> 00:34:18.770
SSH into the Red Hat box, 10.0.0.11.

00:34:19.990 --> 00:34:22.950
Don't do this at home,
but we're going to go on his route,

00:34:22.950 --> 00:34:27.450
so I don't have to worry about that
pesky little authentication thing.

00:34:27.850 --> 00:34:30.200
All right, so pass the hoop over
the floating woman here,

00:34:30.210 --> 00:34:32.560
and you can see that definitely
we're on a red hat box.

00:34:32.560 --> 00:34:34.800
269 is the kernel.

00:34:34.800 --> 00:34:39.590
I believe this is Fedora Core 3 right
off the distro installed on there.

00:34:39.640 --> 00:34:42.200
All right, so all the fun stuff.

00:34:42.280 --> 00:34:45.530
First thing we do,
if we go through the set, you know,

00:34:45.560 --> 00:34:47.510
we can try, can I find DuraAdmin?

00:34:47.520 --> 00:34:49.900
Well, that would have been
great if it just worked.

00:34:49.980 --> 00:34:52.300
But no, you're going to have to
do some configuration.

00:34:52.300 --> 00:34:55.760
First step, go through nswitch.conf.

00:34:55.860 --> 00:35:01.530
And if we go into here,
some danger text and stuff up at the top.

00:35:01.580 --> 00:35:04.840
You want to go down here, password,
shadow, and group.

00:35:04.840 --> 00:35:06.780
Right now they're set to files.

00:35:06.780 --> 00:35:08.860
This means we're going to
look in the local files,

00:35:08.910 --> 00:35:11.550
the Etsy password file,
the Etsy group file, stuff like that,

00:35:11.630 --> 00:35:13.540
for our group and for
our user membership.

00:35:13.560 --> 00:35:16.360
We want it to look into LDAP also.

00:35:16.360 --> 00:35:20.520
So all we have to do,
add LDAP at the end.

00:35:26.240 --> 00:35:30.220
ID Dura Admin, no such user.

00:35:30.260 --> 00:35:31.720
Got to do one more thing.

00:35:31.770 --> 00:35:34.160
We got to tell it where
our LDAP server is.

00:35:34.370 --> 00:35:38.030
So that's etsyldap.conf.

00:35:38.030 --> 00:35:38.030
All right?

00:35:38.710 --> 00:35:40.680
Come down here.

00:35:40.730 --> 00:35:42.600
Now we can look at our host.

00:35:42.810 --> 00:35:45.590
Just put in an IP address
for it or a DNS name.

00:35:45.640 --> 00:35:48.770
10.0.0.10.

00:35:48.770 --> 00:35:53.050
Then we got to put in
our actual LDAP base,

00:35:53.050 --> 00:35:59.390
which if memory serves is this.

00:36:03.400 --> 00:36:09.610
All right,
let me make sure I got that right.

00:36:09.630 --> 00:36:10.720
Let me pull off something here.

00:36:10.820 --> 00:36:13.100
Oh, OS XS.

00:36:13.100 --> 00:36:13.420
Lookup.

00:36:13.440 --> 00:36:20.580
Like I said,
you're going to type OS XS a lot.

00:36:20.630 --> 00:36:22.420
Put all that through here.

00:36:30.160 --> 00:36:32.170
That wasn't so hard, was it?

00:36:32.350 --> 00:36:33.760
There's our directory admin.

00:36:33.930 --> 00:36:37.260
And if I go over here
to Workgroup Manager,

00:36:37.910 --> 00:36:39.850
And now we're going to get crazy.

00:36:39.970 --> 00:36:43.430
We'll create a new group.

00:36:44.340 --> 00:36:47.070
See, I've done so many demos,
I've run out of the good, funny,

00:36:47.070 --> 00:36:49.740
witty names to put in here.

00:36:49.740 --> 00:36:50.580
So I have to think of something.

00:36:50.580 --> 00:36:51.440
I'll just call it test.

00:36:51.480 --> 00:36:52.440
That's boring.

00:36:52.510 --> 00:36:54.440
But we'll save it down.

00:36:54.520 --> 00:36:54.970
Pull over here.

00:36:55.050 --> 00:36:56.700
Pull DuraAdmin into there.

00:36:56.700 --> 00:36:58.040
Pull TestBunny into here.

00:36:58.290 --> 00:36:59.130
Hit Save.

00:36:59.530 --> 00:37:02.040
Now I can ID DuraAdmin again.

00:37:02.250 --> 00:37:06.210
And notice that now we have
group membership for 1,025.

00:37:10.370 --> 00:37:13.100
The one thing we don't have yet, though,
is authentication.

00:37:13.170 --> 00:37:15.050
We've got the
identification half of this,

00:37:15.150 --> 00:37:17.370
but we don't have the
authentication half.

00:37:17.570 --> 00:37:20.870
For that,
we need to go into-- let me clear

00:37:21.590 --> 00:37:27.110
this out-- etsy/pamd.d/system/auth.

00:37:27.210 --> 00:37:30.290
And you'll notice there's all kinds
of PAM modules that we're going to use

00:37:30.290 --> 00:37:31.900
to maybe authenticate ourselves with.

00:37:31.970 --> 00:37:33.790
You would go in here,
and you would add in

00:37:34.320 --> 00:37:36.790
an entry for PAM LDAP.

00:37:37.290 --> 00:37:38.730
That's the hard way of doing it.

00:37:38.990 --> 00:37:42.300
I kind of wanted to draw the
demo out a little bit longer.

00:37:42.300 --> 00:37:43.180
We've still got a half hour.

00:37:43.200 --> 00:37:44.440
We've still got a lot
of things to talk about.

00:37:44.440 --> 00:37:46.340
So that's doing it by hand.

00:37:46.340 --> 00:37:47.060
You'd add that in.

00:37:47.060 --> 00:37:50.580
Many Linux distributions actually
have a little bit of a GUI.

00:37:50.580 --> 00:37:52.730
We'll use GUI in quotes here.

00:37:55.360 --> 00:37:56.300
is off config and go.

00:37:56.300 --> 00:37:57.580
There he go.

00:37:57.630 --> 00:38:00.830
Now, this isn't the Linux side.

00:38:00.860 --> 00:38:03.780
It looks better on the Red Hat box.

00:38:03.960 --> 00:38:06.850
The window size is off
and curses and whatever.

00:38:06.850 --> 00:38:07.890
Yeah, I know.

00:38:08.040 --> 00:38:10.380
We could use X11 to it
or something like that.

00:38:10.540 --> 00:38:13.570
What I want to show you here, though,
is you can go down and you can go, say,

00:38:13.570 --> 00:38:17.220
select LDAP, use LDAP authentication,
then hit next.

00:38:17.220 --> 00:38:20.020
It's going to ask you real
quick what your LDAP server is,

00:38:20.020 --> 00:38:22.630
and then it's going to ask
you what your base DN is.

00:38:22.630 --> 00:38:27.240
This is just the information that we
put in by hand in the config files.

00:38:27.240 --> 00:38:30.240
We can do it here through
this off config GUI.

00:38:30.240 --> 00:38:31.130
All right?

00:38:31.130 --> 00:38:33.570
When we're done, we'll hit return.

00:38:34.300 --> 00:38:36.950
Now again, ID DuraAdmin.

00:38:37.060 --> 00:38:37.950
Beautiful.

00:38:37.980 --> 00:38:42.140
We're going to SU into something
else that lives on this box.

00:38:42.140 --> 00:38:44.190
I think admin is on here.

00:38:44.280 --> 00:38:45.300
Okay.

00:38:45.300 --> 00:38:49.550
And then we can go SU into DuraAdmin.

00:38:49.550 --> 00:38:51.360
Prompt us for a password.

00:38:51.360 --> 00:38:55.510
There we are.

00:39:00.500 --> 00:39:01.530
We've got authentication.

00:39:01.540 --> 00:39:02.660
We've got everything else.

00:39:02.900 --> 00:39:04.970
Problem is,
we don't actually have a home folder.

00:39:05.040 --> 00:39:07.900
If I do a CD here, meh.

00:39:07.930 --> 00:39:09.100
Don't know what to find.

00:39:09.110 --> 00:39:09.620
OK?

00:39:10.020 --> 00:39:12.210
So to get around that--

00:39:12.280 --> 00:39:14.190
You can just do a mount.

00:39:14.280 --> 00:39:18.300
Now first,
keep in mind the show mount command.

00:39:18.620 --> 00:39:23.010
That's going to show us the NFS exports
that are exported off that server.

00:39:23.080 --> 00:39:26.520
I've gone in ahead of time
and I've exported out /users.

00:39:26.570 --> 00:39:27.220
All right.

00:39:27.320 --> 00:39:29.280
So now I can mount.

00:39:34.000 --> 00:39:46.540
into /users, only root, ah, sorry.

00:39:46.540 --> 00:39:46.540
All right.

00:39:46.540 --> 00:39:46.540
Mount 10.0.0.10:users:users.

00:39:46.540 --> 00:39:46.540
No news is good news, right?

00:39:46.670 --> 00:39:50.700
And if I SU into,
what's a secondary user?

00:39:50.700 --> 00:39:51.980
I think Test Bunny I put into there,
right?

00:39:52.060 --> 00:39:52.600
Test Bunny.

00:39:52.600 --> 00:39:53.960
All right, CD.

00:39:53.960 --> 00:39:55.330
Ha-ha, look at that.

00:39:55.360 --> 00:39:56.570
User's Test Bunny.

00:40:02.440 --> 00:40:05.300
And now you can see that we've got that
mount point there in the bottom line.

00:40:05.300 --> 00:40:07.300
This user's on .10.

00:40:07.300 --> 00:40:09.300
So now we've got full
support for home directories.

00:40:09.300 --> 00:40:11.200
We've got full support for users.

00:40:11.370 --> 00:40:13.300
We've got full support
for authentication.

00:40:13.300 --> 00:40:16.300
Out of the box,
this is pretty simplified LDAP.

00:40:16.300 --> 00:40:18.300
We're just doing simple binds.

00:40:18.300 --> 00:40:20.300
We're doing unencrypted
connections there.

00:40:20.300 --> 00:40:21.290
So you'd want to beef that up.

00:40:21.390 --> 00:40:22.300
You'd want to use SSL.

00:40:22.300 --> 00:40:26.300
You'd want to go through some of those
LDAP.com files and stuff like that.

00:40:26.300 --> 00:40:29.300
I apologize for the demo
being entirely text-based.

00:40:29.300 --> 00:40:33.300
I was really trying hard to come up with
good ways to get flashy graphics in here.

00:40:33.300 --> 00:40:37.290
But directory services
usually isn't flashy graphics.

00:40:37.330 --> 00:40:40.280
So anyway, so there we go with all that.

00:40:40.460 --> 00:40:43.300
But we're not done yet, right?

00:40:43.400 --> 00:40:48.420
Because the next thing you want is you
want to be able to Kerberize all of this,

00:40:48.420 --> 00:40:49.300
right?

00:40:49.360 --> 00:40:50.240
So we're going to cheat real quick.

00:40:50.340 --> 00:40:52.790
I'm going to open up a new window.

00:40:54.000 --> 00:40:57.920
And I'm just going to
cat library preferences,

00:40:57.990 --> 00:40:59.940
edgumit-kirberos.

00:41:00.020 --> 00:41:02.660
Here's our file.

00:41:02.680 --> 00:41:05.520
We'll get rid of the warnings
about open directory,

00:41:05.520 --> 00:41:08.540
since that's obviously not going
to happen on the Linux box.

00:41:08.630 --> 00:41:13.490
So we're just copying directly
from this file on the OS X server.

00:41:13.660 --> 00:41:16.820
Now I'm going to go in here,
exit out of that,

00:41:16.830 --> 00:41:21.880
and we're going to edit etsy-kirb5.conf.

00:41:21.950 --> 00:41:23.620
Here's some default
stuff that are in here.

00:41:23.620 --> 00:41:25.000
This is just an example.

00:41:25.000 --> 00:41:28.890
Notice that it looks amazingly
similar to what we have.

00:41:29.040 --> 00:41:33.210
So we're going to delete all those,
put our new stuff in,

00:41:33.240 --> 00:41:34.890
make sure we actually get the whole bit.

00:41:34.900 --> 00:41:41.250
Lib defaults, I believe.

00:41:42.740 --> 00:41:45.800
Alright, SU back to this user.

00:41:46.020 --> 00:41:47.050
Do a K init.

00:41:47.050 --> 00:41:49.620
We're thinking, we're thinking,
we're thinking.

00:41:49.700 --> 00:41:51.700
Maybe I copied it wrong.

00:41:51.700 --> 00:41:52.970
It should have it by now.

00:41:52.970 --> 00:41:59.330
This is where the demos break.

00:42:03.120 --> 00:42:07.660
Preferences, MIT Kerberos.

00:42:07.660 --> 00:42:08.730
I was hoping so much.

00:42:08.830 --> 00:42:09.720
Let's try this again.

00:42:09.800 --> 00:42:18.070
Knit test bunny and domain
realm osxs.apple.lan.

00:42:24.290 --> 00:42:25.890
We'll figure this out.

00:42:26.070 --> 00:42:27.590
Usually, that's all you need to do.

00:42:27.830 --> 00:42:29.660
I'll check what we're missing on there.

00:42:29.660 --> 00:42:32.740
And then the KNIT would allow you to
go through and do that connection.

00:42:32.740 --> 00:42:34.280
I might have gotten--
I got the right file.

00:42:34.310 --> 00:42:37.190
And I'll have to think
about this a little bit.

00:42:38.150 --> 00:42:39.720
What?

00:42:39.820 --> 00:42:42.090
You shouldn't have to
restart the Kerberos server.

00:42:42.180 --> 00:42:45.200
Just adding in Kerberos clients,
meaning restarting the server,

00:42:45.200 --> 00:42:45.720
that'd be bad.

00:42:46.080 --> 00:42:47.580
Not good at all.

00:42:47.620 --> 00:42:49.010
So anyway, this will work.

00:42:49.130 --> 00:42:51.380
The problem is, once you get this,
you can do a K in it,

00:42:51.380 --> 00:42:53.200
you can do a K list,
everything else is going

00:42:53.260 --> 00:42:54.350
to be groovy with that.

00:42:54.770 --> 00:42:56.650
However...

00:42:56.950 --> 00:43:00.200
You're going to run into an
issue where you can't SSH over.

00:43:00.390 --> 00:43:07.070
Linux ships-- hey!

00:43:07.070 --> 00:43:07.070
Came back with something.

00:43:08.900 --> 00:43:34.600
[Transcript missing]

00:43:34.770 --> 00:43:35.700
That's bad.

00:43:35.700 --> 00:43:37.670
So you either have to downgrade one,
upgrade the other,

00:43:37.670 --> 00:43:39.040
and then you'll get the single sign-on.

00:43:39.040 --> 00:43:41.720
Otherwise, all your other stuff works.

00:43:41.720 --> 00:43:44.620
Your mod SP Nego,
if you can get all that going.

00:43:44.620 --> 00:43:46.040
Beautiful stuff with that.

00:43:46.070 --> 00:43:48.330
So go through some of the
Kerberos documentation and

00:43:48.330 --> 00:43:49.460
get all those pieces together.

00:43:49.460 --> 00:43:50.570
Hoo-hoo-hoo.

00:43:50.570 --> 00:43:52.200
No news is good news.

00:43:52.200 --> 00:43:55.380
K-List, hey, we've got tickets.

00:44:00.670 --> 00:44:03.060
All right, so that's the final
piece there doing this.

00:44:03.060 --> 00:44:07.670
You could then go through and actually
use mod Kerberos instead of mod,

00:44:07.740 --> 00:44:11.180
instead of the Pam Eldap, excuse me,
Pam Kerberos instead of Pam Eldap,

00:44:11.200 --> 00:44:13.430
which is going to increase your
security for your authentication

00:44:13.520 --> 00:44:14.870
and things like that a little bit.

00:44:14.870 --> 00:44:17.040
It was like 15 minutes, right?

00:44:19.030 --> 00:44:20.770
It was not hard at all to do this.

00:44:20.790 --> 00:44:23.080
You just got to find these
different little pieces.

00:44:23.080 --> 00:44:24.700
This is a Red Hat box.

00:44:24.700 --> 00:44:27.770
I kind of picked Red Hat because
I thought it was the easiest.

00:44:27.770 --> 00:44:31.020
I've found out that's not the case.

00:44:33.770 --> 00:44:36.100
Plugging in a thumb drive
into this thing was amazing.

00:44:36.100 --> 00:44:39.430
We had four people over
at Dave's last night,

00:44:39.630 --> 00:44:45.410
a large number of empty glasses, a pager,
a cell phone, a hip-top mobile,

00:44:45.410 --> 00:44:49.940
and we were still unable to
get the thumb drive to mount.

00:44:49.980 --> 00:44:54.590
So, I'm not switching anytime soon,
but my Linux box at home now,

00:44:54.590 --> 00:44:59.410
I can use all the same users and
passwords and all the other stuff.

00:44:59.410 --> 00:45:02.570
So, really, really cool stuff that we
integrate this easily with it.

00:45:03.560 --> 00:45:07.280
All right, back to the slides.

00:45:11.940 --> 00:45:15.750
Something that I got turned on to
very recently by Michael Bartosz,

00:45:15.780 --> 00:45:19.230
who had done this out
at Indiana University.

00:45:19.440 --> 00:45:21.620
That was easy,
so I had to fill a little time here.

00:45:21.680 --> 00:45:25.640
So I wanted to throw in something
that was a bit of a think piece.

00:45:25.640 --> 00:45:27.200
I was hoping to get a demo up.

00:45:27.200 --> 00:45:31.740
If I get some chance in the
IT Enterprise Admin Lab or whatever

00:45:31.740 --> 00:45:34.840
over here on the second floor,
I might try it a little bit too,

00:45:34.850 --> 00:45:37.550
get a couple of machines together.

00:45:37.730 --> 00:45:40.680
In Open Directory,
we're presenting you with

00:45:40.890 --> 00:45:42.550
a flat directory space.

00:45:42.760 --> 00:45:47.980
We're presenting you with just one
container where all your users go into.

00:45:47.990 --> 00:45:49.810
It's got its benefits,
because it's really simple.

00:45:49.920 --> 00:45:50.600
It's really easy.

00:45:50.600 --> 00:45:54.570
We don't have to worry about the
complexities of where our users are,

00:45:54.570 --> 00:45:56.860
how to put them there,
where places to put them,

00:45:56.860 --> 00:45:58.660
that kind of stuff.

00:45:58.720 --> 00:46:02.750
So for smaller and medium environments,
it really has a lot of value.

00:46:02.890 --> 00:46:06.570
It's very simple now for an admin
who's never dealt with LDAP before to

00:46:06.690 --> 00:46:12.370
use Workgroup Manager to be productive
with it out of the box very quickly.

00:46:12.790 --> 00:46:17.410
As OS X grows, as more people pick it up,
we find more and more people

00:46:17.410 --> 00:46:20.700
using this for larger and
larger and larger environments.

00:46:20.820 --> 00:46:25.990
And as they go into larger environments,
we need more flexibility.

00:46:26.320 --> 00:46:29.640
So one of the things that I'd
like all of us to start doing,

00:46:29.670 --> 00:46:32.700
because where we lead,
a lot of times engineering

00:46:32.730 --> 00:46:34.770
and everything else follows.

00:46:35.210 --> 00:46:38.640
So we can lead with this and start
really getting into LDAP and using

00:46:38.640 --> 00:46:40.260
LDAP for the flexibility that it is.

00:46:40.300 --> 00:46:43.910
And one of the concepts that we have here
is the idea of distributed authorization.

00:46:43.920 --> 00:46:47.750
So we can delegate administrative
tasks to certain users.

00:46:47.760 --> 00:46:49.470
You've got machines in New York.

00:46:49.560 --> 00:46:50.700
You've got machines in Chicago.

00:46:50.700 --> 00:46:54.700
You want admins in New York that can only
administer those machines in New York.

00:46:54.760 --> 00:46:56.800
To do that,
we've got to do a little bit of

00:46:56.800 --> 00:46:58.410
mapping and some other stuff.

00:46:58.480 --> 00:47:03.110
In open directory out of the box,
you just have users that are admins.

00:47:03.920 --> 00:47:05.930
Once they're an admin,
they're an admin on all the machines.

00:47:05.940 --> 00:47:09.430
And we'd like to break that down a
little bit and delegate administration

00:47:09.440 --> 00:47:10.590
privileges to other users.

00:47:10.600 --> 00:47:15.720
So we're doing this by a little bit
of bait and switch under the covers.

00:47:15.780 --> 00:47:21.090
Allowing open directory to
be flexible and to not just

00:47:21.090 --> 00:47:24.510
follow into the predefined stuff
that open directory gives us,

00:47:24.560 --> 00:47:28.020
but to take our life in our own hands and
to play around with this a little bit.

00:47:28.040 --> 00:47:30.090
So it's really cool what
you can do with this.

00:47:30.100 --> 00:47:33.630
The idea is first that
we can create actual OUs.

00:47:33.760 --> 00:47:36.980
Little known fact,
open directory fully supports OUs.

00:47:37.080 --> 00:47:39.040
All right, OpenLDAP supports OUs.

00:47:39.080 --> 00:47:40.990
So you can just create
one and put it in there.

00:47:41.080 --> 00:47:46.080
You can either do this with an LDF file
or you can go into PHP LDAP admin.

00:47:46.080 --> 00:47:50.080
Go into that, run that as a web server,
a web service, put that in there.

00:47:50.080 --> 00:47:52.070
It's a really nice tool for
doing this kind of stuff.

00:47:52.080 --> 00:47:55.280
Once you have an OU in there,
we can now put collections of groups,

00:47:55.280 --> 00:47:57.080
collections of machines in there.

00:47:57.220 --> 00:47:59.500
And the second big deal of
this is actually putting

00:47:59.500 --> 00:48:01.080
an access control in there.

00:48:01.080 --> 00:48:03.580
You can put an access control
list directly into the OU.

00:48:03.580 --> 00:48:06.740
You can put an access control
list directly into LDAP and

00:48:06.740 --> 00:48:07.900
we replicate that out.

00:48:07.900 --> 00:48:09.900
We're using OpenLDAP 2.2
now that supports this.

00:48:09.900 --> 00:48:14.860
This means that I can set up a
group of users that aren't admins

00:48:14.860 --> 00:48:16.980
that can write to the records.

00:48:17.400 --> 00:49:01.200
[Transcript missing]

00:49:01.530 --> 00:49:05.700
That admin group does not necessarily
have to be the admin group that exists

00:49:05.700 --> 00:49:07.190
where we would normally find it.

00:49:07.200 --> 00:49:10.230
All right, so we can do a little
mover around with that.

00:49:10.260 --> 00:49:12.960
This is kind of like,
this is a think piece.

00:49:12.960 --> 00:49:17.140
And so hopefully,
this will give you a little better idea.

00:49:17.140 --> 00:49:18.700
Wow, they made this look beautiful.

00:49:18.700 --> 00:49:23.870
I had big white boxes in OmniGraffle
before this hit the graphics people here.

00:49:23.880 --> 00:49:25.980
So now they're beautiful
colored and all the rest.

00:49:26.840 --> 00:49:30.720
Idea here is, if you take just the users,
the groups, the machines,

00:49:30.720 --> 00:49:34.290
and access controls up at the top,
that's what we have in our normal open

00:49:34.290 --> 00:49:36.570
directory kind of flat directory space.

00:49:36.580 --> 00:49:37.510
All right?

00:49:37.520 --> 00:49:40.700
We can go in there, and I can add in OUs.

00:49:40.700 --> 00:49:44.210
We've got an orange New York and
an orange Chicago in there.

00:49:44.280 --> 00:49:45.240
All right?

00:49:45.240 --> 00:49:48.290
Within those OUs,
I can put containers of machines,

00:49:48.290 --> 00:49:49.810
containers of groups.

00:49:49.840 --> 00:49:53.940
On my client machines in New York,
I'm going to go into the

00:49:53.940 --> 00:49:55.860
open directory access,
or directory access,

00:49:56.650 --> 00:50:00.660
and I'm going to map through the
group and the machine mappings through

00:50:00.660 --> 00:50:05.640
OU equals Chicago into CN equals
machines and into CN equals groups.

00:50:05.640 --> 00:50:09.290
This allows my clients then to
pull the groups and the machines

00:50:09.430 --> 00:50:10.860
out of that particular OU.

00:50:10.860 --> 00:50:13.580
I'll go into access controls.

00:50:13.620 --> 00:50:16.810
I'll create an access
control that allows a group,

00:50:16.810 --> 00:50:22.160
not the admin group, but a group perhaps
called Chicago admins.

00:50:22.490 --> 00:50:27.440
A group called Chicago Admins
to write to that OU.

00:50:27.470 --> 00:50:30.990
Now I can give a user in Chicago,
put them into that group,

00:50:31.060 --> 00:50:34.980
put them into a group called
Admin within CN equals groups,

00:50:34.980 --> 00:50:38.900
OU equals Chicago, DC equals example,
DC equals com.

00:50:39.760 --> 00:50:43.240
That local client,
when I'm running Workgroup Manager,

00:50:43.380 --> 00:50:46.400
will think they're an admin
for all intents and purposes,

00:50:46.400 --> 00:50:49.920
will allow them to write
back using our GUI tools,

00:50:49.920 --> 00:50:54.030
all right, to create group membership,
to create machine accounts,

00:50:54.030 --> 00:50:56.450
to manage those machine
accounts with MCX,

00:50:56.450 --> 00:50:58.420
to manage those groups with MCX.

00:50:58.460 --> 00:51:00.720
All right, again,
all through the GUI tools.

00:51:00.720 --> 00:51:03.760
Put that back into those
containers within that OU.

00:51:03.760 --> 00:51:07.730
That user picks up, hops on a plane,
flies to New York.

00:51:09.170 --> 00:51:15.250
In New York, the accounts are mapped
through to CN=groups,

00:51:15.350 --> 00:51:18.990
OU=New York, DC=example, DC=com.

00:51:19.570 --> 00:51:21.700
I'm not an admin anymore.

00:51:22.730 --> 00:51:23.720
All right.

00:51:23.840 --> 00:51:26.800
I go back to the data
center in Champaign,

00:51:26.800 --> 00:51:27.200
Illinois.

00:51:27.200 --> 00:51:29.380
I put my world headquarters
data center in there.

00:51:29.380 --> 00:51:32.320
That was funny.

00:51:33.240 --> 00:51:35.910
This is where I'm from,
and if you've been there,

00:51:35.910 --> 00:51:36.980
that would be a little funnier.

00:51:36.980 --> 00:51:37.760
But, okay.

00:51:39.790 --> 00:51:40.480
Nice place.

00:51:40.480 --> 00:51:41.580
Good to get out.

00:51:41.730 --> 00:51:42.330
Nice place.

00:51:42.410 --> 00:51:45.930
So if you go to your world
headquarters data center there,

00:51:46.070 --> 00:51:49.380
and you go in, and you log in,
you're not an admin either,

00:51:49.380 --> 00:51:53.000
because you don't exist in the
admin group in CN equals user,

00:51:53.000 --> 00:51:56.790
or CN equals groups, DC equals example,
DC equals com.

00:51:56.790 --> 00:51:57.550
All right?

00:51:57.550 --> 00:52:01.300
So now I've subjugated you just to
being an admin for the Chicago OU,

00:52:01.300 --> 00:52:03.480
and just that position within there.

00:52:03.480 --> 00:52:04.210
All right?

00:52:04.210 --> 00:52:06.720
This really opens up a
lot of possibilities,

00:52:06.720 --> 00:52:09.680
a lot of things that we
can do within Microsoft.

00:52:09.700 --> 00:52:11.120
open directory.

00:52:11.120 --> 00:52:12.870
It's not crazy voodoo stuff.

00:52:12.870 --> 00:52:14.230
This is LDAP stuff.

00:52:14.290 --> 00:52:17.640
This is what the big boys have
been doing for a long time.

00:52:17.780 --> 00:52:20.980
We're coming of age,
we're moving into that space where

00:52:20.980 --> 00:52:25.320
we can finally be a true directory
service for lots of different users,

00:52:25.740 --> 00:52:29.180
providing lots of different services,
providing lots of

00:52:29.180 --> 00:52:31.260
different control for them.

00:52:31.270 --> 00:52:33.500
I need a cool name for this.

00:52:33.550 --> 00:52:35.560
We've got a reverse triangle.

00:52:35.560 --> 00:52:37.460
We've got a magic triangle.

00:52:37.460 --> 00:52:41.170
So I'm thinking maybe an
inverted magic triangle.

00:52:41.200 --> 00:52:44.100
I've got to work on that a little bit.

00:52:44.100 --> 00:52:46.550
Bermuda triangle, exactly.

00:52:46.590 --> 00:52:49.180
Things getting a little
weirder with this.

00:52:49.180 --> 00:52:51.800
This is a big chunk to bite off,
I understand that,

00:52:51.800 --> 00:52:55.140
especially coming from just using
worker manager and stuff like that.

00:52:55.140 --> 00:52:58.060
But some very cool possibilities,
some very cool opportunities

00:52:58.060 --> 00:52:59.140
that you can do with this.

00:52:59.280 --> 00:53:00.890
And like I said, this is all just LDAP.

00:53:00.930 --> 00:53:01.630
All right?

00:53:01.630 --> 00:53:02.990
This is what LDAP can do.

00:53:02.990 --> 00:53:07.080
It's what LDAP was designed for,
and it's what LDAP is very good at.

00:53:07.080 --> 00:53:09.560
So definitely take a look at this when
you're planning out large deployments.

00:53:09.570 --> 00:53:11.220
And like I said,
I hope to get it up in the

00:53:11.220 --> 00:53:12.560
enterprise IT lab in a little bit.

00:53:14.740 --> 00:53:16.780
All right.

00:53:16.970 --> 00:53:19.120
I like directory services
more than I like file sharing.

00:53:19.120 --> 00:53:20.900
File sharing is boring, right?

00:53:20.900 --> 00:53:22.420
It's been doing well for a while.

00:53:22.420 --> 00:53:24.170
There's nothing sexy about file sharing.

00:53:24.170 --> 00:53:26.960
Pulling users out of LDAP directories,
though, that is.

00:53:26.960 --> 00:53:27.750
That's cool.

00:53:27.960 --> 00:53:30.240
So, but a little bit about file
sharing and what we support.

00:53:30.240 --> 00:53:34.260
If you're running an OS X server
and you want to provide

00:53:34.290 --> 00:53:37.800
services to non-Apple clients,
AFP is probably not going to

00:53:37.800 --> 00:53:39.520
be a very good option for you.

00:53:39.540 --> 00:53:40.390
All right.

00:53:40.710 --> 00:53:43.840
Very,
very few AFP clients on other systems.

00:53:43.840 --> 00:53:47.400
So you can probably just leave this
one alone and move on to the next one.

00:53:47.400 --> 00:53:49.310
SMB is great.

00:53:49.350 --> 00:53:51.020
We use Samba 3012.

00:53:51.020 --> 00:53:53.340
We've got support for single sign-on.

00:53:53.340 --> 00:53:55.400
We've pushed ACLs into this.

00:53:55.460 --> 00:53:57.860
So supporting Windows clients,
supporting Unix clients,

00:53:57.860 --> 00:53:58.740
that kind of stuff.

00:53:58.780 --> 00:54:02.130
SMB sharing is probably a very,
very good way to go for you with Tiger,

00:54:02.130 --> 00:54:04.460
all right, to provide home directories.

00:54:05.970 --> 00:54:10.600
NFS, much improved in speed and
flexibility within Tiger.

00:54:10.600 --> 00:54:13.820
This is also a very easy Linux/UNIX path.

00:54:13.820 --> 00:54:15.650
They're used to this.

00:54:15.950 --> 00:54:18.250
That's what I did here with
this red hat box when I mapped

00:54:18.260 --> 00:54:19.890
over the users folder to that.

00:54:19.970 --> 00:54:22.900
So Linux/UNIX,
I can do a lot of NFS work with.

00:54:22.900 --> 00:54:25.180
FTP, again, great for sharing files.

00:54:25.250 --> 00:54:29.170
Not going to work for home folders,
although I'm sure there's a project

00:54:29.300 --> 00:54:32.890
on SourceForge that does that for you,
if not about five.

00:54:33.900 --> 00:54:36.890
So there's basic options with
the built-in FTP server in OS X.

00:54:36.890 --> 00:54:41.570
Pure FTP, Pro FTP, other ones,
all these other open source servers

00:54:41.570 --> 00:54:44.900
and commercial ones you can put in
to get you more flexibility with.

00:54:46.340 --> 00:54:47.700
Backup.

00:54:47.730 --> 00:54:50.730
It was really exciting last year
or the year before to get all these

00:54:50.730 --> 00:54:53.290
new backup clients that we have
so we can interact with others.

00:54:53.290 --> 00:54:58.040
It's really great now to have more
than two backup servers that run

00:54:58.070 --> 00:55:00.520
natively on OS X server or OS X.

00:55:00.520 --> 00:55:03.560
These people are also
downstairs in the data center.

00:55:03.560 --> 00:55:05.790
BRU and in no particular order here.

00:55:05.840 --> 00:55:07.760
Not even alphabetical order.

00:55:09.220 --> 00:55:11.940
BRU, Retrospect, Atempo, Breezehill,
Backbone.

00:55:11.940 --> 00:55:14.500
I believe Backbone
announced some new products.

00:55:14.500 --> 00:55:17.640
Atempo also did this week
if I remember correctly.

00:55:17.640 --> 00:55:19.090
So definitely take a look at those.

00:55:19.100 --> 00:55:22.810
You can backup all kinds of other
clients using an OS X system

00:55:22.810 --> 00:55:24.850
as the backup server for that.

00:55:24.880 --> 00:55:26.330
Buy lots of Fiber Channel.

00:55:26.330 --> 00:55:28.130
Get lots of Fiber Channel drives.

00:55:28.150 --> 00:55:29.900
Get lots of Fiber Channel RAIDs.

00:55:29.900 --> 00:55:32.510
Put lots of Fiber
Channel Chape drives out there.

00:55:32.510 --> 00:55:33.430
Good stuff.