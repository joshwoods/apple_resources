WEBVTT

00:00:10.700 --> 00:00:11.200
All right.

00:00:11.200 --> 00:00:12.990
Good afternoon, everyone.

00:00:13.000 --> 00:00:15.940
Welcome to the last session
between you and the peer bash.

00:00:15.940 --> 00:00:17.500
And my name is Juussi-Pekkka Mantere.

00:00:17.500 --> 00:00:21.200
I am the Engineering Manager for Managed
Client 10 and Portable Home Directories.

00:00:21.200 --> 00:00:23.640
I work in the
Desktop Management Solutions team

00:00:23.640 --> 00:00:24.640
at Apple.

00:00:24.870 --> 00:00:27.990
So for our agenda today, first of all,
could I have a show of hands?

00:00:28.110 --> 00:00:29.720
How many of you are developers?

00:00:29.720 --> 00:00:33.100
Not IT professionals,
but software developers?

00:00:33.130 --> 00:00:34.340
Wow.

00:00:34.540 --> 00:00:35.940
OK, that's excellent.

00:00:35.940 --> 00:00:39.630
I wasn't quite sure if we had more
IT folk or if we had more developers.

00:00:39.660 --> 00:00:41.140
The more developers, the better.

00:00:41.140 --> 00:00:42.640
This will be a good session for you.

00:00:42.640 --> 00:00:47.140
So the agenda-- we're going to talk
about best practices of good behavior.

00:00:47.140 --> 00:00:50.420
So what should your application
do if your application will be

00:00:50.510 --> 00:00:53.200
used in a managed environment
or in a network environment?

00:00:53.200 --> 00:00:56.000
We'll cover Portable Home Directories,
and then we'll go into

00:00:56.000 --> 00:00:59.230
Managed Client 10 in Tiger,
what's new, and specifically,

00:00:59.310 --> 00:01:01.420
what our preference manifests.

00:01:01.470 --> 00:01:03.750
So just as an overview--

00:01:03.950 --> 00:01:05.320
What is a network user?

00:01:05.350 --> 00:01:07.780
I'm not sure how many of you
actually use network accounts

00:01:07.880 --> 00:01:09.100
or network home directories.

00:01:09.190 --> 00:01:11.870
So there are a couple of things
that are unique in this kind of

00:01:11.870 --> 00:01:13.630
enterprise deployment environment.

00:01:13.810 --> 00:01:14.770
We have network accounts.

00:01:14.940 --> 00:01:16.420
We have network home directories.

00:01:16.470 --> 00:01:17.800
We have managed accounts.

00:01:17.850 --> 00:01:20.620
We have laptops that
have mobile accounts.

00:01:20.660 --> 00:01:22.070
And we have managed systems.

00:01:22.260 --> 00:01:25.510
And then we have roaming users
who are on wireless networks.

00:01:25.520 --> 00:01:27.270
So what would your
typical network look like?

00:01:27.440 --> 00:01:31.760
So we have a network, servers,
and we have administrative systems.

00:01:31.840 --> 00:01:35.620
And then we have a bunch of users
and work groups and systems.

00:01:35.680 --> 00:01:37.780
And all these would be managed.

00:01:38.030 --> 00:01:41.080
So users,
those are created by IT administrators.

00:01:41.270 --> 00:01:45.040
Work groups would be typically,
let's say, the WWDC attendees.

00:01:45.400 --> 00:01:46.600
That would be a work group.

00:01:46.600 --> 00:01:49.610
WWDC, Apple staff,
that could be another work group.

00:01:49.800 --> 00:01:50.900
And then systems.

00:01:50.950 --> 00:01:53.940
All of these things can have
custom preferences or settings

00:01:53.990 --> 00:01:55.750
or management applied to them.

00:01:55.860 --> 00:01:57.740
So that's your basic network setup.

00:01:57.800 --> 00:02:01.290
And then last but not least,
we also have wireless users.

00:02:01.550 --> 00:02:04.250
So we have people who
would come on a laptop,

00:02:04.540 --> 00:02:08.920
hook up to an airport or Wi-Fi network,
and then be roaming on the network,

00:02:08.970 --> 00:02:12.180
come and go off as they
connect to the system.

00:02:12.290 --> 00:02:15.060
So what are the considerations here then?

00:02:15.370 --> 00:02:18.370
Network Home Directory is, of course,
different than your local home directory.

00:02:18.370 --> 00:02:20.910
Performance characteristics would
be different because everything

00:02:20.910 --> 00:02:22.120
is going to go over the wire.

00:02:22.120 --> 00:02:24.980
And this is not your typical feature,
as in Windows.

00:02:24.980 --> 00:02:27.520
Because of OS X underpinnings,
it's all Unix.

00:02:27.520 --> 00:02:31.400
So Network Home Directory is just the
same as your local home directory.

00:02:31.400 --> 00:02:35.270
From the operating system point of view,
it just starts from slash network

00:02:35.340 --> 00:02:37.090
as opposed to slash users.

00:02:37.500 --> 00:02:41.590
And then another consideration
is your users might be managed.

00:02:41.590 --> 00:02:43.140
The systems might be managed.

00:02:43.140 --> 00:02:46.350
So by management,
we mean Workgroup Management settings

00:02:46.350 --> 00:02:47.580
in a Mac OS X server.

00:02:47.580 --> 00:02:52.050
And other types of management would
be having DHCP-assigned addresses,

00:02:52.140 --> 00:02:56.050
so your network settings could also
impose management on you if you

00:02:56.140 --> 00:03:00.660
get DNS settings or open directory
settings from your DHCP binding.

00:03:00.660 --> 00:03:05.160
And another type of management
would be systems management.

00:03:05.160 --> 00:03:09.560
So Apple Remote Desktop could
be a way to install packages

00:03:09.580 --> 00:03:11.120
on the systems on the network.

00:03:11.190 --> 00:03:15.020
And finally, we have Managed Client 10,
which would be client management.

00:03:15.020 --> 00:03:19.440
The settings and the users and workgroups
in your network environment could be

00:03:19.440 --> 00:03:20.760
managed through Workgroup Manager.

00:03:20.760 --> 00:03:24.620
And one form of this would
be parental controls.

00:03:24.740 --> 00:03:28.080
In Mac OS X Tiger,
parental controls would use, let's say,

00:03:28.080 --> 00:03:32.330
the settings for Safari or other
system settings that also impose

00:03:32.330 --> 00:03:35.750
management on the local system,
even when the local system

00:03:35.750 --> 00:03:36.860
is not a network client.

00:03:36.860 --> 00:03:38.690
of clients.

00:03:38.800 --> 00:03:41.300
And then there's also
an issue with accounts.

00:03:41.380 --> 00:03:44.670
So do you have a network account
that has a network credential

00:03:44.720 --> 00:03:48.180
coming up from a directory system,
or is it a mobile account,

00:03:48.180 --> 00:03:49.840
or is it a local account?

00:03:49.980 --> 00:03:52.520
So a mobile account would
be a hybrid of the two,

00:03:52.540 --> 00:03:55.950
where a local account is
just the local net info node.

00:03:56.070 --> 00:03:59.320
So your mobile account caches
your network credentials.

00:03:59.330 --> 00:04:04.080
And if you do have a mobile account,
then your authentication

00:04:04.080 --> 00:04:06.420
information comes from the network.

00:04:06.420 --> 00:04:10.140
But as the local user cannot
change their credentials,

00:04:10.150 --> 00:04:13.170
and if the local net
info node is modified,

00:04:13.250 --> 00:04:18.270
then the settings would be overwritten
by the next time the account is

00:04:18.270 --> 00:04:20.490
synchronized back to the network.

00:04:21.010 --> 00:04:24.040
So I'm going to cover two
different best practices.

00:04:24.040 --> 00:04:26.060
One is for file system access.

00:04:26.060 --> 00:04:27.720
The other one would be for preferences.

00:04:27.730 --> 00:04:30.350
So first I'll cover file system.

00:04:30.500 --> 00:04:32.270
Of course,
what you want to do if you write

00:04:32.270 --> 00:04:36.140
applications that will be used
in a network environment-- so

00:04:36.140 --> 00:04:39.910
run either from a network volume,
or in an environment where

00:04:39.920 --> 00:04:44.960
the user's home directory
would be on a network volume.

00:04:44.960 --> 00:04:46.780
So optimize the performance.

00:04:46.780 --> 00:04:48.460
Minimize disk access.

00:04:48.540 --> 00:04:51.480
So if you hit the disk all the time,
then that's going to

00:04:51.480 --> 00:04:52.620
incur network traffic.

00:04:52.620 --> 00:04:54.060
And who's going to benefit?

00:04:54.060 --> 00:04:56.620
Your network users and
your portable users.

00:04:56.620 --> 00:05:00.770
So the less you access the disk for any
application data inside your bundle,

00:05:00.780 --> 00:05:05.100
looking up whatever or whatnot,
if you can optimize that performance,

00:05:05.100 --> 00:05:09.150
your users who are on network
accounts or who are using laptops

00:05:09.160 --> 00:05:11.240
or portables will thank you.

00:05:11.240 --> 00:05:14.400
And the tools available
to you would be SHARK,

00:05:14.400 --> 00:05:16.720
or FS usage, or SC usage.

00:05:16.720 --> 00:05:22.920
And there are also tools where
we can use-- we can have-- oh,

00:05:23.000 --> 00:05:23.340
sorry.

00:05:23.340 --> 00:05:27.080
We have documentation on
the Apple Developer site.

00:05:27.080 --> 00:05:28.840
There's optimization for system level.

00:05:28.920 --> 00:05:32.300
There's optimization for
performance for the file system.

00:05:32.320 --> 00:05:34.560
So if you look them up
on developer.apple.com,

00:05:34.570 --> 00:05:37.990
you'll find loads of information on
how to use these tools and how to

00:05:37.990 --> 00:05:40.570
make the best out of your application.

00:05:40.950 --> 00:05:44.690
If you do have to create local files,
you might want to consider

00:05:44.970 --> 00:05:47.070
whether you create those files,
temporary files,

00:05:47.070 --> 00:05:49.650
in the user's home directory,
or if you're going to create

00:05:49.910 --> 00:05:51.060
them on the local system.

00:05:51.060 --> 00:05:55.730
You have utilities in the OS that
gives you the path to the right places.

00:05:55.760 --> 00:05:58.940
Use fsfind folder,
and on system disk will get you

00:05:58.940 --> 00:06:03.080
pieces that are local to the system,
not on the network disk.

00:06:03.120 --> 00:06:07.210
You can also find temporary
folders or chewable items that

00:06:07.210 --> 00:06:09.740
will reside on the local system.

00:06:10.460 --> 00:06:12.660
Tilde Library caches.

00:06:12.750 --> 00:06:14.020
How do you use caches?

00:06:14.020 --> 00:06:17.300
Is it private data to the application,
to the user?

00:06:17.300 --> 00:06:20.340
If the user is on a
network home directory,

00:06:20.340 --> 00:06:22.790
then anything that goes into
the cache directory will

00:06:23.030 --> 00:06:24.360
actually go over the network.

00:06:24.360 --> 00:06:27.670
If you're optimizing your
application's performance so that

00:06:27.700 --> 00:06:31.280
it doesn't access the network,
and it's using local caches,

00:06:31.280 --> 00:06:34.080
then in fact,
when it's accessing the cache,

00:06:34.120 --> 00:06:35.960
it is going on the network.

00:06:35.960 --> 00:06:38.680
You might want to use
local data for cache,

00:06:39.070 --> 00:06:40.060
local system disk.

00:06:40.440 --> 00:06:43.430
You might want to use caching as
opposed to user directory data.

00:06:44.000 --> 00:06:48.430
There could be some security concerns
regarding the use of local files.

00:06:48.760 --> 00:06:52.660
There was a session earlier this week
regarding how to make sure that if

00:06:52.720 --> 00:06:56.300
you do create local temporary files,
that they're not accessible by

00:06:56.520 --> 00:06:59.620
other users or other applications,
so how to secure those.

00:06:59.840 --> 00:07:04.480
What is the best way of finding out
how is your application behaving?

00:07:04.940 --> 00:07:05.460
Test it out.

00:07:05.800 --> 00:07:08.500
Use your application
either on a locked volume,

00:07:08.500 --> 00:07:11.160
on a network volume,
so try out the different

00:07:11.160 --> 00:07:15.540
scenarios that your typical user
would most likely encounter.

00:07:15.690 --> 00:07:18.540
It's not just a local system,
local hard drive.

00:07:18.580 --> 00:07:22.020
You'd want to cover using your
application from a network volume,

00:07:22.290 --> 00:07:25.590
from a locked volume,
and from a locked system where the user

00:07:25.590 --> 00:07:28.980
does not have access to the local disk,
because that disk might be locked

00:07:29.100 --> 00:07:30.520
only for administrator access.

00:07:30.580 --> 00:07:33.510
Next, I'm going to cover preferences.

00:07:33.580 --> 00:07:35.570
What about preferences management?

00:07:35.680 --> 00:07:39.380
This comes into Managed Client
10 and preferences management.

00:07:39.380 --> 00:07:43.380
The rule of thumb here is to
use CFPreferences copy-up value.

00:07:43.380 --> 00:07:47.380
This will always get you the
right path to the preferences.

00:07:47.380 --> 00:07:51.470
We will use the CFPreferences framework,
and because of the management,

00:07:51.470 --> 00:07:54.220
the way it's applied,
it could be imposed on the system,

00:07:54.530 --> 00:07:55.380
and you may not even know.

00:07:55.380 --> 00:07:58.320
Your application may not know where
the preferences are coming from.

00:07:58.400 --> 00:08:01.380
They could be locked for the system,
they could be locked for the user,

00:08:01.380 --> 00:08:04.380
or could be locked for the work
group that the user is part of.

00:08:04.380 --> 00:08:08.940
CFPreferences copy-up value is guaranteed
to return the right preferences.

00:08:08.940 --> 00:08:12.930
The right preferences state
whether or not it's managed.

00:08:13.100 --> 00:08:16.940
The corresponding class in Cocoa would
be NSUserDefaults and objectForKey.

00:08:18.500 --> 00:08:23.250
And do not use CFPreferences copy
value unless you explicitly need some

00:08:23.400 --> 00:08:25.580
information from a particular domain.

00:08:25.590 --> 00:08:30.020
So if you want to find the global
preference for setting XYZ,

00:08:30.030 --> 00:08:33.700
you would use CFPreferences copy value,
but not as the standard

00:08:34.070 --> 00:08:35.440
preference is called.

00:08:35.440 --> 00:08:37.580
You'd want to use copy app value instead.

00:08:38.760 --> 00:08:42.590
And if you do support preferences,
you would want to make sure that any

00:08:42.590 --> 00:08:47.130
preferences that you have reflect the
management state in the user interface.

00:08:47.130 --> 00:08:50.850
So if the preferences are locked,
you can find by calling

00:08:50.850 --> 00:08:54.990
CFPreferences app value is forced,
or using NSUserDefaults,

00:08:54.990 --> 00:08:58.500
object is forced for key,
and know that this preference

00:08:58.710 --> 00:09:01.200
is not under the user's control.

00:09:01.200 --> 00:09:04.400
It is imposed on the user by
the network administrators.

00:09:04.400 --> 00:09:08.270
And you can also inherit the user
interface through Cocoa Classes.

00:09:08.640 --> 00:09:11.600
So you could use
NSUserDefaults controller to find

00:09:11.600 --> 00:09:15.360
out whether or not that object
that's tied to that UI element,

00:09:15.360 --> 00:09:18.580
the key underneath it,
if that's locked or not.

00:09:20.140 --> 00:09:23.200
So, applications behaving badly.

00:09:23.260 --> 00:09:24.580
Excessive file system access.

00:09:24.780 --> 00:09:28.540
For example, if you have an application
that uses fonts and wants to

00:09:28.540 --> 00:09:31.680
copy them to the local system,
it really is not necessarily

00:09:31.690 --> 00:09:34.760
the best idea to copy them to
the user's local home directory,

00:09:34.760 --> 00:09:39.040
because that could be a network volume,
and any time you access that,

00:09:39.040 --> 00:09:41.540
you will incur network transaction.

00:09:41.560 --> 00:09:46.110
The bits are going to go over the wire,
and it's not as efficient as having

00:09:46.110 --> 00:09:48.500
the fonts reside on the local disk.

00:09:49.240 --> 00:09:53.430
So, use library application support
for storing any files that you'd

00:09:53.430 --> 00:09:56.600
want to install for the user,
but you'd really want to

00:09:56.600 --> 00:09:59.350
install on the system,
not just for the user,

00:09:59.350 --> 00:10:02.680
because the user home directory,
user still library,

00:10:02.680 --> 00:10:04.730
will be on the network disk.

00:10:05.040 --> 00:10:07.280
And if you're creating
network-shared resources,

00:10:07.420 --> 00:10:11.100
well, let's say you want to share
movies or share music or whatnot,

00:10:11.100 --> 00:10:14.160
you'd want to support
turning off that feature.

00:10:14.160 --> 00:10:19.660
Because in some settings,
let's say in a school environment or in

00:10:19.660 --> 00:10:24.410
an enterprise company or at universities,
perhaps the administrators

00:10:24.410 --> 00:10:28.200
don't want to enable people
sharing stuff on the network,

00:10:28.200 --> 00:10:30.230
just ad hoc sharing,
like using Bonjour or

00:10:30.230 --> 00:10:31.520
whatnot to find resources.

00:10:31.540 --> 00:10:35.230
So if you do enable sharing of
resources from a local system,

00:10:35.240 --> 00:10:38.870
you'd probably want to have a
preference that disables that

00:10:38.870 --> 00:10:43.260
functionality so that the system
administrators can control that.

00:10:45.440 --> 00:10:49.620
So that was a wrap-up of the two areas,
preferences and file systems.

00:10:49.660 --> 00:10:52.580
I'm going to talk briefly about
Portable Home Directories.

00:10:52.600 --> 00:10:56.030
So Portable Home Directories is
a new feature in Mac OS X Tiger.

00:10:56.310 --> 00:11:00.010
In Mac OS X Panther, there was a feature
called Mobile Accounts,

00:11:00.010 --> 00:11:02.750
and those were attached copies
of your network accounts.

00:11:02.910 --> 00:11:06.820
So in Tiger, we have mobile accounts with
Portable Home Directories.

00:11:06.870 --> 00:11:11.160
So we have a local copy of the
network account with a local copy of

00:11:11.370 --> 00:11:13.380
the user's network home directory.

00:11:13.460 --> 00:11:16.390
And in case of management,
if the user is managed,

00:11:16.390 --> 00:11:19.670
we can use the Workgroup settings
and the management settings

00:11:19.940 --> 00:11:23.140
on the local system as well,
on a portable, on a PowerBook,

00:11:23.190 --> 00:11:26.100
even when it's not
connected to the network.

00:11:26.210 --> 00:11:30.370
And a Portable Home Directory can be
created either locally by the user,

00:11:30.370 --> 00:11:32.360
if the user has admin privileges.

00:11:32.580 --> 00:11:39.380
So it's going through system preferences
accounts and just making a local account,

00:11:39.500 --> 00:11:43.060
and can also be created
through Workgroup Manager.

00:11:43.200 --> 00:11:47.630
And for application developers,
the one thing that you want to be

00:11:47.630 --> 00:11:50.650
aware of is not using hard-coded paths.

00:11:50.790 --> 00:11:55.460
User's home directory will
change from /network to /users.

00:11:55.580 --> 00:11:59.060
So if you write anything that's
relevant to the user's home directory,

00:11:59.240 --> 00:12:02.820
you'd want to make it relative
to the tilde path for the user,

00:12:02.980 --> 00:12:05.710
and not using hard-coded
paths for the user,

00:12:05.710 --> 00:12:10.040
because those aliases and paths will
not be valid if the user is going

00:12:10.050 --> 00:12:12.590
to have a portable home directory.

00:12:12.980 --> 00:12:15.560
So with that, we'll do a quick demo.

00:12:15.560 --> 00:12:18.820
And let me invite Bruce Gaya,
who is the engineering lead for Managed

00:12:18.920 --> 00:12:20.930
Client 10 and Portable Home Directories.

00:12:21.340 --> 00:12:21.940
OK, thanks.

00:12:21.940 --> 00:12:24.120
JENS DOPKE: If you can go to demo one.

00:12:24.200 --> 00:12:28.440
First of all,
I want to describe my demo setup here.

00:12:28.440 --> 00:12:31.710
On this machine, we have Mac OS X server,
and these two have

00:12:31.710 --> 00:12:32.660
been set up as clients.

00:12:32.660 --> 00:12:36.660
I've set up,
and now I've launched Workgroup Manager,

00:12:36.660 --> 00:12:39.380
and this will give you a view of
what's set up in the directory system.

00:12:39.380 --> 00:12:43.830
We have some users set up, some groups,
and some computer records.

00:12:45.040 --> 00:12:47.550
And also,
each of these clients have been bound

00:12:48.060 --> 00:12:52.740
to the server using the directory
access so that when they wake up,

00:12:52.760 --> 00:12:55.080
they get the directory
settings from this server.

00:12:55.140 --> 00:12:56.140
OK.

00:12:56.250 --> 00:13:01.040
So what I'm going to do is I'm going to,
as an administrator,

00:13:01.070 --> 00:13:07.200
allow Juussi to create a mobile
account and a portable home directory.

00:13:07.220 --> 00:13:12.070
And so I go to this panel here
and go to the Preferences.

00:13:12.580 --> 00:13:14.190
And you see a lot of preferences.

00:13:14.280 --> 00:13:17.040
Many of these were also
present in Panther.

00:13:17.040 --> 00:13:19.220
We've changed some of them,
and one of the ones that

00:13:19.300 --> 00:13:20.740
we've changed is Mobility.

00:13:20.850 --> 00:13:23.400
So I click on Mobility,
and I see there's two tabs here,

00:13:23.400 --> 00:13:24.810
Synchronization and Rules.

00:13:25.200 --> 00:13:28.590
So I'm going to say Always,
and I'm going to click this box which

00:13:28.740 --> 00:13:31.360
says Synchronize Account for Offline Use.

00:13:31.440 --> 00:13:35.600
This box down here will present a
dialog when you log in so that you can

00:13:35.600 --> 00:13:40.090
choose if you really want to create
a portable account on this machine,

00:13:40.100 --> 00:13:42.500
or you want to just log in
as your network account.

00:13:42.500 --> 00:13:44.500
Okay, and I'm going to apply now.

00:13:44.500 --> 00:13:47.230
Over here are some rules
sections which allow you to

00:13:47.350 --> 00:13:49.300
decide what gets synchronized.

00:13:49.560 --> 00:13:52.630
And this tab here says
Login and Logout Sync,

00:13:52.630 --> 00:13:54.440
and I'm going to click Always.

00:13:54.470 --> 00:13:59.260
And I'm going to add two folders which
will be synchronized at Login and Logout.

00:13:59.270 --> 00:14:03.560
So first of all, I need to browse for it.

00:14:03.560 --> 00:14:07.600
I'm going to get the desktop, Add.

00:14:08.370 --> 00:14:12.140
And also, Documents, Add.

00:14:12.160 --> 00:14:15.160
And that's all that I want synchronized
at log in and log out time,

00:14:15.340 --> 00:14:16.580
so I'm all set with this.

00:14:16.600 --> 00:14:18.030
Just those two folders.

00:14:18.040 --> 00:14:19.440
Now, Background Sync.

00:14:19.620 --> 00:14:21.250
And this sync will
occur in the background.

00:14:21.260 --> 00:14:24.240
Its default is every 20 minutes.

00:14:24.240 --> 00:14:26.970
And I want that to match my log
in and log out sync settings

00:14:27.080 --> 00:14:28.620
for this particular user.

00:14:28.710 --> 00:14:30.180
So I'm going to get rid of this.

00:14:30.210 --> 00:14:31.460
By default, it syncs everything.

00:14:31.460 --> 00:14:32.620
I'm going to get rid of that.

00:14:32.620 --> 00:14:37.610
And instead, I'm going to say,
just sync Desktop.

00:14:39.320 --> 00:14:40.200
and Documents.

00:14:40.200 --> 00:14:44.820
And I say apply now.

00:14:44.980 --> 00:14:45.800
I want to mention something else.

00:14:45.830 --> 00:14:48.660
This pane down here will allow
you to skip a bunch of things,

00:14:48.710 --> 00:14:51.100
and you can set up wildcards,
and it's very rule-based,

00:14:51.100 --> 00:14:54.130
so I could say no syncing of
.mp3s or that sort of thing,

00:14:54.230 --> 00:14:56.720
but I'm going to leave it in
the default settings for now.

00:14:56.740 --> 00:15:00.080
So just desktop and
documents and the background.

00:15:00.140 --> 00:15:03.070
And now in the options,
I told you that it default

00:15:03.120 --> 00:15:06.180
syncs every 20 minutes,
and I can change this

00:15:06.180 --> 00:15:08.580
here using this slider,
but for my setup,

00:15:08.660 --> 00:15:11.860
I don't want any of that background
syncing because I don't know what

00:15:11.860 --> 00:15:13.740
the network load is going to be,
so I'm just going to

00:15:13.840 --> 00:15:15.600
say manually for now.

00:15:15.610 --> 00:15:19.080
And so just say apply now,
and now it's all set up for you.

00:15:19.080 --> 00:15:20.080
All right.

00:15:20.080 --> 00:15:20.870
Thank you, Bruce.

00:15:20.960 --> 00:15:23.540
So if you can have demo three up, please.

00:15:23.540 --> 00:15:27.480
So this is another machine that's hooked
up to our small little network over here,

00:15:27.500 --> 00:15:31.290
and as you see,
we have users that are network accounts.

00:15:31.410 --> 00:15:33.470
So I'll just log on to my account.

00:15:34.800 --> 00:17:13.000
[Transcript missing]

00:17:13.940 --> 00:17:18.240
I have my trusted presentation,
Designing Network-Friendly Applications.

00:17:18.240 --> 00:17:21.060
I just bring it to the
desktop and copies,

00:17:21.060 --> 00:17:22.410
and here it goes.

00:17:22.520 --> 00:17:26.120
So now that's a copy on the local system.

00:17:26.700 --> 00:17:31.600
And let's say if I log on
back to my network home.

00:17:31.600 --> 00:17:32.940
Let me just take this out.

00:17:33.240 --> 00:17:34.600
Oh, and one more thing.

00:17:34.610 --> 00:17:37.740
I'm not really sure if I really
want to keep the YouTube video here.

00:17:37.760 --> 00:17:39.340
It's about 30 megs.

00:17:39.610 --> 00:17:43.130
It was nice for a while,
but I've seen it enough times,

00:17:43.240 --> 00:17:45.900
and there are new iPad ads there, too.

00:17:45.900 --> 00:17:48.160
So I'll just delete that file.

00:17:48.820 --> 00:17:52.090
Okay, so now my desktop is
modified on the local system.

00:17:52.240 --> 00:17:55.800
So if you can have Demo 2 up, please.

00:17:55.890 --> 00:18:00.920
So on Demo 2, this is, again,
a network user, network accounts.

00:18:00.950 --> 00:18:04.110
And if I now log on to my network home,

00:18:08.420 --> 00:18:11.620
This is now a live connection
to the server system.

00:18:11.690 --> 00:18:15.270
And if I look at what my
network home looks like,

00:18:15.270 --> 00:18:20.400
well, it's on network servers,
WWDC local/users/Jussi.

00:18:20.470 --> 00:18:28.330
And I still have my YouTube photo,
and I have no presentation.

00:18:28.330 --> 00:18:28.330
But if my PowerBook now
syncs up to the network,

00:18:30.170 --> 00:18:33.440
So let me do a manual sync here first.

00:18:33.440 --> 00:18:37.010
And let's just keep demo two up there.

00:18:38.800 --> 00:18:45.400
[Transcript missing]

00:18:49.200 --> 00:18:50.220
Okay, there.

00:18:50.230 --> 00:18:54.150
So now my PowerBook, my laptop,
is synchronizing itself

00:18:54.150 --> 00:18:56.230
up to the network,
and voila,

00:18:56.230 --> 00:19:01.880
my really important presentation is now
pushed up to the network home directory.

00:19:01.940 --> 00:19:04.930
And, well, where did my YouTube movie go?

00:19:04.930 --> 00:19:08.920
So any changes that I make on
the local system get propagated

00:19:09.210 --> 00:19:10.610
back up to the network.

00:19:10.740 --> 00:19:13.420
So that's the Portable Home Directory.

00:19:13.500 --> 00:19:17.210
And for you as developers,
the things to note is that now

00:19:17.210 --> 00:19:22.840
my home directory path on the
PowerBook is not network servers.

00:19:23.000 --> 00:19:25.680
It was slash users slash JuSsi.

00:19:25.800 --> 00:19:31.010
So if any applications had written that
path into any of their settings files,

00:19:31.010 --> 00:19:34.340
it would no longer be
valid on the laptop.

00:19:34.910 --> 00:19:38.970
So, and of course on the laptop,
the local net info node,

00:19:39.010 --> 00:19:42.890
the user credentials are copied
from the network account,

00:19:42.960 --> 00:19:45.800
so if any changes were
made on the local system,

00:19:45.800 --> 00:19:48.660
those would not get applied
to the local account,

00:19:48.730 --> 00:19:52.350
or they would be overwritten next time
the system is synced back to the network.

00:19:52.370 --> 00:19:54.960
So,
that is the Portable Home Directory demo.

00:19:54.960 --> 00:19:57.280
If you can go back to the slides, please.

00:19:57.390 --> 00:19:58.760
And thank you, Bruce.

00:20:01.440 --> 00:20:02.670
So what's next?

00:20:02.680 --> 00:20:05.130
We'll talk about Managed
Client 10 in Tiger.

00:20:05.440 --> 00:20:07.320
So what's new in Managed
Client 10 in Tiger?

00:20:07.320 --> 00:20:10.680
Here's the Workgroup Manager screen.

00:20:10.680 --> 00:20:13.820
This is what network administrators
would use to manage the

00:20:13.860 --> 00:20:15.600
settings in their network.

00:20:15.600 --> 00:20:17.690
And here we see there
are a couple of settings.

00:20:17.690 --> 00:20:20.300
There's the dock setting,
there's the mobility setting,

00:20:20.300 --> 00:20:25.200
and new for Tiger are
mobility preferences for

00:20:25.820 --> 00:20:31.020
Portable Home Directories,
and software update settings

00:20:31.160 --> 00:20:31.280
in Managed Client 10.

00:20:31.300 --> 00:20:35.660
So in the Mac OS X Tiger server,
there is a software update proxy,

00:20:35.860 --> 00:20:38.470
or software update server,
and we want to have the

00:20:38.750 --> 00:20:41.530
clients also use that server,
and there's now a managed

00:20:41.670 --> 00:20:44.700
setting to have the clients
hook up to their local system,

00:20:44.700 --> 00:20:48.020
as opposed to going to Apple for
their software updates.

00:20:48.100 --> 00:20:51.580
We have proxy settings,
so we can use Workgroup Manager and

00:20:51.580 --> 00:20:55.680
Managed Client X to manage the proxy
settings of the network clients,

00:20:55.680 --> 00:20:59.260
and we have support for login scripts,
so instead of having login

00:20:59.560 --> 00:21:04.480
hooks for the local system,
We can have network based login scripts.

00:21:04.480 --> 00:21:06.840
And we also have login window message.

00:21:06.840 --> 00:21:10.880
And if you saw on the demos,
the login window has a custom item there.

00:21:10.880 --> 00:21:13.040
Welcome to WWC 2005.

00:21:13.040 --> 00:21:15.260
And that's coming from the
managed client 10 settings

00:21:15.690 --> 00:21:17.840
through the login window message.

00:21:17.840 --> 00:21:19.450
And finally, there are details.

00:21:19.490 --> 00:21:22.280
So details is a way to edit preferences.

00:21:22.280 --> 00:21:25.040
So preference editor
inside Workgroup Manager.

00:21:25.040 --> 00:21:28.660
And new types of settings-- once, often,
and always.

00:21:28.660 --> 00:21:32.900
So all usually in-- traditionally
in Mac OS X Panther,

00:21:32.900 --> 00:21:38.020
the settings were either forced,
they were always on, or they were not on.

00:21:38.020 --> 00:21:41.680
But in Mac OS X Tiger,
we have new classes for having the

00:21:41.680 --> 00:21:45.340
settings applied for the user once,
or having the settings

00:21:45.430 --> 00:21:47.040
applied for the user often.

00:21:47.040 --> 00:21:49.870
And by often,
we mean the settings are applied for

00:21:49.870 --> 00:21:51.940
the user whenever the user logs on.

00:21:51.960 --> 00:21:56.560
So any new login session will have
these settings applied for the user.

00:21:56.960 --> 00:21:59.560
Last but not least,
the preference manifests.

00:21:59.620 --> 00:22:01.500
Preference manifests are a big thing.

00:22:01.860 --> 00:22:05.780
That's a way to tell how
applications use their preferences.

00:22:05.860 --> 00:22:09.640
I'm going to go into further detail
on the preference manifest here.

00:22:09.940 --> 00:22:16.670
Preference manifest allows you to declare
how the application preferences are used.

00:22:16.720 --> 00:22:19.960
It could be custom defaults,
or it could be enabling

00:22:20.060 --> 00:22:24.060
or disabling functionality
settings of the application.

00:22:25.830 --> 00:22:31.380
Having a preference manifest allows a
system administrator or network admin to

00:22:31.380 --> 00:22:35.360
manage the deployment of the application
through Workgroup Manager through the

00:22:35.460 --> 00:22:37.380
details editor that I'll show now.

00:22:37.530 --> 00:22:39.680
In Workgroup Manager,
this is the interface that

00:22:39.710 --> 00:22:41.470
system administrators would use.

00:22:41.470 --> 00:22:46.030
Under the details pane,
we see that there are settings for

00:22:46.030 --> 00:22:49.410
Managed Client 10 MCX and Doc settings.

00:22:49.410 --> 00:22:52.480
This is the inside view
of how the preferences are

00:22:52.480 --> 00:22:54.710
done for Managed Client 10.

00:22:54.720 --> 00:22:56.520
But now there's an add button.

00:22:56.520 --> 00:22:58.910
If I click the add button
and I wanted to set,

00:22:59.010 --> 00:23:02.570
let's say, voiceover setting,
I want to disable voiceover for

00:23:02.580 --> 00:23:06.620
a classroom or for a set of users
because that's just too disruptive.

00:23:06.760 --> 00:23:10.080
So I would go and add
voiceover in the details view,

00:23:10.080 --> 00:23:13.630
and voiceover has a preference
manifest in it built in.

00:23:14.040 --> 00:23:16.860
And once I add it to the
Workgroup Manager view,

00:23:16.980 --> 00:23:20.610
I see that it's an entry
in the Workgroup Manager.

00:23:20.620 --> 00:23:25.010
If I now click edit,
I have the view of... of setting the

00:23:25.010 --> 00:23:28.720
disabled state of voiceover to true.

00:23:28.720 --> 00:23:30.680
And how this actually
works behind the scene,

00:23:30.680 --> 00:23:35.720
let me invite Bruce Geyer back on the
stage and we'll show how this is done.

00:23:35.720 --> 00:23:36.500
Oh, sorry.

00:23:36.730 --> 00:23:39.720
No, we'll go... First, yes.

00:23:39.720 --> 00:23:42.880
First we show how it was written
and then we'll show how it's done.

00:23:42.880 --> 00:23:44.150
I was keeping ahead of myself.

00:23:44.170 --> 00:23:46.910
So preference manifest, well,
how does it work under the hood?

00:23:46.920 --> 00:23:51.120
So for screen reader D,
screen reader D is voiceover,

00:23:51.120 --> 00:23:52.640
and it's a bundle inside the application.

00:23:52.730 --> 00:23:57.530
And it's localizable,
so it could be in multiple languages.

00:23:57.770 --> 00:24:00.910
And the Mac OS X server
languages are English,

00:24:00.910 --> 00:24:03.190
Japanese, French, and German.

00:24:03.810 --> 00:24:05.990
It's a property list.

00:24:06.040 --> 00:24:06.520
It's a plist.

00:24:06.570 --> 00:24:10.340
And it could be created by hand
using property list editor.

00:24:10.340 --> 00:24:11.940
It could be done in Xcode.

00:24:11.940 --> 00:24:13.660
Pick your favorite text editor.

00:24:13.660 --> 00:24:19.570
And here's how the voiceover
preference manifest looks like.

00:24:19.640 --> 00:24:21.340
It's really simple, very easy to do.

00:24:21.460 --> 00:24:22.420
So it's a plist.

00:24:22.560 --> 00:24:25.730
And first,
we have a key in the dictionary in

00:24:25.730 --> 00:24:28.530
the plist for PFM underscore title.

00:24:28.530 --> 00:24:30.860
PFM stands for preference manifest.

00:24:31.620 --> 00:24:34.580
And the application that we care about,
it's voiceover.

00:24:34.750 --> 00:24:37.740
So that's the title of the
application we want to manage.

00:24:37.760 --> 00:24:39.660
And then there's a domain.

00:24:39.700 --> 00:24:42.650
So what is the internal
name for the application?

00:24:42.740 --> 00:24:45.560
It's a com apple type name.

00:24:45.640 --> 00:24:48.890
So here we have screenreader D.

00:24:48.950 --> 00:24:52.530
And that ties the preferences
into the application.

00:24:52.820 --> 00:24:54.800
So in the UI, it would look like this.

00:24:55.010 --> 00:24:58.400
So that's the view presented
through Workgroup Manager.

00:24:58.420 --> 00:25:02.100
The title and the domain
are shown for the user.

00:25:02.120 --> 00:25:05.200
Then further,
what are the individual keys?

00:25:05.320 --> 00:25:08.240
So there are sub-keys for
every controllable element

00:25:08.610 --> 00:25:10.240
inside the application.

00:25:10.530 --> 00:25:13.100
So here we have an array of dictionaries.

00:25:13.310 --> 00:25:17.460
So each entry in the array would
correspond to one controllable entry

00:25:17.460 --> 00:25:19.720
in the application's preferences.

00:25:19.800 --> 00:25:24.750
So these are under the preference
manifest sub-keys key in the dictionary,

00:25:24.750 --> 00:25:25.680
in the plist.

00:25:25.750 --> 00:25:29.400
So first,
there's a key for disabling VoiceOver.

00:25:29.750 --> 00:25:32.280
And it's under pfm-title.

00:25:32.290 --> 00:25:35.960
And this is the user-visible
description of the key.

00:25:36.050 --> 00:25:37.440
And what does it do?

00:25:37.450 --> 00:25:41.520
A pfm description would be set
to something to do something.

00:25:41.530 --> 00:25:44.780
And here it's set to true
to disable VoiceOver.

00:25:44.810 --> 00:25:49.500
And inside VoiceOver-- so how does
VoiceOver application know what to do?

00:25:49.760 --> 00:25:54.470
So inside VoiceOver,
it's looking for scr startup disabled.

00:25:54.750 --> 00:25:58.660
So that's screen reader
d startup disabled.

00:25:58.680 --> 00:26:01.230
And the value of that
key would be a Boolean.

00:26:01.460 --> 00:26:05.180
So the type of the variable
that we use is bool.

00:26:05.200 --> 00:26:10.840
And here's how it would look
like in Workgroup Manager again.

00:26:10.870 --> 00:26:14.040
So here we have the
disabled VoiceOver key,

00:26:14.050 --> 00:26:17.690
its description,
and the type and the value.

00:26:18.740 --> 00:26:20.660
And now we go to the demo.

00:26:20.680 --> 00:26:23.380
So I'll invite Bruce back up
on the stage and show you how

00:26:23.780 --> 00:26:26.210
preference manifests are used.

00:26:26.870 --> 00:26:29.630
Okay.

00:26:29.750 --> 00:26:30.930
Glad to be here finally.

00:26:31.020 --> 00:26:33.680
Now, back to Demo 1.

00:26:33.750 --> 00:26:36.330
Okay, first of all,

00:26:36.340 --> 00:26:39.160
I have a server set up, I said that,
and I have a group.

00:26:39.260 --> 00:26:41.540
And these are group records
in the directory service.

00:26:41.640 --> 00:26:44.660
And I have this one called WWDC Crew.

00:26:44.760 --> 00:26:46.720
And if I look at the accounts,
I can see that there's

00:26:46.720 --> 00:26:47.640
two members in this.

00:26:47.640 --> 00:26:51.720
And what I want to do is
I want to have it so that when

00:26:52.140 --> 00:26:56.490
people in this group log in,
they get a particular

00:26:56.490 --> 00:26:58.680
desktop that I have.

00:26:58.820 --> 00:27:01.520
So to do that, first of all,
I'm going to set the desktop

00:27:01.520 --> 00:27:04.470
for this particular machine
or this particular login.

00:27:04.820 --> 00:27:07.780
So I'm going to go to System Preferences.

00:27:08.750 --> 00:27:15.200
desktop and screen saver, desktop,
and one of those black and white ones.

00:27:15.250 --> 00:27:16.840
Let's take that one.

00:27:16.930 --> 00:27:18.650
Okay,
that's a pretty distinctive desktop.

00:27:18.720 --> 00:27:20.410
It's nice and black and
white and pretty serious.

00:27:20.480 --> 00:27:23.080
That's the kind of mood I want
to set for this particular group.

00:27:23.210 --> 00:27:29.840
So I want to get this desktop over
to these machines when they log in.

00:27:29.840 --> 00:27:29.840
So I'm going to go ahead and

00:27:29.860 --> 00:27:33.830
Go to Preferences,
and this is the stuff that we had before,

00:27:34.130 --> 00:27:36.300
and then go to Details.

00:27:36.580 --> 00:27:37.000
Okay?

00:27:37.310 --> 00:27:38.760
And there's a button
down here called Add.

00:27:39.000 --> 00:27:44.000
And what I'm going to do is I'm going
to find that particular preference,

00:27:44.000 --> 00:27:48.290
which is in the current user
admin library preferences.

00:27:48.820 --> 00:27:51.690
And let's find the desktop preference.

00:27:51.740 --> 00:27:53.700
Okay, there it is.

00:27:53.700 --> 00:27:58.130
com.apple.desktop.plist And I'm
going to say "Add." And that

00:27:58.210 --> 00:28:01.320
gets copied from there,
right to here, and it actually is

00:28:01.340 --> 00:28:02.700
already applied to this.

00:28:02.700 --> 00:28:05.700
It's actually stored now in the
directory system under this group.

00:28:05.700 --> 00:28:08.700
Now I'm going to go --
I can look at this and edit.

00:28:08.880 --> 00:28:10.700
Press the "Add" button.

00:28:10.700 --> 00:28:12.700
And this is the basic of the editor.

00:28:12.700 --> 00:28:16.700
These three things here -- there's
a "Once," "Often," and "Always."

00:28:16.700 --> 00:28:19.640
"Once" is for setting things up once,
and then the user can change

00:28:19.770 --> 00:28:20.700
them from that point on.

00:28:20.700 --> 00:28:23.700
"Often" would be setting
stuff every time they log in,

00:28:23.700 --> 00:28:24.700
which is new in Tiger.

00:28:24.720 --> 00:28:27.840
And "Always" also sets things
every time they log in,

00:28:27.850 --> 00:28:29.700
but it's fixed and can't
be changed by the user.

00:28:29.700 --> 00:28:32.560
And that actually requires
cooperation from the application

00:28:32.560 --> 00:28:33.700
to really do it right.

00:28:33.700 --> 00:28:34.640
And I'll get into that.

00:28:34.700 --> 00:28:36.810
So by default,
I'm going to open up the "Often" thing,

00:28:36.810 --> 00:28:41.900
and I see that there's one thing in there
called "Background." And in there -- wow,

00:28:41.900 --> 00:28:43.680
this is getting bigger
every time I do this demo.

00:28:43.780 --> 00:28:46.690
There is these four
entries in this directory.

00:28:46.740 --> 00:28:50.640
And from experience,
I know that these aren't any good.

00:28:50.700 --> 00:28:54.110
And there's something I have to mention,
that if you're going to

00:28:54.110 --> 00:28:57.100
do editing of this kind,
you have to test everything

00:28:57.100 --> 00:28:57.700
to make sure it works.

00:28:57.700 --> 00:28:58.700
Okay?

00:28:58.700 --> 00:29:00.560
Because you're actually
-- what you're doing,

00:29:00.560 --> 00:29:03.910
you're going to be pushing preferences,
you know, over these machines when the

00:29:03.910 --> 00:29:05.700
application isn't running,
and you want to make sure it works.

00:29:05.700 --> 00:29:08.700
So I've tested this,
so it's -- I know that default will work.

00:29:08.700 --> 00:29:11.700
So I look in default,
and there's a bunch of things there.

00:29:11.700 --> 00:29:13.470
Just "plist," and this
is the keys they use,

00:29:13.470 --> 00:29:14.690
but it looks pretty good.

00:29:14.700 --> 00:29:18.560
So I just say "Apply Now." And I'm done.

00:29:18.700 --> 00:29:24.690
And now this -- people in this group will
get this desktop if everything works.

00:29:24.700 --> 00:29:25.700
Okay.

00:29:25.770 --> 00:29:26.690
Why don't you try that?

00:29:26.780 --> 00:29:28.650
So if you can have our demo 2 back up,
please.

00:29:28.700 --> 00:29:31.700
So on demo 2,
I still have my network account.

00:29:31.700 --> 00:29:34.640
So -- whoops -- I want
to log on to my account.

00:29:34.700 --> 00:29:38.700
So when I log on --

00:29:39.180 --> 00:29:41.060
If you remember from the
previous time I logged in,

00:29:41.060 --> 00:29:43.860
I had a regular desktop,
just the blue Aqua screen.

00:29:43.930 --> 00:29:46.110
So now,
because Bruce has set the settings

00:29:46.250 --> 00:29:50.520
for the workgroup that I belong to,
now my desktop is whatever it was

00:29:50.520 --> 00:29:52.840
pushed down by the administrator.

00:29:53.140 --> 00:29:58.750
But I don't necessarily want
to have this desktop here.

00:29:58.750 --> 00:30:02.250
So let me go and try to change that.

00:30:02.250 --> 00:30:05.190
So I want to change desktop.

00:30:05.190 --> 00:30:05.210
OK, here we go.

00:30:05.210 --> 00:30:05.210
Change desktop.

00:30:07.120 --> 00:30:10.680
And because this was a once setting,
it's not a forced preference.

00:30:10.680 --> 00:30:13.640
It's more like a suggestion for the user.

00:30:13.730 --> 00:30:16.860
So I'll go back and
pick up something more,

00:30:16.860 --> 00:30:18.480
let's say, for fur.

00:30:18.610 --> 00:30:19.920
No, let's go for tiger.

00:30:19.930 --> 00:30:20.100
Yay.

00:30:20.100 --> 00:30:25.590
So now I have a tiger desktop here.

00:30:25.640 --> 00:30:29.270
And the thing is that I can
still change the preference,

00:30:29.270 --> 00:30:29.270
but if I log out--

00:30:30.840 --> 00:30:33.600
And this is the point
of the often setting.

00:30:33.670 --> 00:30:37.390
So if I now log back
in using this account,

00:30:39.490 --> 00:30:45.440
My desktop is now back to the
default that was set by Workgroup

00:30:45.490 --> 00:30:48.080
Management through Managed Client 10.

00:30:48.160 --> 00:30:50.260
So that's the often setting.

00:30:50.370 --> 00:30:51.540
And if we go back to Demo 1.

00:30:51.540 --> 00:30:52.540
Okay.

00:30:52.540 --> 00:30:55.780
So I was able to push this desktop out,
and that was kind of fun.

00:30:55.780 --> 00:30:57.140
But I have some other stuff.

00:30:57.260 --> 00:31:00.040
I have TextEdit here,
and I want to set up some

00:31:00.050 --> 00:31:01.530
settings in TextEdit.

00:31:01.540 --> 00:31:05.510
And I'm going to go to the
TextEdit preferences here.

00:31:05.540 --> 00:31:09.430
And I have a whole bunch of stuff
that I kind of want to set here.

00:31:09.430 --> 00:31:11.680
So I change this all,
and I want these settings to

00:31:11.710 --> 00:31:13.200
be applied to these machines.

00:31:13.290 --> 00:31:14.480
So I'm going to do the same thing.

00:31:14.480 --> 00:31:16.410
I ran TextEdit,
and now I'm going to quit TextEdit,

00:31:16.410 --> 00:31:19.070
because that will make sure the
preferences are saved off to files.

00:31:19.070 --> 00:31:29.190
And then I'm going to go back to Add,
and under Add, I'm back in, you know,

00:31:29.190 --> 00:31:29.190
my account, library,

00:31:30.540 --> 00:31:34.500
"And now I have to find
the TextEdit preferences.

00:31:34.500 --> 00:31:36.500
And I'm going to flip down here.

00:31:36.500 --> 00:31:37.100
TextEdit.

00:31:37.100 --> 00:31:40.290
com.apple.textedit,
I think is what it's called.

00:31:41.790 --> 00:31:42.940
There it is.

00:31:43.030 --> 00:31:45.070
And I'm going to say Add.

00:31:45.160 --> 00:31:48.350
Now, let's look at what I added there.

00:31:48.570 --> 00:31:50.980
Well, they all go into "often,"
and look at this.

00:31:51.060 --> 00:31:53.000
There's 17 items,
and they're kind of all,

00:31:53.000 --> 00:31:54.150
"What does that mean?

00:31:54.330 --> 00:31:58.780
And how am I going to find out what this,
you know, if TextEdit, you know,

00:31:58.800 --> 00:32:01.040
how is someone going to manage
TextEdit if this is what they see?"

00:32:01.150 --> 00:32:03.540
So we came up with this concept,
and it's new,

00:32:03.700 --> 00:32:05.440
called a Preference Manifest.

00:32:05.510 --> 00:32:09.150
And a Preference Manifest will be
a description of these preferences,

00:32:09.150 --> 00:32:15.140
which can be used by Workgroup Manager to
clean this all up and make this look a

00:32:15.180 --> 00:32:17.360
lot better and make it more editable.

00:32:17.360 --> 00:32:19.320
Like,
you can set what the ranges of different

00:32:19.320 --> 00:32:21.010
preferences are so they're all correct.

00:32:21.220 --> 00:32:23.430
And you're also,
by publishing a Preference Manifest,

00:32:23.450 --> 00:32:25.300
you're saying that these can be managed.

00:32:25.300 --> 00:32:28.890
Now, an application writer doesn't have
to write a Preference Manifest.

00:32:28.970 --> 00:32:31.720
Actually, if you're an IT person,
you can actually try to reverse

00:32:31.780 --> 00:32:33.820
engineer and figure out what these
preferences mean and write your own

00:32:33.820 --> 00:32:36.300
Preference Manifest for your site use,
or even, you know,

00:32:36.370 --> 00:32:38.720
publish it on the Internet for
other IT people to use.

00:32:38.920 --> 00:32:41.640
It's a description of what
the preferences do and

00:32:41.640 --> 00:32:43.030
how they can be managed.

00:32:43.210 --> 00:32:45.980
So I'm going to try to manage that,
so let's get out of here.

00:32:46.500 --> 00:32:53.390
And so I want to build
a Preference Manifest.

00:32:55.240 --> 00:33:00.300
Tiger ships with a preference
manifest for Safari.

00:33:00.300 --> 00:33:03.110
So here's Safari down here.

00:33:03.110 --> 00:33:08.040
So I'm going to Command-click
to go to where Safari is

00:33:08.040 --> 00:33:10.870
in the application folder.

00:33:10.870 --> 00:33:12.280
And I'm going to get the preference
manifest for Safari and then modify it.

00:33:12.280 --> 00:33:12.280
So I'm in Safari.

00:33:12.280 --> 00:33:12.280
So I'm going to click on
that and open up its bundle.

00:33:15.290 --> 00:33:16.310
Show package contents.

00:33:16.350 --> 00:33:20.440
And in the contents, in the resources,
and let's look at,

00:33:20.440 --> 00:33:27.990
I know there's a file called
com.apple.safari.manifest.

00:33:27.990 --> 00:33:27.990
So...

00:33:28.910 --> 00:33:29.660
There it is.

00:33:29.660 --> 00:33:30.360
OK.

00:33:30.360 --> 00:33:35.480
It turns out that this is also a bundle,
so I'm going to open that up again.

00:33:36.700 --> 00:33:40.390
Show package contents,
and in the contents, resources.

00:33:40.760 --> 00:33:45.710
And this is what a localized
preference manifest looks like.

00:33:45.780 --> 00:33:47.870
And by the way,
it turns out Safari spent a

00:33:48.110 --> 00:33:50.850
little extra money and localized
it in all the Safari languages.

00:33:50.960 --> 00:33:55.000
But it really only has to be
localized in the administrator

00:33:55.000 --> 00:33:56.100
languages or the server languages.

00:33:56.260 --> 00:33:58.200
But they did it anyway,
and it's still valid.

00:33:58.300 --> 00:34:00.090
I'm not going to get
into localization today,

00:34:00.140 --> 00:34:03.720
but I'm going to take this file
here and copy it to the desktop.

00:34:03.800 --> 00:34:06.510
And I'm going to use that
as a template for text edit.

00:34:06.600 --> 00:34:09.500
So let's close these things.

00:34:09.500 --> 00:34:10.290
OK.

00:34:10.420 --> 00:34:14.350
So now I'm going to look at
this with Property List Editor.

00:34:15.540 --> 00:34:17.000
And remember, this is a Safari manifest.

00:34:17.000 --> 00:34:18.730
Well, actually,
I got ahead of myself here.

00:34:18.740 --> 00:34:19.660
Let's close this.

00:34:19.720 --> 00:34:22.700
First thing I want to do
is rename this from Safari.

00:34:22.720 --> 00:34:23.300
I don't want to do that.

00:34:23.300 --> 00:34:25.290
I want to rename it.

00:34:26.600 --> 00:34:29.620
Extended.Manifest.

00:34:29.620 --> 00:34:30.180
There.

00:34:30.190 --> 00:34:32.250
Now let's open it.

00:34:33.510 --> 00:34:39.640
Okay, so let's open it up and we see at
the root are these PFM underbar keys,

00:34:39.690 --> 00:34:44.520
and what we see,
we see description is Safari Preferences,

00:34:44.710 --> 00:34:48.140
name is Safari, title is Safari,
and version is 1,

00:34:48.140 --> 00:34:51.630
but I'm going to change everywhere
it says Safari to TextEdit.

00:34:59.690 --> 00:35:03.900
And for version... I'm just
playing around for now,

00:35:03.900 --> 00:35:06.820
so I'm going to change it to 0.1.

00:35:06.820 --> 00:35:07.420
Okay.

00:35:07.420 --> 00:35:11.450
Now, in this one key,
PFM subkeys are all the top-level

00:35:11.450 --> 00:35:13.750
keys that I will want to manage.

00:35:13.850 --> 00:35:17.620
So we look in it,
and we see in Safari there are 35

00:35:17.640 --> 00:35:20.640
keys which can be managed in Safari.

00:35:21.700 --> 00:35:26.670
Well, for the purposes of this demo,
I'm only going to really, you know,

00:35:26.670 --> 00:35:31.850
do two or three, so I'm just going to
get rid of all these.

00:35:31.850 --> 00:35:31.850
I think we'll just do one today.

00:35:32.280 --> 00:35:32.900
So we just look at it.

00:35:32.970 --> 00:35:36.120
So these are all these various things.

00:35:36.140 --> 00:35:38.000
Let's get rid of them.

00:35:38.010 --> 00:35:38.950
There.

00:35:39.030 --> 00:35:41.370
And then we get to the first
key that can be managed,

00:35:41.370 --> 00:35:43.360
and we see this is something for Safari.

00:35:43.460 --> 00:35:45.660
Okay,
so now we have to set up these fields,

00:35:45.690 --> 00:35:48.030
and this is a description of
what the preferences look like.

00:35:48.210 --> 00:35:50.910
So the first thing to do is, well,
what do the preferences look

00:35:50.910 --> 00:35:52.360
like in the plist format?

00:35:52.470 --> 00:35:54.880
So I'm going to open up
the TextEdit plist now.

00:35:55.000 --> 00:35:58.370
Let's go to Property List Editor, Open.

00:35:59.060 --> 00:36:04.140
This time it's an admin
library preferences.

00:36:04.670 --> 00:36:09.710
com.apple.textedit.plist.

00:36:09.710 --> 00:36:09.710
Let's make this a little bigger.

00:36:13.520 --> 00:36:14.310
There it is.

00:36:14.590 --> 00:36:15.970
OK, let's open it.

00:36:16.210 --> 00:36:17.870
And let's look inside of it.

00:36:17.950 --> 00:36:19.170
We see all this stuff in here.

00:36:19.250 --> 00:36:20.710
Now,
if you're going to write one of these

00:36:20.720 --> 00:36:23.800
and you're not the application writer,
you have to kind of figure out

00:36:24.140 --> 00:36:26.880
how these things are used and try
to write a description of them.

00:36:26.990 --> 00:36:29.780
So the one that I'm interested in
for this demo is I'm just going

00:36:29.780 --> 00:36:31.160
to be interested in company.

00:36:31.210 --> 00:36:35.640
Company is a string that seems
like a very good one to write in

00:36:35.640 --> 00:36:37.110
Manifest because it's nice and easy.

00:36:37.270 --> 00:36:41.000
So I'm going to look at one
of these Manifest keys here,

00:36:41.060 --> 00:36:43.300
PFM_subkeys.

00:36:43.320 --> 00:36:45.900
And it has a key called PFM_default.

00:36:45.910 --> 00:36:47.880
And first of all,
the type's going to be string.

00:36:47.890 --> 00:36:49.280
And I could put the default in here.

00:36:49.280 --> 00:36:52.210
And I could put, well,
for purposes of my site,

00:36:52.390 --> 00:36:54.800
I'm just going to put Apple computer.

00:36:55.860 --> 00:36:56.640
Okay.

00:36:56.680 --> 00:36:59.850
And for description,
I want to have something that

00:37:00.380 --> 00:37:05.800
will appear in Workgroup Manager,
so I'm just going to type, you know,

00:37:05.800 --> 00:37:07.120
company name in the --

00:37:07.930 --> 00:37:15.720
New Document Preferences window,
or whatever I like.

00:37:15.720 --> 00:37:17.980
I can get really fancy if I want.

00:37:17.980 --> 00:37:19.670
For the domain, it's not Safari.

00:37:19.800 --> 00:37:22.550
It's going to be com.apple.textedit.

00:37:23.840 --> 00:37:26.040
And the name, now this is going to
be the actual key name,

00:37:26.040 --> 00:37:27.830
so what I'm going to do is
make sure I get it right.

00:37:27.840 --> 00:37:32.900
I'm going to copy it from the text edit
preferences and paste it right into here.

00:37:32.900 --> 00:37:33.480
It's a string.

00:37:33.670 --> 00:37:34.640
That's the key name.

00:37:34.640 --> 00:37:35.380
Range list.

00:37:35.380 --> 00:37:38.550
I mentioned that you can have
different ranges for things.

00:37:38.550 --> 00:37:40.720
Those are mostly for numeric things.

00:37:40.720 --> 00:37:42.920
So it doesn't really apply here.

00:37:42.920 --> 00:37:45.250
You can look at it some other time.

00:37:45.250 --> 00:37:47.660
Let's just delete it for now,
because range list doesn't

00:37:47.660 --> 00:37:48.700
apply to the string.

00:37:51.180 --> 00:37:52.930
Let's skip targets for
now and go to title.

00:37:52.930 --> 00:37:57.200
The title for this
should be company name.

00:37:57.220 --> 00:37:59.800
And I capitalized, so it looks nice.

00:37:59.800 --> 00:38:04.310
And its type is going to be string.

00:38:04.760 --> 00:38:05.840
There we go.

00:38:05.840 --> 00:38:09.000
OK, now, let's get the PFM targets.

00:38:09.170 --> 00:38:12.560
This is the place where it's
valid to apply this preference.

00:38:12.560 --> 00:38:16.100
In Safari, when I started,
it had two places where it was OK.

00:38:16.100 --> 00:38:17.700
It had user and user managed.

00:38:17.880 --> 00:38:20.140
User would be either once or often.

00:38:20.280 --> 00:38:25.360
And user managed would be what
we're calling always or forced.

00:38:25.360 --> 00:38:28.660
And to put it in here means that it
should be supported by the application.

00:38:28.810 --> 00:38:32.130
So if I was an IT person,
and I was back editing TextEdit

00:38:32.160 --> 00:38:33.940
for making this manifest,
I'd probably get rid of this,

00:38:33.940 --> 00:38:37.780
because TextEdit does
not really support this.

00:38:37.820 --> 00:38:39.940
I could try trial and error to see
if it supports it here and there,

00:38:39.940 --> 00:38:40.760
but probably it doesn't.

00:38:40.970 --> 00:38:43.290
So it would be best to delete it.

00:38:43.420 --> 00:38:47.070
Later on, I'm going to be modifying
TextEdit so it actually does work.

00:38:47.250 --> 00:38:49.180
And then I want to put this back again.

00:38:49.280 --> 00:38:53.380
OK,
so that is one preference manifest key.

00:38:53.620 --> 00:38:56.350
So I'll tell you what.

00:38:56.450 --> 00:39:01.100
I've already done this for TextEdit,
and I want to show it to you briefly.

00:39:01.250 --> 00:39:06.720
So let's get rid of this and get
rid of my-- we can save that.

00:39:06.780 --> 00:39:09.810
I'm going to open this
one on the desktop.

00:39:10.500 --> 00:39:13.390
And this is my final one.

00:39:13.670 --> 00:39:17.540
And it looks the same thing, FES subkeys,
but in it I've done, I did 15 keys,

00:39:17.540 --> 00:39:20.930
I decided 15 was a good number of
things that I wanted to describe,

00:39:20.930 --> 00:39:24.180
and if you look in any of them,
you can see there's various things.

00:39:24.180 --> 00:39:26.330
This one's for the author,
there's others,

00:39:26.430 --> 00:39:29.150
but that kind of looks like
this is a preference manifest,

00:39:29.200 --> 00:39:30.930
a non-localized one.

00:39:30.990 --> 00:39:31.890
Let's get rid of that.

00:39:32.020 --> 00:39:36.320
And now,
let's go back to Workgroup Manager.

00:39:36.470 --> 00:39:39.280
Remember that I just imported
all this stuff for text edit.

00:39:39.280 --> 00:39:42.640
So, I'm going to enhance this by
adding a preference manifest.

00:39:42.640 --> 00:39:46.090
So, I go to the Add button,
and I find my manifest,

00:39:46.090 --> 00:39:47.830
which is on the desktop.

00:39:48.340 --> 00:39:50.560
TextEdit Manifest, there it is.

00:39:50.690 --> 00:39:52.200
Say Add.

00:39:52.300 --> 00:39:56.000
And right away, it changes from
com.apple.textedit to textedit,

00:39:56.000 --> 00:39:57.240
and it looks a little nicer.

00:39:57.580 --> 00:39:59.780
And now when I go to edit it,

00:40:00.300 --> 00:42:19.500
[Transcript missing]

00:42:20.370 --> 00:42:24.050
Copyright 2003, so this is probably in
violation of whatever,

00:42:24.120 --> 00:42:27.380
so I really shouldn't be able to
do this if these preferences really

00:42:27.380 --> 00:42:30.300
were managed for the application,
or even worse,

00:42:30.300 --> 00:42:33.910
I can say restore to default
so it reverts back to whatever

00:42:33.910 --> 00:42:36.180
was the application's default.

00:42:36.190 --> 00:42:39.500
So this is the often or once
setting how it's applied,

00:42:39.510 --> 00:42:42.030
in this case, for this application.

00:42:42.050 --> 00:42:47.050
So now we'll show next how to do this
so that the application behaves in a

00:42:47.050 --> 00:42:52.120
way that it respects the management
settings so that it locks out the

00:42:52.480 --> 00:42:55.470
UI for this particular piece of GUI.

00:42:55.480 --> 00:42:56.850
So let's go back to demo one.

00:42:57.050 --> 00:42:58.340
Okay.

00:42:58.340 --> 00:42:59.870
So we're back.

00:43:00.000 --> 00:43:01.330
I was left at work with manager.

00:43:01.490 --> 00:43:02.980
Let's hide that.

00:43:04.430 --> 00:43:09.270
Okay, so what I did was I went in and
I grabbed TextEdit from the developer CD,

00:43:09.270 --> 00:43:12.470
and I modified it so that
it would do two things.

00:43:12.470 --> 00:43:15.180
One is I wanted to dim those settings
when they're managed so the user

00:43:15.180 --> 00:43:18.000
knows that he can't change them,
and he's not frustrated by thinking he

00:43:18.000 --> 00:43:19.670
can change them when he really can't.

00:43:19.750 --> 00:43:22.910
The next thing is I wanted to
make sure that Restore to Defaults

00:43:23.010 --> 00:43:26.220
button didn't go back and reset
everything once I managed it.

00:43:26.220 --> 00:43:28.140
So it's just two simple changes.

00:43:28.180 --> 00:43:34.290
So I'm going to open Xcode here
and look at the code for TextEdit.

00:43:38.190 --> 00:43:39.100
Okay.

00:43:39.100 --> 00:43:46.090
Come on, Xcode, do your stuff.

00:43:46.090 --> 00:43:46.090
There you go.

00:43:46.090 --> 00:43:46.090
Okay.

00:43:46.310 --> 00:43:47.250
Let's leave that down.

00:43:47.360 --> 00:43:48.760
Here's the project.

00:43:48.780 --> 00:43:49.470
OK.

00:43:49.910 --> 00:43:52.650
So TextEdit turns out to be well-behaved,
first of all,

00:43:52.670 --> 00:43:56.140
because it's well-behaved because it gets
all its defaults from NSUserDefaults.

00:43:56.280 --> 00:43:59.130
And it doesn't do anything
funny on the side,

00:43:59.200 --> 00:44:01.700
so all the managed preferences
do get picked up by TextEdit.

00:44:01.840 --> 00:44:02.700
That works fine.

00:44:02.730 --> 00:44:05.360
I just have to get the
disabling in place.

00:44:05.370 --> 00:44:07.890
So another thing-- it's a Cocoa app.

00:44:08.080 --> 00:44:09.930
Just looking at it,
I found that there's this one

00:44:10.070 --> 00:44:12.180
class called Preferences.m
that handles preferences.

00:44:12.200 --> 00:44:13.780
It's very convenient.

00:44:13.780 --> 00:44:16.320
So all I had to do was
open this one file.

00:44:16.330 --> 00:44:22.780
And what I did was I added
a call for Awake from Nib.

00:44:22.780 --> 00:44:25.740
And those of you who are Cocoa developers
know that when a window comes up,

00:44:25.810 --> 00:44:26.520
it gets called.

00:44:26.520 --> 00:44:29.430
And all I did in Awake from Nib--

00:44:29.780 --> 00:44:33.510
was I got NSUserDefaults, copy that.

00:44:33.600 --> 00:44:38.390
And then for every outlet,
or every item in the preferences window,

00:44:38.440 --> 00:44:40.140
I did a setEnabled call.

00:44:40.200 --> 00:44:44.820
And I used-- first of all,
did this NSUserDefaults call

00:44:44.820 --> 00:44:46.980
called objectIsForcedForKey.

00:44:47.070 --> 00:44:49.360
And I went through for every
key and asked that question,

00:44:49.360 --> 00:44:50.810
is this key forced?

00:44:50.880 --> 00:44:55.320
If the key is forced, I disable it,
or take the not of it, and setEnabled.

00:44:55.390 --> 00:44:57.100
And if it isn't forced,
then it's enabled.

00:44:57.130 --> 00:44:58.340
So that was the simple change.

00:44:58.340 --> 00:45:01.680
And that will disable items
in the preferences pane.

00:45:01.680 --> 00:45:05.000
And I did it for all the
items which I had done the

00:45:05.090 --> 00:45:06.780
preference manifest for earlier.

00:45:06.780 --> 00:45:09.180
Now there's one other place I changed.

00:45:10.860 --> 00:45:11.700
Okay.

00:45:11.700 --> 00:45:14.140
I found out by looking at the code,
this is the old code

00:45:14.140 --> 00:45:17.130
which I've commented out,
that when you hit that button,

00:45:17.170 --> 00:45:19.260
which is restore to default,
TextEdit goes through

00:45:19.260 --> 00:45:21.000
this internal table,
and if you look at it,

00:45:21.000 --> 00:45:23.030
it just basically sets up
this dictionary and says,

00:45:23.140 --> 00:45:26.340
okay, this setting gets set to this,
this setting gets set to this.

00:45:26.420 --> 00:45:29.800
It's all hard-coded in the code.

00:45:29.800 --> 00:45:31.970
It knows what the default should be,
no matter what.

00:45:32.040 --> 00:45:36.010
So, what I did was,
I wanted to change that so that

00:45:36.010 --> 00:45:39.890
if a preference was forced,
it would get the value from

00:45:40.170 --> 00:45:43.040
the managed preferences,
or from the forced preferences,

00:45:43.040 --> 00:45:47.810
and if it's not forced,
I want it to go back to this table.

00:45:48.130 --> 00:45:51.540
I wrote a rather,
not an especially nasty macro,

00:45:51.540 --> 00:45:55.080
but kind of a large macro that did this.

00:45:55.370 --> 00:46:00.260
And it allowed me to plug it into this
call to create a new NSDictionary here.

00:46:00.270 --> 00:46:02.840
And essentially that's all it does.

00:46:03.170 --> 00:46:09.090
For each of these things, it says, OK,
for this key, is--

00:46:09.340 --> 00:46:10.650
object is forced for this key.

00:46:10.750 --> 00:46:14.920
If that is true,
then let's get the item from default.

00:46:14.920 --> 00:46:16.940
If it's not true,
then let's just get the item

00:46:16.940 --> 00:46:18.580
which is plugged into this table.

00:46:18.610 --> 00:46:21.380
So I just went through,
and for each item,

00:46:21.380 --> 00:46:25.360
I just used my macros and basically
had this table that initialized it.

00:46:25.470 --> 00:46:27.330
So that's all the
changes I made and that,

00:46:27.370 --> 00:46:31.190
essentially, is going to make
TextManager for this app.

00:46:31.480 --> 00:46:34.680
So let's quit Xcode for now.

00:46:34.680 --> 00:46:35.920
One other thing.

00:46:35.920 --> 00:46:40.500
In WorkRoute Manager, if you remember,
I left everything in the often.

00:46:40.540 --> 00:46:44.150
So I went to TextEdit to edit,
and we see that there's

00:46:44.150 --> 00:46:45.090
three items in often.

00:46:45.100 --> 00:46:48.020
And I'm just going to move
those to the always area now.

00:46:48.040 --> 00:46:53.290
So I take company,
and I can cut and paste.

00:46:54.700 --> 00:47:01.200
[Transcript missing]

00:47:02.040 --> 00:47:06.940
And let's add something to this
so we really know it's live.

00:47:06.940 --> 00:47:08.770
All right, it's reserved.

00:47:13.350 --> 00:47:15.760
Okay, so this looks good.

00:47:16.130 --> 00:47:19.050
Okay, so we apply now.

00:47:19.910 --> 00:47:21.500
That's all set up.

00:47:21.500 --> 00:47:22.240
We're done with this.

00:47:22.240 --> 00:47:25.240
And now,
you should now try to log into TextEdit

00:47:25.290 --> 00:47:27.240
and show how this management is applied.

00:47:27.460 --> 00:47:27.750
Okay.

00:47:27.930 --> 00:47:30.100
So if you can go back to Demo 2, please.

00:47:30.220 --> 00:47:33.080
So in Demo 2,
when I log on again with this account,

00:47:33.140 --> 00:47:35.350
now I pick up the new managed settings.

00:47:35.440 --> 00:47:38.350
So instead of having often
preferences for TextEdit,

00:47:38.480 --> 00:47:40.760
I have the forced always preferences.

00:47:40.890 --> 00:47:45.330
So let's see, bring up TextEdit,
and let's go and see what

00:47:45.330 --> 00:47:47.700
my preferences look like.

00:47:48.070 --> 00:47:50.240
And indeed, here they are.

00:47:50.440 --> 00:47:51.680
They are locked.

00:47:51.680 --> 00:47:54.770
And if I click Restore Defaults,
nothing happens.

00:47:55.040 --> 00:47:59.830
So with three lines of code,
we enable TextEdit to respect

00:47:59.830 --> 00:48:03.580
the management settings that
I applied on the application.

00:48:03.580 --> 00:48:09.060
So if I had a company policy to have
certain document defaults or even

00:48:09.120 --> 00:48:14.410
setting up copyright strings or other
metadata-- so with TextEdit now,

00:48:14.410 --> 00:48:18.030
let's say with this version
of TextEdit in Tiger,

00:48:18.080 --> 00:48:22.090
it actually writes out
metadata for Spotlight.

00:48:22.410 --> 00:48:27.110
So I could actually embed some of
these things into the metadata for any

00:48:27.110 --> 00:48:29.840
document that is created by this user.

00:48:29.850 --> 00:48:34.890
And then when these documents are saved,
Spotlight picks them up and it's indexed.

00:48:34.990 --> 00:48:41.020
So let's see if I have
anything here-- WWDC demo.

00:48:41.020 --> 00:48:47.070
And save that as test document.

00:48:48.340 --> 00:48:51.860
And now if I go to Spotlight and see,
let's say,

00:48:51.860 --> 00:48:56.100
copyright 2005 and all rights reserved.

00:48:59.800 --> 00:49:04.910
And TextEdit has that,
and that was probably WWDC.

00:49:05.900 --> 00:49:07.340
Did we have all our ads reserved?

00:49:07.390 --> 00:49:07.970
Look at it.

00:49:08.040 --> 00:49:10.980
Let's see what the preference here.

00:49:12.420 --> 00:49:15.300
Oh, it's in copyright,
so company would be indexed.

00:49:15.450 --> 00:49:22.210
So here, if I go again, Apple Computer,

00:49:22.790 --> 00:49:26.460
And there are slots,
and here comes the test document.

00:49:26.480 --> 00:49:27.540
And that's picked up.

00:49:27.540 --> 00:49:30.140
It's not anywhere here.

00:49:30.140 --> 00:49:32.100
Oops.

00:49:34.580 --> 00:49:36.160
Make this bigger.

00:49:36.170 --> 00:49:36.730
Edit.

00:49:36.790 --> 00:49:37.490
Okay.

00:49:37.500 --> 00:49:41.330
It doesn't say Apple Computer here,
so the only way Spotlight

00:49:41.370 --> 00:49:45.230
picks that up is through the
metadata for this document.

00:49:45.410 --> 00:49:50.500
So this would enable companies to deploy
applications that contain metadata that

00:49:50.700 --> 00:49:55.680
is forced for all documents that are
created within this managed environment.

00:49:55.830 --> 00:49:56.700
All right.

00:49:56.860 --> 00:49:58.740
So that concludes the demo.

00:49:58.740 --> 00:49:59.710
Thank you, Bruce.

00:49:59.770 --> 00:50:02.170
So if you can go back to the slides.

00:50:02.170 --> 00:50:05.090
To the slides, please.

00:50:11.550 --> 00:50:12.550
Slides are dark.

00:50:12.600 --> 00:50:19.440
Oh, there's a screensaver on the machine.

00:50:19.440 --> 00:50:20.990
Excellent.

00:50:21.220 --> 00:50:24.270
So wrapping up,
first to go back to preference manifests.

00:50:24.570 --> 00:50:26.920
So what's important about that?

00:50:26.920 --> 00:50:29.380
In Workgroup Manager,
in a network environment,

00:50:29.390 --> 00:50:33.180
system administrators now can set
custom defaults for application.

00:50:33.180 --> 00:50:36.320
They can write their own
application preference manifests.

00:50:36.350 --> 00:50:40.720
So if network administrators have,
let's say, application XYZ,

00:50:40.720 --> 00:50:44.680
and they want to set some of
the often preferences or once

00:50:44.680 --> 00:50:48.700
preferences for application,
they can use the preference manifests.

00:50:48.700 --> 00:50:52.390
The other way is to use the--

00:50:52.700 --> 00:50:55.830
excuse me, first they can go and
edit the preferences,

00:50:55.920 --> 00:50:57.640
just bringing up the plist.

00:50:57.700 --> 00:51:03.100
So they can grab any plist and make that
applied on any system on the network.

00:51:03.100 --> 00:51:05.680
And if they're a little
bit more inquisitive,

00:51:05.800 --> 00:51:08.900
they can go and create a
preface manifest on their own.

00:51:08.910 --> 00:51:12.840
And third, but not least,
is you as application developers,

00:51:12.850 --> 00:51:16.100
you can enable your applications
to be management aware.

00:51:16.120 --> 00:51:18.820
And if you have settings that are,
let's say,

00:51:18.900 --> 00:51:23.050
hidden preferences or other settings that
alter the behavior of the application,

00:51:23.190 --> 00:51:25.480
some things that you don't
want to expose through the UI,

00:51:25.660 --> 00:51:28.720
for example, disable sharing of music,
for example.

00:51:28.720 --> 00:51:32.600
You don't want to have that in the GUI,
but you want to enable that functionality

00:51:33.020 --> 00:51:34.760
through a preference manifest.

00:51:34.760 --> 00:51:37.200
You can do that by writing
a preference manifest.

00:51:37.240 --> 00:51:42.170
So that's a very powerful way of
deploying applications on a network.

00:51:42.330 --> 00:51:43.840
And in a managed environment.

00:51:44.010 --> 00:51:47.530
So wrapping up,
earlier we talked about using

00:51:47.880 --> 00:51:52.510
applications on a network volume or
users having network home directories and

00:51:52.510 --> 00:51:57.300
how that affects the usage of the system,
the user's experience of performance,

00:51:57.300 --> 00:52:00.170
for example,
and how our applications are used.

00:52:00.170 --> 00:52:03.200
If we use caches that go
into users' home directory,

00:52:03.200 --> 00:52:06.270
those might actually cause
network traffic to happen,

00:52:06.320 --> 00:52:09.740
even when the intention was
to minimize network traffic.

00:52:09.750 --> 00:52:14.690
And we want to optimize for that
using the tools FS Usage and Shark,

00:52:14.690 --> 00:52:17.640
and we want to test all these cases.

00:52:17.640 --> 00:52:21.700
And managed users, the same thing,
preferences could be managed for the user

00:52:21.790 --> 00:52:24.140
or for the Workgroup or for the system.

00:52:24.510 --> 00:52:27.510
Again, test your application in these
type of deployment scenarios

00:52:27.510 --> 00:52:30.470
so that you know that your
application can be run off of a,

00:52:30.550 --> 00:52:33.620
let's say, read-only media,
or your application can be

00:52:33.620 --> 00:52:38.060
run from a network volume,
and that your application doesn't require

00:52:38.410 --> 00:52:41.720
resources from the local system to be
installed in the user's home directory.

00:52:41.720 --> 00:52:46.960
If you want to deploy applications in a
network system or network environment,

00:52:46.960 --> 00:52:50.160
you might want to have your
installer write stuff into the

00:52:50.160 --> 00:52:54.300
local library application support
locations that are local to the

00:52:54.300 --> 00:52:56.360
system and not on the network.

00:52:56.360 --> 00:52:58.870
And we talked about
portable home directories,

00:52:58.870 --> 00:53:01.900
how your network account
becomes a local account,

00:53:01.900 --> 00:53:03.600
but it's more like a hybrid.

00:53:03.620 --> 00:53:07.320
It's a cached account of
the network credentials.

00:53:07.450 --> 00:53:11.480
So your net info record
might be overwritten,

00:53:11.480 --> 00:53:16.360
and the information you store for the
user in the net info record could be

00:53:16.430 --> 00:53:20.640
written over at the time when the account
is next time synced to the network.

00:53:20.660 --> 00:53:23.170
And finally,
we talked about preference manifests,

00:53:23.180 --> 00:53:27.290
how to enable the application to be
preference manifest aware and management

00:53:27.360 --> 00:53:31.860
aware and how network administrators
would deploy applications and how

00:53:31.980 --> 00:53:37.960
they would use this feature to control
the usage of the applications that

00:53:38.370 --> 00:53:41.240
are in use at any given location.

00:53:41.240 --> 00:53:43.340
So that's the summary of the demo,
how to make network-friendly

00:53:43.340 --> 00:53:43.990
applications.

00:53:44.100 --> 00:53:48.080
If anyone came here to hear about
how to do installer scripts,

00:53:48.170 --> 00:53:49.700
I'm sorry we didn't cover that.

00:53:49.780 --> 00:53:52.970
There were sessions about how
to do post-install actions,

00:53:53.060 --> 00:53:56.240
pre-install actions,
how to deploy applications.

00:53:56.240 --> 00:53:59.120
Those will be covered at
the installer sessions,

00:53:59.120 --> 00:54:02.820
and there are slides and
sessions available later on

00:54:02.980 --> 00:54:05.760
DVDs and on the developer site.

00:54:05.760 --> 00:54:12.000
So for more information,
developerapp.com, slide 1.

00:54:12.000 --> 00:54:14.220
And related sessions, Swimimic Shark.

00:54:14.220 --> 00:54:16.210
So if you want to
optimize your application,

00:54:16.410 --> 00:54:18.450
Shark is a really good tool for that.

00:54:18.560 --> 00:54:21.270
So you can use Shark to
profile your applications,

00:54:21.350 --> 00:54:24.360
either memory access or disk access,
whatnot.

00:54:24.790 --> 00:54:27.440
And there's a hands-on session tomorrow.

00:54:27.440 --> 00:54:30.370
And for management side,
there's a session by

00:54:30.370 --> 00:54:33.690
John Detroit tomorrow,
and that will be talking about

00:54:33.690 --> 00:54:35.440
real-world management centers.

00:54:35.440 --> 00:54:40.760
How are your applications
used in a network environment,

00:54:40.760 --> 00:54:43.480
in a virtual university
or in an enterprise?

00:54:43.480 --> 00:54:45.300
Which is not your typical
application usage,

00:54:45.300 --> 00:54:48.000
so there are special things
that you have to account for.

00:54:48.010 --> 00:54:50.220
And if you really want
to stand out and fit in,

00:54:50.220 --> 00:54:53.310
there are some things you
want to take into account,

00:54:53.310 --> 00:54:56.420
just like creating preference
manifests and running properly

00:54:56.420 --> 00:54:57.520
from a network volume.