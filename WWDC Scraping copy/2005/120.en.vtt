WEBVTT

00:00:08.240 --> 00:00:10.100
All right, good afternoon.

00:00:10.100 --> 00:00:16.100
My name is Darin Adler.

00:00:16.100 --> 00:00:20.100
I'm the manager of the Safari and
Web Kit engineering team at Apple.

00:00:20.100 --> 00:00:25.100
And I'm going to talk to you a little bit
about the Web Kit Open Source Project,

00:00:25.140 --> 00:00:28.100
something that just went
online Monday this week,

00:00:28.100 --> 00:00:28.940
late Monday night.

00:00:29.100 --> 00:00:34.100
So we're basically taking a whole new
approach to open source with the Web Kit,

00:00:34.100 --> 00:00:36.100
different from what we've
been doing in the past.

00:00:36.100 --> 00:00:39.100
And we want to tell you all
about what we're doing different.

00:00:39.100 --> 00:00:43.100
And this is our first chance in person
to answer people's questions about it.

00:00:43.200 --> 00:00:46.950
So I hope we can answer
some of your questions.

00:00:47.100 --> 00:00:52.770
So let's start with a little
information about history.

00:00:53.330 --> 00:00:59.590
The first moment in Web Kit history
is when we began the Safari project.

00:00:59.680 --> 00:01:03.800
So way back in 2001,
we began Safari project.

00:01:03.800 --> 00:01:06.200
At the time it was an internal project,
secret at Apple.

00:01:06.350 --> 00:01:10.800
And we chose the KHTML open source
library as the basis for our project.

00:01:10.980 --> 00:01:15.050
Then a little bit later, in 2003,
we made our first public

00:01:15.050 --> 00:01:16.200
release of Safari.

00:01:16.570 --> 00:01:18.000
That was the Safari beta.

00:01:18.130 --> 00:01:19.800
We announced what we were doing.

00:01:19.910 --> 00:01:24.000
And we made our first release
of the open source components,

00:01:24.060 --> 00:01:26.470
WebCor and JavaScriptCor.

00:01:27.370 --> 00:01:30.920
So then later that year was
the release of Safari 1.0,

00:01:30.990 --> 00:01:33.900
our first production release, non-beta.

00:01:33.900 --> 00:01:37.060
And it was also the very first time
we released the Web Kit framework,

00:01:37.080 --> 00:01:42.370
which was an API for doing the same kind
of web engine stuff from inside Safari,

00:01:42.410 --> 00:01:44.890
but doing it in any application.

00:01:45.800 --> 00:01:52.850
In October, the release of Mac OS X 10.3
Panther was the very first time that

00:01:52.900 --> 00:01:57.470
Safari and also the Web Kit were
included with an OS release.

00:01:58.360 --> 00:02:02.870
Then February of the next year,
we released Safari 1.2 and there were

00:02:02.870 --> 00:02:04.440
lots of new features in Safari 1.2.

00:02:04.440 --> 00:02:08.540
The one I've decided to
mention here is XMLHttpRequest.

00:02:08.540 --> 00:02:10.620
It has been the basis for some
really important development.

00:02:10.640 --> 00:02:14.250
You'll hear people talking about that
a lot tomorrow when you go to the

00:02:14.250 --> 00:02:16.980
sessions about the Web Kit and Safari.

00:02:17.610 --> 00:02:21.720
In June of 2004 was last
year's developers conference.

00:02:21.720 --> 00:02:25.790
And at WWDC we released a preview
of two new versions of Safari,

00:02:25.960 --> 00:02:28.940
1.3 for Panther and 2.0 for Tiger.

00:02:29.070 --> 00:02:32.930
And there were some new
stuff that was unveiled then,

00:02:32.930 --> 00:02:38.010
included the Canvas element,
editing in Web Kit,

00:02:38.010 --> 00:02:43.160
and also the dashboard using our
technology for the very first time.

00:02:43.500 --> 00:02:45.470
and the dashboard is particularly
exciting because it's so

00:02:45.470 --> 00:02:48.800
different from a web browser,
yet using the Web Kit technology.

00:02:48.860 --> 00:02:52.690
Then in April, way,
way back in April 2005,

00:02:52.710 --> 00:02:57.900
I can hardly remember it,
Mac OS X 10.4 Tiger was released,

00:02:57.910 --> 00:03:03.340
which included Safari 2.0 and we also
released Safari 1.3 at the same time

00:03:03.430 --> 00:03:07.170
as part of Mac OS X 10.3.9 with very
similar features from the point of

00:03:07.210 --> 00:03:09.800
view of a software website developer.

00:03:09.880 --> 00:03:13.180
And here we are today with the
Web Kit Open Source Project,

00:03:13.260 --> 00:03:15.000
which I'll tell you a
little bit more about.

00:03:15.150 --> 00:03:18.530
So let's think back to
before this project.

00:03:18.700 --> 00:03:19.950
How did we do development?

00:03:20.060 --> 00:03:23.040
And when I say we,
I'm talking about the engineering

00:03:23.100 --> 00:03:25.290
team building Web Kit and Safari.

00:03:25.940 --> 00:03:27.170
We had two frameworks.

00:03:27.260 --> 00:03:30.230
One was called WebKitCor and
the other is JavaScriptCor.

00:03:30.230 --> 00:03:34.710
And they were based on the
KHTML and KJS projects from KDE.

00:03:34.830 --> 00:03:37.660
And we would publish the
sources to each of these.

00:03:37.710 --> 00:03:40.610
And typically we'd publish them,
well we always would publish them

00:03:40.610 --> 00:03:43.940
whenever we made a source code release
because we wanted to do that to make

00:03:43.970 --> 00:03:45.720
sure we complied with the license.

00:03:45.840 --> 00:03:48.020
But we also would publish them
from time to time when there

00:03:48.020 --> 00:03:50.800
was some request or some major
change that people wanted to see.

00:03:50.800 --> 00:03:55.280
We also had a mailing list that people
could use to discuss the project,

00:03:55.380 --> 00:03:58.290
ask questions about it
or make contributions.

00:03:58.290 --> 00:04:03.380
And the problem though when it comes
to outside contributions is we really

00:04:03.380 --> 00:04:06.720
didn't do anything to make it easy to
build the thing or test it yourself.

00:04:06.820 --> 00:04:09.860
It was really just the source
code and some people did some

00:04:09.860 --> 00:04:11.040
really big things with it.

00:04:11.170 --> 00:04:13.150
At least one company
built a product out of it.

00:04:13.290 --> 00:04:15.300
But it wasn't really easy.

00:04:15.300 --> 00:04:18.500
It was really something
that took some doing.

00:04:19.310 --> 00:04:24.340
So, what we decided to do was something
that we think is really big.

00:04:24.480 --> 00:04:28.430
Here's a picture of what we had before.

00:04:28.620 --> 00:04:33.200
There was the Web Kit framework
built out of the Web Kit framework

00:04:33.200 --> 00:04:36.880
was built on top of WebCorre,
which included the KHTML rendering

00:04:37.280 --> 00:04:41.680
engine as well as the KWQ library
that bound it to the Mac OS.

00:04:41.780 --> 00:04:44.640
That in turn was built on top
of the JavaScript framework,

00:04:44.760 --> 00:04:47.040
which had both KJS,
the JavaScript engine,

00:04:47.040 --> 00:04:50.620
plus some other open source components
to make the whole thing run.

00:04:50.890 --> 00:04:51.670
And that's what was open.

00:04:52.050 --> 00:04:55.720
But as of today,
we have opened the entire Web Kit.

00:04:55.720 --> 00:04:59.560
Now this is huge because before
what you had were some pieces that

00:04:59.560 --> 00:05:03.660
really by themselves didn't do
anything unless you added a lot more.

00:05:03.780 --> 00:05:07.150
At this point, with the Web Kit open,
you can see everything that

00:05:07.150 --> 00:05:08.780
matters inside the engine.

00:05:08.780 --> 00:05:10.770
All the relevant code is there.

00:05:10.890 --> 00:05:11.770
There's a lot of things you can do.

00:05:11.780 --> 00:05:13.640
There's a lot of things you would
have had a hard time figuring

00:05:13.640 --> 00:05:14.650
out without the Web Kit source.

00:05:14.780 --> 00:05:18.640
And everything that is not open
that you need to build this is

00:05:18.640 --> 00:05:22.560
now in a thin layer that we call
the Web Kit system interface.

00:05:22.920 --> 00:05:24.570
And a binary for that is included.

00:05:24.780 --> 00:05:29.150
So, this allows you to actually build
the Web Kit very easily and run

00:05:29.200 --> 00:05:33.530
a copy of Safari against your new
Web Kit or your own application.

00:05:34.390 --> 00:05:36.310
So,

00:05:36.970 --> 00:05:41.380
Being more open like this
means a lot of things.

00:05:41.430 --> 00:05:42.770
Here are some of the
things it means for Apple.

00:05:42.770 --> 00:05:46.800
And this is just a tiny assortment of
some of the things it means for us.

00:05:46.840 --> 00:05:50.760
One is that we think there'll
be a lot better testing.

00:05:50.890 --> 00:05:55.240
We do as much testing as we can,
but a whole lot more people have things

00:05:55.310 --> 00:05:57.070
that matter to them that they can test.

00:05:57.080 --> 00:05:59.520
And we've experienced this with
other open source projects.

00:05:59.580 --> 00:06:02.410
The things people care about the most,
they come in and test and try out.

00:06:02.610 --> 00:06:05.130
And we expect that regressions
and mistakes we make will

00:06:05.250 --> 00:06:06.300
be caught a lot earlier.

00:06:06.300 --> 00:06:08.850
And in particular,
we'd have this experience before

00:06:08.980 --> 00:06:11.500
that right when we released Safari,
there'd be sort of a

00:06:11.500 --> 00:06:13.000
frenzy of testing energy.

00:06:13.000 --> 00:06:16.380
We'd find all sorts of things that
we would have loved to know just

00:06:16.380 --> 00:06:19.550
a few weeks earlier or a month
earlier so that we could have had

00:06:19.600 --> 00:06:21.570
our release be better quality.

00:06:21.580 --> 00:06:23.060
So we expect much better testing.

00:06:23.070 --> 00:06:27.030
In addition, there's a possibility for
more eyes on the code.

00:06:27.160 --> 00:06:29.980
As the changes happen,
people are going to be able to see

00:06:29.980 --> 00:06:33.470
the changes and they're going to
be able to check if we're correct,

00:06:33.510 --> 00:06:35.690
check if we made security mistakes.

00:06:35.740 --> 00:06:37.670
People already do this,
but we think they can do

00:06:37.680 --> 00:06:38.330
it in a much bigger way.

00:06:38.350 --> 00:06:42.090
And we also think that there's a
possibility for richer participation.

00:06:42.160 --> 00:06:43.200
People want to get involved.

00:06:43.200 --> 00:06:45.480
There's any number of
different ways to get involved,

00:06:45.480 --> 00:06:51.100
very few of which were possible before,
all of which are possible now.

00:06:51.100 --> 00:06:55.920
Now, for--it's not--there aren't
just benefits for us.

00:06:56.100 --> 00:07:05.100
There are some benefits for
developers and our community as well.

00:07:05.100 --> 00:07:05.100
For one thing,
you now have access to the source code.

00:07:05.100 --> 00:07:07.900
So you can see each engine
change as it's checked in.

00:07:07.930 --> 00:07:12.150
You can try out a build long
before the general public has

00:07:12.150 --> 00:07:16.730
that build on their machines,
before the average Apple customer has it.

00:07:17.710 --> 00:07:19.350
You also get access to us.

00:07:19.550 --> 00:07:21.860
You get access to the developers
on my team and also the outside

00:07:21.860 --> 00:07:23.600
contributors who are developing.

00:07:23.700 --> 00:07:26.020
And so that means, let's say you want to
contribute a bug fix.

00:07:26.160 --> 00:07:29.550
You're going to have those reviewed
by the people who know the code best.

00:07:29.600 --> 00:07:33.590
You can also have influence
on what the Web Kit people do.

00:07:33.600 --> 00:07:35.600
Some people are going to show
up and just have a conversation

00:07:35.600 --> 00:07:40.600
and those conversations can
have a big impact on direction.

00:07:40.650 --> 00:07:45.800
And finally, this way of opening it,
this way of opening up source means that

00:07:45.800 --> 00:07:51.540
you're really invited to participate,
to get in there and fix things

00:07:51.600 --> 00:07:53.600
that bother you rather than
just having to live with them.

00:07:53.600 --> 00:07:57.520
And just be a part of a community
that together is going to determine

00:07:57.520 --> 00:07:59.390
the future of this software.

00:08:00.900 --> 00:08:09.660
So, now that things are more open, sorry,
what I want to say is,

00:08:09.670 --> 00:08:12.340
when I say things are more open,
let me get down to some of the details

00:08:12.340 --> 00:08:15.290
of what's new as of this Monday.

00:08:16.040 --> 00:08:18.040
First of all,
we have a brand new developer website

00:08:18.420 --> 00:08:20.740
and it's at webkit.opendarwin.org.

00:08:20.830 --> 00:08:24.980
And I should take this minute to say that
this whole open source project would not

00:08:25.060 --> 00:08:28.980
have been possible without the help of
the guys at opendarwin.org that already

00:08:28.980 --> 00:08:34.030
had experience with this sort of stuff
and helped us in tons of different ways.

00:08:34.240 --> 00:08:37.900
And so this website is your gateway
to information about the project.

00:08:38.010 --> 00:08:40.860
A lot of the things I'm saying
here today are set on the website.

00:08:40.960 --> 00:08:44.160
It also tells you everything you
need about all the other resources.

00:08:44.240 --> 00:08:48.700
And so the website is
kind of the crucial bit.

00:08:48.770 --> 00:08:52.600
Besides the website,
we've now got a public CVS repository.

00:08:52.660 --> 00:08:56.860
So there's both anonymous CVS for
most people and then also read/write

00:08:56.980 --> 00:08:59.910
CVS for people who have commit access.

00:09:00.010 --> 00:09:04.060
And this public CVS repository is how you
can see the changes right as they happen.

00:09:04.120 --> 00:09:08.500
If I fix a bug,
a few minutes later anyone who

00:09:08.500 --> 00:09:11.320
wants to can pull down that bug fix.

00:09:12.200 --> 00:09:14.200
There's also a developer mailing list.

00:09:14.240 --> 00:09:16.400
And the information
is all on the website,

00:09:16.400 --> 00:09:19.480
so you don't have to worry about
these URLs or mailing list addresses.

00:09:19.600 --> 00:09:21.400
But there are actually
three mailing lists,

00:09:21.500 --> 00:09:24.800
and all at open--all at opendarwin.org.

00:09:24.920 --> 00:09:27.560
And this is the list--this here,
Web Kit Dev, is the one for discussing

00:09:27.560 --> 00:09:31.680
Web Kit development,
just kind of the general place.

00:09:32.550 --> 00:09:36.680
In addition, there's an IRC channel for
developers and you can hop on there

00:09:36.930 --> 00:09:39.600
any time of day and there'll be
someone there discussing Web Kit.

00:09:39.600 --> 00:09:43.510
I mean,
I cannot tell you the huge number of

00:09:43.640 --> 00:09:46.200
people that are hanging out on that
channel and all the things they know

00:09:46.200 --> 00:09:48.200
about Web Kit that I'm just amazed by.

00:09:48.200 --> 00:09:50.370
And this has literally
been open only for,

00:09:50.440 --> 00:09:53.400
you know, what,
less than 48 hours at this point.

00:09:53.400 --> 00:09:56.950
It's almost intimidating how
many people are on there.

00:09:57.060 --> 00:09:59.780
I mean,
there were like 150 last time I was on.

00:09:59.930 --> 00:10:02.830
And it's pretty exciting and I think
that's really a great place to go to

00:10:02.830 --> 00:10:04.560
kind of get the pulse of the project.

00:10:04.600 --> 00:10:06.490
Some of the people
there are just lurking,

00:10:06.490 --> 00:10:09.600
some of the people there are actively
working on the project already.

00:10:09.600 --> 00:10:13.470
And our own developers who work on
Web Kit will be there to talk to you.

00:10:15.990 --> 00:10:18.300
And then finally,
there's a public bug database.

00:10:18.380 --> 00:10:21.400
Now, this means--this is a place
where you can report bugs,

00:10:21.400 --> 00:10:23.750
and it's different from Apple's
internal bug database in that

00:10:23.750 --> 00:10:24.640
you can see the whole thing.

00:10:24.640 --> 00:10:25.570
You can see every bug.

00:10:25.640 --> 00:10:27.140
You can see the state of the bug.

00:10:27.220 --> 00:10:31.510
And it's one of the things that really
helps people who want to help fix

00:10:31.530 --> 00:10:34.320
bugs go look there to see problems,
and people who want to report

00:10:34.410 --> 00:10:36.120
bugs will report them there.

00:10:36.200 --> 00:10:37.180
But more about that later.

00:10:37.400 --> 00:10:40.660
So all five of these things
are new as of Monday.

00:10:40.840 --> 00:10:45.400
They're all online, and check them out.

00:10:45.920 --> 00:10:47.840
So we made a bunch of other changes too.

00:10:47.840 --> 00:10:49.800
It wasn't just that we
created these five things.

00:10:49.860 --> 00:10:51.990
First of all,
we made it very easy to build Web Kit,

00:10:51.990 --> 00:10:52.750
WebCorre and JavaScriptCorre.

00:10:52.860 --> 00:10:56.200
You can, you can,
people have done it who really

00:10:56.200 --> 00:10:56.800
don't know much about programming.

00:10:56.800 --> 00:10:58.800
If you know a lot about
programming tools,

00:10:58.800 --> 00:11:00.800
it'll be even easier.

00:11:00.800 --> 00:11:03.630
And as I mentioned earlier,
the changes you can now

00:11:03.630 --> 00:11:04.750
see as we check them in.

00:11:04.810 --> 00:11:07.840
So before we had open source,
you could see our code,

00:11:07.930 --> 00:11:10.570
but you didn't see the changes until,
for quite a while.

00:11:10.920 --> 00:11:11.740
And we went the extra mile.

00:11:11.880 --> 00:11:15.800
We included the complete CVS history
from the very beginning of the project.

00:11:15.870 --> 00:11:17.840
So not only can you see our current
changes as they're checked in,

00:11:17.920 --> 00:11:20.870
but you can go back and say what
happened on this day in history,

00:11:21.040 --> 00:11:23.800
2003, 2002, whatever.

00:11:23.970 --> 00:11:27.590
And there are various reasons you might
be interested to see that evolution.

00:11:29.290 --> 00:11:31.460
We're doing a lot of things
to encourage contributions.

00:11:31.590 --> 00:11:32.200
This is new.

00:11:32.440 --> 00:11:35.700
The website talks about how
you can get changes integrated.

00:11:35.950 --> 00:11:40.710
And the very first change that was
integrated was a fix for a small

00:11:40.710 --> 00:11:45.200
memory leak that we got within,
boy, within hours of being online.

00:11:45.420 --> 00:11:49.050
And already we've gotten all
sorts of interesting changes.

00:11:49.330 --> 00:11:50.030
This is different.

00:11:50.200 --> 00:11:52.700
We're really encouraging
this in a big way.

00:11:52.700 --> 00:11:55.710
And not only do we have this
mailing list and IRC channel,

00:11:55.710 --> 00:11:58.200
but it's really a place
we're hanging out.

00:11:58.200 --> 00:12:00.130
People have already been there
and know that we're there,

00:12:00.190 --> 00:12:04.200
reviewing patches, talking to people,
all that sort of thing.

00:12:05.170 --> 00:12:10.140
So when I said you get to meet,
you get to be there on the channel

00:12:10.140 --> 00:12:12.750
and meet some of the developers,
I really want to take the next step

00:12:12.930 --> 00:12:16.640
and show you face to face a couple
of the people that you'll see there.

00:12:16.700 --> 00:12:20.990
So these are also the guys who
did most of the work to make the

00:12:20.990 --> 00:12:23.480
whole open source project possible.

00:12:23.580 --> 00:12:25.470
So come on up on stage.

00:12:25.640 --> 00:12:32.020
First, Dave Hyatt, who is one of our
Safari Web Kit engineers.

00:12:32.020 --> 00:12:35.410
And who's super famous
because of his great blog,

00:12:35.500 --> 00:12:40.260
Surf and Safari,
and all of his web expertise.

00:12:40.260 --> 00:12:41.540
And then Maciej Stachowiak.

00:12:41.720 --> 00:12:44.700
So Maciej is another
engineer on our team.

00:12:44.700 --> 00:12:48.840
And he really-- he did more work
than anyone else to make this

00:12:48.840 --> 00:12:50.960
open source project possible.

00:12:51.000 --> 00:12:53.730
So anyway,
let me hand it over to these two guys.

00:12:53.770 --> 00:12:56.230
Do you guys have your microphone yet?

00:12:57.400 --> 00:12:59.300
on the podium, oh okay, right over here.

00:12:59.300 --> 00:13:03.040
And they'll show you what it takes
to download and build the Web Kit.

00:13:07.260 --> 00:13:09.780
Alright,
so what we can show you here is the

00:13:09.780 --> 00:13:15.070
instructions on the website for building
and then Maciej here can actually

00:13:15.140 --> 00:13:17.750
try it and we'll see if it works.

00:13:21.750 --> 00:13:23.910
I have to warn you,
we haven't practiced this a lot,

00:13:24.090 --> 00:13:27.290
so much like real open source projects,
we're sort of making

00:13:27.290 --> 00:13:28.690
this up as we go along.

00:13:28.720 --> 00:13:30.260
So bear with us.

00:13:30.580 --> 00:13:32.200
Just a second.

00:13:32.230 --> 00:13:34.690
Can we get back to the demo one machine?

00:13:34.750 --> 00:13:36.340
Is that text readable for you?

00:13:36.360 --> 00:13:37.900
Yeah, it's great.

00:13:37.900 --> 00:13:39.420
Okay.

00:13:41.750 --> 00:13:44.700
So developer tools we already have here.

00:13:44.700 --> 00:13:51.040
I'm gonna launch the terminal
so I can do these other steps.

00:13:55.730 --> 00:13:57.160
Terminal.

00:13:57.160 --> 00:14:02.900
I'm just going to cut and
paste these instructions from

00:14:02.900 --> 00:14:06.200
the site because I'm lazy.

00:14:06.220 --> 00:14:07.390
You can do this too.

00:14:07.420 --> 00:14:09.840
Real typing is not required.

00:14:12.700 --> 00:14:16.090
So what we have here is an anonymous
CVS server so that even without

00:14:16.090 --> 00:14:18.940
write access you can pull the code.

00:14:19.040 --> 00:14:22.300
And it's basically you just log
in to the anonymous CVS site

00:14:22.530 --> 00:14:25.390
and the password is anonymous.

00:14:28.120 --> 00:14:30.670
Thank you for checking out.

00:14:30.670 --> 00:14:40.680
So you just get one module that knows how
to update all the others and here you go.

00:14:40.760 --> 00:14:42.510
It's all checking out.

00:14:44.370 --> 00:14:54.660
It would take less than a minute
to pull a whole rendering engine,

00:14:54.660 --> 00:14:54.660
which is pretty small for
code that does so much.

00:14:55.040 --> 00:14:58.240
There's not that many exciting things
I can say about the files flying by,

00:14:58.240 --> 00:15:00.900
so there they are.

00:15:01.010 --> 00:15:02.850
This is one of our test suites.

00:15:02.900 --> 00:15:02.900
This is mostly test cases here.

00:15:02.900 --> 00:15:04.900
This is one of our test suites.

00:15:04.900 --> 00:15:06.770
We're big on testing.

00:15:06.900 --> 00:15:09.080
We'll talk about the
regression test more later,

00:15:09.080 --> 00:15:14.900
but we have just a huge suite that
we're building up of all sorts of tests,

00:15:14.900 --> 00:15:18.290
both ones based on the spec and then
one based on reduced cases from real

00:15:18.290 --> 00:15:25.100
websites to try to keep things going
forward and not regress as much.

00:15:27.540 --> 00:15:29.940
You guys are having the
same bug I have at home.

00:15:29.950 --> 00:15:32.150
Makes each directory go slower.

00:15:32.180 --> 00:15:33.260
I don't know what it is.

00:15:33.260 --> 00:15:34.260
Yeah.

00:15:34.310 --> 00:15:39.260
It's a lot of people
checking out the code.

00:15:39.360 --> 00:15:41.240
Yeah, it might take three
minutes instead of one.

00:15:48.900 --> 00:15:55.760
This is all layout tests now.

00:15:55.900 --> 00:16:00.090
And now we're up to the test
suite for WebCor itself.

00:16:00.090 --> 00:16:00.090
The

00:16:01.300 --> 00:16:22.700
[Transcript missing]

00:16:33.700 --> 00:16:42.200
[Transcript missing]

00:16:45.100 --> 00:16:48.220
Oh look, there's a handy link here
for building the code.

00:16:48.220 --> 00:16:51.580
And much like checking out,
it's very simple.

00:16:51.590 --> 00:16:53.330
It's just one line.

00:16:53.360 --> 00:16:55.100
Gotta set the Xcode preference first.

00:16:55.100 --> 00:16:55.820
Oh, right.

00:16:55.820 --> 00:16:58.100
First I have to...see,
I'm not so good at reading.

00:16:58.100 --> 00:16:59.600
He started with step two.

00:16:59.600 --> 00:17:01.100
Don't skip step one.

00:17:01.100 --> 00:17:05.050
Remember to actually read
the instructions unlike us.

00:17:05.110 --> 00:17:06.990
Yeah, building has a first time step.

00:17:07.070 --> 00:17:09.100
You only have to do this once in Xcode.

00:17:09.100 --> 00:17:11.080
It's important to set
a common building code.

00:17:18.650 --> 00:17:21.030
Building Panel and Preferences.

00:17:21.210 --> 00:17:28.660
Place build projects in customized
directory and I don't know

00:17:28.660 --> 00:17:30.490
what this user's username is.

00:17:30.490 --> 00:17:34.100
Let's see.

00:17:34.100 --> 00:17:37.090
User's Apple.

00:17:37.090 --> 00:17:37.090
Alright.

00:17:39.930 --> 00:17:44.040
Users, Apple, /build.

00:17:44.040 --> 00:17:46.450
These need to go into a common
directory so that all the different

00:17:46.570 --> 00:17:49.990
projects can find each other because
it's built out of multiple frameworks

00:17:50.010 --> 00:17:51.180
that all need to link together.

00:17:51.180 --> 00:17:55.150
So there's that and...

00:17:55.880 --> 00:17:57.800
You probably should make it.

00:17:57.800 --> 00:17:58.730
Okay.

00:17:58.860 --> 00:18:00.800
It doesn't... Details.

00:18:00.800 --> 00:18:01.800
It might not matter, but you know.

00:18:01.800 --> 00:18:04.800
But I'll fire up the build now and...

00:18:06.360 --> 00:18:07.200
Hey, David.

00:18:07.200 --> 00:18:08.160
Let it get going.

00:18:08.200 --> 00:18:09.200
Make him talk into the mic.

00:18:09.230 --> 00:18:10.200
Stick the mic in his face.

00:18:10.200 --> 00:18:11.200
Okay.

00:18:11.200 --> 00:18:13.710
I'm firing off the build now and
we'll let it go for a while and

00:18:13.710 --> 00:18:15.630
give the floor back to Darin.

00:18:15.800 --> 00:18:16.640
Okay.

00:18:16.640 --> 00:18:17.390
Let me know when that
thing's done because,

00:18:17.390 --> 00:18:19.380
you know,
we'll be able to go back to you.

00:18:19.380 --> 00:18:21.800
So back to the slides, please.

00:18:22.870 --> 00:18:26.770
So there are a lot of different
ways to contribute and I wanted to

00:18:26.770 --> 00:18:29.230
just talk a little bit about some
of the ways you could do it just

00:18:29.230 --> 00:18:34.000
so you can start imagining what's
possible if you'd like to contribute.

00:18:34.110 --> 00:18:37.040
So let's first talk about testing.

00:18:37.090 --> 00:18:42.200
The main thing you want to do
to test is get the latest stuff.

00:18:42.240 --> 00:18:43.950
That's what's special about
the Open Source Project.

00:18:43.960 --> 00:18:44.690
You can test the latest.

00:18:44.800 --> 00:18:46.670
You don't have to test our last release.

00:18:46.830 --> 00:18:49.900
So you're going to need to download
the source and build it and try it.

00:18:49.950 --> 00:18:51.540
And after today,
you're going to know what it

00:18:51.630 --> 00:18:54.640
takes to do that and you do have
to go into Xcode preferences,

00:18:54.770 --> 00:18:56.880
but that's probably the
hardest thing in the whole

00:18:58.300 --> 00:19:13.500
[Transcript missing]

00:19:13.760 --> 00:19:15.560
But you can even go further.

00:19:15.640 --> 00:19:19.400
We have a whole test framework and if
there's a particular bug that you want to

00:19:19.400 --> 00:19:23.400
make sure never gets reintroduced again,
you can create a test for that bug.

00:19:23.460 --> 00:19:27.340
And then we promise we won't let anyone
check in any code that breaks that test.

00:19:27.390 --> 00:19:30.450
And it's pretty straightforward
to make tests as well,

00:19:30.560 --> 00:19:32.770
so we're hoping some people will do that.

00:19:34.620 --> 00:19:36.040
Now some other people are
not going to want to test,

00:19:36.120 --> 00:19:37.010
they're going to want to write code.

00:19:37.330 --> 00:19:38.500
It's a lot of fun.

00:19:38.570 --> 00:19:41.200
It's part of why I do this,
I just love programming.

00:19:41.240 --> 00:19:43.780
And there's all kinds of
different types of coding tasks

00:19:43.850 --> 00:19:45.340
you can do to help us out.

00:19:45.370 --> 00:19:46.260
One is just fix bugs.

00:19:46.460 --> 00:19:49.740
You can go on there, find a bug,
figure out how to fix it.

00:19:49.770 --> 00:19:52.580
We'll show you a little
bit how to do that today.

00:19:52.890 --> 00:19:55.870
You may have an interest in some
other platform besides OS X,

00:19:55.870 --> 00:19:59.400
and we welcome people who are interested
in porting to other platforms.

00:19:59.480 --> 00:20:01.040
Talk a little bit about that too.

00:20:01.120 --> 00:20:06.230
And finally, this is the Web Engine,
and you're welcome to add what we

00:20:06.240 --> 00:20:08.740
think of as Web Engine features.

00:20:08.800 --> 00:20:11.210
These aren't really browser features,
they're not features from the

00:20:11.210 --> 00:20:12.360
point of view of the end user.

00:20:12.430 --> 00:20:14.790
They're really more like bug fixes,
getting us to be more

00:20:14.790 --> 00:20:17.560
like other browsers,
or completing implementation of

00:20:17.560 --> 00:20:20.540
technologies that are under the hood and
to the end user isn't a feature at all.

00:20:20.800 --> 00:20:24.470
But we'd love for you to add
those things to our engine.

00:20:25.940 --> 00:20:28.590
In addition,
there's so many other ways to pitch

00:20:28.590 --> 00:20:29.970
in besides testing and coding.

00:20:29.970 --> 00:20:32.660
And I just put a list of a few
I could think of right away.

00:20:32.700 --> 00:20:34.880
But one of the best things you could do,
one of the most valuable

00:20:34.950 --> 00:20:37.760
things in the project is just
show up on the mailing list,

00:20:38.000 --> 00:20:39.600
show up on IRC.

00:20:39.660 --> 00:20:42.040
In no time you'll be an expert
and start answering some of the

00:20:42.170 --> 00:20:44.000
questions that other newcomers have.

00:20:44.090 --> 00:20:47.700
This is one of the most valuable things
any open source project could have

00:20:47.700 --> 00:20:49.700
and we'd love for people to do that.

00:20:51.550 --> 00:20:56.660
Another thing you can do is
take a bug that just says this

00:20:56.760 --> 00:20:59.660
website doesn't work and reduce
it down to a minimal test case.

00:20:59.720 --> 00:21:01.820
That's another incredibly valuable thing.

00:21:01.860 --> 00:21:04.310
A minimal test case is easy
for someone who knows the

00:21:04.310 --> 00:21:06.530
code to write a bug fix for.

00:21:06.660 --> 00:21:07.960
You can also go through our bug database.

00:21:08.070 --> 00:21:10.540
You'll find that there are bugs reported
there that have already been fixed.

00:21:10.560 --> 00:21:11.690
You'll find duplicates.

00:21:11.800 --> 00:21:13.820
All of that helps out.

00:21:14.110 --> 00:21:16.500
Also, and this is something people
have already been doing,

00:21:16.500 --> 00:21:18.920
you can tell us what needs to be
improved on the website and give

00:21:19.340 --> 00:21:22.440
us content to improve the website
itself that we'll put up there.

00:21:22.520 --> 00:21:26.440
And the documentation about the
code we think has a long way to go.

00:21:26.520 --> 00:21:28.740
And this is one area where
if you go through something,

00:21:28.740 --> 00:21:32.200
you figure out a bug, you decide to help,
we would love to improve

00:21:32.200 --> 00:21:39.430
the documentation so it
covers what you learned.

00:21:39.560 --> 00:21:41.680
There's a lot more ways,
but those are just a few

00:21:41.740 --> 00:21:42.990
I was able to think of.

00:21:44.890 --> 00:21:48.450
One of the big things that this
changes is that you have more options

00:21:49.000 --> 00:21:51.110
now when a bug is bugging you.

00:21:51.330 --> 00:21:54.800
Before, pretty much you had one option,
report it to Apple.

00:21:54.860 --> 00:21:58.530
You know, there's a feedback forum and,
you know, there's your second option or,

00:21:58.530 --> 00:22:00.470
you know,
you can write angry email to Steve Jobs,

00:22:00.540 --> 00:22:03.300
my favorite way of reporting bugs.

00:22:03.300 --> 00:22:06.300
I just love it when Steve sends me.

00:22:06.300 --> 00:22:11.300
But there are a lot more options
now that weren't there before.

00:22:11.300 --> 00:22:14.270
So one of them is you can
discuss your bug with people

00:22:14.310 --> 00:22:16.300
who are expert on Web Kit.

00:22:16.300 --> 00:22:20.490
And that means you can send
this to this mailing list where

00:22:20.490 --> 00:22:23.300
there are Web Kit experts,
both inside and outside of Apple.

00:22:23.300 --> 00:22:27.800
And this is just something that was
absolutely out of the question before.

00:22:29.470 --> 00:22:34.040
Another thing you can do is if you have
the interest and you have the skills,

00:22:34.070 --> 00:22:37.000
you can actually fix the bug
yourself and contribute a patch.

00:22:37.050 --> 00:22:39.330
And a lot of times,
a bug that's affecting you

00:22:39.330 --> 00:22:42.280
is something you understand a
lot better than anyone else.

00:22:42.330 --> 00:22:44.330
And so we're really
hoping that in some cases,

00:22:44.350 --> 00:22:47.000
this is what people will do
when a bug is bothering them.

00:22:47.060 --> 00:22:51.980
One of the reasons that open source
is so great is that it really allows

00:22:52.100 --> 00:22:55.230
people to kind of scratch their own itch,
fix what they don't like about

00:22:55.240 --> 00:22:56.860
the software they're using.

00:22:57.030 --> 00:23:00.010
And that's an option
available now that just,

00:23:00.010 --> 00:23:03.060
you know,
really was not practical before.

00:23:04.850 --> 00:23:07.710
Now another thing you can do when
a bug is bothering you is you can

00:23:07.740 --> 00:23:14.040
go over to the Web Kit Bugzilla bug
database and put a bug report in there.

00:23:14.210 --> 00:23:15.740
There's a lot of benefits to that.

00:23:15.970 --> 00:23:18.640
First of all, the other contributors
to the Web Kit-- Okay,

00:23:18.640 --> 00:23:19.930
it's done.

00:23:23.920 --> 00:23:24.760
You said to tell you.

00:23:24.850 --> 00:23:25.780
Oh, man.

00:23:25.800 --> 00:23:26.800
Oh, shit.

00:23:26.880 --> 00:23:31.800
Did you build the whole thing
or is that just like part of it?

00:23:31.800 --> 00:23:32.800
Yeah, that's it.

00:23:32.830 --> 00:23:33.800
That's the whole thing.

00:23:33.800 --> 00:23:34.800
All right.

00:23:34.800 --> 00:23:35.800
That's all it takes to
build the whole engine.

00:23:35.800 --> 00:23:36.800
Okay.

00:23:36.800 --> 00:23:39.640
I really should have slimmed
down my talk a little bit.

00:23:40.010 --> 00:23:42.770
So, let me just finish
what I'm talking about.

00:23:42.840 --> 00:23:47.800
So, you got the--so if you make a
report in the Bugzilla bug database,

00:23:47.800 --> 00:23:49.740
everyone can see the
problem you described.

00:23:49.890 --> 00:23:52.560
Other open source contributors
can get in there and fix it for

00:23:52.640 --> 00:23:56.010
you and you'll also be able to see
the process as people argue about,

00:23:56.050 --> 00:23:56.800
"That's not a bug at all.

00:23:56.800 --> 00:23:58.690
That's how it's supposed to
work," and all that kind of stuff

00:23:58.690 --> 00:23:59.800
and you can defend yourself.

00:23:59.800 --> 00:24:02.860
But there are times when you're also
going to want to put the bug report

00:24:03.050 --> 00:24:04.800
in the Apple internal bug database.

00:24:04.800 --> 00:24:06.800
Let me tell you about a few times.

00:24:06.800 --> 00:24:09.240
It reveals something that
you would prefer only you and

00:24:09.240 --> 00:24:10.680
Apple know about your product.

00:24:10.800 --> 00:24:13.800
If you're in that situation,
feel free to put that in

00:24:13.900 --> 00:24:15.660
the internal bug database.

00:24:15.820 --> 00:24:17.860
It's not--the open source
contributors aren't going to see it,

00:24:17.860 --> 00:24:19.760
but we'll get that feedback.

00:24:19.800 --> 00:24:21.800
And that information.

00:24:21.800 --> 00:24:24.410
Another reason to use the
internal bug database is that

00:24:24.410 --> 00:24:29.790
products other than WebKit,
let's say the mail application

00:24:29.870 --> 00:24:33.720
or the Safari web browser,
bugs in--the WebKit bug database

00:24:33.820 --> 00:24:34.730
is not the place for those.

00:24:34.800 --> 00:24:37.540
So, if you want a new menu
item in the Safari menus,

00:24:37.600 --> 00:24:40.800
it really needs to go into
Apple's internal bug database.

00:24:40.800 --> 00:24:42.800
And we'll have to--you know,
I'm sure that'll confuse people at first.

00:24:42.800 --> 00:24:46.800
We're going to have to move bugs out
of Bugzilla into the internal one.

00:24:47.000 --> 00:24:53.330
And another thing is if--we use
the Apple internal bug database to

00:24:53.330 --> 00:24:55.720
plan things like software updates.

00:24:56.050 --> 00:24:59.780
And so, if a bug is particularly--has
a particularly impact

00:25:00.130 --> 00:25:03.000
on one of your products,
you may want to write a bug in the

00:25:03.080 --> 00:25:08.150
Apple bug database and mention the
Bugzilla bug report so that we can--so we

00:25:08.280 --> 00:25:12.590
can consider that when we're considering
software updates and that sort of thing.

00:25:12.710 --> 00:25:14.440
So you now have all these options.

00:25:14.440 --> 00:25:16.560
I'm not even sure I covered them all,
but when a bug bugs you,

00:25:16.560 --> 00:25:18.200
you can do any of these things.

00:25:18.340 --> 00:25:23.790
So, Maciej and Dave are now going to
show you what it takes to fix a bug.

00:25:23.910 --> 00:25:27.140
Alright,
so now that we have the tree built,

00:25:27.150 --> 00:25:30.800
let's try running it just to see if we
can run Safari with the new Web Kit.

00:25:30.800 --> 00:25:37.360
You have to run it from the
Web Kit tools directory.

00:25:41.850 --> 00:25:45.310
I think there's a script
subdirectory in Web Kit Tools.

00:25:45.310 --> 00:25:49.790
We haven't gotten a lot of
sleep the past few nights.

00:25:52.200 --> 00:25:53.310
So there's Safari running.

00:25:53.420 --> 00:25:57.200
Do you remember the Acid2 test URL?

00:25:57.210 --> 00:25:59.840
This is just to prove that we're
actually running the latest code.

00:25:59.860 --> 00:26:06.200
This is a new CSS and
HTML conformance test.

00:26:06.220 --> 00:26:11.840
It was recently created by Ian Hickson
that Dave did a bunch of fixes for.

00:26:15.500 --> 00:26:16.500
and you can see it in action.

00:26:16.500 --> 00:26:18.480
There it is, rendering correctly.

00:26:18.480 --> 00:26:23.740
Now you too can have it on your machine.

00:26:23.740 --> 00:26:29.610
And now Dave's going to find a bug in
Flexzilla and fix it live as you watch.

00:26:29.980 --> 00:26:32.900
And then I'll review his chains.

00:26:34.970 --> 00:26:35.820
We hope this works.

00:26:35.940 --> 00:26:36.900
I sure hope this works.

00:26:46.580 --> 00:26:48.500
Make sure when he's
talking it's in the mic.

00:26:48.500 --> 00:26:51.420
...as a pretty basic
HTML for compliance bug.

00:26:51.500 --> 00:26:55.500
The object element,
you note that the object element

00:26:55.500 --> 00:27:00.470
doesn't support a handful of attributes,
including align, v-align,

00:27:00.490 --> 00:27:02.500
h-space and v-space.

00:27:02.740 --> 00:27:07.500
And a test case demonstrating the
problem is actually attached to the bug.

00:27:07.620 --> 00:27:11.840
And I want to emphasize that the best
way to get bugs fixed quickly is to

00:27:11.840 --> 00:27:15.860
make really good minimal reductions that
include only a snippet of HTML that's

00:27:15.860 --> 00:27:17.500
needed to reproduce the problem.

00:27:17.500 --> 00:27:20.330
Because that makes it really
easy for us to see what's wrong,

00:27:20.330 --> 00:27:21.500
what's going wrong.

00:27:25.200 --> 00:27:27.940
So, this is an example of a test.

00:27:27.940 --> 00:27:31.500
The object elements represented
is that big green block.

00:27:31.580 --> 00:27:35.080
And the text says that the object
should be floating off to the right,

00:27:35.080 --> 00:27:37.800
to the far right of the window,
and have some margins around it.

00:27:37.810 --> 00:27:40.320
So there should be some space
between it and the text,

00:27:40.330 --> 00:27:41.540
about 20 pixels.

00:27:41.600 --> 00:27:46.460
And so it's not really rendering
the way that we would expect it to.

00:27:46.570 --> 00:27:50.110
So what I'm going to do is fix the bug.

00:27:53.300 --> 00:27:58.510
Alright, I think Dave's going to need
both hands to type this time.

00:28:02.600 --> 00:28:06.480
Since it's a safe assumption,
this is where a bulk of the HTML,

00:28:06.480 --> 00:28:08.600
CSS and DOM code is.

00:28:08.730 --> 00:28:11.270
And you'll see that there's
a subdirectory in here,

00:28:11.270 --> 00:28:12.090
KHTML.

00:28:12.090 --> 00:28:16.600
This is our fork of the KHTML engine.

00:28:16.600 --> 00:28:19.840
So what we have here is an
HTML subdirectory where all

00:28:19.930 --> 00:28:21.580
of the DOM elements are.

00:28:21.600 --> 00:28:27.430
And there's a nicely named
HTML object and bull class here.

00:28:29.260 --> 00:28:30.200
Bigger font.

00:28:30.200 --> 00:28:33.200
Yeah, how do I raise the font here?

00:28:33.200 --> 00:28:37.200
Show fonts there.

00:28:37.200 --> 00:28:38.200
Ah.

00:28:38.200 --> 00:28:39.200
Command T.

00:28:39.620 --> 00:28:40.120
Command T.

00:28:40.200 --> 00:28:41.290
Command T.

00:28:48.900 --> 00:28:50.760
That didn't work at all.

00:28:50.800 --> 00:28:54.800
. All right.

00:28:54.800 --> 00:28:58.270
. Okay.

00:28:58.850 --> 00:29:00.800
I think you need to do some preferences.

00:29:00.800 --> 00:29:02.800
Go ahead and go in preferences, guys.

00:29:10.610 --> 00:29:11.270
There it is.

00:29:11.400 --> 00:29:12.500
Fonts and colors.

00:29:12.500 --> 00:29:15.700
The amount of sleep we've
got in the last four days.

00:29:15.700 --> 00:29:16.000
Not much.

00:29:16.020 --> 00:29:17.000
Down, down.

00:29:17.000 --> 00:29:18.000
All right.

00:29:18.000 --> 00:29:20.200
Editor font.

00:29:20.240 --> 00:29:20.900
All right.

00:29:20.900 --> 00:29:22.900
I think we have it straight.

00:29:22.900 --> 00:29:23.380
That'll work.

00:29:23.380 --> 00:29:23.890
Now just say okay.

00:29:24.000 --> 00:29:24.510
You'll be fine.

00:29:32.100 --> 00:29:48.900
[Transcript missing]

00:29:49.990 --> 00:29:52.820
So this is the applet element,
which is not the one we want,

00:29:52.820 --> 00:29:55.400
so I'll keep looking.

00:29:55.430 --> 00:29:58.220
Here's the embed element,
also not the one we want.

00:29:58.250 --> 00:30:01.460
But out of curiosity, it occurs to me,
well, the embed element,

00:30:01.460 --> 00:30:02.760
that's not the same
as the object element.

00:30:02.760 --> 00:30:05.190
I wonder if this has the same bug.

00:30:05.570 --> 00:30:08.290
So I'm going to sort of look down
here and look... I see this is pretty

00:30:08.340 --> 00:30:13.100
interesting because I see v space,
h space, align and valign are all

00:30:13.680 --> 00:30:16.180
handled by the embed element.

00:30:16.250 --> 00:30:21.050
So I'm going to just copy
some of this code here.

00:30:22.480 --> 00:30:23.970
and then keep looking.

00:30:24.070 --> 00:30:26.990
So here I am at HTML object element.

00:30:27.080 --> 00:30:30.440
So let's look at the list of
attributes that it handles here.

00:30:30.520 --> 00:30:32.440
I see a few.

00:30:33.100 --> 00:30:37.450
I don't see the ones that I need,
so clearly I need to handle those.

00:30:37.450 --> 00:30:40.390
So I'll just take the code.

00:30:41.220 --> 00:30:45.590
From the embed element, paste it in here.

00:30:45.590 --> 00:30:47.750
And you know,
kind of hope that that works.

00:30:49.100 --> 00:30:51.440
Oh, that was going to be my
mistake for the code review.

00:30:51.540 --> 00:30:54.500
You guys are too--I'm getting
code review from the audience.

00:30:54.700 --> 00:30:58.720
And this is the power of open source.

00:31:03.130 --> 00:31:05.110
Mike, Maciej, Mike.

00:31:05.110 --> 00:31:08.190
There's this other function that
also handles some attributes.

00:31:08.210 --> 00:31:11.990
So I'm going to sort of do the
pattern matching school of coding here

00:31:11.990 --> 00:31:15.590
where I'm going to go back and say,
oh, hey, did the embed element

00:31:15.590 --> 00:31:17.390
actually do something here?

00:31:20.000 --> 00:31:21.240
It looks like it did.

00:31:21.240 --> 00:31:27.000
So we can see that there's a little
bit more code to handle here.

00:31:27.000 --> 00:31:33.500
So I'll just sort of copy that too.

00:31:39.300 --> 00:31:41.300
We'll just paste that in.

00:31:41.300 --> 00:31:46.300
Get rid of this one that
we don't care about.

00:31:46.300 --> 00:31:51.300
And now we'll try building it.

00:31:51.300 --> 00:31:52.670
Maybe later.

00:32:00.450 --> 00:32:01.900
You don't want to change
the tools directory,

00:32:01.900 --> 00:32:06.860
just... No,
you can just do it using the script.

00:32:09.300 --> 00:32:20.300
[Transcript missing]

00:32:21.480 --> 00:32:23.510
It used to be a lot more
complicated to build,

00:32:23.510 --> 00:32:27.000
but we just felt we had to have like the
smoothest possible way to make it easy

00:32:27.000 --> 00:32:29.400
for contributors to build and test it.

00:32:29.400 --> 00:32:31.390
Let me know when you're done building.

00:32:31.480 --> 00:32:32.370
Just kidding.

00:32:32.460 --> 00:32:38.800
So now we're going to run
Safari with our scripts.

00:32:43.100 --> 00:32:58.000
[Transcript missing]

00:33:02.300 --> 00:33:03.840
So that's how easy it is.

00:33:03.850 --> 00:33:06.690
We've just improved our standard support,
our HTML4 compliance

00:33:06.730 --> 00:33:07.700
in about five minutes.

00:33:07.700 --> 00:33:08.780
No way, man.

00:33:08.780 --> 00:33:10.000
It's not done.

00:33:10.000 --> 00:33:11.100
Oh, you want to see me make a patch?

00:33:11.210 --> 00:33:11.910
Yeah.

00:33:12.200 --> 00:33:13.700
Make a patch.

00:33:13.700 --> 00:33:14.200
Okay.

00:33:14.200 --> 00:33:15.200
Sorry.

00:33:15.200 --> 00:33:17.630
I don't know about you,
but I think it's not fixed yet

00:33:17.780 --> 00:33:20.700
until it's actually reviewed,
checked in, all that stuff.

00:33:20.700 --> 00:33:21.200
All right.

00:33:21.200 --> 00:33:22.010
So let's do it all.

00:33:22.310 --> 00:33:24.150
Do you want to make the patch?

00:33:26.190 --> 00:33:28.540
Give Maciej the mic though,
so he can talk while he's doing it.

00:33:28.560 --> 00:33:32.680
All right,
so normally this is supposed to be

00:33:32.740 --> 00:33:36.270
the responsibility of the contributor,
but I'm just going to--

00:33:37.560 --> 00:33:41.600
I'm going to be generous
here because me and Dave,

00:33:41.730 --> 00:33:47.800
we go way back,
so I can make a dip for him.

00:33:52.720 --> 00:33:57.500
It was a small change,
I'll just... from the command

00:33:57.500 --> 00:34:01.300
line and read it here so
I can review Dave's patch.

00:34:02.960 --> 00:34:04.820
Now usually what you do at
this point is you would attach

00:34:04.960 --> 00:34:06.620
the patch to the bug report.

00:34:06.720 --> 00:34:09.490
So that allows,
then you send mail to the mailing

00:34:09.510 --> 00:34:12.100
list to let everyone know there's
a patch on this bug report.

00:34:12.250 --> 00:34:14.340
So not only can one reviewer review it,
but anyone else who's

00:34:14.340 --> 00:34:16.650
following can go check it out.

00:34:16.700 --> 00:34:24.900
[Transcript missing]

00:34:26.020 --> 00:34:27.040
This part looks okay.

00:34:27.040 --> 00:34:32.240
He removed the universal line,
but these cases are falling through

00:34:32.240 --> 00:34:36.580
to the same thing over there.

00:34:37.930 --> 00:34:41.240
These other changes look good.

00:34:41.290 --> 00:34:43.800
You guys already spotted the
missing break that he was going

00:34:43.800 --> 00:34:49.280
to plant there just for me,
so thanks.

00:34:50.700 --> 00:34:52.530
Okay, well Dave,
the code change looks good,

00:34:52.530 --> 00:34:54.240
but I have a couple
of questions about it.

00:34:54.240 --> 00:34:56.880
The first one is,
did you run our regression test

00:34:56.880 --> 00:34:59.620
suite to see if this breaks anything?

00:34:59.800 --> 00:35:05.200
[Transcript missing]

00:35:15.150 --> 00:35:16.350
That was not the right answer.

00:35:16.360 --> 00:35:18.760
That was the right answer for me, though.

00:35:18.800 --> 00:35:20.360
I'm always like, I didn't run them.

00:35:23.180 --> 00:35:24.680
So let's just run the
regression test suite.

00:35:24.770 --> 00:35:28.200
It's going to have to build this tool
that's used to dump the render tree.

00:35:28.200 --> 00:35:30.200
And here it is going.

00:35:30.340 --> 00:35:32.610
through our test suite,
and this takes just a

00:35:32.610 --> 00:35:33.640
minute to run them all.

00:35:33.640 --> 00:35:35.230
By the way,
these are -- this is a great thing

00:35:35.230 --> 00:35:38.120
to do if you check out the tree,
just to run through the set of

00:35:38.120 --> 00:35:39.450
automated tests we already have.

00:35:39.450 --> 00:35:42.150
This is a very useful form of testing,
because if anything fails,

00:35:42.180 --> 00:35:43.340
we really want to know.

00:35:43.340 --> 00:35:45.510
And by the way,
that's a lot of failed there.

00:35:45.700 --> 00:35:45.780
Shit.

00:35:45.890 --> 00:35:47.160
We're getting a lot of failures.

00:35:47.180 --> 00:35:49.760
Oh, yeah, right,
we didn't -- I followed the

00:35:49.760 --> 00:35:50.840
instructions on the website.

00:35:50.840 --> 00:35:52.570
That's right,
we didn't follow the instructions.

00:35:52.570 --> 00:35:55.190
Oh, we haven't installed -- There's a
special font that you need to be able

00:35:55.190 --> 00:35:56.560
to run the tests -- Let's go do it.

00:35:56.610 --> 00:35:57.060
Let's go do it.

00:35:57.150 --> 00:35:57.360
Come on!

00:35:57.660 --> 00:36:00.870
Which has -- okay,
what the hell -- You don't

00:36:00.870 --> 00:36:02.900
have to wait for it to finish.

00:36:07.400 --> 00:36:08.780
Regression testing.

00:36:08.780 --> 00:36:10.130
Download the AHEM font.

00:36:10.160 --> 00:36:11.400
- You skipped step one again.

00:36:11.400 --> 00:36:14.270
- We have a problem with this.

00:36:14.300 --> 00:36:17.680
We like to go straight to the--

00:36:18.190 --> 00:36:19.100
Oh, look at all those.

00:36:19.100 --> 00:36:21.760
So all these tests fail because
we didn't have the special font.

00:36:21.820 --> 00:36:25.390
This is a font that actually
has like glyphs that are squares

00:36:25.480 --> 00:36:27.940
with particular proportions,
so you can actually make totally

00:36:27.940 --> 00:36:32.170
repeatable cross browser tests,
which should work regardless of the

00:36:32.230 --> 00:36:35.600
individual details of the font layout
system because the glyphs are all,

00:36:35.600 --> 00:36:37.100
you know, perfect squares.

00:36:37.240 --> 00:36:42.780
So I'm going to -- let's see,
where is my downloads window?

00:36:42.780 --> 00:36:49.580
Just going to use font
book to install this guy.

00:36:51.860 --> 00:36:56.220
Alright, now I have this crazy font
that is useless for real

00:36:56.220 --> 00:36:58.200
life but awesome for testing.

00:36:58.370 --> 00:37:02.270
Created by Ian Hickson,
the Web Standards Project and

00:37:02.270 --> 00:37:05.040
What Working Group and
other cool stuff like that.

00:37:05.200 --> 00:37:07.630
So now let's try the test again.

00:37:08.580 --> 00:37:11.420
And we don't see as many of
those failed flying by now.

00:37:11.420 --> 00:37:13.030
Hopefully this will work.

00:37:13.190 --> 00:37:14.880
If you watch,
you can catch it getting a little

00:37:14.880 --> 00:37:16.900
slower when it hits the ACID2 test.

00:37:17.080 --> 00:37:20.000
Kind of a big test, but it's in here.

00:37:20.200 --> 00:37:23.000
So that way I can't ever break it.

00:37:23.160 --> 00:37:26.960
Oh, you can break it, I'm sure.

00:37:33.110 --> 00:37:36.460
Alright, so yeah, we have test coverage
for all sorts of things.

00:37:36.460 --> 00:37:38.710
Some areas are more complete than others.

00:37:38.710 --> 00:37:42.520
You may have seen there's like a full
CSS1 test suite that flew by there.

00:37:42.520 --> 00:37:44.750
We don't yet have a
complete DOM test suite,

00:37:44.750 --> 00:37:48.930
but that's something we're looking to add
and that we'll be doing out in the open.

00:37:48.930 --> 00:37:51.300
Table text, text, text, text.

00:37:51.990 --> 00:37:52.800
There it is.

00:37:52.800 --> 00:37:53.560
Okay, they all passed.

00:37:53.570 --> 00:37:54.450
You got it right this time.

00:37:54.560 --> 00:37:57.040
Okay, so I got another question
about this patch.

00:37:57.090 --> 00:38:00.150
I noticed when you were looking in
that object.impl file that it had

00:38:00.410 --> 00:38:01.800
three things implemented in it.

00:38:01.800 --> 00:38:04.440
It had object, embed and applet.

00:38:04.600 --> 00:38:09.090
And embed already had support for those
attributes and you added them to object,

00:38:09.100 --> 00:38:12.530
but doesn't applet need to
support those attributes too?

00:38:12.530 --> 00:38:12.530
Only if you use

00:38:15.140 --> 00:38:16.020
Yeah, I guess it does.

00:38:16.230 --> 00:38:17.070
You're right.

00:38:17.100 --> 00:38:19.100
Why don't you fix that too?

00:38:19.100 --> 00:38:21.090
What gives, dude?

00:38:24.700 --> 00:38:26.920
Okay.

00:38:26.920 --> 00:38:35.940
So, interestingly enough, if you go to,
go back to Bugzilla.

00:38:35.940 --> 00:38:39.090
Yeah, I think there's actually
a related bug on this.

00:38:42.160 --> 00:38:47.520
to 46, the one that was filed about
five minutes before 3247,

00:38:47.520 --> 00:38:51.680
look, H space and V space attributes
are ignored on the applet element.

00:38:51.680 --> 00:38:55.920
So someone had already noticed -- who
could that have been who noticed this?

00:38:56.040 --> 00:38:57.100
Oh look, me.

00:38:57.100 --> 00:39:00.780
That these attributes were
not properly supported.

00:39:00.780 --> 00:39:07.140
So we can go make the same fix.

00:39:07.140 --> 00:39:12.000
So we'll go bring these along.

00:39:12.000 --> 00:39:14.930
And we'll head up to applet

00:39:21.360 --> 00:39:22.800
So we can see,
this is kind of interesting,

00:39:22.800 --> 00:39:28.210
so it did support Align,
but it was missing some of the others.

00:39:29.130 --> 00:39:30.560
So we'll just get it all there now.

00:39:30.560 --> 00:39:36.760
So now we've got v space, h space,
v align, and align all added.

00:39:36.770 --> 00:39:39.900
And now we want to look at Applet's
code that actually parses them.

00:39:39.900 --> 00:39:43.680
And we see again, it had a line,
but it was missing the

00:39:43.680 --> 00:39:44.720
other ones that we needed.

00:39:44.720 --> 00:39:51.860
So we'll just-- now we know we've got
it in both the embed and the object,

00:39:51.860 --> 00:39:54.180
so we'll just go grab it again.

00:39:59.560 --> 00:40:01.500
Including the break this time.

00:40:01.500 --> 00:40:06.380
Now let me just say,
if I was reviewing this, I would go,

00:40:06.440 --> 00:40:08.900
"Hey,
shouldn't we have a common base class,

00:40:08.900 --> 00:40:09.480
guys?"

00:40:17.300 --> 00:40:20.300
And aside from needing to fix
our tabs up in our editor,

00:40:20.300 --> 00:40:23.920
this is in pretty good shape.

00:40:23.920 --> 00:40:24.920
And there we go.

00:40:24.920 --> 00:40:28.360
So we'll try building it again.

00:40:44.600 --> 00:40:46.140
And there you go.

00:40:46.210 --> 00:40:48.600
So now we can run the Web Kit test again.

00:40:48.600 --> 00:40:53.800
Which should succeed?

00:40:53.800 --> 00:40:55.220
We hope.

00:40:57.780 --> 00:40:59.020
Yeah,
if you guys are actually going to commit,

00:40:59.020 --> 00:40:59.870
we sure better run them.

00:40:59.940 --> 00:41:04.250
Yeah, unfortunately we can't commit
from this machine because

00:41:04.260 --> 00:41:05.240
it's an anonymous checkout.

00:41:05.240 --> 00:41:05.760
Oh, man.

00:41:05.840 --> 00:41:08.380
I'd like to show you that part so we
could be committing live on stage,

00:41:08.500 --> 00:41:10.780
but we'll have to mail ourselves
the patch or something.

00:41:15.960 --> 00:41:21.060
And also,
we should add new test cases for these.

00:41:22.400 --> 00:41:25.000
It's actually difficult to
add a test case for an applet.

00:41:25.000 --> 00:41:26.400
Oh.

00:41:26.470 --> 00:41:28.670
Silly Java.

00:41:30.290 --> 00:41:31.960
Can't you just--no, I guess not.

00:41:31.980 --> 00:41:35.760
Make one that fails to load or something?

00:41:40.100 --> 00:41:41.000
Alright, there it is.

00:41:41.100 --> 00:41:42.100
It passed.

00:41:42.100 --> 00:41:45.590
So there's a bug fixed.

00:41:45.600 --> 00:41:47.560
As you can see, all this is really quick.

00:41:47.630 --> 00:41:49.600
It doesn't take forever
to build the engine.

00:41:49.600 --> 00:41:54.100
I mean, an HTML rendering engine is a
pretty complicated piece of code,

00:41:54.100 --> 00:41:58.000
but because we started with the small,
simple KHTML engine and the

00:41:58.000 --> 00:42:00.900
KJS JavaScript interpreter,
we've got a really small code

00:42:01.020 --> 00:42:04.060
base that has a very high degree
of performance and correctness

00:42:04.210 --> 00:42:07.060
and support for web standards,
and you can just pitch in,

00:42:07.160 --> 00:42:09.100
look at the code and contribute.

00:42:09.100 --> 00:42:11.720
Like Darin said,
we had people in less than 24

00:42:11.720 --> 00:42:14.590
hours getting into the code and
sending us patches to fix bugs,

00:42:14.600 --> 00:42:19.590
and submitting bug reports
for problems that they found

00:42:19.630 --> 00:42:21.100
testing with the latest Web Kit.

00:42:21.100 --> 00:42:24.100
So you should too.

00:42:25.300 --> 00:42:26.090
Alright, thanks guys.

00:42:29.090 --> 00:42:32.600
All right,
so let's go back to the slides here.

00:42:32.800 --> 00:42:35.240
So that's the real thing.

00:42:35.240 --> 00:42:38.780
I mean, really all we left out was
checking code into the repository.

00:42:38.780 --> 00:42:40.880
And we just forgot to
bring our private keys.

00:42:40.880 --> 00:42:44.870
That's the only reason we
didn't do that on stage.

00:42:45.050 --> 00:42:46.990
Yeah, no way.

00:42:47.080 --> 00:42:50.850
So they'll definitely, in fact,
if you log on in the next couple days,

00:42:50.900 --> 00:42:52.060
I'm sure you'll see this fix landed.

00:42:55.360 --> 00:42:59.840
So I just want to wrap up
with a couple comments.

00:43:00.210 --> 00:43:04.050
One is that we'd like to do some
things that are beyond Mac OS X.

00:43:04.070 --> 00:43:06.630
Now, we're all paid to work on Mac OS X.

00:43:06.690 --> 00:43:09.540
So you might wonder,
why are we even talking about this?

00:43:09.590 --> 00:43:12.640
Well, when it comes to something
like a web engine,

00:43:12.650 --> 00:43:15.080
it's more valuable the more it's shared.

00:43:15.080 --> 00:43:19.870
And already some people have taken
advantage of WebCore and done some

00:43:19.950 --> 00:43:22.820
things-- of our existing stuff,
WebCore-- and done some things

00:43:22.860 --> 00:43:23.720
that go beyond Mac OS X.

00:43:23.760 --> 00:43:28.320
So I wanted to talk about some of
the things we might hope for in

00:43:28.320 --> 00:43:34.080
the future and some possibilities
that go beyond Mac OS X.

00:43:35.100 --> 00:44:02.400
[Transcript missing]

00:44:03.210 --> 00:44:07.240
We're going to talk about some of
the things we might hope for in

00:44:07.240 --> 00:44:13.040
the future and some possibilities
that go beyond Mac OS X.

00:44:33.110 --> 00:44:43.040
We're going to talk about some of
the things we might hope for in

00:44:43.310 --> 00:44:52.830
the future and some possibilities
that go beyond Mac OS X.

00:44:53.200 --> 00:44:56.100
And I also think there's a chance
for some new kinds of projects,

00:44:56.100 --> 00:44:59.100
again, that are outside the scope of
just what you need for OS X.

00:44:59.100 --> 00:45:03.100
And I just started thinking of ones that
I thought would be really interesting.

00:45:03.100 --> 00:45:07.870
And one is something that runs on
Windows would be huge for testing.

00:45:08.280 --> 00:45:10.100
Because there are all
kinds of people out there,

00:45:10.100 --> 00:45:12.100
we'll tell them about a problem
with a website and they'll say,

00:45:12.130 --> 00:45:14.090
"Well, all I have is a Windows machine.

00:45:14.090 --> 00:45:17.750
How can I test with your browser?" And if
there's a way to test with the engine,

00:45:17.750 --> 00:45:19.100
that goes most of the way there.

00:45:19.150 --> 00:45:21.100
So I think that would be really great.

00:45:21.100 --> 00:45:24.100
And also, we have this layer in there,
Quack,

00:45:24.100 --> 00:45:28.250
that we think has a lot of potential,
not just as a way to adapt to OS X,

00:45:28.250 --> 00:45:31.100
but sort of as a porting layer
to make it possible to easily

00:45:31.100 --> 00:45:33.100
put KHTML on different platforms.

00:45:33.100 --> 00:45:38.040
And we'd like to refine
Quack as a porting layer.

00:45:38.630 --> 00:45:40.310
And...

00:45:40.730 --> 00:45:44.090
Everything listed on this slide and a
whole lot of other things are mentioned

00:45:44.090 --> 00:45:46.400
on our website on the project pages.

00:45:46.510 --> 00:45:49.210
So there are pages for all
different aspects of the

00:45:49.230 --> 00:45:52.960
Web Kit with our ideas and thoughts,
and they're a really handy place to look

00:45:53.080 --> 00:45:56.500
if you're interested in getting involved
or want to see what our plans are.

00:45:56.660 --> 00:45:59.350
A lot of those,
nothing in those pages is going to tell

00:45:59.350 --> 00:46:03.310
you when we're going to do something,
but what all those pages are going

00:46:03.310 --> 00:46:06.900
to tell you is what we're interested
in and our idea of the roadmap.

00:46:07.410 --> 00:46:12.500
So I'd like to include the presentation
part of this with an invitation to you

00:46:12.530 --> 00:46:16.360
and not just the people in this room,
but anyone who would

00:46:16.460 --> 00:46:18.260
like to get involved.

00:46:18.320 --> 00:46:19.500
This is a lot of fun.

00:46:19.500 --> 00:46:22.710
It has already been super
fun just this last day and a

00:46:22.710 --> 00:46:24.160
half just talking to people.

00:46:24.210 --> 00:46:27.370
That IRC channel is a really cool place.

00:46:27.710 --> 00:46:29.060
And so you're invited.

00:46:29.220 --> 00:46:32.490
If you want to come show up just
to take a peek and look around,

00:46:32.670 --> 00:46:33.560
that's great.

00:46:33.670 --> 00:46:37.140
If you want to come to participate,
that's great too.

00:46:37.220 --> 00:46:39.600
Please bring your own bug reports.

00:46:39.610 --> 00:46:41.100
That's what we need from you.

00:46:41.130 --> 00:46:44.180
And just let us know
if you're interested.

00:46:44.270 --> 00:46:49.970
We'll be there on the IRC channel and
we'll be there on the mailing list.

00:46:50.230 --> 00:46:53.480
So with that,
let's take some of your questions.

00:46:53.490 --> 00:46:54.260
Oh, I'm sorry.

00:46:54.370 --> 00:46:57.680
I want to mention one other thing,
which is this is the website,

00:46:57.700 --> 00:46:58.880
the Web Kit Open Source Project.

00:46:58.880 --> 00:46:59.700
You saw it on stage.

00:46:59.700 --> 00:47:00.380
That's the URL.

00:47:00.380 --> 00:47:02.120
That's the only thing
you have to remember.

00:47:02.200 --> 00:47:05.790
You don't need any of the other
URLs or email addresses or anything.

00:47:06.270 --> 00:47:10.310
If you have questions about Web Kit from
the point of view of using the

00:47:10.310 --> 00:47:13.090
Web Kit and want to see some of
the sample code and all that stuff,

00:47:13.140 --> 00:47:16.440
the Developers Conference website
has all sorts of that,

00:47:16.460 --> 00:47:18.480
has that for you.

00:47:19.240 --> 00:47:21.960
And if you're interested in learning
more about the Web Kit from the point

00:47:21.960 --> 00:47:24.000
of view of someone using the Web Kit,
there's some great

00:47:24.000 --> 00:47:25.050
sessions that are relevant.

00:47:25.060 --> 00:47:28.860
Tomorrow, we've got an introduction to
Web Kit development in the morning.

00:47:28.860 --> 00:47:30.410
Later in the morning,
we've got some advanced

00:47:30.430 --> 00:47:31.680
Web Kit development information.

00:47:31.720 --> 00:47:34.290
In the afternoon,
we have some information from

00:47:34.450 --> 00:47:37.050
the point of view of a web
designer about Safari and

00:47:37.050 --> 00:47:38.740
effectively about Web Kit as well.

00:47:38.740 --> 00:47:40.540
And there's a dashboard widget session.

00:47:40.540 --> 00:47:44.460
I think that's a lab that you
might want to check out too.

00:47:44.460 --> 00:47:48.790
And so all of these are really handy
for learning more about the Web Kit.

00:47:49.100 --> 00:47:53.240
And if you have other kinds of questions,
miscellaneous stuff,

00:47:53.300 --> 00:47:55.960
stuff you don't find out from our
open source website or mailing list,

00:47:56.440 --> 00:48:00.070
please contact Mark Malone,
who is the Safari and

00:48:00.140 --> 00:48:01.540
Web Kit point of contact.