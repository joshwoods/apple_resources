WEBVTT

00:00:00.130 --> 00:00:02.000
Active Directory Integration, right?

00:00:02.030 --> 00:00:05.020
Right.

00:00:05.260 --> 00:00:06.000
Alright.

00:00:06.140 --> 00:00:09.440
I'm Joel Rennich,
Consulting Engineer with the

00:00:09.440 --> 00:00:11.160
Apple Enterprise Consulting Services.

00:00:11.260 --> 00:00:13.990
We're doing a lot of
Active Directory integration.

00:00:14.000 --> 00:00:15.360
We can come on site,
do a lot of that stuff.

00:00:15.620 --> 00:00:17.040
Last year or two, this is huge.

00:00:17.100 --> 00:00:18.420
We're doing a lot of this.

00:00:18.420 --> 00:00:21.830
We're doing a lot of great stuff
integrating Active Directory.

00:00:21.830 --> 00:00:24.210
OS X is really,
really coming of age and being a

00:00:24.210 --> 00:00:26.560
very good corporate network citizen.

00:00:26.560 --> 00:00:29.980
That's why we're here to talk about that,
to show you how we can make that better.

00:00:30.000 --> 00:00:31.100
Thank you.

00:00:31.550 --> 00:00:33.170
A couple of things we want to talk about.

00:00:33.290 --> 00:00:34.170
What's new in Tiger?

00:00:34.360 --> 00:00:34.580
Right?

00:00:34.690 --> 00:00:36.100
You want to hear what's
new in Tiger client.

00:00:36.100 --> 00:00:38.200
We want to hear what's
new in Tiger server.

00:00:38.310 --> 00:00:42.320
We've got a couple of really rough
kind of hand puppet ideas of different

00:00:42.410 --> 00:00:44.330
ways to kind of orchestrate this.

00:00:44.360 --> 00:00:47.000
An hour is not nearly enough
to go over all the stuff,

00:00:47.080 --> 00:00:49.490
the different ways that
you can deploy this.

00:00:49.490 --> 00:00:52.770
And even I want to do some of the fun
stuff that I've been doing lately,

00:00:52.770 --> 00:00:56.070
which is actually Kerberos Cross Realm,
slaving Active Directory to

00:00:56.160 --> 00:00:58.720
Open Directory and kind of
show you some decent ideas of

00:00:58.720 --> 00:01:00.360
where that can be involved.

00:01:00.400 --> 00:01:02.780
Hopefully by the time
you're done with this,

00:01:02.890 --> 00:01:04.060
you'll learn a couple of good things.

00:01:04.170 --> 00:01:05.200
That's why you're here.

00:01:05.510 --> 00:01:08.480
Definitely how to integrate
Tiger into Active Directory.

00:01:08.650 --> 00:01:10.030
We got some killer demos.

00:01:10.100 --> 00:01:12.270
Eric Clement is here to
do some demos for them.

00:01:12.450 --> 00:01:15.240
And if they don't work,
we'll make them work.

00:01:15.240 --> 00:01:16.700
Eric's the guy for that.

00:01:16.880 --> 00:01:20.580
So we also want to help you out
with a lot of troubleshooting.

00:01:20.700 --> 00:01:23.960
We definitely want to get you
to understand more of what

00:01:24.130 --> 00:01:27.300
the Active Directory plugin
does and how it works.

00:01:27.300 --> 00:01:27.300
If you go onto the web and
you read some of the sites,

00:01:27.650 --> 00:01:29.760
You go out there,
you get the feeling sometimes

00:01:29.760 --> 00:01:32.940
from hearing back from people
that the AD plug-in is voodoo,

00:01:32.990 --> 00:01:34.420
and it's not.

00:01:34.610 --> 00:01:38.090
The AD plug-in works in a very specific,
predictable manner.

00:01:38.160 --> 00:01:40.760
We're going to show you that as we
go through how it joins the different

00:01:40.770 --> 00:01:42.500
kinds of connections that it makes.

00:01:42.500 --> 00:01:45.000
This is going to help you troubleshoot.

00:01:45.000 --> 00:01:45.820
All right?

00:01:45.820 --> 00:01:49.960
How many people have the same style,
setup, configuration of an

00:01:49.960 --> 00:01:51.880
Active Directory domain?

00:01:52.440 --> 00:01:54.060
There is no such thing, all right?

00:01:54.090 --> 00:01:56.060
Every Active Directory domain
is different.

00:01:56.110 --> 00:01:59.600
We've got to make sure that we
interact the right way with that.

00:01:59.630 --> 00:02:03.280
So understanding how the plug-in works
is really going to help you with that.

00:02:03.310 --> 00:02:05.420
Also, as we talk about some of
the deployment scenarios,

00:02:05.510 --> 00:02:08.220
how to get Active Directory and
Open Directory really working well,

00:02:08.260 --> 00:02:10.620
getting the management that
you want out of Open Directory,

00:02:10.670 --> 00:02:13.780
getting the management that you want
out of Active Directory potentially.

00:02:13.820 --> 00:02:16.060
And also, then I talked about the
Kerberos cross room at the end.

00:02:16.060 --> 00:02:18.730
So some cool stuff in there.

00:02:18.990 --> 00:02:21.360
Alright, what's new in Tiger Client?

00:02:21.420 --> 00:02:26.270
AD plugin came out in 10.3,
did some good stuff.

00:02:26.270 --> 00:02:28.890
In 10.4 we do a lot of good stuff.

00:02:28.890 --> 00:02:30.470
Some of the stuff that we got for you.

00:02:30.470 --> 00:02:32.680
Who likes group membership, right?

00:02:33.680 --> 00:02:36.580
We now can support nested AD groups.

00:02:36.580 --> 00:02:40.350
We do group membership through MemberD,
makes us have a lot more flexibility

00:02:40.360 --> 00:02:41.770
with a lot more different things.

00:02:41.770 --> 00:02:58.190
We can now chase down all those
users in Active Directory.

00:02:58.190 --> 00:02:58.190
We're not limited to 16 groups anymore,
so we can get all those OD and

00:02:58.190 --> 00:02:58.190
the AD groups all together,
put them into that user.

00:02:58.190 --> 00:02:58.190
So MemberD is huge.

00:02:58.190 --> 00:02:58.190
Really, really helps a lot with
Active Directory integration in 10.4.

00:02:58.850 --> 00:03:01.200
Directory Access got a
little bit of a new look.

00:03:01.240 --> 00:03:05.050
All right, a lot more options are
within Directory Access.

00:03:05.190 --> 00:03:07.900
Most of the DSConfig AD options
that you were used to doing

00:03:07.900 --> 00:03:11.130
by hand from the command line,
you now have check boxes in

00:03:11.250 --> 00:03:14.480
the Directory Access interface,
so you don't have to get your hands dirty

00:03:14.480 --> 00:03:16.280
on the command line if you don't want to.

00:03:16.330 --> 00:03:17.980
We automatically add the AD domain.

00:03:17.980 --> 00:03:19.660
We do a little more discovery for you.

00:03:19.660 --> 00:03:22.620
We try to make it easier
to settle that up.

00:03:22.620 --> 00:03:25.060
You can map the primary
user and group in there,

00:03:25.060 --> 00:03:26.360
map the GID.

00:03:26.410 --> 00:03:28.910
And we also check for
dead domain controllers.

00:03:29.120 --> 00:03:33.040
So we read in what Active Directory tells
us the network really looks like,

00:03:33.050 --> 00:03:35.260
but we don't always trust it.

00:03:35.340 --> 00:03:37.940
So we definitely look and make sure that
the information that we're getting out

00:03:37.940 --> 00:03:39.940
of Active Directory is actually correct.

00:03:39.960 --> 00:03:42.530
The domain controllers live
at those addresses before we

00:03:42.530 --> 00:03:44.450
try to bind you into those.

00:03:45.300 --> 00:03:49.800
DSConfigAD, still have that ability to
do it from the command line.

00:03:49.820 --> 00:03:52.720
We've got static mapping support
so you can map over values

00:03:52.850 --> 00:03:55.060
to specific static values.

00:03:55.060 --> 00:03:57.200
Learn more about that maybe
in the heterogeneous network

00:03:57.200 --> 00:03:58.330
session later on in the week.

00:03:58.330 --> 00:04:00.010
We talk about that with the LDAP plugin.

00:04:00.740 --> 00:04:03.220
A local admin user now can set this up.

00:04:03.300 --> 00:04:06.090
You can pass that credentials
in the command line.

00:04:06.090 --> 00:04:07.740
So you don't always
have to do this as root.

00:04:07.740 --> 00:04:11.630
Even better is you can actually
go into Etsy authorization and

00:04:11.630 --> 00:04:13.340
there's a key for DS configuration.

00:04:13.340 --> 00:04:16.670
You can set that up to a different group
and then you don't even have to have

00:04:16.750 --> 00:04:20.560
an admin user to join and you can do
all the directory service configuration.

00:04:20.560 --> 00:04:23.080
Very other cool new
stuff within OS X for.

00:04:23.080 --> 00:04:25.030
Should be much better in scripts.

00:04:25.180 --> 00:04:28.860
Here's an example of a one-liner
on joining Active Directory.

00:04:28.860 --> 00:04:30.710
We're going to show you that
in a demo in a little bit.

00:04:30.740 --> 00:04:31.740
bit, right?

00:04:31.890 --> 00:04:35.430
Nice, easy, quick, and fun to do, right?

00:04:35.920 --> 00:04:38.360
Authentication support.

00:04:38.530 --> 00:04:43.100
NTLMv2, right?

00:04:43.100 --> 00:04:43.600
Hey, NTLMv2.

00:04:43.730 --> 00:04:47.240
Alright, so now we can comply with your
security policies on your networks.

00:04:47.250 --> 00:04:50.830
If you're forced into using NTLMv2,
not forced is a bad word,

00:04:50.890 --> 00:04:54.100
but if you have to use NTLMv2,
we can now support it.

00:04:54.190 --> 00:04:57.360
We're better off doing Kerberos,
but we support NTLMv2 for those.

00:04:57.750 --> 00:04:59.900
Kerberos support for single
sign-on of the home folder

00:04:59.900 --> 00:05:01.200
and other things like that.

00:05:01.320 --> 00:05:03.400
Alright, so very good things.

00:05:03.580 --> 00:05:05.800
Portable home directories.

00:05:05.940 --> 00:05:07.640
Another session later on
in the week about that.

00:05:07.700 --> 00:05:09.700
You can find out more
information about this.

00:05:09.830 --> 00:05:12.690
But I want to let you know that
portable home directories work

00:05:12.790 --> 00:05:14.400
with Active Directory users.

00:05:14.510 --> 00:05:16.900
Alright, works pretty much like
you think it should.

00:05:17.180 --> 00:05:18.990
Does pretty much what
you think it should.

00:05:19.130 --> 00:05:22.300
This is killer for mobile
accounts on laptops.

00:05:22.410 --> 00:05:25.460
Alright, we now have the ability
to do all of that.

00:05:26.640 --> 00:05:29.240
Who's got a .local domain?

00:05:29.250 --> 00:05:30.300
All right.

00:05:30.340 --> 00:05:31.660
This used to be a real pain.

00:05:31.700 --> 00:05:33.890
Had to go down,
do some command line configuration,

00:05:33.890 --> 00:05:35.840
put some resolver files in there.

00:05:35.870 --> 00:05:38.960
We now make it really easy if
you're in a .local environment.

00:05:38.960 --> 00:05:41.280
And I tried to make it hard on Eric,
so we're actually in a .local

00:05:41.280 --> 00:05:43.500
environment here for the
demos that we're going to do.

00:05:43.500 --> 00:05:44.090
All right.

00:05:44.110 --> 00:05:46.440
All you've got to do is put
it in your search domain,

00:05:46.510 --> 00:05:48.040
in your network preferences.

00:05:48.150 --> 00:05:51.310
We automatically send all the
.local resolutions to the DNS server

00:05:51.310 --> 00:05:54.460
first before we try to do it out
over the network over Bonjour.

00:05:54.460 --> 00:05:55.400
All right.

00:05:55.450 --> 00:05:56.580
So that makes it much, much easier.

00:05:56.600 --> 00:06:00.460
For integrating, because let's face it,
when you go to the AD domain

00:06:00.460 --> 00:06:03.540
controller and you say,
hey, buddy, I don't like the .locals.

00:06:03.630 --> 00:06:05.420
Can you change it to something else?

00:06:05.420 --> 00:06:06.900
That's not making any friends.

00:06:06.900 --> 00:06:08.610
So we need to be able to work with that.

00:06:08.610 --> 00:06:09.290
And now we do.

00:06:09.290 --> 00:06:11.310
Right in the GUI,
you don't have to do anything

00:06:11.310 --> 00:06:12.600
from the command line.

00:06:14.630 --> 00:06:16.160
Couple of things that we don't do.

00:06:16.190 --> 00:06:20.490
We don't sign SMB connections
and we don't do DFS.

00:06:20.600 --> 00:06:21.960
Thursby Admin Mac can do that.

00:06:22.130 --> 00:06:26.400
You can take a look at their product
for that stuff that you need.

00:06:27.720 --> 00:06:28.080
Thank you.

00:06:28.090 --> 00:06:31.720
Connecting to Active Directory.

00:06:31.900 --> 00:06:34.830
So we want to go through the
Active Directory Plugin Procedure.

00:06:35.070 --> 00:06:39.130
This is where we want to instill upon
you that these things aren't voodoo.

00:06:39.350 --> 00:06:39.750
All right?

00:06:39.750 --> 00:06:41.800
So this is the anti-voodoo
bit of the presentation.

00:06:41.860 --> 00:06:44.770
We'll show you the different steps
that we go through when we're actually

00:06:44.770 --> 00:06:46.160
joining into Active Directory.

00:06:46.200 --> 00:06:49.180
I wanted to get out and do
a packet trace of all this,

00:06:49.180 --> 00:06:51.850
but they thought that
might turn some people off.

00:06:51.920 --> 00:06:55.840
So instead, we got a slide here that kind
of lists you through the steps.

00:06:55.990 --> 00:06:56.390
All right?

00:06:56.390 --> 00:06:58.270
So when we're binding
to Active Directory,

00:06:58.270 --> 00:07:00.500
when you go to that
Directory Access Utility and

00:07:00.820 --> 00:07:03.060
you click that bind button,
all right,

00:07:03.060 --> 00:07:04.900
we have to do a couple of things.

00:07:05.300 --> 00:07:08.000
First thing we do is we
request some SRV records,

00:07:08.040 --> 00:07:10.110
so some service records out of DNS.

00:07:10.230 --> 00:07:15.220
We're looking for LDAP, Kpassword,
Kerberos SRV records.

00:07:15.220 --> 00:07:18.280
What happens if we don't
find those SRV records?

00:07:19.090 --> 00:07:21.190
We don't know where to go
to bind an Active Directory.

00:07:21.200 --> 00:07:24.740
What DNS has those
Active Directory records?

00:07:24.880 --> 00:07:28.790
The Active Directory DNS.

00:07:29.360 --> 00:07:33.190
Ergo, if I'm not using the
Active Directory DNS,

00:07:33.250 --> 00:07:35.730
I can't find those DNS records,
I'm not going to be able to join.

00:07:35.740 --> 00:07:40.380
So that, in my experience,
has usually accounted for half plus

00:07:40.380 --> 00:07:43.300
all of the problems that people have
with the Active Directory plugin.

00:07:43.300 --> 00:07:45.720
So you have to use the
Active Directory DNS.

00:07:45.720 --> 00:07:48.370
And again,
understanding how the plugin binds,

00:07:48.370 --> 00:07:51.410
understanding the pieces that go on here,
are going to help you troubleshoot,

00:07:51.410 --> 00:07:53.480
are going to help you set up
your installations and the

00:07:53.480 --> 00:07:55.860
things that you want to do with
the Active Directory plugin.

00:07:56.730 --> 00:08:00.660
So after we request those records,
we connect over LDAP and we get basic

00:08:00.660 --> 00:08:03.480
generic Active Directory information
out of the AD controller.

00:08:03.480 --> 00:08:06.710
The system that we get back
from those SRV records.

00:08:06.780 --> 00:08:10.420
Once we have that,
the AD plugin goes in and configures

00:08:10.550 --> 00:08:13.180
the Edge UMIT Kerberos config file.

00:08:13.220 --> 00:08:15.970
Now we can set up a Kerberos environment.

00:08:15.980 --> 00:08:20.210
We can actually do an authenticated
LDAP lookup and we can get more

00:08:20.210 --> 00:08:23.270
information out of the LDAP servers that
are running on Active Directory there.

00:08:23.980 --> 00:08:27.800
So once we've generated that config file,
we go down to number four,

00:08:27.990 --> 00:08:30.400
we authenticate,
and we actually go through and we

00:08:30.400 --> 00:08:32.470
request the nearest domain controller.

00:08:32.480 --> 00:08:34.320
We receive that back.

00:08:34.510 --> 00:08:38.040
Step six,
we recreate an EDU MIT Kerberos file

00:08:38.470 --> 00:08:40.170
specifically for that domain controller.

00:08:40.220 --> 00:08:43.600
So we can re-authenticate,
go back to that one,

00:08:43.780 --> 00:08:45.590
and then we go through,
we search the domain

00:08:45.590 --> 00:08:46.570
for a computer record.

00:08:46.660 --> 00:08:48.660
If we find a computer record, we use it.

00:08:48.660 --> 00:08:51.280
If we don't find it, well,
we ask you if you want to use it.

00:08:51.360 --> 00:08:54.290
If we don't find the computer record,
we'll make one for you

00:08:54.450 --> 00:08:56.030
wherever you told us to put it.

00:08:56.120 --> 00:08:57.110
All right?

00:08:57.130 --> 00:08:59.150
So that's the last step,
generating a new computer

00:08:59.150 --> 00:09:00.120
record if necessary.

00:09:00.300 --> 00:09:03.260
So, still somewhat high level,
and we'll hopefully show you some

00:09:03.360 --> 00:09:05.620
of the debugging about how you
can even get deeper in on this.

00:09:05.620 --> 00:09:08.600
But this is where the steps
that we take as we go through.

00:09:08.670 --> 00:09:10.530
Keep this in mind when
you're running into

00:09:10.530 --> 00:09:12.620
Active Directory integration problems.

00:09:12.760 --> 00:09:13.560
These are the steps.

00:09:13.680 --> 00:09:15.090
See where this is breaking.

00:09:15.220 --> 00:09:17.200
Troubleshoot from there.

00:09:17.480 --> 00:09:20.200
Files that are involved in all of this.

00:09:20.200 --> 00:09:23.570
We've got three of them in
Library Preferences Directory Service.

00:09:23.700 --> 00:09:26.280
The first one is the
Active Directory plist.

00:09:26.280 --> 00:09:29.380
This actually lays out all of our
Active Directory integration bits,

00:09:29.450 --> 00:09:32.280
anything that we put into
the GUI and directory access.

00:09:32.390 --> 00:09:33.660
All of those pieces are in there.

00:09:33.690 --> 00:09:37.540
The next one, same place,
but that's our search node config.

00:09:37.540 --> 00:09:39.620
That's our authentication path.

00:09:39.620 --> 00:09:42.950
That's that we're going to
Active Directory for authentication,

00:09:42.950 --> 00:09:43.920
for passwords.

00:09:43.920 --> 00:09:48.360
Next one, the third one on there,
in our contacts node config,

00:09:48.360 --> 00:09:50.990
that's that contacts tab
and directory access.

00:09:51.200 --> 00:09:54.120
Finally, the fourth file that you
want to take a look at with

00:09:54.120 --> 00:09:58.990
Active Directory integration,
Library Preferences EDU MIT Kerberos.

00:09:58.990 --> 00:10:00.810
That's your Kerberos config file.

00:10:00.810 --> 00:10:03.700
If that's busted,
you're not authenticating.

00:10:03.720 --> 00:10:05.800
So you need to make sure that's correct.

00:10:06.010 --> 00:10:06.780
Take a look at it.

00:10:06.780 --> 00:10:08.840
We automatically generate it for you.

00:10:08.840 --> 00:10:12.030
It's best if you let us generate it,
because then we can respond

00:10:12.030 --> 00:10:13.680
to changes in your network.

00:10:13.920 --> 00:10:17.260
But you can take a look at that and
look for any things that jump out at

00:10:17.310 --> 00:10:19.200
you as far as troubleshooting goes.

00:10:20.990 --> 00:10:22.400
All right.

00:10:22.480 --> 00:10:25.250
Now you know all the steps,
everything you need to know.

00:10:25.290 --> 00:10:28.540
We still got a half hour, well,
actually almost an hour left for this.

00:10:28.680 --> 00:10:30.900
So now we want to bring
Eric Clement on stage.

00:10:31.010 --> 00:10:34.440
Eric Clement is the engineer
at Apple that wrote the

00:10:34.510 --> 00:10:36.510
Active Directory plugin.

00:10:40.400 --> 00:10:43.980
If Eric can't get it to work, no one can.

00:10:43.980 --> 00:10:44.480
All right?

00:10:44.480 --> 00:10:44.980
Thanks, Joel.

00:10:44.980 --> 00:10:46.970
So now we want to do a demo.

00:10:55.850 --> 00:10:56.300
Thank you.

00:10:56.300 --> 00:11:01.110
So who's bound to
Active Directory so far?

00:11:01.190 --> 00:11:01.690
That's good.

00:11:01.900 --> 00:11:03.200
I see a lot of no hands, though.

00:11:03.200 --> 00:11:04.680
That's kind of concerning.

00:11:04.800 --> 00:11:07.630
So if you've never done this before,
we have an app that we call

00:11:07.680 --> 00:11:11.330
Directory Access located
in the Utilities folder.

00:11:11.460 --> 00:11:14.580
You'll launch Directory Access and
you'll notice that there's

00:11:14.630 --> 00:11:16.340
an Active Directory plugin.

00:11:16.340 --> 00:11:16.340
Well, let me authenticate here.

00:11:17.600 --> 00:11:18.490
and some other people have.

00:11:18.490 --> 00:11:28.850
But let's go through
some of these options.

00:11:28.850 --> 00:11:31.430
So as Joel mentioned,
we added a lot of the options

00:11:31.430 --> 00:11:34.120
to the GUI that we didn't
have before in Panther.

00:11:34.120 --> 00:11:37.680
So you had DSConfigAD,
kind of ran some little options.

00:11:37.680 --> 00:11:40.190
We want to make sure you had all
access to that and some new ones

00:11:40.190 --> 00:11:41.980
that we didn't have in Panther.

00:11:41.980 --> 00:11:44.650
So we did some renames, you'll notice.

00:11:44.650 --> 00:11:48.620
This one we'll talk a little bit about.

00:11:48.620 --> 00:11:51.340
So first of all,
by default the Active Directory plugin

00:11:51.340 --> 00:11:53.380
forces everything to your local drive.

00:11:53.380 --> 00:11:55.110
This is this primary checkbox.

00:11:55.240 --> 00:11:57.720
Because most people, you know,
if you're in a Windows environment,

00:11:57.720 --> 00:12:00.230
you've always had a local drive
and a network drive that mounts

00:12:00.370 --> 00:12:03.980
on the desktop or somewhere on
a Windows drive and remap files,

00:12:03.980 --> 00:12:04.880
et cetera.

00:12:04.880 --> 00:12:07.000
So we do the same thing by default.

00:12:07.040 --> 00:12:10.530
Now if you actually want to force
it to a network drive so you have a

00:12:10.530 --> 00:12:13.350
true mobile network home directory,
you turn off that checkbox.

00:12:13.430 --> 00:12:18.510
You have a--you have a--what's considered
sort of like a roaming profile.

00:12:18.520 --> 00:12:20.680
You log in,
no matter what machine you log in,

00:12:20.680 --> 00:12:23.340
it's the same home directory,
same preferences, same everything.

00:12:23.480 --> 00:12:27.920
Before they used to be like a DSConfigAD,
local home, disable.

00:12:27.920 --> 00:12:29.430
Now it's all in the GUI.

00:12:29.770 --> 00:12:32.360
Also, we have the mobile account
caching that was there before,

00:12:32.360 --> 00:12:35.110
but we also gave you the option,
people used to kind of complain that,

00:12:35.110 --> 00:12:36.390
you know,
can I turn off that warning that

00:12:36.480 --> 00:12:38.880
comes up every time I log in,
a new user?

00:12:38.960 --> 00:12:40.960
So you can now turn that off.

00:12:41.540 --> 00:12:44.550
You can also change your protocol to AFP.

00:12:44.670 --> 00:12:50.240
Say you're running extremely ZIP or
maybe you want an OS X server actually

00:12:50.240 --> 00:12:52.540
hosting the user's home directory,
you can remap to that OS X server

00:12:52.540 --> 00:12:55.090
now and use AFP instead of SMB.

00:12:55.110 --> 00:12:59.060
Give you a little more reliability,
auto reconnects and things

00:12:59.060 --> 00:13:01.010
that our SMB can't support.

00:13:01.610 --> 00:13:03.590
We can also change your default shell.

00:13:03.670 --> 00:13:05.960
In Tiger, terminal requires a shell.

00:13:06.270 --> 00:13:09.560
So if you log in as an AD user,
launch terminal and you don't

00:13:09.680 --> 00:13:12.860
have a shell programmed,
terminal won't give you a shell.

00:13:12.860 --> 00:13:16.470
Kind of a security option but
you can also set that by default.

00:13:16.520 --> 00:13:19.570
Mappings, you can also use briefly,
you can map UIDs.

00:13:19.570 --> 00:13:23.760
For those of you that actually have Unix
environments where you've got a UID,

00:13:23.760 --> 00:13:27.300
a GID and a primary group ID,
you can now map those to actual values

00:13:27.300 --> 00:13:29.400
in AD assuming that you have them.

00:13:29.400 --> 00:13:31.200
Most people don't use that.

00:13:31.200 --> 00:13:34.220
They use the default
generated data that we return.

00:13:34.220 --> 00:13:37.310
So I won't worry about that too much but,
you know, those of you that need it,

00:13:37.490 --> 00:13:41.950
you can map to say I actually
use UID number and I actually

00:13:41.950 --> 00:13:44.790
use primary group ID.

00:13:44.790 --> 00:13:47.000
You can do that.

00:13:48.330 --> 00:13:50.680
Now, one thing you don't want to do,
which I've seen some people do,

00:13:50.680 --> 00:13:53.800
is do that.

00:13:54.210 --> 00:13:57.150
And then they wonder why there's
no unique IDs on the users.

00:13:57.350 --> 00:13:58.990
So just a little tip.

00:13:59.390 --> 00:14:02.520
You don't need these on by default
unless you actually use them.

00:14:02.560 --> 00:14:06.150
And we also have a third tab,
administrative.

00:14:06.500 --> 00:14:09.030
So we added the preferred
domain control was there before,

00:14:09.030 --> 00:14:11.350
but we made, you know,
before I had this common delimited list,

00:14:11.370 --> 00:14:13.180
you typed in names,
we figured we might as well add

00:14:13.180 --> 00:14:16.640
you a real list here and you can
do plus and minus and delete things

00:14:16.730 --> 00:14:19.160
and give you a little bit of UI.

00:14:19.160 --> 00:14:21.020
And also previously,
it's constantly asked,

00:14:21.020 --> 00:14:23.510
but this allows you to automatically
authenticate to any domain.

00:14:23.560 --> 00:14:26.970
So one of the things that we do a little
different is you can actually log into

00:14:26.970 --> 00:14:29.370
any domain without specifying a domain.

00:14:29.460 --> 00:14:32.320
But some people actually want to
limit it to a specific domain.

00:14:32.320 --> 00:14:35.150
So I have three domains in
my forest and I don't want

00:14:35.180 --> 00:14:36.950
users from domain A to log in.

00:14:36.950 --> 00:14:41.020
You can check--turn this off and
manually change those settings and log

00:14:41.020 --> 00:14:43.840
in as only that user or that domain.

00:14:43.840 --> 00:14:47.820
So we don't worry about all this,
let's go ahead and actually bind here.

00:14:47.820 --> 00:14:51.660
So Joel mentioned the fact that you
got this new change in Tiger that

00:14:51.660 --> 00:14:53.930
you can actually do .local.

00:14:53.940 --> 00:14:56.870
So what do you need to
do to make that work?

00:14:56.870 --> 00:14:58.040
That's it.

00:15:00.270 --> 00:15:01.960
If you want to be more specific,
you could actually say,

00:15:01.960 --> 00:15:05.960
like in this case,
I'm actually Apple.local.

00:15:05.960 --> 00:15:09.200
So I will actually send all your
Apple.local queries to the DNS server

00:15:09.200 --> 00:15:10.950
and no more .local problems.

00:15:10.950 --> 00:15:14.540
So to prove that, let's actually bind.

00:15:14.540 --> 00:15:18.500
Oops, if I can type it.

00:15:22.280 --> 00:15:25.500
One of the other things that we added,
which I'm sure many are very happy about,

00:15:25.500 --> 00:15:30.710
is we automatically add AD to the
authentication and contacts tab.

00:15:32.820 --> 00:15:34.710
Now this is true of the
LDAP plugin as well.

00:15:34.850 --> 00:15:36.970
So we try to do this across the board.

00:15:37.070 --> 00:15:39.250
So, you know, people that used to
configure the plugin like,

00:15:39.300 --> 00:15:44.020
"Well, I still can't log in." What did
you add to the authentication?

00:15:44.020 --> 00:15:45.420
Or was I supposed to?

00:15:45.420 --> 00:15:47.460
So we made it a little automatic for you.

00:15:47.510 --> 00:15:49.640
You'll see here some steps going through.

00:15:49.700 --> 00:15:53.300
There's the finding domain controllers,
all the various steps we talked about.

00:15:56.380 --> 00:15:58.740
and we're bound.

00:15:58.800 --> 00:15:59.280
Click OK.

00:15:59.280 --> 00:16:02.720
You'll notice under Authentication tab,
it's actually added the domains.

00:16:02.750 --> 00:16:04.060
Now one of the things
we did in Tiger as well,

00:16:04.060 --> 00:16:06.760
I want to just point this out,
because by default in Panther,

00:16:06.860 --> 00:16:09.840
we used to list the forest
as your primary domain there.

00:16:09.970 --> 00:16:12.500
We changed that in Tiger to be
a little more clear to the users

00:16:12.520 --> 00:16:14.550
because they can figure out,
OK, it just lists my forest.

00:16:14.650 --> 00:16:17.320
Does that mean my people in
my other domains can log in?

00:16:17.390 --> 00:16:19.640
So we'll make it all domains
because it's a little more clear

00:16:19.640 --> 00:16:21.110
to everybody what that means.

00:16:21.260 --> 00:16:25.480
So now to test this,
the perfect test is ID.

00:16:28.130 --> 00:16:29.240
Wow.

00:16:29.320 --> 00:16:31.160
Few groups, not too many.

00:16:31.220 --> 00:16:36.240
But you notice we got all the groups,
and that's an AD user.

00:16:36.350 --> 00:16:40.470
So now let's do the same
thing from the command line.

00:16:42.500 --> 00:16:48.090
Let's go back to Active Directory.

00:16:48.090 --> 00:16:48.090
Do our authentication here.

00:16:48.220 --> 00:16:53.440
I want to point out one more
thing too that I didn't mention.

00:17:02.140 --> 00:17:06.000
This is not-- some people have
probably run into this before.

00:17:06.060 --> 00:17:10.800
But before you had to know what your
domain-- fully qualified domain DNS was.

00:17:15.700 --> 00:17:16.940
Notice it didn't complain.

00:17:16.940 --> 00:17:24.080
So I typed in the right password.

00:17:24.080 --> 00:17:27.600
And if you watch,
it actually figured out it was .local.

00:17:36.920 --> 00:17:38.230
So let's do the same thing
for the command line.

00:17:38.470 --> 00:17:42.080
So we have this neat little tool
that's been around since Panther.

00:17:42.080 --> 00:17:45.280
A lot more options,
a lot more information.

00:17:45.280 --> 00:17:48.780
All the same things you see in
the GUI exist on the command line.

00:17:48.790 --> 00:17:51.040
We'll actually bind the computer.

00:17:52.490 --> 00:17:54.600
Now the other thing is here, you know,
just like in the GUI,

00:17:54.600 --> 00:17:56.840
we don't ask you for the computer name.

00:17:56.840 --> 00:17:58.310
We actually prepopulate it for you.

00:17:58.310 --> 00:17:59.970
The command line now does the same thing.

00:18:00.140 --> 00:18:05.340
So before you had to say, you know,
-a and this is computer A, B, C, D, E.

00:18:05.360 --> 00:18:09.620
Well,
I don't care what the computer name is.

00:18:09.620 --> 00:18:14.790
We'll just do -domain
apple user administrator.

00:18:14.790 --> 00:18:14.790
And then

00:18:28.500 --> 00:18:29.500
We're bound.

00:18:29.500 --> 00:18:35.730
Same thing I can actually remove.

00:18:36.260 --> 00:18:39.950
I can change settings so we
can say turn off all domains.

00:18:41.000 --> 00:18:42.730
Disable.

00:18:42.860 --> 00:18:45.740
Let's actually go into Directory Access.

00:18:45.770 --> 00:18:47.820
Look at that.

00:18:47.960 --> 00:18:48.610
Go to Administrative.

00:18:48.670 --> 00:18:49.660
It's disabled.

00:18:49.660 --> 00:18:51.770
I can turn it back on.

00:18:53.640 --> 00:18:54.570
Do the dash show.

00:18:54.770 --> 00:18:56.040
It's re-enabled.

00:18:56.210 --> 00:18:57.240
So all the same settings are there.

00:18:57.260 --> 00:18:58.600
You can do everything
from the command line.

00:18:58.610 --> 00:19:00.280
You did notice we had one request.

00:19:00.410 --> 00:19:02.770
We actually dump out all the
data if you do a dash show.

00:19:02.800 --> 00:19:04.600
Before we only showed certain things.

00:19:04.610 --> 00:19:07.020
Now we show everything.

00:19:07.020 --> 00:19:11.020
So that's a big change for us.

00:19:11.020 --> 00:19:12.500
And that's it.

00:19:19.420 --> 00:19:20.600
Thanks Eric.

00:19:20.640 --> 00:19:22.500
He'll be back.

00:19:22.500 --> 00:19:25.400
We get to the server stuff is cool.

00:19:25.450 --> 00:19:28.290
Little more on troubleshooting.

00:19:28.830 --> 00:19:30.660
Many of you are already working in
an Active Directory environment,

00:19:30.660 --> 00:19:33.270
so we know you understand a
little bit about Active Directory.

00:19:33.360 --> 00:19:35.950
So hopefully we give you enough
understanding about the AD plugin

00:19:36.200 --> 00:19:37.900
that everything all meshes.

00:19:37.960 --> 00:19:39.760
All right,
so where to get more information?

00:19:39.820 --> 00:19:42.040
Now that you know how it binds,
now you know the steps

00:19:42.090 --> 00:19:43.940
that it goes through,
well how do you know which one

00:19:44.030 --> 00:19:47.360
exactly that it's hanging on and
what specific part it's hanging on?

00:19:47.620 --> 00:19:50.480
The easiest way to do this
is to start a debug log going

00:19:50.550 --> 00:19:52.500
from the Directory Services.

00:19:52.540 --> 00:19:56.360
All right,
so to do this you can send the USR1 flag,

00:19:56.420 --> 00:19:59.100
all right,
to the Directory Service service,

00:19:59.150 --> 00:20:02.160
all right, and it's gonna start
debugging to library logs,

00:20:02.160 --> 00:20:05.300
Directory Service, Directory Service,
debug.log.

00:20:05.900 --> 00:20:07.320
Now you go through,
you see all the steps,

00:20:07.440 --> 00:20:08.560
you see all the calls.

00:20:08.680 --> 00:20:11.200
When you're done, you don't want that log
file to overrun your system.

00:20:11.200 --> 00:20:13.760
Send it a user one flag again,
we'll turn it off.

00:20:13.800 --> 00:20:17.860
For really heavy stuff,
you can send it a user two flag,

00:20:17.860 --> 00:20:20.860
that puts it down to API level debugging.

00:20:20.920 --> 00:20:22.730
Because of that,
it's only on for five minutes.

00:20:22.790 --> 00:20:25.670
Otherwise,
we'd fill up your drive pretty quick.

00:20:25.800 --> 00:20:28.280
So you're having issues joining,
you can do a user one,

00:20:28.280 --> 00:20:29.770
you can check the debug logs.

00:20:29.820 --> 00:20:33.110
Sometimes it's a little bit like
reading tea leaves your first time out

00:20:33.110 --> 00:20:34.800
and seeing kind of what's going on.

00:20:34.900 --> 00:20:36.790
But you should at least get an idea
of maybe where you're hanging up.

00:20:36.790 --> 00:20:39.760
Seeing what steps you
successfully complete,

00:20:39.900 --> 00:20:41.800
so that lets you know
which ones are missing,

00:20:41.800 --> 00:20:43.800
which ones you didn't be able to get to.

00:20:43.960 --> 00:20:47.060
If a user one isn't enough,
throw it a user two,

00:20:47.080 --> 00:20:50.540
take a look at what other
output comes out of there.

00:20:50.800 --> 00:20:54.800
User two goes to the same log file,
so you look in the same place either way.

00:20:56.220 --> 00:20:58.760
Starting over.

00:20:58.760 --> 00:21:01.200
You've bound a few times,
you did it in the lab,

00:21:01.240 --> 00:21:03.910
you did it at home,
you did it in one location,

00:21:03.910 --> 00:21:08.280
you go to another location and you don't
know whether you're coming or going.

00:21:08.280 --> 00:21:10.570
You had a couple test domains,
you set them up, you destroyed them,

00:21:10.600 --> 00:21:13.480
you did something else or
something bad happened,

00:21:13.480 --> 00:21:17.950
you're not on the same network,
it's spinning, it's trying to find DNS,

00:21:17.950 --> 00:21:20.400
it's trying to find some other stuff.

00:21:20.400 --> 00:21:23.150
Reset it all by going
into deleting these files.

00:21:23.150 --> 00:21:25.050
These are the same files that
we talked about before that

00:21:25.050 --> 00:21:27.220
set up your configuration.

00:21:27.220 --> 00:21:31.460
So by going in and by deleting those and
by restarting the Directory Service app

00:21:31.550 --> 00:21:34.310
or rebooting your machine,
you're going to flush all of that

00:21:34.310 --> 00:21:37.830
out which means you're going to
start over with a clean slate,

00:21:37.830 --> 00:21:40.340
an un-configured Directory Service.

00:21:40.340 --> 00:21:42.200
Now you're going to be
able to go back in there,

00:21:42.200 --> 00:21:44.220
rejoin to Active Directory if
you want to,

00:21:44.400 --> 00:21:46.840
set all that up, go from there.

00:21:46.840 --> 00:21:49.060
So this is how you start over.

00:21:49.060 --> 00:21:50.660
Important to know.

00:21:51.680 --> 00:21:52.390
Got another demo.

00:21:52.490 --> 00:21:54.690
We're going to bring Eric back on here.

00:21:54.800 --> 00:21:56.980
Eric's now going to talk about
actually doing the debug logs

00:21:57.060 --> 00:21:59.870
and do some little bit more about
in-depth about what the plugin does.

00:21:59.870 --> 00:22:00.380
So Eric.

00:22:00.440 --> 00:22:01.800
Thanks.

00:22:01.800 --> 00:22:03.280
That was quick.

00:22:06.640 --> 00:22:12.660
So let's just kind of try something
that you might run into for-- let's

00:22:12.660 --> 00:22:16.610
first not configure local correctly.

00:22:18.600 --> 00:22:20.760
And let's actually unbind.

00:22:20.770 --> 00:22:22.620
Now I'm going to do something
here that I didn't point out.

00:22:22.700 --> 00:22:26.820
So many of you complain that,
how do I unbind after I lose my

00:22:26.850 --> 00:22:28.780
domain or I have no connectivity?

00:22:28.790 --> 00:22:31.100
Well, I type my name and password,
it says I can't unbind,

00:22:31.290 --> 00:22:32.940
but now what do I do?

00:22:32.950 --> 00:22:36.200
Well, one of the great things we did in
Tiger is you can actually force

00:22:36.200 --> 00:22:39.560
unbind after it figures out that
it can't contact the domain here.

00:22:47.480 --> 00:22:49.640
Well, it doesn't seem like a
good username or password,

00:22:49.640 --> 00:22:52.710
but let's say we'll force unbind anyway.

00:23:08.830 --> 00:23:11.500
So now we're on bound.

00:23:11.500 --> 00:23:13.420
Let's go ahead and turn on
debug line we mentioned.

00:23:13.420 --> 00:23:14.630
So you do kill all.

00:23:14.840 --> 00:23:17.210
It's the easiest one.

00:23:21.000 --> 00:23:23.240
So that turned on debug log.

00:23:23.260 --> 00:23:25.360
And you'll notice in the system log,
there's actually a message

00:23:25.480 --> 00:23:27.200
saying debug log was turned on.

00:23:27.280 --> 00:23:28.700
So let's go find that log.

00:23:28.850 --> 00:23:32.990
It's looking at library logs,
directory service debug log.

00:23:36.910 --> 00:23:38.550
Now, you'll notice a lot
of other data in here.

00:23:38.660 --> 00:23:39.640
Let me just do something.

00:23:39.640 --> 00:23:41.640
I'll do an ID admin.

00:23:41.640 --> 00:23:44.600
You'll notice a bunch of other
data popping up in that log.

00:23:46.260 --> 00:23:49.600
So you'll see all the calls are
going into Active Directory Services,

00:23:49.620 --> 00:23:52.200
see who's calling what,
you'll see lookupd called,

00:23:52.360 --> 00:23:55.730
verify d ref ref,
nothing there to worry about.

00:23:55.800 --> 00:23:58.170
All we really care about here is AD plug.

00:23:58.170 --> 00:24:01.960
So always use the filters,
makes your life a lot easier

00:24:01.970 --> 00:24:03.790
to see what's going on.

00:24:03.790 --> 00:24:03.790
So let's try to bind.

00:24:05.120 --> 00:24:09.900
I'm going to bind to, oh,
I thought it was actually apple.com.

00:24:09.920 --> 00:24:12.630
And my administrator and that.

00:24:12.650 --> 00:24:14.020
Let's see.

00:24:14.030 --> 00:24:15.970
You'll notice here in the log--

00:24:17.190 --> 00:24:19.140
You'll see the various steps
that Joel talked about.

00:24:19.140 --> 00:24:22.200
And here, let's see,
it tried to find no domains found,

00:24:22.200 --> 00:24:23.290
unable to find the default domain.

00:24:23.290 --> 00:24:30.850
And you'll notice the area
popped up was invalid domain.

00:24:30.850 --> 00:24:30.850
Okay, well, maybe it's an apple.local.

00:24:35.570 --> 00:24:36.490
Yep, same thing.

00:24:36.700 --> 00:24:37.780
No DNS servers.

00:24:37.920 --> 00:24:40.090
Well, there's nothing obvious
to point this out,

00:24:40.100 --> 00:24:42.490
but obviously we know we
need Apple.local here.

00:24:42.500 --> 00:24:49.380
We'll go back, do the same thing.

00:24:56.300 --> 00:24:59.440
Okay, now we got some stuff happening.

00:24:59.440 --> 00:25:01.480
We'll let this kind of
go through and finish up,

00:25:01.480 --> 00:25:04.810
and then we'll backtrack and
see what exactly happened.

00:25:06.530 --> 00:25:08.860
All right,
remember when I uncleanly bound,

00:25:08.860 --> 00:25:10.620
I didn't actually remove
the computer record.

00:25:10.700 --> 00:25:12.300
So it says, well,
I found an existing account.

00:25:12.370 --> 00:25:12.880
Do you want to join it?

00:25:12.940 --> 00:25:14.750
We'll say, yeah.

00:25:17.200 --> 00:25:19.270
And that's all done.

00:25:19.390 --> 00:25:21.990
So let me scroll back.

00:25:22.190 --> 00:25:24.690
So we put a lot of data in here to
help you find the problem so you

00:25:24.860 --> 00:25:28.970
don't have to worry about calling us
to find out why you can't bind to AD.

00:25:29.300 --> 00:25:30.890
So first of all,
you'll notice the various

00:25:30.950 --> 00:25:32.880
steps that come up.

00:25:32.890 --> 00:25:35.210
We actually denote those.

00:25:36.620 --> 00:25:38.500
You'll see, first we're looking
for those DNS servers.

00:25:38.500 --> 00:25:41.910
You'll notice I found a server.

00:25:42.060 --> 00:25:44.770
I got the root DSE to
find out the forest.

00:25:45.060 --> 00:25:46.600
One of the big problems
back in Panther was,

00:25:46.640 --> 00:25:47.420
what's my forest?

00:25:47.420 --> 00:25:50.140
Nobody seemed to know how to
find out what their forest was.

00:25:50.210 --> 00:25:51.540
Well, you don't need to worry
about that anymore.

00:25:51.540 --> 00:25:51.970
We find that.

00:25:52.500 --> 00:25:55.360
So we determine that the forest
is the same as the domain.

00:25:55.580 --> 00:25:56.500
You can scroll through here.

00:25:56.500 --> 00:25:59.500
You'll see, okay,
found the default domain, found servers,

00:25:59.500 --> 00:26:01.680
found a global catalog.

00:26:02.160 --> 00:26:04.020
Something's not quite here
because I couldn't connect

00:26:04.110 --> 00:26:06.640
to the directory to get data,
but that's okay because what I did

00:26:06.730 --> 00:26:08.430
is I generated a Kerberos record.

00:26:10.130 --> 00:26:13.280
Then I went through and said, OK,
is there any site data?

00:26:13.330 --> 00:26:15.920
So I log in as the
administrator to the directory,

00:26:15.920 --> 00:26:20.900
read the same data, locate any sites,
which we don't have any

00:26:20.900 --> 00:26:22.990
in this configuration.

00:26:23.260 --> 00:26:24.040
And we're still using Any.

00:26:24.110 --> 00:26:26.960
So one of the things to point out is,
unlike a Windows client

00:26:26.960 --> 00:26:29.280
or some other clients,
we actually use the site data.

00:26:29.380 --> 00:26:32.310
So if you're in an AD environment
where I've got multiple domain

00:26:32.410 --> 00:26:34.910
controllers spread across the country,
we are going to look at the

00:26:34.910 --> 00:26:37.260
site configuration the admin
put into place and say,

00:26:37.410 --> 00:26:39.400
where is the nearest domain controller?

00:26:39.430 --> 00:26:42.190
We do not use NetBIOS to find that.

00:26:42.320 --> 00:26:45.080
So if your site data isn't there,
you're not going to find

00:26:45.080 --> 00:26:45.840
a local domain controller.

00:26:45.920 --> 00:26:47.190
But be sure, if it's there, we'll use it.

00:26:47.350 --> 00:26:49.520
We'll find your IP address
and find the nearest one.

00:26:49.550 --> 00:26:51.870
All that's done in this next step.

00:26:52.460 --> 00:26:54.220
See,
we regenerated the Kerberos file because,

00:26:54.220 --> 00:26:55.430
you know,
if this was a larger environment,

00:26:55.430 --> 00:26:57.040
we may have three or four other servers.

00:26:57.090 --> 00:26:58.020
Now we found a near one.

00:26:58.140 --> 00:27:02.120
Let's regenerate the data so that we
can use the nearest domain controller.

00:27:02.150 --> 00:27:05.000
We actually close out that
connection that we created.

00:27:05.620 --> 00:27:08.000
And in our case,
since we only have one domain controller,

00:27:08.060 --> 00:27:09.730
we reconnect to it.

00:27:09.850 --> 00:27:12.630
But here, step three,
we verified the credentials,

00:27:12.630 --> 00:27:14.520
even though we just used them.

00:27:16.140 --> 00:27:18.140
Then we go through,
we look for-- now one thing

00:27:18.140 --> 00:27:21.130
that's different in Tiger is
because we do do managed client,

00:27:21.140 --> 00:27:23.930
we actually look for a computer record,
not only by name,

00:27:23.930 --> 00:27:27.360
the name that you entered,
but also the ethernet address.

00:27:27.880 --> 00:27:29.820
So we'll actually look,
if you have schema extensions in

00:27:29.910 --> 00:27:32.860
place where they actually have a
Mac address tied to a computer,

00:27:32.880 --> 00:27:35.530
we'll look for that record
and join that record first.

00:27:35.660 --> 00:27:39.760
So even if I typed in computer A,
but computer B was my old record

00:27:39.830 --> 00:27:42.340
with the same Mac address,
it'll find computer B and

00:27:42.340 --> 00:27:43.880
bind to computer B instead.

00:27:44.000 --> 00:27:45.800
So that's just something to be aware of.

00:27:45.820 --> 00:27:48.700
But as you see,
there's a lot of detail in here.

00:27:48.700 --> 00:27:50.800
We look for it by computer address.

00:27:50.870 --> 00:27:52.540
We look for it by the name.

00:27:52.540 --> 00:27:54.030
We find something.

00:27:54.520 --> 00:27:57.400
And then we joined that
account record you see here.

00:27:57.480 --> 00:28:00.220
We found the computer record.

00:28:01.230 --> 00:28:05.790
Joining the existing record,
changing the password.

00:28:05.850 --> 00:28:08.450
We'll tell you whether the
password worked or not.

00:28:09.060 --> 00:28:12.200
And then we look up all
the local admin groups.

00:28:12.200 --> 00:28:12.700
Lots of data.

00:28:12.700 --> 00:28:14.310
Like I said,
there's lots of debug data in

00:28:14.310 --> 00:28:16.420
here to see what's going on.

00:28:17.910 --> 00:28:21.790
That's basically the majority
of the problems you can solve

00:28:21.860 --> 00:28:24.070
just by looking at this log.

00:28:32.500 --> 00:28:34.490
Thanks Eric.

00:28:34.600 --> 00:28:34.940
Cool stuff.

00:28:35.150 --> 00:28:36.490
So go to the debug logs.

00:28:36.670 --> 00:28:38.600
Take a look at what's going on there.

00:28:38.670 --> 00:28:41.100
Even in a healthy system
where everything's working,

00:28:41.100 --> 00:28:42.470
you want to look at those debug logs.

00:28:42.530 --> 00:28:45.190
It'll help you understand the
Active Directory plug-in and all

00:28:45.190 --> 00:28:48.270
the different pieces that are going
on under the covers as this happens.

00:28:48.270 --> 00:28:49.340
All right.

00:28:49.360 --> 00:28:51.220
Enough about client.

00:28:53.250 --> 00:28:55.210
What we really care
about is Tiger Server,

00:28:55.210 --> 00:28:55.740
right?

00:28:55.920 --> 00:28:57.540
Yeah, all right.

00:28:57.730 --> 00:28:59.040
That's the fun stuff.

00:28:59.220 --> 00:29:01.290
Anybody can get a client.

00:29:03.100 --> 00:29:05.240
Authentication.

00:29:05.320 --> 00:29:07.150
Client now uses NTLMv2.

00:29:07.630 --> 00:29:10.200
Server now supports NTLMv2.

00:29:10.220 --> 00:29:12.740
In addition, we support NTLMv2 for Samba.

00:29:12.740 --> 00:29:16.940
So you can enforce password
policies on your OS X servers

00:29:16.940 --> 00:29:18.600
running as Windows file servers.

00:29:18.600 --> 00:29:20.260
NTLMv2, it's a checkbox.

00:29:20.260 --> 00:29:24.600
You can see that authentication box
in the bottom there in the screenshot.

00:29:24.600 --> 00:29:26.970
Checkbox for NTLMv2 and Kerberos.

00:29:26.970 --> 00:29:28.540
Uncheck it.

00:29:28.760 --> 00:29:30.090
The stuff that you don't want.

00:29:30.100 --> 00:29:32.300
NTLM, LAN manager, that kind of stuff.

00:29:32.360 --> 00:29:34.860
You can also pull it out
of the password server.

00:29:35.090 --> 00:29:38.590
Before, if you didn't want a password
server to keep hashes of your

00:29:38.590 --> 00:29:41.880
LAN man passwords or whatever else,
you'd have to go in and use

00:29:41.940 --> 00:29:43.990
the nest command to go in
and stop it from doing that.

00:29:44.060 --> 00:29:48.010
Now inside server admin in the open
directory module in server admin,

00:29:48.010 --> 00:29:49.500
you can disable those.

00:29:49.590 --> 00:29:50.830
That's the top screenshot there.

00:29:50.940 --> 00:29:52.440
Going in and turning those off there.

00:29:52.500 --> 00:29:54.860
So you can pull them out of
password server and you can

00:29:54.910 --> 00:29:56.280
stop Samba from using them.

00:29:56.430 --> 00:29:59.880
Now you can be fully compliant
with your security policies

00:29:59.880 --> 00:30:01.620
that you want to enforce.

00:30:01.620 --> 00:30:03.620
Now,
I'm going to show you how to do that.

00:30:03.620 --> 00:30:04.570
So we have a key tab.

00:30:04.730 --> 00:30:05.570
So we have a key tab.

00:30:05.710 --> 00:30:07.660
We do Kerberos the way
it's supposed to be.

00:30:07.690 --> 00:30:09.980
We don't just pass it
down to the AD controller.

00:30:09.980 --> 00:30:11.490
Samba changed that recently.

00:30:11.490 --> 00:30:12.110
So we use that.

00:30:12.480 --> 00:30:15.120
When we show you the join Kerberos
options in a little while,

00:30:15.120 --> 00:30:16.360
we'll build that key tab.

00:30:16.410 --> 00:30:17.810
We'll do all of that for you.

00:30:17.810 --> 00:30:20.450
So you really do have a true
single sign-on environment.

00:30:20.520 --> 00:30:23.530
Very, very cool stuff on
Tiger Server with that.

00:30:23.580 --> 00:30:24.710
Now, we have a key tab.

00:30:24.710 --> 00:30:25.680
So we have a key tab.

00:30:25.680 --> 00:30:28.290
So you really do have a true
single sign-on environment.

00:30:28.360 --> 00:30:30.880
Very, very cool stuff on
Tiger Server with that.

00:30:30.880 --> 00:30:34.110
Now, we have a key tab.

00:30:34.110 --> 00:30:41.690
So you really do have a true
single sign-on environment.

00:30:41.690 --> 00:30:48.500
Very, very cool stuff on
Tiger Server with that.

00:30:50.660 --> 00:30:53.820
Kerberos again,
this is the Join Kerberos button.

00:30:53.820 --> 00:30:56.590
This is in Server Admin in
the Open Directory module.

00:30:56.600 --> 00:30:59.060
Once you've joined yourself
to Active Directory,

00:30:59.060 --> 00:31:00.890
it knows you're a server,
you're going to have a

00:31:00.890 --> 00:31:01.950
Join Kerberos button.

00:31:01.950 --> 00:31:06.120
Going down here, clicking on this button
will then go through,

00:31:06.120 --> 00:31:08.970
configure all this stuff for you,
create the key tab,

00:31:09.070 --> 00:31:11.480
enable all your services
to use the key tab.

00:31:11.480 --> 00:31:15.540
Anything that can use Kerberos on
the OS X server side gets a key tab

00:31:15.660 --> 00:31:17.880
from that Join Kerberos command.

00:31:17.900 --> 00:31:22.100
This is also DSConfigAD enable SSO.

00:31:22.100 --> 00:31:23.840
So you can also do this from
the command line if you want.

00:31:23.980 --> 00:31:26.370
So GUI and command line
options that are in here.

00:31:26.380 --> 00:31:28.080
Really, really nice stuff here too.

00:31:28.080 --> 00:31:30.290
No need to touch the domain controller.

00:31:30.290 --> 00:31:32.420
You don't have to call
up the AD admin and say,

00:31:32.420 --> 00:31:33.940
hey, what's your password?

00:31:33.940 --> 00:31:36.700
I need to go over with a floppy
disk and get some key tab files from

00:31:36.730 --> 00:31:39.740
you and then carry them back over
somewhere else or get them securely

00:31:39.740 --> 00:31:41.460
across the network back to you.

00:31:41.480 --> 00:31:43.790
So we do all that through the GUI here.

00:31:43.790 --> 00:31:44.780
Nice and easy.

00:31:44.800 --> 00:31:46.060
Yay!

00:31:47.930 --> 00:31:48.900
It's not cool.

00:31:48.900 --> 00:31:50.290
This gets rid of some of my work now,
right?

00:31:50.390 --> 00:31:53.900
And this is what I really like
because then we can hit lunch by 11.

00:31:53.900 --> 00:31:55.950
We're done for the day by 3.

00:31:56.260 --> 00:31:56.650
Cool stuff.

00:31:56.770 --> 00:31:58.040
So move on to Tiger for this.

00:31:58.040 --> 00:32:00.190
Plus we get all the other client changes.

00:32:00.290 --> 00:32:02.130
So on OS X server,
we get all the stuff that we

00:32:02.130 --> 00:32:03.730
talked about about OS X client.

00:32:03.760 --> 00:32:06.490
AD plugin is essentially the
same for a lot of the joining and

00:32:06.490 --> 00:32:08.180
that kind of stuff on the server.

00:32:08.180 --> 00:32:11.490
So you can still run the debug
commands like we just showed you.

00:32:11.490 --> 00:32:14.040
You can still do all of
those things on the server,

00:32:14.040 --> 00:32:17.850
find out what's going wrong, fix it,
get it bound, get it working.

00:32:17.900 --> 00:32:18.900
Thank you.

00:32:19.650 --> 00:32:21.560
One last time we got
Eric Clement's come up here.

00:32:21.560 --> 00:32:24.260
He's gonna show you the magic
of joining server into an

00:32:24.260 --> 00:32:25.900
Active Directory environment.

00:32:25.960 --> 00:32:28.820
This is the lightest demo of the
bunch because it's just one button.

00:32:28.970 --> 00:32:32.230
Alright, so Eric's there on demo two.

00:32:32.740 --> 00:32:35.650
So this is actually so easy these days.

00:32:35.840 --> 00:32:40.240
And it's not much really much to demo,
because you just saw the majority of it.

00:32:40.330 --> 00:32:42.580
So let's go to Directory Access.

00:32:45.170 --> 00:32:52.100
I managed to do that once in a while.

00:32:52.220 --> 00:32:57.570
Let's quit that out.

00:32:57.590 --> 00:32:59.100
So let's unlock.

00:32:59.100 --> 00:33:07.110
We'll go down to the directory.

00:33:07.110 --> 00:33:07.110
We'll configure this.

00:33:26.140 --> 00:33:29.110
One of the new things you'll
notice-- let me hide this other

00:33:29.150 --> 00:33:32.010
window-- is we actually tell you in
advance when you configure on a--

00:33:32.120 --> 00:33:35.840
an AD on a Windows-- on a server,
it says, oh, by the way,

00:33:35.840 --> 00:33:40.940
if you want to enable single sign-on,
go to Join Kerberos in Open Directory.

00:33:40.940 --> 00:33:42.210
Now,
I'm actually going to fix something here,

00:33:42.210 --> 00:33:43.060
because I noticed this.

00:33:43.140 --> 00:33:44.480
We joined earlier with the wrong name.

00:33:44.560 --> 00:33:47.220
I just want to make sure this
is-- we don't override that.

00:33:47.260 --> 00:33:54.090
You'll notice our host
name was actually OS XS.

00:34:07.920 --> 00:34:08.790
This is important.

00:34:08.880 --> 00:34:12.200
So this isn't something you would
debug normally through the debug log.

00:34:12.240 --> 00:34:16.180
But if your host name does
not match for Kerberos,

00:34:16.270 --> 00:34:18.740
Kerberos is not going to work.

00:34:18.740 --> 00:34:22.490
And what's important here is not the fact
that the host name was also right in DNS,

00:34:22.530 --> 00:34:26.380
it's the fact that the domain
name NAD also matches the

00:34:26.380 --> 00:34:28.490
domain name of the host.

00:34:34.220 --> 00:34:41.730
Because as we know,
this becomes OSX.apple.local in AD.

00:34:41.820 --> 00:34:42.940
OK, we got the same message.

00:34:43.060 --> 00:34:44.480
Click OK.

00:34:44.480 --> 00:34:46.610
Let's go to Server Admin.

00:34:59.680 --> 00:35:00.600
Yeah, you changed it.

00:35:00.600 --> 00:35:03.870
Let me just-- there we go.

00:35:03.960 --> 00:35:07.790
This keychain is locked and
you're going to come type--

00:35:23.870 --> 00:35:26.400
So we go to Open Directory,
go to Settings.

00:35:26.400 --> 00:35:28.730
It's actually going to detect
the fact that we're connected

00:35:28.810 --> 00:35:31.840
to a directory system and give
me the option to join Kerberos.

00:35:31.880 --> 00:35:32.830
So I click Join Kerberos.

00:35:32.940 --> 00:35:35.830
And if you read it,
you'll notice we're supposed to type

00:35:35.830 --> 00:35:38.260
in our local admin and password.

00:35:42.810 --> 00:35:44.540
Now we're joined to Kerberos.

00:35:44.590 --> 00:35:48.540
You go click on Windows, for example,
look at settings.

00:35:48.600 --> 00:35:49.610
We're connected to a domain.

00:35:49.690 --> 00:35:50.400
We're a domain member.

00:35:50.540 --> 00:35:51.450
Here's the domain realm.

00:35:51.730 --> 00:35:53.620
Here's the domain we're bound to.

00:35:53.680 --> 00:35:55.340
AFP is set up for Kerberos now.

00:35:55.450 --> 00:35:58.180
In fact,
you can actually go to the command line.

00:35:58.290 --> 00:36:03.190
We'll sudo to root and do K list dash K.

00:36:03.510 --> 00:36:07.090
And we even have all our Kerberos
principles already in place.

00:36:13.590 --> 00:36:15.500
Thank you.

00:36:15.610 --> 00:36:17.430
Thank you, Eric.

00:36:17.560 --> 00:36:20.230
How many times can we join
Active Directory in one

00:36:20.230 --> 00:36:22.500
session and have people clap,
right?

00:36:22.510 --> 00:36:24.500
I think we're up to about eight now.

00:36:24.840 --> 00:36:26.500
Everyone goes through
just like it should,

00:36:26.500 --> 00:36:27.500
all right?

00:36:27.500 --> 00:36:30.500
Once I get past having switched
passwords on Eric for that.

00:36:30.500 --> 00:36:32.500
My apologies.

00:36:32.880 --> 00:36:36.090
All right,
one click Kerberos integration.

00:36:36.440 --> 00:36:38.570
Nice, easy, click, go.

00:36:39.130 --> 00:36:42.080
All right, if you saw when he showed you
that K-list or that KT list,

00:36:42.100 --> 00:36:45.480
you saw that we generate
principles for everything in there.

00:36:45.500 --> 00:36:47.820
There's ones for X-Grid,
there's ones for other stuff.

00:36:47.820 --> 00:36:49.920
All right, as we Kerberize all the
rest of the services,

00:36:49.920 --> 00:36:51.180
you'll get all that in there.

00:36:51.200 --> 00:36:53.220
That'll all be pulled into the system,
all right?

00:36:53.280 --> 00:36:54.950
Kerberos is good, right?

00:36:55.170 --> 00:36:56.800
Single sign-on is good.

00:36:56.800 --> 00:36:59.120
Makes things easy,
makes your life easier.

00:36:59.160 --> 00:37:02.400
What I want to talk about now is a
couple of different deployment options.

00:37:02.450 --> 00:37:05.700
Once you understand how the
Active Directory plugin works,

00:37:05.730 --> 00:37:07.940
once you get it working,
now you want to find out

00:37:07.980 --> 00:37:10.800
how you can extend it,
how you can do this a little bit better.

00:37:10.850 --> 00:37:14.180
All right, so going to your environment,
getting the best of both worlds,

00:37:14.320 --> 00:37:17.380
getting the best of Active Directory,
getting your users and

00:37:17.500 --> 00:37:19.820
passwords out of there,
playing nice with the rest of

00:37:19.830 --> 00:37:21.180
the people that run your network.

00:37:21.300 --> 00:37:22.680
All right,
we're a good corporate citizen.

00:37:22.680 --> 00:37:25.900
We want to do the right thing,
so we work with Active Directory.

00:37:25.930 --> 00:37:28.260
But you still like all the OS X stuff.

00:37:28.300 --> 00:37:31.020
Work Group Manager is a nice little
app for configuring some of your MCX,

00:37:31.090 --> 00:37:31.980
doing that kind of stuff.

00:37:32.050 --> 00:37:36.220
So here's some ways that you can
get both of those in the same time.

00:37:36.800 --> 00:38:49.000
[Transcript missing]

00:38:50.070 --> 00:38:52.070
Here's an example of this.

00:38:52.070 --> 00:38:52.950
Big, huge iMac.

00:38:53.040 --> 00:38:57.000
It looks a lot bigger on the screen
up there than it did on my PowerBook.

00:38:57.000 --> 00:38:59.930
Alright, so we've got an iMac G5 here.

00:39:00.000 --> 00:39:01.000
This is our client.

00:39:01.120 --> 00:39:03.000
We're going to go,
there's our Windows Server.

00:39:03.290 --> 00:39:07.000
Alright, we're going to go right to
Active Directory using the AD plugin.

00:39:07.140 --> 00:39:11.000
We can then use Workgroup Manager,
put our users into Windows,

00:39:11.000 --> 00:39:12.890
put all the information
that we want in there.

00:39:13.020 --> 00:39:15.000
Alright,
works the way that you want it to.

00:39:15.000 --> 00:39:17.000
So that's extending the schema.

00:39:17.120 --> 00:39:19.750
And here we have Workgroup
Manager coming up there.

00:39:20.510 --> 00:39:21.740
One option.

00:39:21.800 --> 00:39:23.660
If you have a lot of Macs,
you want to integrate them

00:39:23.660 --> 00:39:26.150
fully into Active Directory,
this works.

00:39:26.260 --> 00:39:29.830
If you have just a few Macs,
or if you don't like getting into

00:39:29.840 --> 00:39:32.590
going into Active Directory and
being very invasive,

00:39:32.680 --> 00:39:35.240
either you're getting pushback
from your IT staff about that,

00:39:35.400 --> 00:39:37.420
pushback from management,
you can do what we call

00:39:37.420 --> 00:39:38.480
the magic triangle.

00:39:39.540 --> 00:39:41.680
The magic triangle is where
we take your users and your

00:39:41.680 --> 00:39:43.320
information out of Active Directory.

00:39:43.420 --> 00:39:46.310
We take your authentication
out of Active Directory,

00:39:46.450 --> 00:39:50.440
but we kick in group and machine
management from an Open Directory server.

00:39:50.460 --> 00:39:54.270
You get a shiny XServe, get two,
you can be a replica so you don't have

00:39:54.400 --> 00:39:57.710
to worry about a single point of failure,
two shiny XServes,

00:39:57.720 --> 00:40:00.350
a beige box Windows running
Active Directory,

00:40:00.370 --> 00:40:03.300
we'll pull the users from AD,
we'll pull the management

00:40:03.600 --> 00:40:05.080
from Open Directory.

00:40:05.180 --> 00:40:07.620
You still have the option
of using Workgroup Manager,

00:40:07.620 --> 00:40:08.870
you still get all of that.

00:40:09.670 --> 00:40:11.800
But you don't have to go and you
don't have to extend the scheme

00:40:11.800 --> 00:40:13.080
on the Active Directory side.

00:40:13.080 --> 00:40:17.010
Some instructions on AFP 548 about this,
there's a white paper there,

00:40:17.430 --> 00:40:19.460
explain some of the stuff
that I've done with that,

00:40:19.460 --> 00:40:22.160
so you can go there and look
for more information on this.

00:40:22.200 --> 00:40:25.570
So we go back to this great big iMac,
a little smaller now.

00:40:25.600 --> 00:40:27.980
And this is the idea
of the magic triangle.

00:40:27.980 --> 00:40:31.720
We've got an Active Directory plug-in
connection to the Windows system,

00:40:31.720 --> 00:40:34.590
to Active Directory, get our users,
get our passwords,

00:40:34.720 --> 00:40:37.250
get group membership out
of there if we need it.

00:40:37.300 --> 00:40:39.480
At the same time, we take an OS X.

00:40:39.540 --> 00:40:40.970
server.

00:40:42.070 --> 00:40:44.470
Get our users there.

00:40:44.470 --> 00:40:48.880
We then take an LDAP connection,
just a normal plain Jane LDAP open

00:40:48.880 --> 00:40:50.890
directory connection to an XServe.

00:40:50.890 --> 00:40:53.000
We can now use Workgroup Manager.

00:40:53.080 --> 00:40:54.560
We can manage groups of users.

00:40:54.560 --> 00:40:57.930
We can manage machine accounts
and we can attach MCX to that.

00:40:58.960 --> 00:41:01.780
We're not going to be able to
do direct to a user account.

00:41:01.860 --> 00:41:04.560
If you have a user in
Active Directory and you want to

00:41:04.800 --> 00:41:08.430
specify the doc settings for that user,
we don't have the attributes in

00:41:08.440 --> 00:41:10.130
AD so we can't write back to that.

00:41:10.180 --> 00:41:13.230
But we can put a user
into Open Directory,

00:41:13.230 --> 00:41:16.440
put them into a group, then manage that.

00:41:16.500 --> 00:41:19.670
This is the idea of the magic triangle
and how you can fit all this together.

00:41:19.670 --> 00:41:23.170
It's a great reason for you to bring
an OS X server into your environment.

00:41:23.210 --> 00:41:26.710
It's a great reason to extend without
actually going in and modifying the

00:41:26.710 --> 00:41:28.930
scheme on the Active Directory server.

00:41:28.940 --> 00:41:34.150
Another way,
we see a lot of places doing this.

00:41:35.180 --> 00:41:40.210
Last little bit that I want to talk
about is really dear to my heart.

00:41:40.250 --> 00:41:42.000
Because it really puts
Open Directory where

00:41:42.000 --> 00:41:45.310
I think it should be.

00:41:47.200 --> 00:41:51.430
We've talked a lot
about how we'll be nice,

00:41:51.430 --> 00:41:56.580
we'll play with Active Directory,
we'll get users from Active Directory.

00:41:56.700 --> 00:42:00.660
But what happens if you'd
rather do it the other way?

00:42:01.140 --> 00:42:03.800
All right, what happens if you want
Open Directory to be the top

00:42:03.930 --> 00:42:05.790
dog in this relationship?

00:42:05.800 --> 00:42:08.360
If you want the passwords
to be in Open Directory,

00:42:08.360 --> 00:42:10.990
and when you go into Workgroup
Manager and you disable that

00:42:11.080 --> 00:42:16.230
checkbox to disable the user,
they can't log in to the PC side.

00:42:16.850 --> 00:42:19.420
So that's Kerberos Cross Realm.

00:42:19.510 --> 00:42:21.460
It's a little harder.

00:42:21.530 --> 00:42:25.270
Windows, not as easy to connect to
multiple directory services

00:42:25.270 --> 00:42:27.000
at the same time as OS X is.

00:42:27.210 --> 00:42:29.100
So here's an example
of how we can do this.

00:42:29.190 --> 00:42:30.760
So we had to coin a
name for it something.

00:42:30.760 --> 00:42:33.140
So I like the magic triangle
as a name for the other one.

00:42:33.320 --> 00:42:37.750
So we're calling this the
reverse magic triangle.

00:42:37.980 --> 00:42:39.900
So what we do,
we got essentially the same layout.

00:42:39.970 --> 00:42:42.280
We've got Open Directory and
we've got Active Directory.

00:42:42.330 --> 00:42:45.380
But now we create a Kerberos
Cross Realm trust between the

00:42:45.380 --> 00:42:48.280
Active Directory system and
the Open Directory system.

00:42:48.290 --> 00:42:52.860
All right, and there's some information
at 4ammedia.com/xrealm.

00:42:52.880 --> 00:42:54.320
All right,
we'll step you through all these

00:42:54.320 --> 00:42:56.120
settings and how to do that.

00:42:56.120 --> 00:42:59.680
All right, we take these two things,
we create the Kerberos Cross Realm trust.

00:42:59.860 --> 00:43:04.220
We can then go onto the Windows machine,
use the ktutil command, I believe.

00:43:04.240 --> 00:43:05.600
And then we can set up.

00:43:05.630 --> 00:43:08.460
When you go to the login window,
you put your username in,

00:43:08.470 --> 00:43:10.060
and then you pick a domain.

00:43:10.100 --> 00:43:14.520
One of those domains is gonna be the
Kerberos Realm in Open Directory.

00:43:14.540 --> 00:43:16.070
All right,
so you're gonna be able to select

00:43:16.070 --> 00:43:18.020
that type in your username and
your password and go through.

00:43:18.020 --> 00:43:22.500
Who was at the Enterprise IT State of
the Union session?

00:43:22.920 --> 00:43:23.640
All right.

00:43:23.700 --> 00:43:25.640
You remember there was a bank there.

00:43:25.810 --> 00:43:27.020
Big guy from the bank, Joe.

00:43:27.210 --> 00:43:29.390
Great guy, if he's here.

00:43:30.290 --> 00:43:33.090
came in and talked about some of
the stuff that they were doing.

00:43:33.090 --> 00:43:34.440
We're using Kerberos CrossRealm.

00:43:34.440 --> 00:43:37.320
If you've caught me on iChat
lately and I'm a little sleepy when

00:43:37.330 --> 00:43:41.020
you're wide awake in the afternoon,
that's because I'm in Tokyo, all right,

00:43:41.050 --> 00:43:42.270
doing this kind of stuff.

00:43:42.380 --> 00:43:45.300
So we got Kerberos CrossRealm
for a lot of users over there,

00:43:45.300 --> 00:43:46.960
working great, we like it.

00:43:46.960 --> 00:43:48.810
That allows them to keep
everything on the iMac,

00:43:48.940 --> 00:43:49.420
the client.

00:43:49.460 --> 00:43:52.740
They can still get some of their
legacy apps that they haven't migrated

00:43:52.790 --> 00:43:54.970
over through a remote connection,
all right,

00:43:55.080 --> 00:43:58.960
using a remote desktop connection
back to the Windows Terminal Services,

00:43:58.970 --> 00:44:03.210
still authenticate with their open
directory username and password.

00:44:03.210 --> 00:44:05.710
So here's an example of how that works.

00:44:05.900 --> 00:44:09.880
Beige box to Windows Server using
Active Directory.

00:44:10.160 --> 00:44:14.440
We've got an iMac running
OS X going through Open Directory,

00:44:14.440 --> 00:44:17.440
all the normal stuff to an XServe.

00:44:17.570 --> 00:44:20.580
Now we create this
Cross Realm Trust between them.

00:44:22.590 --> 00:44:24.890
Not quite the magic triangle,
and that's why I say this is

00:44:24.960 --> 00:44:26.780
the reverse magic triangle.

00:44:26.810 --> 00:44:28.780
So we've got the
Cross Realm Trust between there.

00:44:28.910 --> 00:44:32.220
We then create user
records in both places.

00:44:32.530 --> 00:44:35.180
Active Directory has to know the user.

00:44:35.590 --> 00:44:38.000
Sometimes we pull this out
of an SAP system that might

00:44:38.000 --> 00:44:40.240
be running your HR system.

00:44:40.400 --> 00:44:44.940
Script, user creation process,
we generate a user instance in both

00:44:44.940 --> 00:44:48.020
Active Directory and Open Directory.

00:44:48.130 --> 00:44:51.470
In Active Directory though
we randomize the password.

00:44:52.090 --> 00:44:54.580
Nobody knows what the password is.

00:44:54.870 --> 00:44:56.000
Randomize it.

00:44:56.180 --> 00:44:59.000
But we have to have a
user principle in there.

00:44:59.090 --> 00:45:00.600
We've got a user in Open Directory.

00:45:00.670 --> 00:45:01.930
They have the real password.

00:45:01.980 --> 00:45:04.950
They have the Kerberos information,
everything that we need.

00:45:05.000 --> 00:45:07.490
We tag in a little file,
a little attribute on the

00:45:07.710 --> 00:45:09.280
user in Active Directory.

00:45:09.280 --> 00:45:12.820
The instructions on that URL that
I gave you go through a lot of this.

00:45:12.820 --> 00:45:15.760
We tag it in there saying that
this is actually a CrossRealm user.

00:45:15.760 --> 00:45:16.980
That way they can log in.

00:45:16.990 --> 00:45:19.080
They use their Open Directory password.

00:45:19.080 --> 00:45:20.980
They get a Kerberos TGT.

00:45:21.520 --> 00:45:22.520
Then you go through.

00:45:22.520 --> 00:45:24.490
You set up all your web
servers with Kerberos.

00:45:24.680 --> 00:45:25.800
You go to Solaris.

00:45:25.800 --> 00:45:27.440
You use mod SPNego.

00:45:27.440 --> 00:45:28.580
You get really wild and crazy.

00:45:28.580 --> 00:45:31.730
And now when you log in on the iMac
or you log in on the Windows machine,

00:45:31.730 --> 00:45:33.310
you're using the same password.

00:45:33.310 --> 00:45:35.520
You're getting the same
Kerberos credentials.

00:45:35.640 --> 00:45:39.200
You're getting single sign-on to the
resources that you need to get to.

00:45:39.200 --> 00:45:41.470
Very, very cool stuff.

00:45:41.470 --> 00:45:43.850
Reverse magic triangle.

00:45:43.850 --> 00:45:47.000
Never see that the passwords
are only in Open Directory.

00:45:48.350 --> 00:45:51.650
When you go to Open Directory,
Workgroup Manager, disable the user,

00:45:51.750 --> 00:45:55.270
can't log in for anything
because that user's out.

00:45:56.940 --> 00:46:00.870
Alright,
we've got about 25 minutes or so.

00:46:00.960 --> 00:46:03.340
A couple places that you
can get more information.

00:46:03.380 --> 00:46:05.610
A lot of the documentation,
sample code and everything else.

00:46:05.730 --> 00:46:07.520
This is the WWDC URL.

00:46:07.930 --> 00:46:11.440
Those URLs that I put in for those
couple of deployment examples,

00:46:11.440 --> 00:46:12.320
contact me.

00:46:12.320 --> 00:46:16.020
My email is on the slides here,
mactroll@apple.com.

00:46:16.020 --> 00:46:16.740
We can help you out.

00:46:16.740 --> 00:46:17.560
We can do this for you.

00:46:17.560 --> 00:46:19.160
We can get you in touch
with other resources.