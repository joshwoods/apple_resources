WEBVTT

00:00:14.550 --> 00:00:19.789
>> Managing and Deploying Open Directory.

00:00:19.789 --> 00:00:21.859
I'm Joel. (Applause)

00:00:23.039 --> 00:00:24.419
>> Thank you.

00:00:24.420 --> 00:00:27.100
I don't have Mike -- Mr. Bombich with me this session.

00:00:27.100 --> 00:00:31.600
So you can't give him a louder round of applause than me.

00:00:31.600 --> 00:00:34.630
Why not! He doesn't have to be here.

00:00:34.630 --> 00:00:36.240
Fair enough.

00:00:36.240 --> 00:00:38.880
Joining me on stage in a little bit will be
Paul Suh who's talking

00:00:38.880 --> 00:00:42.030
about a little case study for some of these things.

00:00:42.030 --> 00:00:48.410
So what we would like to chat about is first some
new stuff in Open Directory that's coming in Leopard.

00:00:48.409 --> 00:00:52.689
Some way that's you might be able
to use it and do good stuff with it.

00:00:52.689 --> 00:00:57.579
I believe that Nicole teed up this session
a little bit more than it should have been.

00:00:57.579 --> 00:01:01.670
Lots of people have been asking me about
something -- but they don't know what yet.

00:01:01.670 --> 00:01:03.890
So we'll get into that in a few slides.

00:01:03.890 --> 00:01:10.060
So some new ways of deploying, new ways of doing things
with Leopard, and then like I said we have a case study

00:01:10.060 --> 00:01:17.079
of using Open Directory in the Tiger realm
with a variety of (inaudible) clients.

00:01:17.079 --> 00:01:20.700
So what's new in OD 4?

00:01:20.700 --> 00:01:23.079
Everything is tiered.

00:01:23.079 --> 00:01:25.340
This exciting and this is cool.

00:01:25.340 --> 00:01:28.840
Tiered Admins, tiered replication, tiered lots of stuff.

00:01:28.840 --> 00:01:31.480
Net Info is dead, and we'll talk about RADIUS a little bit.

00:01:31.480 --> 00:01:36.350
And I don't have a parrot like Nicole did.

00:01:36.349 --> 00:01:39.729
I know. I think I got a better
slide though, I got a better slide.

00:01:39.730 --> 00:01:43.840
So to reiterate a little bit between the
architectural differences between 10 and 10.4 ,

00:01:43.840 --> 00:01:48.820
and kind of why you care -- this
was 10.0, lots of different layers.

00:01:48.819 --> 00:01:50.639
OS X software there in the red.

00:01:50.640 --> 00:01:53.420
That would work with directory services there in green,

00:01:53.420 --> 00:01:58.159
which would then contact the various different
plug-ins and pieces that would go through there.

00:01:58.159 --> 00:02:03.629
What was actually going on was two different forms
of entry to lib sys API, which is the lib C things.

00:02:03.629 --> 00:02:10.019
And the directory services APIs, which is if you're writing
specifically to OS X. So if you just had a UNIX application

00:02:10.020 --> 00:02:14.620
that you were looking at porting over you were usually
using things like get P W Nam, and things like that.

00:02:14.620 --> 00:02:17.289
And that goes all through the lib sys side.

00:02:17.289 --> 00:02:20.739
Those would actually hit three different daemons.

00:02:20.740 --> 00:02:27.159
Lookup D directory services and member D. Member
D was added in 10.4 to do group resolution.

00:02:27.159 --> 00:02:30.109
Lookup D has always been there
doing Net Info and other things.

00:02:30.110 --> 00:02:36.010
And then directory services came around 10.3
to give you all the good DS fun stuff.

00:02:36.009 --> 00:02:38.189
Like Active Directory and LDAP.

00:02:38.189 --> 00:02:41.719
So we had three different systems that
were constantly talking to each other.

00:02:41.719 --> 00:02:46.229
That's an awful lot of IPC look ups,
interprocess communications between those two.

00:02:46.229 --> 00:02:50.459
And you were taking a hit to performance
and latency on having to have that happen.

00:02:50.460 --> 00:02:51.210
All right.

00:02:51.210 --> 00:02:52.500
We understand all that.

00:02:52.500 --> 00:02:53.270
We know that.

00:02:53.270 --> 00:02:57.520
It made directory services a lot more
complicated than it should ever have been.

00:02:57.520 --> 00:03:01.530
More complicated to trouble shoot, more
complicated to work with as an Admin,

00:03:01.530 --> 00:03:04.830
more complicated for programmers to actually program to.

00:03:04.830 --> 00:03:06.800
So time for a clean up.

00:03:06.800 --> 00:03:11.380
We've taken all of that and the Leopard
architecture is now much more monolithic.

00:03:11.379 --> 00:03:14.949
That actual green layer is really, truly just one service.

00:03:14.949 --> 00:03:16.959
Which is the directory service daemon there.

00:03:16.960 --> 00:03:22.250
So single directory services, caching,
group members, local data store access,

00:03:22.250 --> 00:03:25.900
and most importantly, DNS host resolution.

00:03:25.900 --> 00:03:31.469
In 10.4 if you actually did a DNS look up, even though
you're kind of doing it through directory services,

00:03:31.469 --> 00:03:33.990
lookup D was still handling all of that.

00:03:33.990 --> 00:03:39.560
This meant that sometimes when you were browsing the Web
and things like that you had higher latency for DNS look ups

00:03:39.560 --> 00:03:44.140
than you otherwise really wanted to, because it
was having to be passed from one system to another.

00:03:44.139 --> 00:03:50.759
So by putting this all into one layer of directory services,
we have much better IPC dispatch, much better performance,

00:03:50.759 --> 00:03:57.280
and overall we think you should see a much more
snappier, to use a technical term -- system.

00:03:57.280 --> 00:04:00.870
So even if you don't realize the
directory services changed in this way,

00:04:00.870 --> 00:04:03.689
and even if you're not using a directory service period,

00:04:03.689 --> 00:04:08.629
you should find a faster user environment
just based upon these changes.

00:04:08.629 --> 00:04:09.479
All right?

00:04:09.479 --> 00:04:15.039
Lookup D and member D will not be running in
Leopard, so you shouldn't even be using them.

00:04:15.039 --> 00:04:17.219
So, what replaces Net Info?

00:04:17.220 --> 00:04:20.110
We have a local data store replacement.

00:04:20.110 --> 00:04:22.600
Right? Net Info, very long time.

00:04:22.600 --> 00:04:23.580
Historical usage.

00:04:23.579 --> 00:04:24.279
Great stuff.

00:04:24.279 --> 00:04:29.879
How many people are currently using
Net Info across the network right now?

00:04:29.879 --> 00:04:30.949
Ooh. Two of you.

00:04:30.949 --> 00:04:32.019
All right.

00:04:32.019 --> 00:04:35.789
Well, how many people are using NIS.

00:04:35.790 --> 00:04:36.850
So there's five.

00:04:36.850 --> 00:04:41.170
So we have more people using a ten-year-old
deprecated solution than Net Info.

00:04:41.170 --> 00:04:44.939
So if I got to cut one, I'm more
than happy to cut Net Info than NIS.

00:04:44.939 --> 00:04:46.259
Sorry about that.

00:04:46.259 --> 00:04:47.610
But you knew it was coming.

00:04:47.610 --> 00:04:47.810
Yeah.

00:04:47.810 --> 00:04:48.170
( Laughter )

00:04:48.170 --> 00:04:55.300
>> So Net Info did a lot of things, but we've really
not supported, really, Net Info service since 10 2.

00:04:55.300 --> 00:04:58.850
Could hold about 10,000 entries.

00:04:58.850 --> 00:05:00.610
Decent for a small to medium business.

00:05:00.610 --> 00:05:02.620
But certainly has scaleable issues.

00:05:02.620 --> 00:05:06.939
String data, no binaries, right access controls,
but there were no read backs as controls.

00:05:06.939 --> 00:05:10.779
So you're very limited with a lot of
the configuration that you could do.

00:05:10.779 --> 00:05:12.129
So no longer.

00:05:12.129 --> 00:05:13.159
We're moving on.

00:05:13.160 --> 00:05:14.730
All right.

00:05:14.730 --> 00:05:19.819
There's a lot of RPC -- remote processes
-- remote processing communication --

00:05:19.819 --> 00:05:22.860
if you wanted to firewall off your Net Info solution.

00:05:22.860 --> 00:05:24.090
It's like firewalling NFS.

00:05:24.089 --> 00:05:27.000
It's a random collection of ports it was going to use.

00:05:27.000 --> 00:05:28.860
So you couldn't really do anything.

00:05:28.860 --> 00:05:33.069
So it really hurts when you're trying
to make a more secure solution.

00:05:35.410 --> 00:05:36.780
There we go.

00:05:36.779 --> 00:05:41.559
And so data going into there, all
going into the Net Info database.

00:05:41.560 --> 00:05:43.670
Net Info retired -- this is my parrot slide.

00:05:43.670 --> 00:05:44.810
( Applause )

00:05:44.810 --> 00:05:50.480
>> Yeah. Jersey's going to go up
on the wall on One Infinite Loop.

00:05:50.480 --> 00:05:52.030
You're going to see it over there.

00:05:52.029 --> 00:05:53.649
You know, in five years from now you know,

00:05:53.649 --> 00:05:58.769
the younger generation of system Admins are
going to walk by and Daddy, what's Net Info.

00:05:58.769 --> 00:06:06.039
And you can wax poetic and talk to them about the
grand old time you had with the NI Util and Nickel,

00:06:06.040 --> 00:06:09.520
and all those things that nobody will know any more.

00:06:09.519 --> 00:06:15.169
So a little bit about the local data store replacement,
and we'll actually do some poking around with it.

00:06:15.170 --> 00:06:19.900
Net Info being retired, we're banging you over the head
with that, but we really want you to understand that.

00:06:19.899 --> 00:06:21.979
So records are P-lists.

00:06:21.980 --> 00:06:30.000
For the local -- for the local records imagine if
you will that you took the contents of Net Info

00:06:30.000 --> 00:06:35.879
and you essentially catted it out with NI Util or
Nickel, or any of your other favorite N utilities,

00:06:35.879 --> 00:06:39.129
and you put that into just an XML delimited P-list.

00:06:39.129 --> 00:06:40.769
That is what you're going to find.

00:06:40.769 --> 00:06:44.049
There's a folder directory structure
that matches the directory structure

00:06:44.050 --> 00:06:47.340
that was given to you virtually through Net Info.

00:06:47.339 --> 00:06:51.429
And every record in that directory structure
is going to be a plain text P-list file.

00:06:51.430 --> 00:06:53.230
All right?

00:06:53.230 --> 00:06:55.879
So very easy to get into, very easy to change.

00:06:55.879 --> 00:06:58.079
We'll talk about that in a little bit.

00:06:58.079 --> 00:06:59.589
So one less daemon running.

00:06:59.589 --> 00:07:02.779
It's just all one piece there.

00:07:02.779 --> 00:07:05.969
All Net Info data is going to be
migrating during your install.

00:07:05.970 --> 00:07:08.030
You shouldn't have to worry about this.

00:07:08.029 --> 00:07:08.639
All right?

00:07:08.639 --> 00:07:12.459
So when you install, when you upgrade to 10.4
all of that is going to be taken care of for you

00:07:12.459 --> 00:07:14.959
We're really not going to support network not info.

00:07:14.959 --> 00:07:16.409
All right?

00:07:16.410 --> 00:07:18.620
We're really not going to support it.

00:07:18.620 --> 00:07:21.889
LDAP directory and NIS are on the way forward.

00:07:21.889 --> 00:07:22.169
All right.

00:07:22.170 --> 00:07:24.490
So all three of those are very much supported in Leopard.

00:07:24.490 --> 00:07:27.310
We've actually given NIS quite a bit of love .

00:07:27.310 --> 00:07:30.839
So we should see better NIS support for that.

00:07:30.839 --> 00:07:33.159
Net Info manager is gone.

00:07:33.160 --> 00:07:34.800
There's really not much point to it.

00:07:34.800 --> 00:07:37.350
All the NI Tools are now DS tools.

00:07:37.350 --> 00:07:40.860
So swap NI with DS, and you should
still be able to do your jobs.

00:07:40.860 --> 00:07:45.120
This is why if you've been listening to some of the mailing
lists and stuff like that you've been telling anybody

00:07:45.120 --> 00:07:49.420
that wrote a script that does anything
with NI Util to use DSCL.

00:07:49.420 --> 00:07:52.670
D S C L. The Directory Services Command Line.

00:07:52.670 --> 00:07:56.540
Which is more than happy to work
with the new Net Info replacement.

00:07:56.540 --> 00:08:02.060
And if you coded using any of the lib C
APIs using the directory services APIs,

00:08:02.060 --> 00:08:06.079
it is irrelevant to you whether Net
Info exists or does not at this point.

00:08:06.079 --> 00:08:07.240
All right?

00:08:07.240 --> 00:08:11.019
So we're very, very confident that
about 99 percent plus of the software

00:08:11.019 --> 00:08:15.229
out there will have no knowledge
whatsoever of the underlying change to this.

00:08:15.230 --> 00:08:18.520
So now we just have data going straight down into one place.

00:08:18.519 --> 00:08:21.509
There's not a whole lot of individual things in between.

00:08:21.509 --> 00:08:33.319
So now to Demo B here, and we can poke around a little bit.

00:08:33.320 --> 00:08:39.820
Ah. Demo B. Green.

00:08:39.820 --> 00:08:45.300
Joke. That's right.

00:08:45.299 --> 00:08:47.370
Okay. Emergency joke time.

00:08:47.370 --> 00:08:53.620
Uhh -- I was hoping that I would at least make sure
that you were -- this is the other one, though.

00:08:53.620 --> 00:08:54.490
This is Paul's.

00:08:54.490 --> 00:08:57.549
Which isn't running 10.5.

00:08:57.549 --> 00:09:04.029
And this is B. Which -- maybe I
just need to detect displays.

00:09:04.029 --> 00:09:09.309
Hey! No emergency joke!

00:09:09.309 --> 00:09:12.259
Emergency presenter needed, not emergency joke.

00:09:12.259 --> 00:09:14.659
So you'll have to wait on that.

00:09:14.659 --> 00:09:15.000
All right.

00:09:15.000 --> 00:09:16.110
So what of the command line here.

00:09:16.110 --> 00:09:19.129
We've made it really, really big so everyone can see.

00:09:19.129 --> 00:09:21.330
Where does it live?

00:09:21.330 --> 00:09:30.750
Well, we can go to Var, DB, there's a bunch of stuff in
here that you will notice that one of them is DS local.

00:09:30.750 --> 00:09:32.940
So Var DB DS local.

00:09:32.940 --> 00:09:33.980
We take a look inside here.

00:09:33.980 --> 00:09:35.940
Inside here is nodes.

00:09:35.940 --> 00:09:37.970
I can change into the nodes directory.

00:09:37.970 --> 00:09:38.950
There's default.

00:09:38.950 --> 00:09:40.090
Go into there.

00:09:40.090 --> 00:09:45.379
Here's my basic folder structure.

00:09:45.379 --> 00:09:47.970
Aliases, configure groups, networks, users.

00:09:47.970 --> 00:09:53.759
If I cd into users, I will actually get a list
of all the users who are current on this system.

00:09:53.759 --> 00:09:54.629
All right?

00:09:54.629 --> 00:10:03.350
I can do more on the Apple user and you will actually see
essentially what you would have gotten out of Net Info.

00:10:03.350 --> 00:10:05.500
But now in a P-list delineated format.

00:10:05.500 --> 00:10:06.950
All right?

00:10:06.950 --> 00:10:09.860
More on this in a little bit.

00:10:09.860 --> 00:10:11.620
Let's get out of there.

00:10:11.620 --> 00:10:16.000
Go to System Preferences, Accounts.

00:10:16.000 --> 00:10:17.870
I can go in here, I can hit plus.

00:10:17.870 --> 00:10:22.360
And by creating account -- first of all notice that you
can create groups from here, if you haven't seen that.

00:10:22.360 --> 00:10:23.700
Task, group.

00:10:23.700 --> 00:10:26.129
( Applause )

00:10:26.129 --> 00:10:26.689
>> Thank you.

00:10:26.690 --> 00:10:28.360
I had nothing to do with that.

00:10:28.360 --> 00:10:33.500
You can actually scroll up and down here through of
the membership, add users and groups to the groups.

00:10:33.500 --> 00:10:37.340
So on a local machine without a directory
service providing group resolution --

00:10:37.340 --> 00:10:40.040
you can actually do this locally in a graphical environment.

00:10:40.039 --> 00:10:43.879
I can also come up here, create a new user.

00:10:43.879 --> 00:10:48.110
Standard, for example.

00:10:48.110 --> 00:10:51.649
Hayman's joke.

00:10:51.649 --> 00:10:54.259
Password, create account.

00:10:54.259 --> 00:10:57.500
It's going to sit here for a little bit.

00:10:57.500 --> 00:11:00.259
I now do an LS.

00:11:00.259 --> 00:11:04.980
You can see that there's a hay men's joke
file, and this is our brand new user.

00:11:04.980 --> 00:11:06.210
All right?

00:11:06.210 --> 00:11:08.700
Now, do not do --

00:11:08.700 --> 00:11:10.290
( Laughter )

00:11:10.289 --> 00:11:14.230
>> All right?

00:11:14.230 --> 00:11:20.200
We do not support -- and let me -- let me
show this for the rest of you in the back.

00:11:20.200 --> 00:11:26.009
We do not support in any way editing these
directories while the system is live.

00:11:26.009 --> 00:11:31.039
I will tell you something that will help you and
what I really like about the fact that we are going

00:11:31.039 --> 00:11:36.319
to flat files is that as the System Administrator,
there are times when you need to push out a new user.

00:11:36.320 --> 00:11:37.629
All right?

00:11:37.629 --> 00:11:42.210
And David O'Rourke told me not to tell you to tell you this.

00:11:42.210 --> 00:11:45.379
So if he's around, tell him I didn't tell you.

00:11:45.379 --> 00:11:48.529
But what I'm interested in is not
actually editing user records live.

00:11:48.529 --> 00:11:54.509
But if you're an administrator and you need a new
user on these machines, all it is, is a file push.

00:11:54.509 --> 00:11:57.319
You don't have to have an interactive
script on the other end.

00:11:57.320 --> 00:12:00.410
( Applause )

00:12:00.409 --> 00:12:04.959
>> Push out a new file, push out a
password hash, and a Var D shadow hash.

00:12:04.960 --> 00:12:08.500
You now have a user record and
a password hash to go with it.

00:12:08.500 --> 00:12:12.809
And all you've got to do is hump directory
services, and you'll be able to use that user.

00:12:12.809 --> 00:12:18.129
Now, Dave seems to think that's a live editing
of the data store, which it kind of is.

00:12:18.129 --> 00:12:20.379
But I think you will find that should work okay.

00:12:20.379 --> 00:12:23.549
But Dave told me to tell you not to say that.

00:12:23.549 --> 00:12:26.279
And back to the slides please.

00:12:29.450 --> 00:12:31.310
So, local records.

00:12:31.309 --> 00:12:33.269
Single user mode.

00:12:33.269 --> 00:12:36.819
This is really where this becomes
important, and this is fully supported.

00:12:36.820 --> 00:12:38.370
All right?

00:12:38.370 --> 00:12:42.990
In 10.4 if you went into single user mode, there
were typically some services that you had to start

00:12:42.990 --> 00:12:46.320
up if you wanted to easily manipulate
user records and passwords.

00:12:46.320 --> 00:12:48.310
You now don't have to do that.

00:12:48.309 --> 00:12:48.939
All right?

00:12:48.940 --> 00:12:50.720
It's just a flat file copy.

00:12:50.720 --> 00:12:55.139
And in single user mode when directory services
is not running it is perfectly acceptable

00:12:55.139 --> 00:12:58.299
to use V I on those records and make changes.

00:12:58.299 --> 00:13:03.689
It's also perfectly acceptable to boot it in a
FireWire disc mode, and actually make changes

00:13:03.690 --> 00:13:06.700
in that way from the system and then reboot it live.

00:13:06.700 --> 00:13:12.450
I'm really, really excited about this, because it means
when you're creating an image, you can actually put users

00:13:12.450 --> 00:13:16.590
and groups into that image just
by copying down flat files to it.

00:13:16.590 --> 00:13:20.540
Furthermore, how many rabe mine users do we have out here?

00:13:20.539 --> 00:13:24.709
How much of a pain in the behind
to rabe mine the Net Info database?

00:13:24.710 --> 00:13:25.639
It was awful.

00:13:25.639 --> 00:13:28.539
Because the Net Info database, even
though it contained the same data,

00:13:28.539 --> 00:13:31.259
the structure that it had was different
from machine to machine.

00:13:31.259 --> 00:13:34.779
So you usually had to exclude it from
all of your rabe mine transcripts.

00:13:34.779 --> 00:13:36.839
You don't have to do that now.

00:13:36.840 --> 00:13:42.259
So -- and as I said, it's easy now to push out files with
replication utilities like A R D and things like that,

00:13:42.259 --> 00:13:48.289
that can actually now begin to give you new users
and such on your machines that are out there.

00:13:48.289 --> 00:13:49.230
All right.

00:13:49.230 --> 00:13:51.000
Augmented records.

00:13:51.000 --> 00:13:53.129
Also something new to 10.5.

00:13:53.129 --> 00:13:58.049
Augmented records are kind of like the magic triangle.

00:13:58.049 --> 00:14:00.469
And since they're kind of like
the magic triangle we had to come

00:14:00.470 --> 00:14:04.110
up with a name that's kind of like the magic triangle name.

00:14:04.110 --> 00:14:07.300
This is what Nicole told you to come to this session for.

00:14:07.299 --> 00:14:12.769
So for, this name has been -- so-so
in front of test audiences.

00:14:12.769 --> 00:14:14.449
So we're rolling it out.

00:14:14.450 --> 00:14:18.840
I wanted to get a graphic for it.

00:14:18.840 --> 00:14:20.399
But this is Friday.

00:14:20.399 --> 00:14:22.199
All the graphic shapes have been used up.

00:14:22.200 --> 00:14:28.770
So what we're looking for here is a
geometric shape and an exciting word.

00:14:28.769 --> 00:14:38.149
And so we are know coining, you heard it
here first -- the Cylinder of Destiny.

00:14:40.529 --> 00:14:43.610
That's the reaction I wanted, you might
actually hear what the waiter said.

00:14:43.610 --> 00:14:50.940
So the Cylinder of Destiny goes a little like this.

00:14:50.940 --> 00:14:55.480
You allow Admins to add attributes
from -- to augment other records.

00:14:55.480 --> 00:14:55.769
All right?

00:14:55.769 --> 00:14:57.870
And we've got a graphic here that kind of shows you this.

00:14:57.870 --> 00:14:59.240
So I've got my iMac.

00:14:59.240 --> 00:15:00.180
All right?

00:15:00.179 --> 00:15:05.589
I've used the active directory plug-in
just like -- Eric and Dave intended it.

00:15:05.590 --> 00:15:06.560
All right?

00:15:06.559 --> 00:15:11.409
You're going direct app to direct -- you're using
records and password resolution out of there.

00:15:11.409 --> 00:15:18.579
However, in the magic triangle scenario you are unable
to do things to the actual user records themselves.

00:15:18.580 --> 00:15:24.200
With the magic triangle you can put groups on the
Open Directory side and you can actually add users

00:15:24.200 --> 00:15:26.240
from AD to those and manage those groups.

00:15:26.240 --> 00:15:28.680
But you couldn't manage those individual users.

00:15:28.679 --> 00:15:36.539
With the Cylinder of Destiny you can now create
records on the other side that allow you to do this.

00:15:36.539 --> 00:15:37.939
That get augmented.

00:15:37.940 --> 00:15:43.140
When the iMac starts up and does a user resolution,
it will pull the user record out of active directory.

00:15:43.139 --> 00:15:47.909
It will then look in Open Directory for other
attributes that are associated with that user.

00:15:47.909 --> 00:15:50.819
You can't overwrite attributes
that active directory gives you

00:15:50.820 --> 00:15:51.670
All right?

00:15:51.669 --> 00:15:54.689
But you can add attributes that weren't there before.

00:15:54.690 --> 00:15:58.640
Nicole showed you some ways of doing
this through the graphical utilities.

00:15:58.639 --> 00:16:02.769
You have to come up with the server in
the standard mode, not in the advanced.

00:16:02.769 --> 00:16:05.539
And then you can drag users in and
it will allow you to set this up.

00:16:05.539 --> 00:16:09.879
I will give you information later on
once we're closer to Leopard shipping.

00:16:09.879 --> 00:16:12.570
Actually, once Leopard probably has shipped.

00:16:12.570 --> 00:16:14.100
But how to do this manually.

00:16:14.100 --> 00:16:18.050
Where you can just put the records in the appropriate
places and do what you need to do with that.

00:16:18.049 --> 00:16:20.620
It's not rocket science, it's not secret sauce --

00:16:20.620 --> 00:16:24.470
it's just a matter of making sure that
information shows up in the correct places.

00:16:24.470 --> 00:16:27.769
With this, you should be more than
able to augment things like NIS.

00:16:27.769 --> 00:16:31.970
You can put augmented records into the local directory.

00:16:31.970 --> 00:16:35.290
You can put augmented records into other LDAP directories.

00:16:35.289 --> 00:16:37.969
This is not necessarily an A DOD thing.

00:16:37.970 --> 00:16:42.389
This is a directory service, directory
service thing that we're giving you here.

00:16:42.389 --> 00:16:44.340
Airport base station support.

00:16:44.340 --> 00:16:46.639
This is one of the other new features,
which is the RADIUS support.

00:16:46.639 --> 00:16:47.919
All right?

00:16:47.919 --> 00:16:50.289
Integrated via Server Admin.

00:16:50.289 --> 00:16:53.509
You're essentially configuring free RADIUS on OS X server.

00:16:53.509 --> 00:16:54.669
That's what we're giving you.

00:16:54.669 --> 00:16:55.909
All right?

00:16:55.909 --> 00:16:58.850
( Applause )

00:16:58.850 --> 00:17:01.790
>> It's specifically set up for use for WPA2

00:17:01.789 --> 00:17:06.559
and such with airport extreme base stations,
but it's a full blown RADIUS server.

00:17:06.559 --> 00:17:12.669
In no way is it free RADIUS dumbed down, so there should
be lots of opportunities to do lots more with this

00:17:12.670 --> 00:17:14.870
than just supporting a bunch of base stations.

00:17:14.869 --> 00:17:19.289
We also intend on putting all of
our modifications back into Darwin.

00:17:19.289 --> 00:17:22.059
So that you're able to use this if
you want to compile the latest version

00:17:22.059 --> 00:17:25.649
of free RADIUS, and get that nice hotness with you.

00:17:25.650 --> 00:17:26.610
All right.

00:17:26.609 --> 00:17:28.750
Changes to OpenLDAP.

00:17:28.750 --> 00:17:33.539
Access control lists.

00:17:33.539 --> 00:17:39.500
Who mistakenly went down the work group manager way
of creating limited users in 10 3 and 10.4 thinking

00:17:39.500 --> 00:17:42.579
that they were in fact limited, because
that's what the interface told you.

00:17:42.579 --> 00:17:45.069
And they were, in fact, limited.

00:17:45.069 --> 00:17:47.210
If you used Workgroup Manager.

00:17:47.210 --> 00:17:51.720
However, if you saw through any of
the LDAP tools, it was just a fallacy.

00:17:51.720 --> 00:17:57.789
Now we're actually pulling that directly into OpenLDAP
and actually giving you access controls on OpenLDAP

00:17:57.789 --> 00:18:00.990
so some cool things like non Admins can add machines.

00:18:00.990 --> 00:18:01.539
All right?

00:18:01.539 --> 00:18:07.230
This was always a problem that you had to put a user out
there with Admin user name and password to create machines.

00:18:07.230 --> 00:18:09.650
Especially if you're doing this
through a script that's start up.

00:18:09.650 --> 00:18:11.000
You can now easily do that.

00:18:11.000 --> 00:18:16.539
And these things are all set in these flap
D underscore Mac OS X server dot com file.

00:18:16.539 --> 00:18:20.059
Now a few builds ago, it looked like this.

00:18:20.059 --> 00:18:22.000
I think that's changed a little bit.

00:18:22.000 --> 00:18:23.809
If we change some of the syntax around.

00:18:23.809 --> 00:18:26.509
But these are the kinds of things
that you're going to find in that file

00:18:26.509 --> 00:18:29.769
that allows you to do some of this tiered Admin support.

00:18:29.769 --> 00:18:34.500
When you go into the GUI and you set up tiered
Admins, this will generate records like this

00:18:34.500 --> 00:18:38.240
in the slash D underscore Mac OS X
server dot com file that will allow you

00:18:38.240 --> 00:18:42.859
to have the tiered Admin support
that really is tiered Admin support.

00:18:42.859 --> 00:18:47.419
If you read my site, you saw we had an article up
there maybe about two or three years ago that talked

00:18:47.420 --> 00:18:51.110
about using DACLs  --
directory access control lists.

00:18:51.109 --> 00:18:53.309
So these are now essentially the same thing.

00:18:53.309 --> 00:18:55.109
But now actually accessed through the GUI tool.

00:18:55.109 --> 00:18:55.959
So very, very cool.

00:18:55.960 --> 00:18:59.880
And this is a little example of it.

00:18:59.880 --> 00:19:01.820
Here we have a half Admin.

00:19:01.819 --> 00:19:03.450
Eric, the half Admin.

00:19:03.450 --> 00:19:05.519
And -- somebody got that.

00:19:05.519 --> 00:19:06.779
That's good.

00:19:06.779 --> 00:19:08.819
Administration capabilities are limited.

00:19:08.819 --> 00:19:11.159
I can then drag groups into this window.

00:19:11.160 --> 00:19:15.250
And actually set up what they can or
can't do all through Server Admin.

00:19:15.250 --> 00:19:16.700
This will do two things.

00:19:16.700 --> 00:19:20.940
One, it will create those access control
list records in the slash D com file.

00:19:20.940 --> 00:19:24.420
It will also generate records in the password
server that allows you to do this as well.

00:19:24.420 --> 00:19:26.259
All right?

00:19:26.259 --> 00:19:31.299
Relax privileges on groups to better serve
blogging, and the wiki stuff that we have.

00:19:31.299 --> 00:19:36.629
So now non Admins with create groups to generate
wiki and kind of share points, services,

00:19:36.630 --> 00:19:41.240
around that to allow you to do that team work group.

00:19:41.240 --> 00:19:42.420
I used a lot of words there.

00:19:42.420 --> 00:19:43.600
Just to say wiki.

00:19:43.599 --> 00:19:50.189
So, and again, this is a similar article that
you might find in that slash D dot com file.

00:19:50.190 --> 00:19:55.840
Overlays. This is when it really gets cool.

00:19:55.839 --> 00:20:00.449
With Leopard, we pick up the latest
version of OpenLDAP, which is 2.3.

00:20:00.450 --> 00:20:02.690
Currently we're running on 2.2 in Tiger.

00:20:02.690 --> 00:20:05.870
So 2 3 provides some very fun stuff.

00:20:05.869 --> 00:20:07.629
Overlays it one of them.

00:20:07.630 --> 00:20:13.130
And an overlay is a little bit of a code that runs on
the LDAP server, and it will actually be able to respond

00:20:13.130 --> 00:20:17.290
to requests before OpenLDAP goes
digging in its database for it.

00:20:17.289 --> 00:20:22.259
These are all, again, set in the LDAP
configuration files, and here's an example of them.

00:20:22.259 --> 00:20:25.349
So we're providing an overlay for nested group support.

00:20:25.349 --> 00:20:31.490
If you're a Legacy UNIX application, you don't
know how to use nested groups are an LDAP.

00:20:31.490 --> 00:20:33.490
Because you're not going to go chase them all down.

00:20:33.490 --> 00:20:37.630
So now you can put an overlay in there that's
actually going to do that work for you.

00:20:37.630 --> 00:20:41.080
So when a command line application
queries a specific attribute,

00:20:41.079 --> 00:20:44.329
that attribute doesn't necessarily
have to exist in the database.

00:20:44.329 --> 00:20:46.559
Instead, this piece of code will go out and grab it for you.

00:20:46.559 --> 00:20:52.859
And here's some examples of the fun stuff
that you can do that's overlay madness.

00:20:52.859 --> 00:20:53.609
All right.

00:20:53.609 --> 00:20:56.029
So all kinds of possibilities that you have with this.

00:20:56.029 --> 00:21:01.109
There's about a dozen or so overlays that
are prebuilt and command in OpenLDAP 2 3.

00:21:01.109 --> 00:21:04.319
You can also create your own.

00:21:04.319 --> 00:21:09.159
Little bits of C that are just a couple of K.
Here's an example of one that I really like.

00:21:09.160 --> 00:21:12.100
We've got a novel e-directory solution.

00:21:12.099 --> 00:21:17.669
It's LDAP based, but I want to put more information
in it than what e-directory has allowed me to do.

00:21:17.670 --> 00:21:21.240
Maybe I get political push back
on actually extended the schema.

00:21:21.240 --> 00:21:23.579
So I need to put a layer in between.

00:21:23.579 --> 00:21:32.689
I can put a couple of Xserve running OpenLDAP 2.3, I go
in there, and I create and I add in a trance parent proxy.

00:21:32.690 --> 00:21:38.120
And what the transaction parent proxy will
allow me to do is it's a real LDAP proxy.

00:21:38.119 --> 00:21:44.789
All of my iMacs can connect to these Open Directory systems,
which are going to proxy the LDAP requests back to Novel.

00:21:44.789 --> 00:21:52.710
However, when I make a right change, when I change
anything on those OpenLDAP servers, it's cast locally

00:21:52.710 --> 00:21:56.100
and it's not pushed back to that novel system.

00:21:56.099 --> 00:22:04.039
So I create a body of information on those two Xserve when
my iMac's connected to the Xserve and query information,

00:22:04.039 --> 00:22:08.490
those L -- the OpenLDAP on those
Xserves will first use that overlay.

00:22:08.490 --> 00:22:10.309
That information that I have changed.

00:22:10.309 --> 00:22:16.129
And then only get the remaining
information back from the Novel system.

00:22:16.130 --> 00:22:20.180
So think of this like the Cylinder
of Destiny, but more cylindrical.

00:22:20.180 --> 00:22:22.289
( Laughter )

00:22:22.289 --> 00:22:23.639
>> See, it really does work.

00:22:23.640 --> 00:22:24.950
All right.

00:22:24.950 --> 00:22:29.870
So instead of putting the augmented records in an
entirely different directory and my client binds to both,

00:22:29.869 --> 00:22:33.369
I am actually putting a directory
between my client and the main one,

00:22:33.369 --> 00:22:36.759
and I'm putting those augmented records,
essentially, those hangs in there.

00:22:36.759 --> 00:22:37.329
All right?

00:22:37.329 --> 00:22:39.069
So lots of possibilities with that.

00:22:39.069 --> 00:22:43.129
You're not going to get it out of the
GUI, but it is part of OpenLDAP 2 3

00:22:43.130 --> 00:22:45.430
and some of the stuff that you can play around with.

00:22:45.430 --> 00:22:49.539
What I'm really excited about is the jabber
presence overlay that I wanted somebody on write.

00:22:49.539 --> 00:22:52.180
Because it was going to be a demo, but nobody did.

00:22:52.180 --> 00:22:54.960
And Nigel, I'm looking at you, if you're out here.

00:22:54.960 --> 00:22:56.759
All right.

00:22:56.759 --> 00:23:00.140
So this is one of the cool things
that you could do with an overlay.

00:23:00.140 --> 00:23:03.250
Right now if I look up a user record,
I don't know if they're on line.

00:23:03.250 --> 00:23:05.170
And I don't know what their status is in jabber.

00:23:05.170 --> 00:23:08.039
And that would be really cool if I could do that.

00:23:08.039 --> 00:23:11.220
So now I can have an LDAP tool that queries a user record,

00:23:11.220 --> 00:23:14.819
does a standard look up for jabber,
dash, status and attribute.

00:23:14.819 --> 00:23:19.939
That invokes this overlay, which would then
go out and actually contact the jabber server

00:23:19.940 --> 00:23:23.549
and determine what their presence might be.

00:23:23.549 --> 00:23:25.269
Well, this is kind of cool.

00:23:25.269 --> 00:23:27.720
You can have an Address Book application.

00:23:27.720 --> 00:23:31.549
Look up the user, you want to give them
a phone call or something like that.

00:23:31.549 --> 00:23:34.019
You will now see their jabber status in there.

00:23:34.019 --> 00:23:38.200
And you will be able to determine whether they are
acceptable for a phone call or whether you should just log

00:23:38.200 --> 00:23:40.289
into jabber and just leave them a message.

00:23:40.289 --> 00:23:44.099
This is the kind of cool stuff that
you can easily add with an overlay.

00:23:44.099 --> 00:23:45.379
All right?

00:23:45.380 --> 00:23:48.970
Password server changes that we've got here in Leopard.

00:23:48.970 --> 00:23:53.870
Tiered Admin support, like a said, with
-- go hand in hand with that an OpenLDAP.

00:23:53.869 --> 00:23:57.819
You can use PW policy to set manually,
or you'll be able to do this

00:23:57.819 --> 00:24:01.059
through the Workgroup Manager interface
when you set up the tiered Admins here.

00:24:01.059 --> 00:24:05.339
Here's kind of an example of one of the PW
policy commands that you might be able to use.

00:24:05.339 --> 00:24:09.259
And you're setting up groups there
and allowing you to go through this.

00:24:09.259 --> 00:24:10.009
All right?

00:24:10.009 --> 00:24:15.390
And again, look for the man pages in Leopard when
that ships for more information along these lines.

00:24:15.390 --> 00:24:17.890
Tiered replications support.

00:24:17.890 --> 00:24:20.140
Again, we're tiers everywhere here.

00:24:20.140 --> 00:24:23.740
Open directory masters can replicate up to 32 replicas.

00:24:23.740 --> 00:24:26.150
And this is just a GUI limitation.

00:24:26.150 --> 00:24:28.600
Engineering believes that this could be a lot more.

00:24:28.599 --> 00:24:31.500
But we think we're going to give you
enough flexibility just within the GUI

00:24:31.500 --> 00:24:33.549
that you probably don't need to do this by hand.

00:24:33.549 --> 00:24:39.980
And each of those replicas, those tier one
replicas, can replicate up to 32 other ones.

00:24:39.980 --> 00:24:42.309
So real quick, how many total replicas is that?

00:24:42.309 --> 00:24:44.129
( Laughter )

00:24:44.130 --> 00:24:51.730
>> 1,057. 32 squared plus 32, plus 1.

00:24:51.730 --> 00:24:53.700
1,057 replicas.

00:24:53.700 --> 00:24:58.720
We think that this probably should
encompass the vast majority

00:24:58.720 --> 00:25:03.400
of openly directory replication
needs for our existing customers.

00:25:03.400 --> 00:25:04.110
All right?

00:25:04.109 --> 00:25:07.709
Like I said, you can probably do more,
but you shouldn't have to manually.

00:25:07.710 --> 00:25:11.360
We use a dif list now, so replication should be much faster.

00:25:11.359 --> 00:25:15.729
Instead of replicated the entire Kerberos
database now we're just doing changes.

00:25:15.730 --> 00:25:22.370
And we're setting it up so that even if your replication
hasn't occurred, a replica will actually look to see

00:25:22.369 --> 00:25:26.329
if any changes have been made before
fully denying an authentication.

00:25:26.329 --> 00:25:28.470
So we can make sure that we're as up-to-date as possible.

00:25:28.470 --> 00:25:32.549
We call this just in time replication.

00:25:34.930 --> 00:25:38.259
So tiered replica madness -- we had to
come up with a cool graphic that looks

00:25:38.259 --> 00:25:41.059
like this -- so one master to 32 replicas.
2

00:25:41.059 --> 00:25:44.099
And each of those replicas can replicate out to another 32.

00:25:44.099 --> 00:25:47.089
So this looks like your replication structure here.

00:25:47.089 --> 00:25:52.079
A master of 32 tier ones, and up to a 1,022 tier twos.

00:25:52.079 --> 00:25:54.039
This is what it looks like in the GUI.

00:25:54.039 --> 00:25:59.930
You're going to see a list of your replicas as before, but
then you can click on that replica tree tab and you're going

00:25:59.930 --> 00:26:05.590
to get a list that looks like this, that allows you to see
your actual replication tree and how it goes out there.

00:26:05.589 --> 00:26:11.529
So some new interfaces here in Server
Admin to set this up and to work with this.

00:26:11.529 --> 00:26:13.129
Machine accounts.

00:26:13.130 --> 00:26:19.710
You no longer have to have your machine accounts bound by
your password server policies that you set up globally.

00:26:19.710 --> 00:26:20.710
All right.

00:26:20.710 --> 00:26:25.680
If you set up a global password server policy that
says you have to expire your password every 90 days,

00:26:25.680 --> 00:26:30.680
you bound the machine to the directory, and that machine
account expired after 90 days and we didn't give you a way

00:26:30.680 --> 00:26:34.690
of changing that, just all your directory
services failed, now you can expire --

00:26:34.690 --> 00:26:37.259
you can actually exempt your machine accounts from this.

00:26:37.259 --> 00:26:37.509
All right.

00:26:37.509 --> 00:26:39.460
So that's new to Leopard.

00:26:40.700 --> 00:26:47.799
What I really like when you bind a machine into the
directory, that machine will have a full Kerberos key tab.

00:26:47.799 --> 00:26:50.509
There is no more SSO Util that you need to do.

00:26:50.509 --> 00:26:54.720
Now all of your clients will have a
full key tab for SSH and host records.

00:26:54.720 --> 00:26:57.680
You will be able to -- yes.

00:26:57.680 --> 00:27:02.440
You can sit down on the server, you can log in,
and you can get single signed on, Kerberos,

00:27:02.440 --> 00:27:07.180
authentication to every single one of your client
machines without having to do any extra work

00:27:07.180 --> 00:27:09.080
on your own except binding them to the directory.

00:27:09.079 --> 00:27:10.730
That's cool.

00:27:10.730 --> 00:27:11.980
That's cool.

00:27:11.980 --> 00:27:17.670
K BC changes to the Kerberos, key distribution center.

00:27:17.670 --> 00:27:23.410
Curb row main support did not confuse
this with cross realm support.

00:27:23.410 --> 00:27:25.420
A much, much different beastie.

00:27:25.420 --> 00:27:29.120
What we're doing it cross the main
support is we're allowing Open Directory

00:27:29.119 --> 00:27:32.009
to leverage active directory for authentication.

00:27:32.009 --> 00:27:35.460
Specifically in relation to the magic triangle.

00:27:35.460 --> 00:27:38.509
And I'll give you an example of kind of how this looks.

00:27:38.509 --> 00:27:43.349
Only one curb row domain is required in most situations.

00:27:43.349 --> 00:27:46.149
It's going to be an effective directory
that's primarily the Kerberos domain.

00:27:46.150 --> 00:27:53.880
And we wanted to give you this to work specifically with
things like teams, the wiki system, stuff like that.

00:27:53.880 --> 00:27:56.640
So here I have my iMac, it's my client.

00:27:56.640 --> 00:28:00.660
It's bound into active directory
as we have done in the past.

00:28:00.660 --> 00:28:02.340
Normal way of doing that.

00:28:02.339 --> 00:28:06.939
We also have an Open Directory system
here set up just like the client.

00:28:06.940 --> 00:28:08.840
It's joined in active directory.

00:28:08.839 --> 00:28:12.490
Currently, if you do this some
things don't work really well.

00:28:12.490 --> 00:28:18.640
For example, I can't use the active directory machine
account that I generated when I joined active directory

00:28:18.640 --> 00:28:21.360
to authenticate to the Open Directory side of things.

00:28:21.359 --> 00:28:26.189
So I actually have try to create an Open Directory
account to get authenticated binding to both sides.

00:28:26.190 --> 00:28:27.820
That really didn't work.

00:28:27.819 --> 00:28:31.710
So now we're allowing you to use
leverage Kerberos between these two.

00:28:31.710 --> 00:28:37.759
So your machine account that you used for active directory
will also allow you authenticated binding via it's Kerberos

00:28:37.759 --> 00:28:42.950
taken from active directory into the open
LDAP server on the Open Directory side.

00:28:42.950 --> 00:28:43.809
All right?

00:28:43.809 --> 00:28:48.990
This should greatly facilitate curb row
authentication between these two systems.

00:28:48.990 --> 00:28:54.690
So I can now set up the server as a magic
triangle scenario, run a wiki server on it,

00:28:54.690 --> 00:28:59.309
my window's clients after getting an SSO ticket
will be able to get all the services they're in.

00:28:59.309 --> 00:29:00.599
All right.

00:29:00.599 --> 00:29:06.879
So that's the new stuff with the
Kerberos KDC . So let info -- dead.

00:29:06.880 --> 00:29:09.570
Tears of joy.

00:29:09.569 --> 00:29:11.490
Not bad, huh?

00:29:11.490 --> 00:29:13.059
Not bad. And RADIUS support.

00:29:13.059 --> 00:29:15.559
So it's some very cool stuff that you have on there.

00:29:15.559 --> 00:29:16.450
All right.

00:29:16.450 --> 00:29:20.319
Also hopefully I gave you a few ideas
about directory service deployments.

00:29:20.319 --> 00:29:21.720
Take it home; think about them.

00:29:21.720 --> 00:29:23.130
Lots of good stuff on there.

00:29:23.130 --> 00:29:27.460
Remember, Cylinder of Destiny!

00:29:27.460 --> 00:29:28.850
All right.

00:29:28.849 --> 00:29:30.909
Now bring out Mr. Paul Suh.

00:29:30.910 --> 00:29:31.850
Thank you.

00:29:31.849 --> 00:29:36.549
( Applause )

00:29:36.549 --> 00:29:37.500
>> I feel really bad.

00:29:37.500 --> 00:29:39.480
I have to follow Joel.

00:29:39.480 --> 00:29:43.000
You know -- and I don't even have a joke for you guys.

00:29:43.000 --> 00:29:48.960
So, my name's Paul Suh and I was with Apple for
years and then went out to do my thing consulting.

00:29:48.960 --> 00:29:53.720
And I have a client where using open
directory as a central identity store.

00:29:53.720 --> 00:29:57.750
A lot of places you have your Macs as clients,

00:29:57.750 --> 00:30:02.339
and then there's somebody else's central
directory store where you're integrating your Macs.

00:30:02.339 --> 00:30:03.500
Well, this is the opposite.

00:30:03.500 --> 00:30:06.869
I want to show you some of the ways that
you can take openly directory and use it

00:30:06.869 --> 00:30:12.549
as a center core and bring in other systems as clients.

00:30:12.549 --> 00:30:16.619
So, just a quick profile of the
company that I'm working with here.

00:30:16.619 --> 00:30:17.719
Quick International Courier.

00:30:17.720 --> 00:30:20.670
It's high priority air freight shipments.

00:30:20.670 --> 00:30:27.600
So -- medical samples, industrial spares, the kind of
spares where every hour the machine's down -- that's --

00:30:27.599 --> 00:30:33.029
you know, $100,000 down the tubes kind of thing.

00:30:33.029 --> 00:30:37.690
Legal documents that absolutely, positively
have to be there -- not tomorrow, but today.

00:30:37.690 --> 00:30:38.759
That kind of thing.

00:30:38.759 --> 00:30:40.180
All right.

00:30:40.180 --> 00:30:42.759
So -- multiple locations world-wide.

00:30:42.759 --> 00:30:47.920
So from London to LA. To cover it all.

00:30:47.920 --> 00:30:50.170
It's mostly Mac.

00:30:50.170 --> 00:30:50.350
All right.

00:30:50.349 --> 00:30:54.589
So here we have -- coming to the by and large is Mac-based.

00:30:54.589 --> 00:30:58.069
However, it's a company like many
others that's grown by acquisition.

00:30:58.069 --> 00:30:58.659
All right?

00:30:58.660 --> 00:31:04.440
So they've bought other companies and the other
companies have various heterogeneous systems

00:31:04.440 --> 00:31:07.390
that have to be brought in.

00:31:07.390 --> 00:31:10.120
So -- what do we want out of this?

00:31:10.119 --> 00:31:14.409
Right? We want to decentralized a data management system.

00:31:14.410 --> 00:31:20.269
So we already had user accounts in three places.

00:31:20.269 --> 00:31:22.059
Just going into this project.

00:31:22.059 --> 00:31:29.339
Right? Had Solaris running in --
the user accounts on Solaris,

00:31:29.339 --> 00:31:31.899
had an IBM university database running on top of that.

00:31:31.900 --> 00:31:34.580
Another set of user accounts.

00:31:34.579 --> 00:31:38.949
And we had yet another set of user accounts in first class.

00:31:38.950 --> 00:31:43.289
And so you know, the very manual process
-- every time you hire a new employee,

00:31:43.289 --> 00:31:44.869
every time you bring a new vendor on board.

00:31:44.869 --> 00:31:48.269
Whatever. Create one here, create
one there -- create a third one.

00:31:48.269 --> 00:31:51.029
But it's only going to get worse.

00:31:51.029 --> 00:31:55.649
Right? So -- we want to implement
network and portable home directories.

00:31:55.650 --> 00:32:00.440
That's going to be the new Open Directory,
that's going to be a fourth place.

00:32:00.440 --> 00:32:08.920
And there's a New portal system being developed in
chrome right now, and that would be fifth place.

00:32:08.920 --> 00:32:09.970
Okay, time out.

00:32:09.970 --> 00:32:14.410
This is not going to work.

00:32:14.410 --> 00:32:22.440
So some general requirements just from the way the
company's organized, this is a company that does 24-7-365.

00:32:22.440 --> 00:32:25.150
They are fanatical about up time.

00:32:25.150 --> 00:32:27.450
Two of everything.

00:32:27.450 --> 00:32:29.900
At least two.

00:32:29.900 --> 00:32:33.350
Five nines up time is -- they really need it.

00:32:33.349 --> 00:32:40.189
How many of you have encountered a situation where is it
-- the customer says, I've got to have five nines up time.

00:32:40.190 --> 00:32:41.830
I've got to be totally reliable.

00:32:41.829 --> 00:32:46.429
And you tell them how much it's going
to cost and they say -- oh, well -- Nah.

00:32:46.430 --> 00:32:48.259
I don't think I want to do that.

00:32:48.259 --> 00:32:50.150
They're serious.

00:32:50.150 --> 00:32:51.259
What does that really mean?

00:32:51.259 --> 00:32:54.240
That means six minutes of down time per year.

00:32:54.240 --> 00:32:58.880
Right? That's serious.

00:32:58.880 --> 00:33:04.240
So -- so specific requirements
things do need to be integrated in.

00:33:04.240 --> 00:33:07.210
I mentioned it just to get it in there.

00:33:07.210 --> 00:33:11.500
Some Mac and windows client systems
-- I'm going bring those in.

00:33:11.500 --> 00:33:14.599
Solaris 9, and IBM universe database.

00:33:14.599 --> 00:33:17.589
Let's bring those in.

00:33:17.589 --> 00:33:20.809
First class e-mail and collaboration
server, again, has to be brought in.

00:33:20.809 --> 00:33:24.440
They have Web objects applications.

00:33:24.440 --> 00:33:30.870
Actually, running Objective-C WebObject
applications, believe it or not.

00:33:30.869 --> 00:33:32.949
And the plone portal that I mentioned.

00:33:32.950 --> 00:33:36.180
So a lot of different things that
have to be brought in and integrated.

00:33:36.180 --> 00:33:39.820
So, what we thought going in, right?

00:33:39.819 --> 00:33:47.250
So -- anyone else do a little study -- try and
cover their -- the bases, look what's going on.

00:33:47.250 --> 00:33:51.920
And we thought, okay, we're going to need
to customize the Open Directory scheme.

00:33:51.920 --> 00:33:52.900
That's not so bad.

00:33:52.900 --> 00:33:55.019
The Open Directory is very flexible.

00:33:55.019 --> 00:33:56.589
Shouldn't be a huge deal.

00:33:56.589 --> 00:33:58.129
All right.

00:33:58.130 --> 00:34:01.030
Probably you need to write some
custom scripts and adaptor code.

00:34:01.029 --> 00:34:05.149
Right? There are probably bits and pieces
here that aren't quite going to fit.

00:34:05.150 --> 00:34:10.139
We have to build some sort of little
connector to make things fit.

00:34:10.139 --> 00:34:14.210
And so what have we learned so far just to give you a taste?

00:34:14.210 --> 00:34:16.480
We thought wrong.

00:34:16.480 --> 00:34:19.590
So far, I mean, no scheme of modifications so far.

00:34:19.590 --> 00:34:23.289
This is a work in progress, like any other large IT project.

00:34:23.289 --> 00:34:25.360
You know, you take it in stages, step by step by step.

00:34:25.360 --> 00:34:27.150
And we're only part way through the process.

00:34:27.150 --> 00:34:29.349
We'll probably encounter other things as we go.

00:34:29.349 --> 00:34:31.909
But so far, no schema modifications.

00:34:31.909 --> 00:34:34.670
Very little custom coding work.

00:34:34.670 --> 00:34:38.970
We have wrote a couple of little
scripts, but it was just one-time stuff.

00:34:38.969 --> 00:34:41.139
Nothing serious.

00:34:41.139 --> 00:34:43.539
So -- what to take home.

00:34:43.539 --> 00:34:48.800
What I first learned how to do presentations
my mentor said, Paul, give them a list of three

00:34:48.800 --> 00:34:53.769
to five things that you just want people to take home.

00:34:53.769 --> 00:34:57.349
So -- my list of take homes here.

00:34:57.349 --> 00:35:01.739
You need to configure your client systems
for the openly directory LDAP tree.

00:35:01.739 --> 00:35:03.429
Right? This isn't so bad.

00:35:03.429 --> 00:35:12.329
Most systems that talk to LDAP understand that there is no
standard LDAP schema and they're pretty flexible about it.

00:35:12.329 --> 00:35:13.349
You can use DS import.

00:35:13.349 --> 00:35:14.920
The command line tool as a bridge.

00:35:14.920 --> 00:35:16.180
It's a very handy little bridge.

00:35:16.179 --> 00:35:21.669
Especially because you can use it in scripts
that actually come from other systems.

00:35:21.670 --> 00:35:27.159
You can use LDAP authentication to provide
authentication to just about any system.

00:35:27.159 --> 00:35:33.460
But the nature of Open Directory
makes it more useful than just sounds.

00:35:33.460 --> 00:35:35.760
You can use Kerberos to enable single sign on.

00:35:35.760 --> 00:35:41.590
It is Kerberos -- full Kerberos MIT KDC.

00:35:41.590 --> 00:35:52.280
Well -- and in a high availability environment such
as with third party systems you can use low balancers.

00:35:52.280 --> 00:35:54.500
So let's look at the system architecture here.

00:35:54.500 --> 00:35:59.019
So in the middle, it's a data center in New Jersey.

00:35:59.019 --> 00:36:01.900
Got openly directory master end, Open Directory replica.

00:36:01.900 --> 00:36:05.680
Right? So the center master, center replica.

00:36:05.679 --> 00:36:16.149
For the Mac OS X systems in various remote offices we have
replicas, remote replicas to consult down on land traffic.

00:36:16.150 --> 00:36:18.250
Right? So far so good.

00:36:20.030 --> 00:36:27.350
We have a Solaris 9, and universe
database also running in the data center.

00:36:27.349 --> 00:36:32.880
First class servers are actually running on Windows .

00:36:32.880 --> 00:36:35.500
Web object (Inaudible) running on Xserves.

00:36:35.500 --> 00:36:40.230
These are all in the -- data center in New Jersey.

00:36:40.230 --> 00:36:46.329
Between these data systems, however,
these non Mac OS X systems, I should say,

00:36:46.329 --> 00:36:50.389
and the master and replica, they have balancers.

00:36:50.389 --> 00:36:54.650
These are actually from -- we're
using ones from Coyote Point.

00:36:54.650 --> 00:36:59.750
Just a quick review here.

00:36:59.750 --> 00:37:02.420
Open Directory server components.

00:37:02.420 --> 00:37:09.240
Obviously we talked about OpenLDAP, just want to
remember, we have the integration starting with LDAP.

00:37:09.239 --> 00:37:13.279
Because that's what most systems know how to talk to.

00:37:13.280 --> 00:37:17.580
However, you've -- remember that
because of the integration you can get

00:37:17.579 --> 00:37:21.539
to the password server and KDC through the OpenLDAP.

00:37:21.539 --> 00:37:27.019
Right? So -- first stage of things the user identification.

00:37:27.019 --> 00:37:34.980
So this is figuring out what -- how to identify users.

00:37:34.980 --> 00:37:38.690
Client systems need to know about the search base.

00:37:38.690 --> 00:37:43.750
Right? So here CN equals users, DC equals OD master.

00:37:43.750 --> 00:37:45.010
Example DC equals com.

00:37:45.010 --> 00:37:49.360
Right? So you're following the tree
down into where the users are located.

00:37:49.360 --> 00:37:51.200
Ditto for groups.

00:37:51.199 --> 00:37:56.369
Right? So pretty standard if you
know the OD server side pieces.

00:37:56.369 --> 00:38:00.619
So, it's a little demonstration
here for the user identification.

00:38:01.849 --> 00:38:02.239
All right.

00:38:02.239 --> 00:38:04.939
So if we can go to Demo A please?

00:38:04.940 --> 00:38:07.230
Okay. There we go.

00:38:07.230 --> 00:38:09.750
All right.

00:38:09.750 --> 00:38:11.590
So here we have Workgroup Manager.

00:38:11.590 --> 00:38:13.990
A couple of users.

00:38:13.989 --> 00:38:16.239
And you know, just user one, user two.

00:38:16.239 --> 00:38:18.250
Fairly standard sorts of things.

00:38:18.250 --> 00:38:25.210
If we look at it here in the Inspector
you can see what the users look like.

00:38:25.210 --> 00:38:33.449
And these are the native attribute
names for the underlying LDAP.

00:38:33.449 --> 00:38:38.849
However, this isn't the way that a
third party system would see this.

00:38:38.849 --> 00:38:42.230
Right? So let's look at it using another tool.

00:38:42.230 --> 00:38:43.510
Let's look at it using LDAP.

00:38:43.510 --> 00:38:46.810
Here I set up LDAP to look at the Open Directory.

00:38:46.809 --> 00:38:51.489
And as we scroll down here see that we're
starting at the top of the search base.

00:38:51.489 --> 00:38:54.799
Distinguished name looking like that.

00:38:54.800 --> 00:38:59.530
If you can see that -- unfortunately
I can't make the LDAP any larger.

00:38:59.530 --> 00:39:06.200
If you come down to users, click
that open, and here's user one.

00:39:06.199 --> 00:39:08.689
And you can see the attributes there are for that user.

00:39:08.690 --> 00:39:16.360
So you can see we're following down this tree from
the root into users, into the user's actual name.

00:39:16.360 --> 00:39:19.190
And has natural distinguished name here.

00:39:20.329 --> 00:39:25.019
So, how do we actually make it work?

00:39:25.019 --> 00:39:30.130
Well, here I have -- this is actually
a Solaris running in a virtual machine.

00:39:30.130 --> 00:39:34.130
And just to show you it's -- you can use the I.D. command.

00:39:34.130 --> 00:39:36.950
Doesn't know about user one.

00:39:36.949 --> 00:39:40.129
All right.

00:39:40.130 --> 00:39:43.260
Now there's a command on Solaris called LDAP client.

00:39:43.260 --> 00:39:47.810
And I have a text clipping here.

00:39:47.809 --> 00:39:51.929
And this is a command -- yeah, it's complex.

00:39:51.929 --> 00:39:54.039
But it's actually fairly straight forward.

00:39:54.039 --> 00:39:57.449
(Inaudible) a default search base.

00:39:57.449 --> 00:39:58.589
All right.

00:39:58.590 --> 00:40:02.670
So that's pretty straight forward.

00:40:02.670 --> 00:40:08.470
Search base for users, for the passwords.

00:40:08.469 --> 00:40:14.299
Here. This just gets you the long
name doing the right thing.

00:40:14.300 --> 00:40:17.300
And this is search base for the groups.

00:40:17.300 --> 00:40:18.860
And the server to go to.

00:40:18.860 --> 00:40:20.610
Right? So it's actually fairly straight forward.

00:40:20.610 --> 00:40:21.760
Yeah, it's long.

00:40:21.760 --> 00:40:24.860
But it's nothing to freak out about.

00:40:24.860 --> 00:40:29.680
If you just take it step by step.

00:40:29.679 --> 00:40:43.989
So -- you can watch it go.

00:40:43.989 --> 00:40:50.009
Okay. And now we can see that it knows about user one.

00:40:50.010 --> 00:40:51.530
All right.

00:40:51.530 --> 00:40:55.390
So knows that its -- I.D. is 1025.

00:40:55.389 --> 00:41:02.339
Go back to Workgroup Manager and see
that user one in fact is you did 1025.

00:41:02.340 --> 00:41:03.390
Knows group 20.

00:41:03.389 --> 00:41:06.369
And knows that group 20 is stacked.

00:41:06.369 --> 00:41:10.150
Right? So, that's user identification.

00:41:10.150 --> 00:41:12.650
Right? Realize that this is just identifying the users.

00:41:12.650 --> 00:41:16.160
It doesn't give you user authentication yet.

00:41:16.159 --> 00:41:16.659
All right.

00:41:16.659 --> 00:41:17.899
So we can go back to the slides please.

00:41:17.900 --> 00:41:28.720
So, we need to -- any kind of situation
in this case not a green field.

00:41:28.719 --> 00:41:35.269
You are not setting up the company from scratch
we had to integrate existing identity stores.

00:41:35.269 --> 00:41:35.679
All right?

00:41:35.679 --> 00:41:38.379
So -- console date users from existing stores.

00:41:38.380 --> 00:41:41.730
And this is an ugly process any way you slice it.

00:41:41.730 --> 00:41:48.510
You know. You've got user John Doe who's John
D. On this system, J. Doe on some other system.

00:41:48.510 --> 00:41:50.860
You have to figure out how they all mesh together.

00:41:50.860 --> 00:41:56.490
Somebody has to go through and, you know, use
your favorite set of tools to figure out how

00:41:56.489 --> 00:41:59.259
to get a consistent set of users
and groups out of these things.

00:41:59.260 --> 00:42:00.370
All right?

00:42:00.369 --> 00:42:03.079
So TextEdit, BBEdit, Excel -- whatever.

00:42:03.079 --> 00:42:05.039
Name your favorite poison.

00:42:05.039 --> 00:42:07.670
All right.

00:42:07.670 --> 00:42:15.230
So -- once you've got it together you can import
the tools, import the users using DS import.

00:42:15.230 --> 00:42:17.659
Right? Command line tool.

00:42:17.659 --> 00:42:18.789
Works really well.

00:42:18.789 --> 00:42:26.619
Works both for the initial import and also
for the -- for maintaining across time.

00:42:26.619 --> 00:42:32.880
Right? And that's important because you are going to
need an interim process for creating and managing users.

00:42:32.880 --> 00:42:35.320
You set things up, get things going.

00:42:35.320 --> 00:42:38.100
You have at some point you're tied in different systems.

00:42:38.099 --> 00:42:41.739
But other systems are still not tied in yet.

00:42:41.739 --> 00:42:45.139
You don't want the big bang -- try to do it all at once.

00:42:45.139 --> 00:42:48.400
A sure recipe for failure -- right?

00:42:48.400 --> 00:42:57.380
One of the nice things about DS import is you can specify
the user's password as part of the DS import file.

00:42:57.380 --> 00:43:04.230
In our situation at least one of the systems
actually stored the password in a recoverable form,

00:43:04.230 --> 00:43:11.500
which made it easier to give users at least a
password for consistency that they already used.

00:43:11.500 --> 00:43:20.130
Right? So first thing we want to
do is specify the user record type.

00:43:20.130 --> 00:43:24.320
So there is two lines in that DS
import file that you might see.

00:43:24.320 --> 00:43:29.920
If you want to see the full -- an almost
full listing of all the different types go

00:43:29.920 --> 00:43:34.230
into Workgroup Manager, select a user, select export.

00:43:34.230 --> 00:43:41.179
And you will get this huge list of different
attributes that work with manager will export.

00:43:41.179 --> 00:43:50.819
And specify a number of columns.

00:43:50.820 --> 00:44:01.330
In order to specify a password in the file, one of your
columns needs to be DS attribute type standard off method.

00:44:01.329 --> 00:44:10.380
And the value you want to put in there is DS -- DS off
method standard back slash colon DS off text off clear text.

00:44:10.380 --> 00:44:16.289
We need the colon in there because that's
part of the name of the actually value.

00:44:16.289 --> 00:44:23.019
But then you have to back slash escape it so that
DS import doesn't treat it as a column separator.

00:44:23.019 --> 00:44:33.019
After that, you specify the column name DS attribute type
standard colon password and the actual clear text password.

00:44:33.019 --> 00:44:34.750
All right?

00:44:34.750 --> 00:44:37.389
So -- a little demonstration.

00:44:37.389 --> 00:44:40.199
Let's actually try that.

00:44:40.199 --> 00:44:45.269
I can go back to -- demo A, please?

00:44:45.269 --> 00:44:49.489
Okay. So here's a -- the text file.

00:44:49.489 --> 00:44:54.849
For an import.

00:44:54.849 --> 00:44:59.839
Bring that up a little bit here again.

00:44:59.840 --> 00:45:04.559
So, exactly the file I had before except I have
given it a slightly different password here.

00:45:04.559 --> 00:45:08.059
There's this column, the colon delimited values.

00:45:08.059 --> 00:45:12.710
And let's see, where is my Terminal window.

00:45:12.710 --> 00:45:14.579
All right.

00:45:14.579 --> 00:45:20.139
So I have a command here, Set Up.

00:45:20.139 --> 00:45:21.559
So here's the command.

00:45:21.559 --> 00:45:23.440
DS import.

00:45:25.199 --> 00:45:29.869
And would it -- the file is going to be imported.

00:45:29.869 --> 00:45:36.920
The node that it's going to go into is going to ignore
dupelicates, and the user that we're going

00:45:36.920 --> 00:45:42.039
to authenticate as -- this needs to
be directory administrator account.

00:45:42.039 --> 00:45:43.579
Notice I don't have to sudo this.

00:45:43.579 --> 00:45:45.340
This is not a root thing, right?

00:45:45.340 --> 00:45:48.700
Because you're authenticating as
the directory administrator.

00:45:48.699 --> 00:45:53.829
Put in directory administrator password.

00:45:53.829 --> 00:45:55.239
And it's read in.

00:45:55.239 --> 00:45:57.489
Go to work book manager.

00:45:57.489 --> 00:45:59.809
And refresh the list of users.

00:45:59.809 --> 00:46:02.929
Now we have another user there.

00:46:02.929 --> 00:46:08.699
And we come here into our Solaris system that we tied in.

00:46:11.030 --> 00:46:16.550
Now notice about that Solaris -- that new user
that was not in Workgroup Manager before.

00:46:16.550 --> 00:46:17.470
All right.

00:46:17.469 --> 00:46:21.429
So DS import -- real easy thing to do.

00:46:21.429 --> 00:46:25.899
Another thing to note is that this kind of file is
really easy to generate as part of a scripting system.

00:46:25.900 --> 00:46:26.400
All right?

00:46:26.400 --> 00:46:33.860
So as part of generating new user accounts, the
H R system can script this in Open Directory.

00:46:33.860 --> 00:46:36.260
And that's one of the things that we are
in the process of implementing right now.

00:46:36.260 --> 00:46:36.870
All right.

00:46:36.869 --> 00:46:43.230
So that the HR people just come in, a
lot of default values will be filled in.

00:46:43.230 --> 00:46:50.960
And poof. The user gets created automatically instead
of having to go from system to system to system,

00:46:50.960 --> 00:46:55.920
and create the users over and over again.

00:46:55.920 --> 00:47:02.050
Right? So you can go back to the slides please.

00:47:02.050 --> 00:47:02.280
All right.

00:47:02.280 --> 00:47:06.160
So LDAP authentication.

00:47:07.360 --> 00:47:13.309
Use this as your base for integrating other systems.

00:47:13.309 --> 00:47:13.889
How does it work?

00:47:13.889 --> 00:47:22.219
It's essentially authentication by a non anonymous
bind you connect via LDAP to the OpenLDAP server.

00:47:22.219 --> 00:47:23.569
And you give it a user name and password.

00:47:23.570 --> 00:47:28.019
And if the OpenLDAP server says
that's good, user's authenticated.

00:47:28.019 --> 00:47:34.739
If it comes back and says no, I am not going to allow
that bind, the user's considered not authenticated.

00:47:34.739 --> 00:47:42.149
Well the key thing to remember is that
this is an indirect use of password server.

00:47:42.150 --> 00:47:47.829
Open LDAP is going to call into the DS APIs and eventually
talk to the password server to do that authentication.

00:47:47.829 --> 00:47:52.250
This gives you all the benefits of open
directory in terms much managing the password.

00:47:52.250 --> 00:47:58.409
So resetting passwords, expiring them, lengthening
and complexity limits, et cetera, et cetera.

00:47:58.409 --> 00:48:05.210
Right? So it's a quick demo of
actually doing LDAP authentication.

00:48:05.210 --> 00:48:11.590
So we can go back to the demonstration please.

00:48:11.590 --> 00:48:13.650
So -- all right.

00:48:13.650 --> 00:48:31.550
So right now try to connect to the Solaris server
using one of the user accounts that we tied

00:48:31.550 --> 00:48:35.780
in with the OpenLDAP, with the LDAP client command.

00:48:35.780 --> 00:48:47.960
It's not going to work.

00:48:49.570 --> 00:48:52.740
nope. Not going to let me in.

00:48:52.739 --> 00:48:56.069
Even -- I've tried that three times
because I am a horrible typist.

00:48:56.070 --> 00:48:58.390
So -- not going to work.

00:48:58.389 --> 00:49:00.089
Hmm? Caps lock.

00:49:00.090 --> 00:49:01.130
I checked that.

00:49:01.130 --> 00:49:02.800
Check caps locked.

00:49:04.670 --> 00:49:06.200
So what do we need to do?

00:49:06.199 --> 00:49:11.299
Well, a couple things.

00:49:11.300 --> 00:49:16.590
First thing we need to do is do another LDAP client
command This is slightly different from the other one.

00:49:16.590 --> 00:49:19.490
I am sure you can spot it easily.

00:49:20.739 --> 00:49:22.389
It's actually one change.

00:49:22.389 --> 00:49:26.670
I've added a -- how many -- let me tweak the window.

00:49:26.670 --> 00:49:29.150
Maybe you can see it a little easier.

00:49:29.150 --> 00:49:29.460
There you go.

00:49:29.460 --> 00:49:33.030
Add a serve authentication method saying PAM LDAP.

00:49:33.030 --> 00:49:40.530
All right, so PAM LDAP is going to be
a simple L dot bind authentication.

00:49:40.530 --> 00:49:54.820
So if we do that, spinning the gears.

00:49:54.820 --> 00:49:56.780
Does the same.

00:49:56.780 --> 00:50:00.850
And there we go.

00:50:00.849 --> 00:50:04.630
But wait, there's more.

00:50:04.630 --> 00:50:06.280
we have to make one other change.

00:50:06.280 --> 00:50:08.030
How many people here are familiar with PAM?

00:50:08.030 --> 00:50:09.910
Applicable Authentication Modules?

00:50:09.909 --> 00:50:15.129
A lot of places use -- a lot of UNIX systems use PAM.

00:50:15.130 --> 00:50:19.910
And we need to make a slight change
into the PAM configuration.

00:50:19.909 --> 00:50:27.690
So this is the PAM -- let's say PAM dot com file.

00:50:27.690 --> 00:50:34.010
And (Inaudible) SSH I am going
to go down to -- to the other.

00:50:34.010 --> 00:50:44.320
And we're going to make just a minor change here.

00:50:44.320 --> 00:50:50.160
And conveniently, I have the thing specified.

00:50:50.159 --> 00:50:51.190
So we're just going to -- it says we're going

00:50:51.190 --> 00:50:59.079
to be adding here the PAM LDAP module
to the list of authentication modules.

00:50:59.079 --> 00:51:15.519
Right? If we do that, come back here -- what happened there?

00:51:25.369 --> 00:51:31.139
I did save it.

00:51:31.139 --> 00:51:35.559
( Laughter )

00:51:35.559 --> 00:51:51.699
>> Demo not being kind.

00:51:51.699 --> 00:51:53.969
All right.

00:51:53.969 --> 00:51:54.589
But -- ah.

00:51:54.590 --> 00:51:55.070
You're right.

00:51:55.070 --> 00:52:00.120
I had -- thank you, over there.

00:52:00.119 --> 00:52:07.569
I had the incorrect text clipping there.

00:52:07.570 --> 00:52:08.670
Oops.

00:52:17.489 --> 00:52:18.250
>> There we go.

00:52:18.250 --> 00:52:20.340
And there we are.

00:52:20.340 --> 00:52:29.670
( Applause )

00:52:29.670 --> 00:52:39.059
>> We're now able to authenticate as a user from OpenLDAP,
from the Open Directory master, into the Solaris system.

00:52:39.059 --> 00:52:41.199
All right?

00:52:41.199 --> 00:52:43.789
And -- let's see.

00:52:43.789 --> 00:52:54.769
So here, notice that the -- since I didn't
bother sending to the home directory,

00:52:54.769 --> 00:52:59.509
coming from Open Directory, it just -- home directory's 99.

00:52:59.510 --> 00:53:06.750
If you actually put in a home directory, one of the things
I should note for you is that you probably will need to set

00:53:06.750 --> 00:53:14.710
up some links on Solaris or whatever to other systems
so that the home directories end up in the right path.

00:53:14.710 --> 00:53:17.039
Because you -- for your Mac OS X users they're going to be

00:53:17.039 --> 00:53:22.739
in the usually network servers, server
name, volume, yadda yadda yadda.

00:53:22.739 --> 00:53:27.179
Right? So, we can go back to the slides please.

00:53:29.030 --> 00:53:30.330
All right.

00:53:30.329 --> 00:53:32.829
So LDAP authentication.

00:53:32.829 --> 00:53:37.819
So -- you can use Kerberos for single sign on.

00:53:37.820 --> 00:53:39.309
So it's real easy.

00:53:39.309 --> 00:53:46.880
You can use the ED MIT dot Kerberos file
that's on Mac OS X. It's the exact same format

00:53:46.880 --> 00:53:50.510
as your standard care B 5 dot com
file for all the UNIX systems.

00:53:50.510 --> 00:53:57.780
You generate your principals using
Workgroup Manager and Server Admin.

00:53:57.780 --> 00:54:04.370
But then you just -- instead of using
Server Admin on the client server,

00:54:04.369 --> 00:54:10.239
on the service server to get the user principals out
of the Workgroup Manager record, you just use K Admin,

00:54:10.239 --> 00:54:15.379
or K Admin dot local to export to a key tab.

00:54:15.380 --> 00:54:18.220
Copy all those files over into the
server, put them in the right places,

00:54:18.219 --> 00:54:23.889
and generally at C , tier be 5, or something like that.

00:54:23.889 --> 00:54:31.619
And turn on the Kerberos authentication
of the and it works.

00:54:31.619 --> 00:54:36.099
Right? Unfortunately, the demo Gods were not being kind.

00:54:36.099 --> 00:54:38.670
It's only worked the last 100 times I've done this,

00:54:38.670 --> 00:54:43.500
but I was able to actually get the
demo system to generate key tabs.

00:54:43.500 --> 00:54:46.639
It was a problem on the openly
directory side for some reason.

00:54:46.639 --> 00:54:48.480
I am not sure why.

00:54:48.480 --> 00:54:51.090
So, we're going to skip this demo.

00:54:51.090 --> 00:54:53.620
Insert emergency demo joke here.

00:54:55.460 --> 00:55:01.630
So -- last piece of the take home -- open
directory failover with load balancers.

00:55:01.630 --> 00:55:02.960
All right?

00:55:02.960 --> 00:55:08.880
Remember that openly directory replicas
are noted in C equals LDAP replicas,

00:55:08.880 --> 00:55:11.880
scenics equal configs, C (Inaudible) yadda, yadda, yadda.

00:55:11.880 --> 00:55:16.380
Mac OS X systems know about this.

00:55:16.380 --> 00:55:19.890
They'll look at that list, they'll
fail over to a replica automatically.

00:55:19.889 --> 00:55:22.420
All those systems will not know about these.

00:55:22.420 --> 00:55:30.450
Will not know to failover one or the other systems.

00:55:30.449 --> 00:55:33.710
So -- so you can use a load balancer to intermediate.

00:55:33.710 --> 00:55:36.769
But then the load balancer itself
becomes a single point of failure.

00:55:36.769 --> 00:55:41.440
Remember, this is the company that
is serious about five nines

00:55:41.440 --> 00:55:45.360
Right? So what do we do?

00:55:45.360 --> 00:55:47.710
Put not one, but two load balancers there.

00:55:47.710 --> 00:55:52.019
And the load balancers themselves
are Coyote Point 480s.

00:55:52.019 --> 00:55:55.400
Essentially have IP fail over, just
like Mac OS X has IP fail over.

00:55:55.400 --> 00:55:57.710
One's a primary, one's the alternate.

00:55:57.710 --> 00:56:01.039
The alternate will be the primary heart beating each other.

00:56:01.039 --> 00:56:06.259
And when the primary fails the alternate
picks up the IP and keeps on trucking

00:56:06.260 --> 00:56:12.610
So you need to set up ports 389 TCP and 636 TCP.

00:56:12.610 --> 00:56:16.980
One's for non SSL, the other's for SSL connections.

00:56:18.489 --> 00:56:25.469
Interestingly enough, you don't need to put your Kerberos
authentication through of the load balancer.

00:56:25.469 --> 00:56:36.199
Why? Because the edu.MIT dot Kerberos
file already lists the various KDCs in it,

00:56:36.199 --> 00:56:44.449
and Kerberos authentication particle is smart enough
to go to an alternate KDC. One thing you need

00:56:44.449 --> 00:56:50.809
to either turn off what's called spoofing, or use what's
called full proxy depending on your load balancer.

00:56:50.809 --> 00:56:56.440
Because Mac OS X systems need to connect directly
to the Open Directory masters and replicas.

00:56:56.440 --> 00:56:59.450
They should not go through the load balancers.

00:56:59.449 --> 00:57:05.899
Because then they'll try and look at
the list of available replicas that's

00:57:05.900 --> 00:57:08.510
in the LDAP and they'll get horribly confused.

00:57:08.510 --> 00:57:13.140
So Mac OS X systems, they go directly
to the masters and replicas.

00:57:13.139 --> 00:57:18.299
Other systems that are not aware of open
directory, those go through the load balancers.

00:57:18.300 --> 00:57:23.610
A cheap way to do load balancing, which is not as reliable

00:57:23.610 --> 00:57:27.400
and may give you some intermittent
failures is to do round-robin DNS.

00:57:27.400 --> 00:57:35.840
So that's an alternative way of doing
load balancing across Open Directory.

00:57:35.840 --> 00:57:40.370
However, really good high availability, you
do want to use a hardware load balancer.

00:57:40.369 --> 00:57:47.219
So -- summarizing this -- the process
was a lot easier than we thought.

00:57:47.219 --> 00:57:50.139
We spent a lot of time going hmm.

00:57:50.139 --> 00:57:52.519
We've really got to get this right.

00:57:52.519 --> 00:57:54.739
Yeah. It's not that hard.

00:57:54.739 --> 00:57:56.649
Most client systems are pretty flexible about things.

00:57:56.650 --> 00:58:01.150
You just have to feed them the right paths into OD.

00:58:01.150 --> 00:58:06.349
The addition that we added was the hardware load balancers.

00:58:06.349 --> 00:58:11.099
And standards and integration made
this a really great choice, right?

00:58:11.099 --> 00:58:14.250
Because we need them for the home directories anyway.

00:58:14.250 --> 00:58:18.869
And because it's all standard spaced
integration, happens easy.

00:58:18.869 --> 00:58:23.769
And because password server and KDC are
tied into OpenLDAP, it all just works.

00:58:23.769 --> 00:58:24.719
There's no step three.

00:58:24.719 --> 00:58:27.459
All right.

00:58:27.460 --> 00:58:29.869
So looking to Leopard, looking forward.

00:58:29.869 --> 00:58:35.359
I'm definitely interested in the
VP -- RADIUS for VPN support.

00:58:35.360 --> 00:58:38.039
Right now the VPNs are being managed entirely separately.

00:58:38.039 --> 00:58:45.739
Not everyone has VPN access, and -- but as there are more
users going into home offices, VPN is going to becoming --

00:58:45.739 --> 00:58:49.879
managing the VPN is going to become
more and more of a burden.

00:58:49.880 --> 00:58:53.320
Also the tiered replication to support in more locations.

00:58:53.320 --> 00:58:59.730
We may not be hitting the real 32 limit per se2.

00:58:59.730 --> 00:59:05.659
But having -- the way that the WAN links run it may be
actually easier to do some tiered application rather

00:59:05.659 --> 00:59:07.809
than running everything back to the data center.