# Wwdc2021 10122

## Transcript

More Videos

Streaming is available in most browsers,and in the Developer app.

About

Transcript

Code

Bring accessibility to charts in your appCharts are an essential tool for understanding data, and critical to understanding ourselves, our health, our finances, and our world. Find out how you can make charts accessible in your apps to people with vision impairments through audio graphs and sonified data. And we'll show you how to improve your charts for accessibility through universal design principles and system accessibility settings.ResourcesaccessibilityReduceMotionAppearance Effects and MotionAudio graphsColor and ContrastisReduceMotionEnabledHD VideoSD VideoRelated VideosWWDC21SwiftUI Accessibility: Beyond the basics

Charts are an essential tool for understanding data, and critical to understanding ourselves, our health, our finances, and our world. Find out how you can make charts accessible in your apps to people with vision impairments through audio graphs and sonified data. And we'll show you how to improve your charts for accessibility through universal design principles and system accessibility settings.

accessibilityReduceMotion

Appearance Effects and Motion

Audio graphs

Color and Contrast

isReduceMotionEnabled

HD VideoSD Video

HD Video

SD Video

SwiftUI Accessibility: Beyond the basics

Search this video…♪ Bass music playing ♪♪Preston Lewis: Hi, my name is Preston,and today I'm going to be talking abouthow to bring accessibility to charts in your apps.Let's go over what we're going to cover today.First, we'll talk about some of the benefitsof making your charts accessible.Then, we'll go over some principlesfor making inclusive decisionsfor the visual aspects of your chart.Next, we'll discuss how to make your chartsperceivable and navigable with VoiceOver.And lastly, we'll talk about an exciting new featurecalled "audio graphs" and how to support them in your app.So, let's get started.Data is so important in our modern world.We use data every day to make decisions about our finances,our health, our goals, and so many other things.But in order to make any use of data,we have to be able to understand it.Charts are useful because they allow us to quickly understandwhat our data is telling uswithout having to get too deep into the details.But charts are not inherently accessiblefor blind or low-vision people.There's no value in a visual chart if you can't see it.The accessibility team has been working hard for yearsto make data more accessible to blind and low-vision people.This year, you can bring the full power of your chartsto people with blindness or low visionby supporting audio graphs in your apps.Let's look at an example.Here is an example app showing historical birth ratesfrom the year 1917 to 1975.When you look at this chart,you can immediately see some interesting features.You can see that the birth rate decreased to a minimumaround the year 1935,and then quickly increased to about the year 1960and then decreased again.We can give blind and low-vision people the same abilityto quickly get a sense of the datausing the new audio graph VoiceOver feature.Let me show you how it works.First, I'm going to find the Audio Graph menuin the VoiceOver rotor.VoiceOver: Audio graph.Preston: Then I'll swipe down until I hear "Chart Details".VoiceOver: Play audio graph. Chart details.Preston: Then I'll double-tapto open the audio graph Explorer view.VoiceOver: Audio graph. Heading.Preston: Then I'll navigate to the Play buttonto play the audio graph,which will play the data series as a continuous tone.VoiceOver: Twentieth-century birth rates.Play audio graph. Button.Preston: Let's listen to it now.VoiceOver: Complete.Preston: Wasn't that exciting?What you just heard was the same chart as the one you see,represented auditorily instead of visually.The pitches you heard correspond to birth rates over timewith lower pitches meaning lower valuesand higher pitches meaning higher values.These pitches exactly mirror the line in the visual chart.So even without seeing the chart,the audio graph allows you to perceive its important featuresin just a few seconds.Now that we have a general sense of the data,let's get more precise informationabout the features we're interested in.The next thing we might want to knowis approximately what the maximum birth rate wasand what year it occurred.To do this, audio graphs provide an interactive modewhere VoiceOver users can double-tap and holdand then drag to listen to the data at their own pace.If they pause, VoiceOver will read the data valuecorresponding to the user's current positionin the audio graph.Let's use this interactive modeto try to find the maximum birth rate and what year it occurred.VoiceOver: Twentieth-century birth rates.Data point. 1960. 268 births per 10,000 people.Preston: By scrubbing through the audio graphuntil we heard the highest pitch,then pausing to hear the data value,we can tell that the maximum birth ratewas 268 per 10,000 people around the year 1960.Because we know the maximum occurred around 1960,we might even be able to inferthat this peak corresponds to the baby boom era.We can figure all of this outjust from the sonified representation of the chart.OK, now let's look at an example of a different kind of chart.This chart is a scatter plot showing the relationshipbetween vehicle weight on the X axisand fuel efficiency on the Y axisfor several different types of automobiles.In the audio graph for this chart,each tone you hear will represent a data pointfor one automobile,just like each visual data point on the visual chart.The pitch of each tone will representthe automobile's fuel efficiency in miles per gallon,so higher pitches signify more fuel-efficient vehicles.Take a second to think about what you expect to hearwhen I play this audio graph.Let's hear what it sounds like.Try to listen to hearwhether the data is trending upwards or downwards.VoiceOver: Complete.Preston: Hopefully you heard the downward trend.This trend means that bigger automobilestend to be less fuel-efficient in this data set.Imagine how much longer it would have takento understand this relationshipif we only had the raw data points available to usand we had to look at each data point individually.Also, if you were listening closely,you might have heard the very high-pitched outlierin this data set.It sticks out in the audio graphjust like it sticks out in the visual chartand happens to be the only hybrid vehicle in this data set.If you wanted to get more information about the outlier,you could use the interactive modeto navigate through the datauntil you hear the highest pitch,then pause to hear the data value,just like we did with the birth rate chart.In addition to the audio graph,this explorer view provides summary informationabout important features of the datalike shape, trend, and outliers,which are inferred from an automatic statistical analysisof this chart's data.Along with the audio graph,VoiceOver can read this summary informationto complete our understanding of the data.OK, let's quickly recap the benefits of accessible charts.Making your charts accessibleallows your data-rich applicationsto reach wider audiences,including blind and low-vision people.It will empower your users by giving them helpful toolsfor understanding the data in your charts,which will help them leverage the incredible power of datain their personal and professional lives.And lastly, with new API coming this year,making your charts is easier than ever before.I'm really excited to show youhow to support audio graphs in your apps,but we need to cover some generalchart accessibility topics first,starting with how you can make your chartsmore visually accessible.There are a few simple things you can doto make your visual charts more understandable for everybody.Take this chart as an example.This is simple line chart that shows average monthly rainfallfor tropical and arid regions.Let's apply some accessibility principlesto improve the visual accessibility of this chart.First, it's important to use high-contrast colorswhenever possible.High contrast between foreground and background colorsmakes your chart easier to look at and understand,especially for people with low vision.As you can see, the lines' contrastagainst their background is pretty low.The title and label text also seem a bit dim.Let's update these colors to have higher contrastagainst the background.That's much better.You can check contrast ratios between colorsto determine whether or not the contrast is sufficient.The Accessibility Inspector that comes bundled with Xcodehas a Color Contrast Calculator that you can use.It's good to aim for contrast ratios of at least 4.5:1.The next thing you can doto improve your chart's visual accessibilityis to avoid problematic color pairings.It's generally good practiceto avoid using red and green together if possible.Red and green color blindness is the most common typeand using these colors togethercan make your chart difficult to understand for some people.So here's the line chart again,with a green line representing rainfall in tropical regionsand a red line representing rainfall in arid regions.You can probably tell which data series is whichusing the color encoding in the legend.But if you have deuteranopia,a form of red-green color blindness,the chart might look something more like this to you.It would be hard for you to tellwhich line represents tropical rainfalland which line represents arid rainfall with these colors.Let's improve this by replacing the red color with blue.This might not seem like a huge change,but to someone with red-green color blindness,this chart might now look like this.With this small adjustment,it becomes easy for someone with red-green colorblindnessto spot the difference between the series.It's also good to avoid using blue and yellow togetherbecause this family of color blindnessis the second most common.These are some good improvements,but let's take this one step furtherby using symbols in addition to colorfor distinguishing your data series.Using data symbols makes it so that people can understandyour chart without having to rely on color at all.So here's our chart again.And now let's add some symbols for each data series.Notice the tropical data series has circles now,and the arid data series has squares.You can tell which series is which nowjust by looking at the associated symbols.This means that even a person who can't perceive color at allcan now understand your chart.It's good to do all of these things by default,but again, sometimes design or product constraintsmight limit your choice of colorsor decision to include symbols.In these cases, you can still provide an accessible experienceby supporting a few simple accessibility settings.If you can't have symbols in your chart for the default case,you can still provide an accessible experienceby adding symbols when the Differentiate Without Colorsystem accessibility setting is enabled.If you can't easily change your color set for product reasons,consider adopting higher-contrast colorswhen the Increase Contrast accessibility setting is set.Reducing the use of transparencycan also make your chart more visually accessible.If your chart uses transparency effects,consider disabling them when the Reduce Transparencyaccessibility setting is on.If you're building a macOS rather than an iOS app,each of these settings has a counterpart on macOSthat you can support.You'll find links to developer documentation for these APIsin the materials for this session.Now let's look at how we can make your data navigablefor VoiceOver.Now, I love coffee, and I love programming.Let's pretend for a minute there's a relationshipbetween the amount of coffee consumedand amount of code an engineer produces as shown in this chart.Just pretend.Also, the data goes up to 12 cups of coffee,But don't worry, no engineers were harmedin the making of this data; it's all made up.All right, let's see how we can make this data navigablefor VoiceOver users.Here's an example snippet of code from a chart view classand its corresponding model object.The chart view might have a reference to its model,and a function for drawing itself.And the model might have the chart's title and data pointscontained in a simple struct.The first thing you'll want to dois make the chart a container.This will help VoiceOver group your chart elements correctlyand aid in navigation.To make your chart a container,simply override accessibilityContainerTypeon your ChartViewand return the semanticGroup container type.Again, this is important for VoiceOver navigationand communicating which elements belong to the chart.Next, we need to give our chart an accessibilityLabel.This tells VoiceOver what to speakwhen it encounters your chart.Typically, this should just be your chart's titleor something similar that VoiceOver can speakto uniquely identify your chart in your UI.Last but not least, you'll want to providean accessibility element for each data point.You can provide these elementsby overriding your chart view's accessibilityElements property.This will create elements inside your chartthat VoiceOver can navigate,so that people can get informationabout individual data points.To implement this, you can simply use "map"to build an array of accessibility elementsfrom your list of data points.For each data point,we'll create a new UIAccessibilityElement object,specifying the ChartView as its accessibilityContainer.Then, we'll provide a string representation of the data pointfor the element's accessibilityValue property.This string is what VoiceOver will speakwhen it navigates to these data point elements.In your code,you'll probably want this string to be localized,and you may want to use a strings dictionaryto define proper pluralization rules.For this example, though, let's just keep it simple.Lastly, we need to provide an accessibility framefor our element so that VoiceOver knows where it liveson the screen.You'll probably already have logic for computing the framefor each data point elsewhere,since you needed this to draw the visual chart.If you have it available, you can reuse that logic here.You can now return your finished accessibility elementfor this data point.All right! Let's see what we've accomplished so far.VoiceOver: Cups of coffee versus lines of code.Zero cups. Twenty lines of code.One cup. Thirty lines of code.Two cups. Thirty-five lines of code.Three cups. Thirty-two lines of code.Preston: Great!As you heard, VoiceOver now speaks the titlewhen it focuses an element inside the chartbecause we made the chart a semantic groupand gave it an accessibility label.We also made it possible to navigate through each data pointby creating a UIAccessibilityElementto represent each one.There's one more thing I want to mention before we move on.Sometimes you might have hundredsor even thousands of data points.In these cases, you definitely don't want to makean accessibility element for each data pointbecause there will just be way too many to navigate.Instead, we suggest breaking up your chartinto reasonable intervals and making an accessibility elementfor each interval rather than each data point.This will provide a better navigation experienceas well as improve performancewhile still being understandable.We're not done yet; we can do even more.Making data navigable is important,but we're still only presenting raw data to VoiceOver usersone point at a time.The value of charts is their ability to show uswhat the data is really telling us,and to help us look beyond individual data points.This is where audio graphs come in.So now -- finally -- let's talk abouthow to implement audio graph support for your chart.Imagine we have a ChartModel structthat contains all the information we needto define a particular chart.In your code, you probably have a model objectthat looks something like this already.If you don't, don't worry.These concepts will still apply to your codehowever it's organized.For our example, let's say a chart has a title and a summary,it has an X and a Y axis,and each axis has a title as well as a numeric rangerepresenting the minimum and maximum displayable valuesfor the axis.And lastly, it has an array of data pointscontaining our chart's actual data.We'll use the information in this example model objectto enable the audio graph feature for our chart.First, import the Accessibility framework,then extend your ChartView classto conform to the AXChart protocol.Conforming to the AXChart protocol is easybecause there's only one property to support.You just need to implement accessibilityChartDescriptor.The chart descriptor object you constructwill contain all of the information VoiceOver needsto provide the audio graph experience.Let's walk through how to build one of these chart descriptorsstep by step.First, we need to create an axis descriptor object for each axis.Each axis descriptor provides information to VoiceOverabout whether it represents categorical or numerical data,the range of displayable values for the axis,the positions of grid lines,and how to format speakable data values.Since the X axis is numeric for our coffee chart,we'll create a numeric axis descriptor.If we had categorical data on our X axis,we'd use a categorical axis descriptor instead.We'll provide the title and range for this axisusing our model object.We can also optionally providethe positions of grid lines on this axis if we have them.When you provide grid lines,they're represented in the audio graph as haptic feedbackduring playback and interaction.We'll leave this empty for nowsince we don't have any X-axis grid lines in this chart.For numeric axes, we also need to createa valueDescriptionProvider closure.This closure is very important because it tells VoiceOverhow to speak the values on this axis,so it can say "5 cups" instead of just saying "5".For this axis, we'll format the description to speak "cups"after the value.Again, in your code,you would probably want to localize this stringwith proper pluralization rules,but let's keep this example simple.We'll do the same thing to create an axis descriptorfor our Y axis, except we'll format our value descriptionto say "lines of code" rather than "cups."Now that we have the basic structure of our chart defined,let's add the data.To do this, you add a data series descriptorfor each data series.We only have one data series in this chart,so we'll just create one data series descriptor,passing in the name of the series,whether or not it is continuous,and the actual data points for this series.You should pass "false" for "isContinuous"when the series is visually representedusing discrete marks, like points or bars,and you should pass "true"when the series is visually represented as a line.For the series' data,we need to provide an array of AXDataPoint objects.The easiest way to do this is to just map themfrom the data in the chart model.We're almost there!We just have one last thing to do.And that's to put all the pieces togetherto build our AXChartDescriptor object.We'll give it a title,which should, again, be the title of our chart.Then, if we have one, we can provide a summary of our chart.This is kind of like providing alt text for your chart.You should use this property to communicatethe most important insights from your datain a sentence or two.This summary text will be presented to usersin the audio graph explorer view.This can be incredibly helpful to VoiceOver userstrying to understand your chart.Lastly, we'll provide the axis and data series descriptorswe created earlier to complete our chart descriptorand then we'll return it.That's it! Let's see the final result.VoiceOver: Audio graph. Play audio graph.Chart details.Audio graph. Heading: Cups of coffee versus lines of code.Play audio graph. Button.Complete.Preston: Let's recap.Be sure to make accessible choicesfor the visual design of your chart.This includes using good contrast ratios,using symbols in addition to colorto differentiate categories of data,and avoiding color schemes that might be problematicfor colorblind users.Be sure to expose your data elementsin the accessibility tree to make themperceivable and navigable to VoiceOver users.And last but not least,implement the AXChart protocol and accessibilityChartDescriptoron your chart view to allow VoiceOver usersto get the same value out of your chart as sighted users.Now you have everything you needto create rich, accessible charts for everyone.We hope you'll use these tools to empower your userssince data is so incredibly important in our lives.Charts are one of our very best toolsfor understanding data in a data-rich world,and now you can bring this benefit to everyone!♪

♪ Bass music playing ♪♪Preston Lewis: Hi, my name is Preston,and today I'm going to be talking abouthow to bring accessibility to charts in your apps.

Let's go over what we're going to cover today.

First, we'll talk about some of the benefitsof making your charts accessible.

Then, we'll go over some principlesfor making inclusive decisionsfor the visual aspects of your chart.

Next, we'll discuss how to make your chartsperceivable and navigable with VoiceOver.

And lastly, we'll talk about an exciting new featurecalled "audio graphs" and how to support them in your app.

So, let's get started.

Data is so important in our modern world.

We use data every day to make decisions about our finances,our health, our goals, and so many other things.

But in order to make any use of data,we have to be able to understand it.

Charts are useful because they allow us to quickly understandwhat our data is telling uswithout having to get too deep into the details.

But charts are not inherently accessiblefor blind or low-vision people.

There's no value in a visual chart if you can't see it.

The accessibility team has been working hard for yearsto make data more accessible to blind and low-vision people.

This year, you can bring the full power of your chartsto people with blindness or low visionby supporting audio graphs in your apps.

Let's look at an example.

Here is an example app showing historical birth ratesfrom the year 1917 to 1975.

When you look at this chart,you can immediately see some interesting features.

You can see that the birth rate decreased to a minimumaround the year 1935,and then quickly increased to about the year 1960and then decreased again.

We can give blind and low-vision people the same abilityto quickly get a sense of the datausing the new audio graph VoiceOver feature.

Let me show you how it works.

First, I'm going to find the Audio Graph menuin the VoiceOver rotor.

VoiceOver: Audio graph.

Preston: Then I'll swipe down until I hear "Chart Details".

VoiceOver: Play audio graph. Chart details.

Preston: Then I'll double-tapto open the audio graph Explorer view.

VoiceOver: Audio graph. Heading.

Preston: Then I'll navigate to the Play buttonto play the audio graph,which will play the data series as a continuous tone.

VoiceOver: Twentieth-century birth rates.

Play audio graph. Button.

Preston: Let's listen to it now.

VoiceOver: Complete.

Preston: Wasn't that exciting?What you just heard was the same chart as the one you see,represented auditorily instead of visually.

The pitches you heard correspond to birth rates over timewith lower pitches meaning lower valuesand higher pitches meaning higher values.

These pitches exactly mirror the line in the visual chart.

So even without seeing the chart,the audio graph allows you to perceive its important featuresin just a few seconds.

Now that we have a general sense of the data,let's get more precise informationabout the features we're interested in.

The next thing we might want to knowis approximately what the maximum birth rate wasand what year it occurred.

To do this, audio graphs provide an interactive modewhere VoiceOver users can double-tap and holdand then drag to listen to the data at their own pace.

If they pause, VoiceOver will read the data valuecorresponding to the user's current positionin the audio graph.

Let's use this interactive modeto try to find the maximum birth rate and what year it occurred.

VoiceOver: Twentieth-century birth rates.

Data point. 1960. 268 births per 10,000 people.

Preston: By scrubbing through the audio graphuntil we heard the highest pitch,then pausing to hear the data value,we can tell that the maximum birth ratewas 268 per 10,000 people around the year 1960.

Because we know the maximum occurred around 1960,we might even be able to inferthat this peak corresponds to the baby boom era.

We can figure all of this outjust from the sonified representation of the chart.

OK, now let's look at an example of a different kind of chart.

This chart is a scatter plot showing the relationshipbetween vehicle weight on the X axisand fuel efficiency on the Y axisfor several different types of automobiles.

In the audio graph for this chart,each tone you hear will represent a data pointfor one automobile,just like each visual data point on the visual chart.

The pitch of each tone will representthe automobile's fuel efficiency in miles per gallon,so higher pitches signify more fuel-efficient vehicles.

Take a second to think about what you expect to hearwhen I play this audio graph.

Let's hear what it sounds like.

Try to listen to hearwhether the data is trending upwards or downwards.

VoiceOver: Complete.

Preston: Hopefully you heard the downward trend.

This trend means that bigger automobilestend to be less fuel-efficient in this data set.

Imagine how much longer it would have takento understand this relationshipif we only had the raw data points available to usand we had to look at each data point individually.

Also, if you were listening closely,you might have heard the very high-pitched outlierin this data set.

It sticks out in the audio graphjust like it sticks out in the visual chartand happens to be the only hybrid vehicle in this data set.

If you wanted to get more information about the outlier,you could use the interactive modeto navigate through the datauntil you hear the highest pitch,then pause to hear the data value,just like we did with the birth rate chart.

In addition to the audio graph,this explorer view provides summary informationabout important features of the datalike shape, trend, and outliers,which are inferred from an automatic statistical analysisof this chart's data.

Along with the audio graph,VoiceOver can read this summary informationto complete our understanding of the data.

OK, let's quickly recap the benefits of accessible charts.

Making your charts accessibleallows your data-rich applicationsto reach wider audiences,including blind and low-vision people.

It will empower your users by giving them helpful toolsfor understanding the data in your charts,which will help them leverage the incredible power of datain their personal and professional lives.

And lastly, with new API coming this year,making your charts is easier than ever before.

I'm really excited to show youhow to support audio graphs in your apps,but we need to cover some generalchart accessibility topics first,starting with how you can make your chartsmore visually accessible.

There are a few simple things you can doto make your visual charts more understandable for everybody.

Take this chart as an example.

This is simple line chart that shows average monthly rainfallfor tropical and arid regions.

Let's apply some accessibility principlesto improve the visual accessibility of this chart.

First, it's important to use high-contrast colorswhenever possible.

High contrast between foreground and background colorsmakes your chart easier to look at and understand,especially for people with low vision.

As you can see, the lines' contrastagainst their background is pretty low.

The title and label text also seem a bit dim.

Let's update these colors to have higher contrastagainst the background.

That's much better.

You can check contrast ratios between colorsto determine whether or not the contrast is sufficient.

The Accessibility Inspector that comes bundled with Xcodehas a Color Contrast Calculator that you can use.

It's good to aim for contrast ratios of at least 4.5:1.

The next thing you can doto improve your chart's visual accessibilityis to avoid problematic color pairings.

It's generally good practiceto avoid using red and green together if possible.

Red and green color blindness is the most common typeand using these colors togethercan make your chart difficult to understand for some people.

So here's the line chart again,with a green line representing rainfall in tropical regionsand a red line representing rainfall in arid regions.

You can probably tell which data series is whichusing the color encoding in the legend.

But if you have deuteranopia,a form of red-green color blindness,the chart might look something more like this to you.

It would be hard for you to tellwhich line represents tropical rainfalland which line represents arid rainfall with these colors.

Let's improve this by replacing the red color with blue.

This might not seem like a huge change,but to someone with red-green color blindness,this chart might now look like this.

With this small adjustment,it becomes easy for someone with red-green colorblindnessto spot the difference between the series.

It's also good to avoid using blue and yellow togetherbecause this family of color blindnessis the second most common.

These are some good improvements,but let's take this one step furtherby using symbols in addition to colorfor distinguishing your data series.

Using data symbols makes it so that people can understandyour chart without having to rely on color at all.

So here's our chart again.

And now let's add some symbols for each data series.

Notice the tropical data series has circles now,and the arid data series has squares.

You can tell which series is which nowjust by looking at the associated symbols.

This means that even a person who can't perceive color at allcan now understand your chart.

It's good to do all of these things by default,but again, sometimes design or product constraintsmight limit your choice of colorsor decision to include symbols.

In these cases, you can still provide an accessible experienceby supporting a few simple accessibility settings.

If you can't have symbols in your chart for the default case,you can still provide an accessible experienceby adding symbols when the Differentiate Without Colorsystem accessibility setting is enabled.

If you can't easily change your color set for product reasons,consider adopting higher-contrast colorswhen the Increase Contrast accessibility setting is set.

Reducing the use of transparencycan also make your chart more visually accessible.

If your chart uses transparency effects,consider disabling them when the Reduce Transparencyaccessibility setting is on.

If you're building a macOS rather than an iOS app,each of these settings has a counterpart on macOSthat you can support.

You'll find links to developer documentation for these APIsin the materials for this session.

Now let's look at how we can make your data navigablefor VoiceOver.

Now, I love coffee, and I love programming.

Let's pretend for a minute there's a relationshipbetween the amount of coffee consumedand amount of code an engineer produces as shown in this chart.

Just pretend.

Also, the data goes up to 12 cups of coffee,But don't worry, no engineers were harmedin the making of this data; it's all made up.

All right, let's see how we can make this data navigablefor VoiceOver users.

Here's an example snippet of code from a chart view classand its corresponding model object.

The chart view might have a reference to its model,and a function for drawing itself.

And the model might have the chart's title and data pointscontained in a simple struct.

The first thing you'll want to dois make the chart a container.

This will help VoiceOver group your chart elements correctlyand aid in navigation.

To make your chart a container,simply override accessibilityContainerTypeon your ChartViewand return the semanticGroup container type.

Again, this is important for VoiceOver navigationand communicating which elements belong to the chart.

Next, we need to give our chart an accessibilityLabel.

This tells VoiceOver what to speakwhen it encounters your chart.

Typically, this should just be your chart's titleor something similar that VoiceOver can speakto uniquely identify your chart in your UI.

Last but not least, you'll want to providean accessibility element for each data point.

You can provide these elementsby overriding your chart view's accessibilityElements property.

This will create elements inside your chartthat VoiceOver can navigate,so that people can get informationabout individual data points.

To implement this, you can simply use "map"to build an array of accessibility elementsfrom your list of data points.

For each data point,we'll create a new UIAccessibilityElement object,specifying the ChartView as its accessibilityContainer.

Then, we'll provide a string representation of the data pointfor the element's accessibilityValue property.

This string is what VoiceOver will speakwhen it navigates to these data point elements.

In your code,you'll probably want this string to be localized,and you may want to use a strings dictionaryto define proper pluralization rules.

For this example, though, let's just keep it simple.

Lastly, we need to provide an accessibility framefor our element so that VoiceOver knows where it liveson the screen.

You'll probably already have logic for computing the framefor each data point elsewhere,since you needed this to draw the visual chart.

If you have it available, you can reuse that logic here.

You can now return your finished accessibility elementfor this data point.

All right! Let's see what we've accomplished so far.

VoiceOver: Cups of coffee versus lines of code.

Zero cups. Twenty lines of code.

One cup. Thirty lines of code.

Two cups. Thirty-five lines of code.

Three cups. Thirty-two lines of code.

Preston: Great!As you heard, VoiceOver now speaks the titlewhen it focuses an element inside the chartbecause we made the chart a semantic groupand gave it an accessibility label.

We also made it possible to navigate through each data pointby creating a UIAccessibilityElementto represent each one.

There's one more thing I want to mention before we move on.

Sometimes you might have hundredsor even thousands of data points.

In these cases, you definitely don't want to makean accessibility element for each data pointbecause there will just be way too many to navigate.

Instead, we suggest breaking up your chartinto reasonable intervals and making an accessibility elementfor each interval rather than each data point.

This will provide a better navigation experienceas well as improve performancewhile still being understandable.

We're not done yet; we can do even more.

Making data navigable is important,but we're still only presenting raw data to VoiceOver usersone point at a time.

The value of charts is their ability to show uswhat the data is really telling us,and to help us look beyond individual data points.

This is where audio graphs come in.

So now -- finally -- let's talk abouthow to implement audio graph support for your chart.

Imagine we have a ChartModel structthat contains all the information we needto define a particular chart.

In your code, you probably have a model objectthat looks something like this already.

If you don't, don't worry.

These concepts will still apply to your codehowever it's organized.

For our example, let's say a chart has a title and a summary,it has an X and a Y axis,and each axis has a title as well as a numeric rangerepresenting the minimum and maximum displayable valuesfor the axis.

And lastly, it has an array of data pointscontaining our chart's actual data.

We'll use the information in this example model objectto enable the audio graph feature for our chart.

First, import the Accessibility framework,then extend your ChartView classto conform to the AXChart protocol.

Conforming to the AXChart protocol is easybecause there's only one property to support.

You just need to implement accessibilityChartDescriptor.

The chart descriptor object you constructwill contain all of the information VoiceOver needsto provide the audio graph experience.

Let's walk through how to build one of these chart descriptorsstep by step.

First, we need to create an axis descriptor object for each axis.

Each axis descriptor provides information to VoiceOverabout whether it represents categorical or numerical data,the range of displayable values for the axis,the positions of grid lines,and how to format speakable data values.

Since the X axis is numeric for our coffee chart,we'll create a numeric axis descriptor.

If we had categorical data on our X axis,we'd use a categorical axis descriptor instead.

We'll provide the title and range for this axisusing our model object.

We can also optionally providethe positions of grid lines on this axis if we have them.

When you provide grid lines,they're represented in the audio graph as haptic feedbackduring playback and interaction.

We'll leave this empty for nowsince we don't have any X-axis grid lines in this chart.

For numeric axes, we also need to createa valueDescriptionProvider closure.

This closure is very important because it tells VoiceOverhow to speak the values on this axis,so it can say "5 cups" instead of just saying "5".

For this axis, we'll format the description to speak "cups"after the value.

Again, in your code,you would probably want to localize this stringwith proper pluralization rules,but let's keep this example simple.

We'll do the same thing to create an axis descriptorfor our Y axis, except we'll format our value descriptionto say "lines of code" rather than "cups."Now that we have the basic structure of our chart defined,let's add the data.

To do this, you add a data series descriptorfor each data series.

We only have one data series in this chart,so we'll just create one data series descriptor,passing in the name of the series,whether or not it is continuous,and the actual data points for this series.

You should pass "false" for "isContinuous"when the series is visually representedusing discrete marks, like points or bars,and you should pass "true"when the series is visually represented as a line.

For the series' data,we need to provide an array of AXDataPoint objects.

The easiest way to do this is to just map themfrom the data in the chart model.

We're almost there!We just have one last thing to do.

And that's to put all the pieces togetherto build our AXChartDescriptor object.

We'll give it a title,which should, again, be the title of our chart.

Then, if we have one, we can provide a summary of our chart.

This is kind of like providing alt text for your chart.

You should use this property to communicatethe most important insights from your datain a sentence or two.

This summary text will be presented to usersin the audio graph explorer view.

This can be incredibly helpful to VoiceOver userstrying to understand your chart.

Lastly, we'll provide the axis and data series descriptorswe created earlier to complete our chart descriptorand then we'll return it.

That's it! Let's see the final result.

VoiceOver: Audio graph. Play audio graph.

Chart details.Audio graph. Heading: Cups of coffee versus lines of code.

Play audio graph. Button.

Complete.

Preston: Let's recap.

Be sure to make accessible choicesfor the visual design of your chart.

This includes using good contrast ratios,using symbols in addition to colorto differentiate categories of data,and avoiding color schemes that might be problematicfor colorblind users.

Be sure to expose your data elementsin the accessibility tree to make themperceivable and navigable to VoiceOver users.

And last but not least,implement the AXChart protocol and accessibilityChartDescriptoron your chart view to allow VoiceOver usersto get the same value out of your chart as sighted users.

Now you have everything you needto create rich, accessible charts for everyone.

We hope you'll use these tools to empower your userssince data is so incredibly important in our lives.

Charts are one of our very best toolsfor understanding data in a data-rich world,and now you can bring this benefit to everyone!♪

10:47 -Chart Model

10:48 -ChartView

14:23 -Basic chart definition example

15:08 -Enabling Audio Graphs

15:35 -Chart Descriptor- Basic

16:55 -Chart Descriptor- Continued

## Code Samples

```swift
class
 
ChartView
: 
UIView
 
{
    
let
 model: 
ChartModel


    
func
 
drawChart
()
 {
        
// ...

    }
}


struct
 
ChartModel
 
{
    
let
 title: 
String

    
let
 dataPoints: [
DataPoint
]
        
    
struct
 
DataPoint
 
{
        
let
 name: 
String

        
let
 x: 
Double

        
let
 y: 
Double

    }
}
```

```swift
extension
 
ChartView
 
{
    
public
 
override
 
var
 accessibilityContainerType: 
UIAccessibilityContainerType
 { 
…
 }
    
public
 
override
 
var
 accessibilityLabel: 
String
? { 
…
 }

    
public
 
override
 
var
 accessibilityElements: [
Any
]
?
 {
        
get
 {
            
return
 model.dataPoints.map { point 
in

                
let
 axElement 
=
 
UIAccessibilityElement
(accessibilityContainer: 
self
)
                axElement.accessibilityValue 
=
 
"
\(point.x)
 cups, 
\(point.y)
 lines of code"

                axElement.accessibilityFrameInContainerSpace 
=
 frameRect(for: point)
                
return
 axElement
            }
        }
        
set
 {}
    }
  
 
private
 
func
 
frameRect
(
for
 
dataPoint
: 
DataPoint
)
 -> 
CGRect
 {
```

```swift
struct
 
ChartModel
 
{
    
let
 title: 
String

    
let
 summary: 
String

    
let
 xAxis: 
Axis

    
let
 yAxis: 
Axis

    
let
 data: [
DataPoint
]

    
struct
 
Axis
 
{
        
let
 title: 
String

        
let
 range: 
ClosedRange
<
Double
>
    }
    
    
struct
 
DataPoint
 
{
        
let
 name: 
String

        
let
 x: 
Double

        
let
 y: 
Double

    }
}
```

```swift
import
 Accessibility


extension
 
ChartView
: 
AXChart
 
{


public
 
var
 accessibilityChartDescriptor: 
AXChartDescriptor
? {
    
get
 {
    }
    
set
 {}
    }
}
```

```swift
public
 
var
 accessibilityChartDescriptor: 
AXChartDescriptor
? {
    
get
 {
        
let
 xAxis 
=
 
AXNumericDataAxisDescriptor
( 
…
 ) 
        
let
 yAxis 
=
 
AXNumericDataAxisDescriptor
(title: model.yAxis.title,
                                                range: model.yAxis.range,
                                                gridlinePositions:[],
                                                valueDescriptionProvider: { value 
in

            
return
 
"
\(value)
 lines of code"

        })
    }
    
set
 {}
}
```

```swift
public
 
var
 accessibilityChartDescriptor: 
AXChartDescriptor
? {
    
get
 {
        
let
 xAxis 
=
 
AXNumericDataAxisDescriptor
( 
…
 )
        
let
 yAxis 
=
 
AXNumericDataAxisDescriptor
( 
…
 )
        
let
 series 
=
 
AXDataSeriesDescriptor
( 
…
 )
        
return
 
AXChartDescriptor
(title: model.title,
                                 summary: model.summary,
                                 xAxis: xAxis,
                                 yAxis: yAxis,
                                 additionalAxes: [],
                                 series: [series])
    }
    
set
 {}
}
```

