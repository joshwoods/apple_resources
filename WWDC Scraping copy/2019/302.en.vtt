WEBVTT

00:00:00.506 --> 00:00:04.500
[ Music ]

00:00:08.180 --> 00:00:10.181
[ Applause ]

00:00:10.346 --> 00:00:10.866
>> Good morning!

00:00:14.596 --> 00:00:16.276
Welcome to In-App Purchases and

00:00:16.276 --> 00:00:17.376
Using Server-to-Server

00:00:17.376 --> 00:00:18.286
Notifications.

00:00:18.836 --> 00:00:20.386
My name is Dana DuBois, and I'm

00:00:20.386 --> 00:00:21.296
an App Store engineering

00:00:21.296 --> 00:00:21.766
manager.

00:00:22.216 --> 00:00:24.806
We'll talk about a number of

00:00:24.806 --> 00:00:25.466
things today.

00:00:26.116 --> 00:00:27.086
First I'm going to start off

00:00:27.086 --> 00:00:29.846
about what's new in StoreKit.

00:00:29.876 --> 00:00:31.246
What have we changed since we

00:00:31.246 --> 00:00:32.036
were here last year?

00:00:32.036 --> 00:00:34.436
Then I'm going to hand it off to

00:00:34.436 --> 00:00:35.896
my colleague Tori, and she's

00:00:35.896 --> 00:00:36.956
going to give you everything you

00:00:36.956 --> 00:00:37.976
need to know about

00:00:37.976 --> 00:00:39.716
Server-to-Server Notifications,

00:00:40.016 --> 00:00:40.906
and how you can make sure you

00:00:40.906 --> 00:00:43.376
have the latest information

00:00:43.586 --> 00:00:44.866
about your subscription

00:00:44.866 --> 00:00:46.786
customers on your backend.

00:00:47.296 --> 00:00:50.166
Next up, Manjeet is going to

00:00:50.166 --> 00:00:51.626
walk through the different

00:00:51.626 --> 00:00:52.836
billing events during the

00:00:52.836 --> 00:00:53.996
subscription lifecycle.

00:00:55.256 --> 00:00:56.896
And then, finally, he's going to

00:00:56.896 --> 00:00:57.726
walk you through what you need

00:00:57.726 --> 00:00:59.366
to know to reduce involuntary

00:00:59.366 --> 00:01:00.906
churn, and keep your

00:01:00.976 --> 00:01:02.816
subscription customers in your

00:01:02.816 --> 00:01:03.466
service.

00:01:03.996 --> 00:01:05.616
So, first.

00:01:05.616 --> 00:01:08.506
What's new in StoreKit?

00:01:09.936 --> 00:01:11.756
Well, this spring we introduced

00:01:11.756 --> 00:01:12.866
subscription offers.

00:01:14.196 --> 00:01:16.266
Subscription offers is a feature

00:01:16.806 --> 00:01:19.676
that we introduced that gives

00:01:19.676 --> 00:01:22.296
you a tool to retain existing

00:01:22.296 --> 00:01:25.156
subscribers as well as win back

00:01:25.156 --> 00:01:26.966
subscribers who used to be in

00:01:26.966 --> 00:01:27.696
the service.

00:01:29.056 --> 00:01:31.516
You can achieve this by having

00:01:31.516 --> 00:01:35.226
up to 10 different active offers

00:01:35.346 --> 00:01:37.716
per subscription, that will give

00:01:37.716 --> 00:01:39.866
you a discount or free service

00:01:39.866 --> 00:01:40.626
that you can give to your

00:01:40.626 --> 00:01:41.356
customers.

00:01:41.736 --> 00:01:45.186
Your app decides what to present

00:01:45.186 --> 00:01:46.156
and to whom.

00:01:46.626 --> 00:01:47.816
It's completely up to you.

00:01:48.626 --> 00:01:49.926
This is such a great feature,

00:01:49.926 --> 00:01:51.406
and such a big feature, that we

00:01:51.406 --> 00:01:52.496
actually have a dedicated

00:01:52.496 --> 00:01:54.036
session to that later today,

00:01:54.176 --> 00:01:56.076
right here at 2 o'clock.

00:01:56.076 --> 00:01:57.696
If you have subscriptions in

00:01:57.696 --> 00:01:59.706
your service, I highly recommend

00:01:59.706 --> 00:02:01.006
you check that out.

00:02:02.836 --> 00:02:03.946
So, what else is new in

00:02:03.946 --> 00:02:04.456
StoreKit?

00:02:04.456 --> 00:02:06.326
Well, this summer, we're

00:02:06.326 --> 00:02:07.936
announcing that we've introduced

00:02:07.936 --> 00:02:08.936
the SKStorefront.

00:02:09.826 --> 00:02:11.906
SKStorefront is how we're

00:02:11.906 --> 00:02:13.806
actually exposing to you, the

00:02:13.806 --> 00:02:15.986
developer, the storefront that

00:02:15.986 --> 00:02:17.566
the user has set their App Store

00:02:18.416 --> 00:02:18.496
to.

00:02:20.836 --> 00:02:22.646
This allows you to present the

00:02:22.716 --> 00:02:24.786
right content to your customers.

00:02:25.146 --> 00:02:26.256
What do you want to merchandise

00:02:26.256 --> 00:02:27.646
to your customers all around the

00:02:27.646 --> 00:02:27.966
world?

00:02:27.966 --> 00:02:29.796
You can use the SKStorefront to

00:02:29.796 --> 00:02:33.026
get specific territory for that

00:02:33.026 --> 00:02:34.376
customer on their device.

00:02:35.116 --> 00:02:36.686
This is the same way that the

00:02:36.686 --> 00:02:39.176
App Store exposes content.

00:02:39.456 --> 00:02:41.956
And, this API gives you the

00:02:41.956 --> 00:02:43.696
storefront that the App Store is

00:02:43.696 --> 00:02:44.696
currently set to.

00:02:45.216 --> 00:02:47.756
One thing to keep in mind is

00:02:47.756 --> 00:02:49.136
that this API returns a

00:02:49.136 --> 00:02:52.466
device-specific cached value for

00:02:52.466 --> 00:02:53.296
that storefront.

00:02:53.856 --> 00:02:55.536
And, it can change over time, so

00:02:55.536 --> 00:02:56.496
there's some stuff you need to

00:02:56.496 --> 00:02:57.886
think about while you're

00:02:57.886 --> 00:02:58.726
interfacing with the

00:02:58.726 --> 00:02:59.516
SKStorefront.

00:03:00.376 --> 00:03:01.456
So, let's get into the code, and

00:03:01.456 --> 00:03:01.976
see how this will all work.

00:03:06.096 --> 00:03:07.936
So, if you're interfacing with

00:03:07.936 --> 00:03:09.416
StoreKit today, you're already

00:03:09.866 --> 00:03:10.806
have a delegate on the

00:03:10.806 --> 00:03:11.986
SKPaymentQueue.

00:03:12.596 --> 00:03:14.376
We've added on that, the ability

00:03:14.376 --> 00:03:17.276
to get a parameter that returns

00:03:17.386 --> 00:03:19.116
the current cached value for the

00:03:19.116 --> 00:03:19.706
storefront.

00:03:20.056 --> 00:03:21.556
Just .storefront, and that'll

00:03:21.606 --> 00:03:22.356
give you the value.

00:03:23.166 --> 00:03:24.746
Because it can change, and

00:03:24.746 --> 00:03:26.036
because it's device-specific, it

00:03:26.036 --> 00:03:27.976
is possible, though unlikely,

00:03:28.176 --> 00:03:28.966
that it will be nil.

00:03:28.966 --> 00:03:30.286
So, you need to check for that

00:03:30.286 --> 00:03:31.636
in your app, and make sure you

00:03:31.636 --> 00:03:34.316
do the right thing.

00:03:34.536 --> 00:03:35.906
Once you have that storefront,

00:03:36.466 --> 00:03:38.366
right on that API, is a country

00:03:38.366 --> 00:03:38.746
code.

00:03:38.996 --> 00:03:40.256
And, that's a 3-letter,

00:03:40.426 --> 00:03:42.386
ISO-standard value for

00:03:42.386 --> 00:03:43.966
territories and countries all

00:03:43.966 --> 00:03:44.606
around the world.

00:03:44.606 --> 00:03:46.226
And, that'll tell you exactly

00:03:46.226 --> 00:03:47.666
what the App Store is set to on

00:03:47.666 --> 00:03:48.366
that device.

00:03:49.076 --> 00:03:49.706
And, that's really it.

00:03:49.706 --> 00:03:51.896
That'll allow you then to take

00:03:51.896 --> 00:03:53.406
that country code, and

00:03:53.706 --> 00:03:55.556
merchandise the right content to

00:03:55.556 --> 00:03:56.486
your customers.

00:03:57.146 --> 00:03:58.496
But, as I said, it can change

00:03:58.496 --> 00:03:59.286
over time.

00:03:59.706 --> 00:04:01.176
So, let's go a little deeper

00:04:01.176 --> 00:04:02.026
into the code, and see what else

00:04:02.026 --> 00:04:02.806
you need to think about.

00:04:03.306 --> 00:04:06.916
Here we have an example of some

00:04:06.916 --> 00:04:09.346
code where you're taking your

00:04:09.346 --> 00:04:11.376
product identifiers that you

00:04:11.376 --> 00:04:13.506
fetch from your backend, passing

00:04:13.506 --> 00:04:14.316
it in and then trying to

00:04:14.316 --> 00:04:16.656
determine if you should fetch

00:04:16.656 --> 00:04:18.995
the metadata, do an SKProduct

00:04:18.995 --> 00:04:20.495
request to determine if you

00:04:20.495 --> 00:04:22.125
should show that content or not.

00:04:22.866 --> 00:04:25.466
So, what the developer has done

00:04:25.466 --> 00:04:27.856
there is, fetch that metadata

00:04:27.856 --> 00:04:30.016
from their backend, and did a

00:04:30.016 --> 00:04:32.326
call to say, hey, is this

00:04:32.326 --> 00:04:34.506
storefront valid for that code?

00:04:34.596 --> 00:04:36.046
And then, you can see here,

00:04:36.046 --> 00:04:37.286
right before you fetch product

00:04:37.286 --> 00:04:39.656
info, you would call shouldShow.

00:04:40.156 --> 00:04:42.556
If that returns true, add that

00:04:42.556 --> 00:04:44.686
identifier to the list of things

00:04:44.686 --> 00:04:45.296
you're going to make an

00:04:45.296 --> 00:04:46.586
SKProduct request on.

00:04:46.706 --> 00:04:48.476
You should do that before you

00:04:48.476 --> 00:04:49.876
make the SKProduct request,

00:04:49.876 --> 00:04:50.986
because if you're not going to

00:04:50.986 --> 00:04:52.736
merchandise that product, it's

00:04:52.736 --> 00:04:54.176
more efficient not to actually

00:04:54.176 --> 00:04:56.286
fetch the product-- the product

00:04:56.286 --> 00:04:56.836
metadata.

00:04:56.836 --> 00:05:01.216
But, as I said before, it can

00:05:01.216 --> 00:05:02.356
change over time.

00:05:02.486 --> 00:05:04.676
The users could actually switch

00:05:04.676 --> 00:05:06.856
accounts, or even-- it's even

00:05:06.856 --> 00:05:08.186
possible within the same account

00:05:08.186 --> 00:05:09.436
to go into the App Store and

00:05:09.436 --> 00:05:10.946
browse different storefronts.

00:05:10.946 --> 00:05:12.456
Developers will do this a lot

00:05:12.456 --> 00:05:13.736
when they actually want to see

00:05:13.736 --> 00:05:15.306
their app in different

00:05:15.306 --> 00:05:16.546
territories around the world,

00:05:16.546 --> 00:05:17.396
see what it looks like.

00:05:17.396 --> 00:05:18.176
See how it's doing.

00:05:18.176 --> 00:05:19.316
There's ways of doing that in

00:05:19.316 --> 00:05:19.746
the App Store.

00:05:20.046 --> 00:05:21.066
So, we want to make sure you

00:05:21.066 --> 00:05:22.746
have the latest information in

00:05:22.746 --> 00:05:23.476
your running app.

00:05:23.766 --> 00:05:26.066
So, on the SKPayment transaction

00:05:26.066 --> 00:05:27.756
observer, we added a new

00:05:27.996 --> 00:05:30.296
paymentQueueDidChange event that

00:05:30.296 --> 00:05:32.166
you can listen for, right inside

00:05:32.166 --> 00:05:32.766
your app.

00:05:33.286 --> 00:05:34.386
That passes in the payment

00:05:34.386 --> 00:05:34.726
queue.

00:05:35.176 --> 00:05:36.196
When you get that, you go

00:05:36.196 --> 00:05:37.666
queue.storefront, and get the

00:05:37.666 --> 00:05:38.786
new value for what that

00:05:38.786 --> 00:05:39.576
storefront is.

00:05:40.056 --> 00:05:41.806
And, again, it's a new

00:05:41.806 --> 00:05:42.336
storefront.

00:05:42.336 --> 00:05:43.606
So, you want to reload all the

00:05:43.606 --> 00:05:46.236
content specific to that new

00:05:46.236 --> 00:05:46.736
store front.

00:05:46.736 --> 00:05:47.466
You might actually have

00:05:47.526 --> 00:05:48.666
different content that you want

00:05:48.666 --> 00:05:49.926
to merchandise based on where

00:05:49.926 --> 00:05:50.976
that user is in the world.

00:05:54.096 --> 00:05:55.776
So, again, call shouldShow.

00:05:56.066 --> 00:05:57.796
Determine if you should, and

00:05:57.796 --> 00:05:59.316
fetch product information for

00:05:59.316 --> 00:05:59.383
it.

00:06:00.146 --> 00:06:02.466
So, what happens when you're

00:06:02.466 --> 00:06:03.436
doing a purchase?

00:06:04.376 --> 00:06:05.306
You've merchandised some

00:06:05.306 --> 00:06:07.346
content, the user's about to go

00:06:07.346 --> 00:06:08.916
buy it, and normally everything

00:06:08.916 --> 00:06:09.576
will go fine.

00:06:09.576 --> 00:06:11.286
But, if the user is actually in

00:06:11.286 --> 00:06:12.646
a different storefront from what

00:06:12.646 --> 00:06:14.076
their device was set to, it is

00:06:14.126 --> 00:06:16.366
possible that the payment queue

00:06:16.616 --> 00:06:18.336
will change storefronts in the

00:06:18.336 --> 00:06:19.476
middle of that transaction.

00:06:20.276 --> 00:06:21.146
So, we've given you a

00:06:21.146 --> 00:06:22.546
paymentQueue delegate that

00:06:22.716 --> 00:06:24.396
allows you to listen to

00:06:24.396 --> 00:06:27.006
paymentQueue: shouldContinue: in

00:06:27.086 --> 00:06:27.826
newStorefront.

00:06:27.926 --> 00:06:29.236
This is your chance to

00:06:29.236 --> 00:06:31.406
double-check, should I allow

00:06:31.406 --> 00:06:32.636
this purchase to happen in this

00:06:32.636 --> 00:06:33.346
new storefront?

00:06:33.946 --> 00:06:35.256
And, again use that same

00:06:35.496 --> 00:06:37.156
shouldShow functionality, where

00:06:37.156 --> 00:06:38.506
you've listed all your product

00:06:38.506 --> 00:06:40.426
identifiers, and you know all

00:06:40.426 --> 00:06:41.436
the territories that those

00:06:41.436 --> 00:06:42.686
products are available in.

00:06:43.126 --> 00:06:45.506
Just-- if it returns true, allow

00:06:45.506 --> 00:06:46.436
the payment to continue.

00:06:47.346 --> 00:06:48.936
To make sure that it's the best

00:06:48.936 --> 00:06:51.756
user experience, we want this to

00:06:51.756 --> 00:06:53.606
return fast, so you shouldn't

00:06:53.606 --> 00:06:55.356
make a server-side call in the

00:06:55.356 --> 00:06:56.596
middle of paymentQueue:

00:06:56.596 --> 00:06:58.066
shouldContinue: newStorefront.

00:06:58.686 --> 00:06:59.876
You should have this information

00:06:59.876 --> 00:07:01.556
cached on your device, what's

00:07:01.556 --> 00:07:03.276
available in the territories,

00:07:03.536 --> 00:07:04.836
ready to go when the payment's

00:07:04.836 --> 00:07:05.316
happening.

00:07:05.666 --> 00:07:07.196
That way, you can return real

00:07:07.196 --> 00:07:08.876
quick, the user can continue

00:07:08.876 --> 00:07:10.646
their purchase, or, if you're

00:07:10.646 --> 00:07:12.616
returning no, you can actually

00:07:13.096 --> 00:07:14.866
inform the user why it's not

00:07:14.866 --> 00:07:16.076
valid in the new storefront.

00:07:17.296 --> 00:07:19.336
So, as I said, maybe it's not

00:07:19.336 --> 00:07:20.616
available in the new territory.

00:07:21.186 --> 00:07:23.036
So, what do you do then?

00:07:23.286 --> 00:07:25.476
Well, when that happens, in your

00:07:25.476 --> 00:07:26.156
paymentQueue:

00:07:26.156 --> 00:07:27.726
updatedTransactions delegate

00:07:27.726 --> 00:07:29.556
call, we'll return an

00:07:29.556 --> 00:07:31.696
SKStoreProductNotAvailable

00:07:31.696 --> 00:07:31.996
error.

00:07:32.536 --> 00:07:34.416
This will inform you that you've

00:07:34.416 --> 00:07:35.846
just told us that you shouldn't

00:07:35.846 --> 00:07:37.306
allow this transaction to happen

00:07:37.306 --> 00:07:38.156
in that new storefront.

00:07:38.336 --> 00:07:39.816
And, here's your chance to

00:07:40.036 --> 00:07:41.116
present a dialog.

00:07:41.476 --> 00:07:43.906
Or, merchandise some other piece

00:07:43.906 --> 00:07:44.836
of content that might be

00:07:44.836 --> 00:07:45.626
equivalent in the new

00:07:45.626 --> 00:07:46.196
storefront.

00:07:46.716 --> 00:07:48.446
Show an alert, update the UI, do

00:07:48.446 --> 00:07:50.336
what you need to do right then

00:07:51.056 --> 00:07:52.476
and there.

00:07:52.676 --> 00:07:54.306
So, that's SKStorefront.

00:07:54.806 --> 00:07:57.496
What else are we introducing?

00:07:58.276 --> 00:08:03.676
Well, in iOS 11, 11.2 and tvOS

00:08:03.676 --> 00:08:07.026
11.2, and macOS 10.13.2, we

00:08:07.026 --> 00:08:08.566
introduced app pre-orders.

00:08:09.826 --> 00:08:11.286
This has been a great feature

00:08:11.286 --> 00:08:13.156
that developers have used all,

00:08:13.396 --> 00:08:14.756
you know, around the world, to

00:08:14.756 --> 00:08:16.116
actually get interest in their

00:08:16.116 --> 00:08:17.386
apps before they're available in

00:08:17.386 --> 00:08:17.866
the store.

00:08:18.636 --> 00:08:19.676
And, we're excited to announce

00:08:19.676 --> 00:08:20.716
that we're introducing that with

00:08:20.716 --> 00:08:22.896
watchOS 6.0 this year, so you

00:08:22.896 --> 00:08:24.636
can market your apps right to

00:08:24.636 --> 00:08:26.336
the Watch, and gain interest

00:08:26.336 --> 00:08:28.566
ahead of time, like having them

00:08:28.566 --> 00:08:29.816
be available for pre-order.

00:08:29.816 --> 00:08:32.025
But, we're also doing one more

00:08:32.025 --> 00:08:32.836
thing this year.

00:08:33.356 --> 00:08:34.826
And, coming soon, we're actually

00:08:34.956 --> 00:08:36.476
going to signal inside the app

00:08:36.476 --> 00:08:38.676
receipt, if the app was

00:08:38.726 --> 00:08:39.996
purchased as a pre-order.

00:08:40.275 --> 00:08:41.996
So, you'll know which of your

00:08:41.996 --> 00:08:43.866
customers have actually

00:08:44.056 --> 00:08:44.966
pre-ordered the app.

00:08:45.566 --> 00:08:46.866
And, you can use that to, you

00:08:47.666 --> 00:08:49.586
know, give them great messages,

00:08:49.586 --> 00:08:50.386
saying thank you for

00:08:50.386 --> 00:08:51.446
pre-ordering my app.

00:08:51.446 --> 00:08:52.636
Or, if you want to unlock some

00:08:52.636 --> 00:08:54.426
additional content as a thank

00:08:54.426 --> 00:08:55.276
you to some of your best

00:08:55.276 --> 00:08:56.776
customers, you can use that

00:08:56.776 --> 00:08:57.286
information.

00:08:57.286 --> 00:08:58.186
That'll be available in the

00:08:58.186 --> 00:08:58.606
receipt.

00:08:58.906 --> 00:08:59.946
And, the great thing about the

00:08:59.946 --> 00:09:01.146
receipt is that this will go

00:09:01.336 --> 00:09:04.796
back to iOS 11, 12, all the way

00:09:04.796 --> 00:09:05.176
back in time.

00:09:05.176 --> 00:09:05.976
It's available in the receipt.

00:09:08.066 --> 00:09:10.066
[ Applause ]

00:09:10.116 --> 00:09:10.966
So, those are some of the things

00:09:10.966 --> 00:09:12.376
that have changed with StoreKit,

00:09:12.376 --> 00:09:13.496
and in-app purchases since we

00:09:13.496 --> 00:09:14.236
were here last year.

00:09:15.006 --> 00:09:16.646
Next up, I'm excited to hand it

00:09:16.646 --> 00:09:18.036
off to my colleague Tori, and

00:09:18.036 --> 00:09:19.056
she's going to talk all about

00:09:19.056 --> 00:09:20.616
Server-to-Server Notifications.

00:09:20.826 --> 00:09:20.946
Tori?

00:09:21.516 --> 00:09:27.500
[ Applause ]

00:09:30.236 --> 00:09:31.506
>> Hi everyone.

00:09:31.556 --> 00:09:33.166
My name's Tori, and I'm very

00:09:33.166 --> 00:09:34.866
excited to be here today to talk

00:09:34.866 --> 00:09:36.036
to you about Server-to-Server

00:09:36.036 --> 00:09:36.886
Notifications.

00:09:38.136 --> 00:09:39.396
We have several new features

00:09:39.396 --> 00:09:40.426
that we want to bring to the

00:09:40.426 --> 00:09:41.706
server-to-server notification,

00:09:41.706 --> 00:09:43.336
and I want to do an in-depth

00:09:43.456 --> 00:09:45.286
talk with you on how you can use

00:09:45.286 --> 00:09:46.796
these to effectively monitor

00:09:46.796 --> 00:09:47.906
your subscription events.

00:09:48.546 --> 00:09:50.286
But, before we get into all

00:09:50.286 --> 00:09:52.316
that, let's first take a look at

00:09:52.316 --> 00:09:53.356
what Server-to-Server

00:09:53.356 --> 00:09:55.096
Notifications are, and how you

00:09:55.096 --> 00:09:56.626
can set up your servers to

00:09:56.666 --> 00:09:56.936
receive them.

00:10:01.596 --> 00:10:02.516
So, Server-to-Server

00:10:02.516 --> 00:10:05.276
Notifications are an HTTP POST

00:10:05.276 --> 00:10:07.126
we send from our server to

00:10:07.226 --> 00:10:08.816
yours, with a JSON body.

00:10:09.506 --> 00:10:10.746
You might recognize these by

00:10:10.746 --> 00:10:11.676
their previous name,

00:10:11.886 --> 00:10:13.596
statusUpdateNotifications.

00:10:14.356 --> 00:10:15.976
Server-to-server notifications

00:10:16.076 --> 00:10:17.856
are incredibly useful for

00:10:17.856 --> 00:10:19.476
getting of-the-moment updates on

00:10:19.476 --> 00:10:21.156
your subscription events, and

00:10:21.156 --> 00:10:22.656
for using them so win back

00:10:22.656 --> 00:10:24.316
customers in cases like

00:10:24.316 --> 00:10:25.226
subscription offers.

00:10:26.436 --> 00:10:27.526
Once you've determined which

00:10:27.526 --> 00:10:28.976
endpoint you want to receive

00:10:29.006 --> 00:10:29.676
your Server-to-Server

00:10:29.676 --> 00:10:31.686
Notifications at, all you have

00:10:31.746 --> 00:10:34.016
to do is return a 200 response

00:10:34.366 --> 00:10:36.426
from that endpoint to indicate a

00:10:36.426 --> 00:10:38.146
successfully received message.

00:10:39.116 --> 00:10:41.206
However, should you not return a

00:10:41.206 --> 00:10:43.736
200 response, we will retry up

00:10:43.906 --> 00:10:45.716
to three times to resend the

00:10:45.716 --> 00:10:46.616
notification to you.

00:10:46.616 --> 00:10:49.916
Once you have determined this

00:10:49.916 --> 00:10:51.766
endpoint, you first have to set

00:10:51.766 --> 00:10:52.956
it up in App Store Connect.

00:10:53.456 --> 00:10:54.826
You can find this place on your

00:10:54.826 --> 00:10:57.156
app's App Information page, in

00:10:57.156 --> 00:10:58.286
the Subscription Status URL

00:10:58.286 --> 00:10:58.656
section.

00:11:03.086 --> 00:11:04.496
In addition to setting up your

00:11:04.496 --> 00:11:05.646
endpoint in App Store Connect,

00:11:06.186 --> 00:11:07.336
there are certain security

00:11:07.336 --> 00:11:08.426
requirements which the

00:11:08.426 --> 00:11:10.406
connection must adhere to in

00:11:10.406 --> 00:11:11.726
order for you to successfully

00:11:11.726 --> 00:11:13.176
receive these notifications.

00:11:13.826 --> 00:11:15.726
Basically, this all sums up to,

00:11:16.086 --> 00:11:17.086
the connection must be App

00:11:17.286 --> 00:11:19.576
Transport Security, or ATS,

00:11:20.186 --> 00:11:20.726
compliant.

00:11:21.486 --> 00:11:22.686
Now, this means a few things.

00:11:23.516 --> 00:11:25.516
First, the certificate must be

00:11:25.516 --> 00:11:27.156
issued by a trusted certificate

00:11:27.156 --> 00:11:27.636
authority.

00:11:29.196 --> 00:11:30.606
The Transport Layer Security

00:11:30.606 --> 00:11:33.386
version, or TLS version, must be

00:11:33.386 --> 00:11:34.426
TLS 1.2.

00:11:35.516 --> 00:11:37.056
You must use one of the provided

00:11:37.126 --> 00:11:39.166
symmetric ciphers, and the

00:11:39.166 --> 00:11:41.116
certificate must be signed and

00:11:41.116 --> 00:11:42.886
hashed using an algorithm which

00:11:42.886 --> 00:11:45.096
is SHA-256 or greater.

00:11:46.556 --> 00:11:47.496
I hope with all this

00:11:47.496 --> 00:11:48.666
information, you have a better

00:11:48.666 --> 00:11:49.636
understanding of what

00:11:49.736 --> 00:11:51.126
Server-to-Server Notifications

00:11:51.126 --> 00:11:52.816
are, and how you can set them

00:11:52.816 --> 00:11:53.106
up.

00:11:53.896 --> 00:11:54.576
Should you need more

00:11:54.576 --> 00:11:56.026
information, you can look up the

00:11:56.026 --> 00:11:56.996
documentation for

00:11:56.996 --> 00:11:59.136
statusUpdateNotifications on

00:11:59.136 --> 00:11:59.966
developer.apple.com.

00:12:05.136 --> 00:12:06.486
So, now that we've looked into

00:12:06.486 --> 00:12:07.376
what Server-to-Server

00:12:07.376 --> 00:12:08.796
Notifications are, and how you

00:12:08.796 --> 00:12:10.376
can receive them, I'm very

00:12:10.376 --> 00:12:11.636
excited to talk to you about the

00:12:11.636 --> 00:12:12.836
new features and new

00:12:12.836 --> 00:12:14.366
notification types we are

00:12:14.366 --> 00:12:15.616
bringing to Server-to-Server

00:12:15.616 --> 00:12:16.426
Notifications.

00:12:17.566 --> 00:12:19.156
So, as we were thinking about

00:12:19.156 --> 00:12:20.356
some new features we could add

00:12:20.356 --> 00:12:21.936
to the notification, we were

00:12:21.936 --> 00:12:23.316
taking a look at the receipt

00:12:23.316 --> 00:12:24.496
fields currently in the

00:12:24.496 --> 00:12:26.596
notification, latest receipt,

00:12:26.776 --> 00:12:27.916
and latest receipt info.

00:12:28.726 --> 00:12:30.546
We noticed that these receipts,

00:12:30.766 --> 00:12:32.186
while useful, only give you

00:12:32.186 --> 00:12:34.056
information about the latest

00:12:34.056 --> 00:12:34.806
in-app purchase.

00:12:35.446 --> 00:12:36.736
So, we were thinking how much

00:12:36.736 --> 00:12:38.446
more useful it would be if we

00:12:38.446 --> 00:12:39.516
could give you your entire

00:12:39.586 --> 00:12:41.186
subscription history when we

00:12:41.236 --> 00:12:42.726
send you the server-to-server

00:12:42.726 --> 00:12:43.466
notification.

00:12:44.156 --> 00:12:46.136
For this reason, we are bringing

00:12:46.136 --> 00:12:47.686
the unified receipt to the

00:12:47.686 --> 00:12:48.976
server-to-server notification.

00:12:49.516 --> 00:12:52.500
[ Applause ]

00:12:56.376 --> 00:12:58.356
So, as a review, the unified

00:12:58.356 --> 00:12:59.866
receipt contains the history of

00:12:59.916 --> 00:13:01.426
subscription purchases for your

00:13:01.426 --> 00:13:02.066
subscription.

00:13:02.646 --> 00:13:04.146
Previously, this incredibly

00:13:04.146 --> 00:13:06.246
valuable information could only

00:13:06.246 --> 00:13:07.266
be obtained through hitting

00:13:07.266 --> 00:13:08.166
verifyReceipt.

00:13:09.336 --> 00:13:10.796
The two receipt fields in the

00:13:10.796 --> 00:13:12.306
notification right now, latest

00:13:12.306 --> 00:13:13.956
receipt, and latest receipt info

00:13:14.276 --> 00:13:16.026
provide an encoded and decoded

00:13:16.026 --> 00:13:17.406
transactional receipt about the

00:13:17.456 --> 00:13:18.456
latest in-app purchase.

00:13:19.266 --> 00:13:20.466
Starting in the fall, you'll

00:13:20.466 --> 00:13:22.266
begin to see one new field in

00:13:22.266 --> 00:13:22.986
the server-to-server

00:13:22.986 --> 00:13:23.756
notification.

00:13:24.586 --> 00:13:25.826
We have decided to call this

00:13:26.166 --> 00:13:27.846
unified receipt, and it will

00:13:27.846 --> 00:13:29.646
contain almost exactly what you

00:13:29.646 --> 00:13:31.016
expect to get from verified

00:13:31.016 --> 00:13:31.376
receipt.

00:13:31.966 --> 00:13:35.316
With the addition of unified

00:13:35.316 --> 00:13:36.506
receipt to the server-to-server

00:13:36.506 --> 00:13:38.476
notification, in most cases,

00:13:38.476 --> 00:13:39.866
this will make latest receipt

00:13:40.036 --> 00:13:41.586
and latest receipt info no

00:13:41.586 --> 00:13:42.846
longer needed.

00:13:43.496 --> 00:13:46.126
However, there is one important

00:13:46.126 --> 00:13:47.656
caveat we must call out here.

00:13:48.166 --> 00:13:49.196
This receipt that we are

00:13:49.196 --> 00:13:51.346
generating for you is not tied

00:13:51.496 --> 00:13:53.256
to a specific install of an app

00:13:53.706 --> 00:13:55.586
on a device, like the receipts

00:13:55.586 --> 00:13:57.196
you are used to receiving as the

00:13:57.196 --> 00:13:57.926
result of a buy.

00:13:58.646 --> 00:14:00.496
For this reason, the receipt

00:14:00.496 --> 00:14:02.006
should always be stored on your

00:14:02.006 --> 00:14:04.716
server, and never locally on a

00:14:04.716 --> 00:14:05.086
device.

00:14:05.906 --> 00:14:09.356
So, with that out of the way,

00:14:09.446 --> 00:14:10.586
let's take a look at what you

00:14:10.586 --> 00:14:11.726
can expect to find in the

00:14:11.726 --> 00:14:13.056
unified receipt in the

00:14:13.056 --> 00:14:14.496
server-to-server notification.

00:14:15.426 --> 00:14:16.736
The first field you will find in

00:14:16.836 --> 00:14:18.206
this JSON object is the latest

00:14:18.206 --> 00:14:18.596
receipt.

00:14:19.136 --> 00:14:20.566
This is an encoded unified

00:14:20.566 --> 00:14:21.656
receipt, which we have just

00:14:21.656 --> 00:14:23.226
generated for you, and you can

00:14:23.226 --> 00:14:25.496
use this to hit verified receipt

00:14:25.496 --> 00:14:26.786
later, if you should need it.

00:14:27.866 --> 00:14:29.226
You will also find the latest

00:14:29.226 --> 00:14:29.936
receipt info.

00:14:30.676 --> 00:14:32.036
This contains an array of

00:14:32.086 --> 00:14:33.616
subscription purchases for your

00:14:33.616 --> 00:14:35.466
subscription, with metadata

00:14:35.466 --> 00:14:36.826
about them to help you track

00:14:36.926 --> 00:14:37.976
what has been going on with your

00:14:37.976 --> 00:14:38.506
subscriber.

00:14:39.706 --> 00:14:40.976
You will also find the pending

00:14:40.976 --> 00:14:41.666
renewal info.

00:14:42.146 --> 00:14:43.766
This contains information about

00:14:43.766 --> 00:14:45.106
the upcoming renewal for your

00:14:45.106 --> 00:14:46.976
subscription, such as if the

00:14:46.976 --> 00:14:48.336
customer is in a price increase

00:14:48.336 --> 00:14:49.776
flow, or they have entered a

00:14:49.776 --> 00:14:50.846
billing retry period.

00:14:50.846 --> 00:14:53.296
We will also include the status

00:14:53.296 --> 00:14:54.556
of the receipt, and the

00:14:54.556 --> 00:14:55.626
environment the receipt was

00:14:55.626 --> 00:14:57.756
produced in, either sandbox, or

00:14:57.756 --> 00:14:58.266
production.

00:14:59.416 --> 00:15:00.906
We chose to name the fields this

00:15:00.906 --> 00:15:02.236
way because this mirrors what

00:15:02.236 --> 00:15:03.476
you expect to receive from

00:15:03.476 --> 00:15:04.276
verify receipt.

00:15:04.766 --> 00:15:06.526
So, hopefully you can reuse your

00:15:06.526 --> 00:15:08.106
parsing logic there to make the

00:15:08.106 --> 00:15:10.116
transition easier here.

00:15:11.666 --> 00:15:14.196
However, latest receipt info

00:15:14.196 --> 00:15:15.956
will be limited to the 100

00:15:15.956 --> 00:15:17.296
latest in-app purchases.

00:15:17.836 --> 00:15:18.936
So, should you need more

00:15:18.936 --> 00:15:20.366
information that this, you can

00:15:20.366 --> 00:15:22.286
always hit verify receipt with

00:15:22.286 --> 00:15:24.006
the provided encoded receipt.

00:15:25.436 --> 00:15:26.256
So, let's look at the

00:15:26.256 --> 00:15:27.626
notification types we currently

00:15:27.626 --> 00:15:27.886
have.

00:15:28.446 --> 00:15:29.466
There are currently four

00:15:29.466 --> 00:15:30.686
existing notification types.

00:15:30.776 --> 00:15:32.516
INITIAL BUY, INTERACTIVE

00:15:32.516 --> 00:15:34.046
RENEWAL, DID CHANGE RENEWAL

00:15:34.046 --> 00:15:35.596
PREFERENCES, and CANCEL.

00:15:35.906 --> 00:15:37.346
And, we are adding four more.

00:15:38.386 --> 00:15:40.326
DID CHANGE RENEWAL STATUS, DID

00:15:40.326 --> 00:15:43.196
FAIL TO RENEW, DID RECOVER, and

00:15:43.196 --> 00:15:43.976
PRICE INCREASE CONSENT.

00:15:44.516 --> 00:15:49.500
[ Applause ]

00:15:52.226 --> 00:15:53.546
Now, let's take a quick look at

00:15:53.546 --> 00:15:54.406
each of those four new

00:15:54.406 --> 00:15:55.656
notification types, so we can

00:15:55.656 --> 00:15:57.186
get an idea of why they are

00:15:57.286 --> 00:15:57.526
sent.

00:15:59.016 --> 00:16:00.796
First, let's look at DID CHANGE

00:16:00.796 --> 00:16:01.506
RENEWAL STATUS.

00:16:01.956 --> 00:16:03.056
This is sent when the user

00:16:03.056 --> 00:16:05.106
toggles auto-renew on or off.

00:16:05.776 --> 00:16:06.986
You should actually be receiving

00:16:06.986 --> 00:16:08.606
this notification right now, so

00:16:08.606 --> 00:16:09.436
make sure that you're looking

00:16:09.436 --> 00:16:10.506
for it if you are currently

00:16:10.506 --> 00:16:11.516
using our Server-to-Server

00:16:11.516 --> 00:16:12.256
Notifications.

00:16:12.866 --> 00:16:14.626
We will soon be adding a

00:16:14.626 --> 00:16:15.906
notification type called DID

00:16:15.906 --> 00:16:16.396
FAIL TO RENEW.

00:16:16.396 --> 00:16:18.696
We will send this to you when a

00:16:18.696 --> 00:16:20.436
subscription fails auto-renew at

00:16:20.436 --> 00:16:21.876
the first attempt to renew in a

00:16:21.876 --> 00:16:22.766
subscription period.

00:16:22.766 --> 00:16:24.866
You will start to see this

00:16:24.866 --> 00:16:26.206
notification in the fall.

00:16:26.816 --> 00:16:29.656
Hand-in-hand with DID FAIL TO

00:16:29.656 --> 00:16:31.006
RENEW comes DID RECOVER.

00:16:31.686 --> 00:16:33.206
DID RECOVER will be sent when we

00:16:33.206 --> 00:16:34.616
recover billing of your

00:16:34.616 --> 00:16:36.386
subscription during the billing

00:16:36.386 --> 00:16:37.326
retry period.

00:16:37.896 --> 00:16:39.546
This will also start to appear

00:16:39.546 --> 00:16:40.036
in the fall.

00:16:40.576 --> 00:16:42.156
Should you receive DID RECOVER,

00:16:42.406 --> 00:16:43.366
you should have recently

00:16:43.366 --> 00:16:44.906
received DID FAIL TO RENEW.

00:16:44.996 --> 00:16:46.416
And, you can know that billing

00:16:46.416 --> 00:16:47.746
of your subscription was

00:16:47.776 --> 00:16:48.726
successfully recovered.

00:16:49.656 --> 00:16:50.906
If you are currently using our

00:16:50.986 --> 00:16:52.366
Server-to-Server Notifications,

00:16:52.836 --> 00:16:54.016
you may notice that we will be

00:16:54.066 --> 00:16:55.536
sending DID RECOVER when we

00:16:55.536 --> 00:16:57.116
currently send our renewal

00:16:57.116 --> 00:16:58.066
notification type.

00:16:58.596 --> 00:17:01.516
The plan is for DID RECOVER to

00:17:01.516 --> 00:17:03.326
eventually replace RENEWAL as it

00:17:03.436 --> 00:17:05.326
is a bit more aptly named, but

00:17:05.326 --> 00:17:06.576
for a period, when we start

00:17:06.576 --> 00:17:07.826
sending DID RECOVER, we will

00:17:07.876 --> 00:17:09.856
send you both DID RECOVER and

00:17:09.856 --> 00:17:11.536
RENEWAL to give you time to

00:17:11.536 --> 00:17:14.726
adjust to the change.

00:17:14.726 --> 00:17:16.116
Finally, we're adding a fourth

00:17:16.116 --> 00:17:17.646
notification type, PRICE

00:17:17.646 --> 00:17:18.435
INCREASE CONSENT.

00:17:19.195 --> 00:17:20.796
PRICE INCREASE CONSENT will be

00:17:20.796 --> 00:17:22.556
sent to you when we detect that

00:17:22.556 --> 00:17:24.116
one of your subscribers has

00:17:24.116 --> 00:17:25.566
entered a price increase flow,

00:17:25.976 --> 00:17:27.476
which requires their consent in

00:17:27.476 --> 00:17:28.656
order for them to continue

00:17:28.656 --> 00:17:29.786
renewing their subscription.

00:17:30.696 --> 00:17:32.296
With this notification, comes a

00:17:32.296 --> 00:17:33.946
new field in the JSON payload,

00:17:34.276 --> 00:17:35.656
price increase effective date.

00:17:36.356 --> 00:17:37.966
This is the date by which the

00:17:37.966 --> 00:17:39.606
customer must agree to the price

00:17:39.606 --> 00:17:40.946
increase in order for them to

00:17:40.946 --> 00:17:41.786
continue renewing.

00:17:42.426 --> 00:17:43.856
You may also expect to see this

00:17:43.856 --> 00:17:44.976
notification in the fall.

00:17:49.656 --> 00:17:50.886
So now that we've taken a look

00:17:51.066 --> 00:17:52.336
into what's new in

00:17:52.376 --> 00:17:53.786
Server-to-Server Notifications,

00:17:54.216 --> 00:17:55.506
I'm really excited to talk to

00:17:55.506 --> 00:17:56.946
you about how you can handle all

00:17:56.946 --> 00:17:58.336
eight of our notification types

00:17:58.396 --> 00:18:00.216
so you are getting the most out

00:18:00.216 --> 00:18:01.816
of each notification when you

00:18:01.816 --> 00:18:02.286
receive it.

00:18:03.606 --> 00:18:05.796
So, first, let's take a quick

00:18:05.856 --> 00:18:07.046
overview of our existing

00:18:07.046 --> 00:18:07.926
notification types.

00:18:08.626 --> 00:18:10.486
INITIAL BUY, INTERACTIVE

00:18:10.486 --> 00:18:14.216
RENEWAL, DID CHANGE RENEWAL

00:18:14.216 --> 00:18:15.846
PREFERENCES, and CANCEL.

00:18:16.996 --> 00:18:18.136
We're going to take a moment to

00:18:18.136 --> 00:18:19.776
take a deep-dive into each of

00:18:19.776 --> 00:18:21.446
these notification types, but

00:18:21.446 --> 00:18:23.466
before we do that, I want you to

00:18:23.466 --> 00:18:26.646
notice one trend up here on this

00:18:26.646 --> 00:18:26.896
chart.

00:18:27.706 --> 00:18:30.096
You'll notice that in the JSON

00:18:30.096 --> 00:18:31.456
payload, we're asking you to

00:18:31.456 --> 00:18:32.356
look for the original

00:18:32.356 --> 00:18:33.926
transaction id for each

00:18:33.926 --> 00:18:34.826
notification type.

00:18:35.636 --> 00:18:37.046
This is because the original

00:18:37.046 --> 00:18:38.746
transaction id is considered a

00:18:38.746 --> 00:18:40.316
unique identifier for your

00:18:40.316 --> 00:18:40.946
subscription.

00:18:41.336 --> 00:18:42.916
And, keeping track of this will

00:18:42.916 --> 00:18:44.566
help you to link subsequent

00:18:44.566 --> 00:18:45.986
events back to the initial

00:18:45.986 --> 00:18:47.366
purchase of your subscription.

00:18:47.966 --> 00:18:50.856
Now, let's imagine for a moment

00:18:50.856 --> 00:18:51.906
that you have a potential

00:18:51.906 --> 00:18:52.516
subscriber.

00:18:53.096 --> 00:18:54.666
Let's call him John, and he is

00:18:54.736 --> 00:18:56.226
interested in purchasing your

00:18:56.226 --> 00:18:56.846
subscription.

00:18:57.796 --> 00:18:58.906
Let's take a walk through

00:18:58.906 --> 00:19:00.226
decisions that John makes

00:19:00.506 --> 00:19:02.236
concerning his subscription, and

00:19:02.236 --> 00:19:03.396
what notifications you will

00:19:03.396 --> 00:19:03.966
receive along the way.

00:19:09.536 --> 00:19:11.296
So, the first notification type

00:19:11.426 --> 00:19:12.776
you can expect to receive for a

00:19:12.776 --> 00:19:14.326
subscription is the INITIAL BUY.

00:19:15.156 --> 00:19:16.836
When John first purchases his

00:19:16.836 --> 00:19:18.116
subscription, we will send you

00:19:18.116 --> 00:19:19.446
an INITIAL BUY notification.

00:19:20.016 --> 00:19:21.106
Upon receiving this

00:19:21.106 --> 00:19:23.796
notification, you can update the

00:19:23.996 --> 00:19:25.246
customer status to something

00:19:25.246 --> 00:19:27.136
like "active" or "subscribed" on

00:19:27.136 --> 00:19:29.026
your server, and provide service

00:19:29.026 --> 00:19:29.826
for the newly purchased

00:19:29.826 --> 00:19:30.386
subscription.

00:19:31.426 --> 00:19:33.336
In this notification type, there

00:19:33.336 --> 00:19:34.646
are four fields that I want you

00:19:34.646 --> 00:19:36.266
to look for in the JSON payload.

00:19:37.216 --> 00:19:38.366
The first of these is the

00:19:38.366 --> 00:19:39.116
purchase date.

00:19:39.676 --> 00:19:40.746
This is in milliseconds

00:19:40.946 --> 00:19:41.956
since epoch, and it will

00:19:41.956 --> 00:19:43.676
tell you the exact date and time

00:19:43.856 --> 00:19:45.206
that your customer has purchased

00:19:45.206 --> 00:19:45.906
your subscription.

00:19:46.946 --> 00:19:48.046
You should next look for the

00:19:48.046 --> 00:19:49.366
original transaction id.

00:19:49.796 --> 00:19:51.626
As I mentioned, this is a unique

00:19:51.626 --> 00:19:52.836
identifier for your

00:19:52.836 --> 00:19:54.556
subscription, and keeping track

00:19:54.556 --> 00:19:56.086
of this now will let you link

00:19:56.196 --> 00:19:57.926
subsequent notifications back to

00:19:57.926 --> 00:20:00.166
this initial buy.

00:20:00.416 --> 00:20:01.536
You should also check for the

00:20:01.536 --> 00:20:02.976
web order line item id.

00:20:03.686 --> 00:20:05.256
This is considered a unique

00:20:05.256 --> 00:20:06.926
identifier for each subscription

00:20:06.926 --> 00:20:08.596
period and should you need to

00:20:08.596 --> 00:20:10.036
hit verify receipt after

00:20:10.036 --> 00:20:11.616
receiving this notification, it

00:20:11.616 --> 00:20:13.536
will link this notification to

00:20:13.536 --> 00:20:15.246
an entry in the verifyReceipt

00:20:15.246 --> 00:20:15.436
array.

00:20:16.856 --> 00:20:18.536
Finally, you should look for the

00:20:18.606 --> 00:20:19.306
product id.

00:20:19.916 --> 00:20:21.516
The product id will tell you

00:20:21.516 --> 00:20:23.466
exactly which product your new

00:20:23.466 --> 00:20:25.636
customer has subscribed to.

00:20:26.416 --> 00:20:28.246
So, after John has been using

00:20:28.246 --> 00:20:30.056
his subscription for a while, he

00:20:30.056 --> 00:20:31.566
decides that he wants to upgrade

00:20:31.566 --> 00:20:33.066
his service to a higher tier.

00:20:33.956 --> 00:20:35.436
We consider this a renewal in

00:20:35.436 --> 00:20:37.136
the foreground, so we will send

00:20:37.136 --> 00:20:38.436
you an INTERACTIVE RENEWAL

00:20:38.436 --> 00:20:40.166
notification type.

00:20:40.756 --> 00:20:43.656
Because an upgrade gives the

00:20:43.656 --> 00:20:45.656
customer access to the higher

00:20:45.746 --> 00:20:47.396
tier immediately, we will also

00:20:47.396 --> 00:20:49.146
send you a CANCEL notification

00:20:49.146 --> 00:20:50.206
type for the lower tier

00:20:50.206 --> 00:20:51.606
subscription, which we have

00:20:51.606 --> 00:20:52.096
canceled.

00:20:53.116 --> 00:20:54.936
However, should a customer

00:20:54.936 --> 00:20:56.706
resubscribe after churn, you

00:20:56.706 --> 00:20:58.646
will receive only an INTERACTIVE

00:20:58.646 --> 00:21:00.056
RENEWAL notification type.

00:21:00.686 --> 00:21:03.406
In this notification, there are

00:21:03.406 --> 00:21:04.926
four more fields you should look

00:21:04.926 --> 00:21:06.346
for in the JSON payload.

00:21:09.206 --> 00:21:10.416
The first of these will be the

00:21:10.416 --> 00:21:11.106
purchase date.

00:21:11.496 --> 00:21:12.906
This will tell you the exact

00:21:13.016 --> 00:21:14.756
date and time that your customer

00:21:15.176 --> 00:21:16.346
either resubscribed to this

00:21:16.346 --> 00:21:17.806
subscription or upgraded their

00:21:17.806 --> 00:21:18.236
service.

00:21:19.486 --> 00:21:20.826
You should again be checking for

00:21:20.826 --> 00:21:23.016
the original transaction id to

00:21:23.016 --> 00:21:24.266
link this back to the original

00:21:24.266 --> 00:21:27.596
subscription, as well as the web

00:21:27.596 --> 00:21:28.796
order line item id.

00:21:29.436 --> 00:21:30.976
This is the unique identifier

00:21:30.976 --> 00:21:32.146
for each subscription period,

00:21:32.146 --> 00:21:33.436
and it will help you to link

00:21:33.436 --> 00:21:35.576
this notification to an entry in

00:21:35.576 --> 00:21:36.666
the verifyReceipt array.

00:21:38.266 --> 00:21:40.066
Finally, check for the product

00:21:40.066 --> 00:21:40.266
id.

00:21:40.806 --> 00:21:42.146
This will tell you the exact

00:21:42.146 --> 00:21:43.826
product that your customer has

00:21:43.826 --> 00:21:45.466
re-subscribed to or upgraded

00:21:45.466 --> 00:21:46.096
their service to.

00:21:46.096 --> 00:21:48.766
A little later down the line,

00:21:49.056 --> 00:21:51.216
John decides to downgrade his

00:21:51.246 --> 00:21:52.926
subscription to a more basic

00:21:52.926 --> 00:21:53.216
tier.

00:21:53.846 --> 00:21:55.736
In this case, we send you a DID

00:21:55.736 --> 00:21:57.276
CHANGE RENEWAL PREFERENCES

00:21:57.276 --> 00:21:58.216
notification type.

00:21:59.036 --> 00:22:00.056
Upon receiving this

00:22:00.056 --> 00:22:01.756
notification, you can update the

00:22:01.756 --> 00:22:03.256
customer's subscription status

00:22:03.356 --> 00:22:05.186
on your server to a more basic

00:22:05.186 --> 00:22:05.366
tier.

00:22:05.366 --> 00:22:08.016
In this notification type, there

00:22:08.016 --> 00:22:09.766
are two fields that I want you

00:22:09.766 --> 00:22:11.846
to look out for.

00:22:12.046 --> 00:22:13.416
The first of these is the auto

00:22:13.416 --> 00:22:14.506
renew product id.

00:22:15.136 --> 00:22:16.766
Because a subscription downgrade

00:22:16.766 --> 00:22:18.166
does not take place until the

00:22:18.166 --> 00:22:19.846
end of the subscription period,

00:22:20.376 --> 00:22:22.096
this will tell you exactly which

00:22:22.096 --> 00:22:23.446
product your customer will

00:22:23.446 --> 00:22:24.976
auto-renew at when it comes time

00:22:24.976 --> 00:22:25.556
for renewal.

00:22:26.136 --> 00:22:28.906
You should again be checking for

00:22:28.906 --> 00:22:30.946
the original transaction id to

00:22:30.946 --> 00:22:32.156
link this notification back to

00:22:32.156 --> 00:22:32.976
the original subscription.

00:22:38.086 --> 00:22:39.616
Now, unfortunately, a little

00:22:39.616 --> 00:22:41.216
later, John gets on the phone

00:22:41.216 --> 00:22:42.526
with customer support and

00:22:42.526 --> 00:22:43.826
decides to cancel his

00:22:43.826 --> 00:22:44.416
subscription.

00:22:45.456 --> 00:22:46.896
In this case, we will send you a

00:22:46.896 --> 00:22:48.586
CANCEL notification type.

00:22:49.566 --> 00:22:51.036
As I mentioned earlier, when a

00:22:51.036 --> 00:22:52.216
customer upgrades their

00:22:52.216 --> 00:22:53.686
subscription, you will also

00:22:53.686 --> 00:22:55.236
receive a CANCEL plus an

00:22:55.236 --> 00:22:56.816
INTERACTIVE RENEWAL, where the

00:22:56.816 --> 00:22:58.756
CANCEL signifies the lower tier

00:22:58.756 --> 00:23:00.376
subscription which was canceled.

00:23:01.656 --> 00:23:03.046
In this notification type, I

00:23:03.046 --> 00:23:04.026
want you to look for three

00:23:04.026 --> 00:23:04.346
fields.

00:23:05.376 --> 00:23:07.236
First, you should look for the

00:23:07.236 --> 00:23:08.126
cancellation date.

00:23:08.446 --> 00:23:09.506
This will tell you the exact

00:23:09.596 --> 00:23:11.176
date and time that your customer

00:23:11.176 --> 00:23:12.426
decided to cancel their

00:23:12.426 --> 00:23:13.006
subscription.

00:23:14.246 --> 00:23:15.436
You should still be looking for

00:23:15.436 --> 00:23:17.066
the original transaction id to

00:23:17.066 --> 00:23:18.216
link this back to the original

00:23:18.216 --> 00:23:21.126
subscription purchase, as well

00:23:21.126 --> 00:23:22.356
as the product id, to know

00:23:22.356 --> 00:23:24.046
exactly which product your

00:23:24.046 --> 00:23:24.976
customer has canceled.

00:23:30.516 --> 00:23:31.916
So, now that we've looked at all

00:23:31.916 --> 00:23:33.166
of our existing notification

00:23:33.166 --> 00:23:34.466
types, let's give the same

00:23:34.466 --> 00:23:36.566
treatment to the four new

00:23:36.566 --> 00:23:38.036
notification types that I

00:23:38.036 --> 00:23:38.956
introduced earlier.

00:23:40.036 --> 00:23:43.266
These are DID CHANGE RENEWAL

00:23:43.266 --> 00:23:45.726
STATUS, DID FAIL TO RENEW, DID

00:23:45.726 --> 00:23:47.666
RECOVER, and PRICE INCREASE

00:23:47.666 --> 00:23:48.096
CONSENT.

00:23:49.426 --> 00:23:50.906
In these notification types, you

00:23:51.026 --> 00:23:52.316
still want to be looking for the

00:23:52.316 --> 00:23:54.556
original transaction id in each

00:23:54.606 --> 00:23:55.696
of the JSON payloads.

00:23:56.716 --> 00:23:58.296
As I mentioned earlier, this is

00:23:58.296 --> 00:23:59.586
because it is a unique

00:23:59.586 --> 00:24:01.146
identifier for your subscription

00:24:01.146 --> 00:24:03.106
and will help you to link all of

00:24:03.106 --> 00:24:04.486
your notifications together.

00:24:05.896 --> 00:24:07.396
Now, let's revisit John.

00:24:08.746 --> 00:24:10.166
One day he is scrolling through

00:24:10.166 --> 00:24:11.686
his managed subscriptions page,

00:24:11.886 --> 00:24:13.506
and decides to turn auto-renew

00:24:13.506 --> 00:24:15.126
back on for your subscription.

00:24:15.926 --> 00:24:17.596
In this case, we will send you a

00:24:17.596 --> 00:24:19.136
DID CHANGE RENEWAL STATUS

00:24:19.426 --> 00:24:20.296
notification type.

00:24:21.256 --> 00:24:22.366
You will also receive this

00:24:22.366 --> 00:24:24.146
notification if a customer

00:24:24.146 --> 00:24:25.986
decides to turn auto-renew off.

00:24:27.206 --> 00:24:28.116
Upon receiving this

00:24:28.116 --> 00:24:30.456
notification, you can update the

00:24:30.456 --> 00:24:32.196
customer subscription status on

00:24:32.196 --> 00:24:34.476
your end to reflect the changes.

00:24:35.766 --> 00:24:37.186
You can optionally deploy

00:24:37.186 --> 00:24:39.086
retention strategies to keep the

00:24:39.086 --> 00:24:40.396
customer, if you see that they

00:24:40.396 --> 00:24:41.556
have turned auto-renew off.

00:24:43.176 --> 00:24:44.586
In this notification type, there

00:24:44.586 --> 00:24:46.096
are four more fields that you

00:24:46.096 --> 00:24:47.376
should look for and mark down.

00:24:48.416 --> 00:24:49.736
The first of these is the auto

00:24:49.736 --> 00:24:51.066
renew status change date.

00:24:51.516 --> 00:24:52.896
This tells you the exact date

00:24:52.896 --> 00:24:54.376
and time that your customer's

00:24:54.376 --> 00:24:55.606
auto-renew status changed.

00:24:57.126 --> 00:24:58.316
You should check for auto-renew

00:24:58.406 --> 00:24:58.816
status.

00:24:59.386 --> 00:25:00.896
This will tell you the direction

00:25:00.946 --> 00:25:02.106
of the auto-renew toggle.

00:25:02.736 --> 00:25:04.076
Should you see the auto renew

00:25:04.076 --> 00:25:06.476
status has a value of true, you

00:25:06.476 --> 00:25:07.866
can know that your customer has

00:25:07.866 --> 00:25:10.436
turned auto-renew back on, and

00:25:10.436 --> 00:25:12.446
intends to continue buying your

00:25:12.446 --> 00:25:12.976
subscription.

00:25:13.576 --> 00:25:15.986
You should again be checking for

00:25:15.986 --> 00:25:17.846
the original transaction id, to

00:25:17.846 --> 00:25:19.136
link this back to the original

00:25:19.206 --> 00:25:21.736
subscription purchase, as well

00:25:21.736 --> 00:25:23.166
as the product id, to see

00:25:23.166 --> 00:25:24.396
exactly which product your

00:25:24.436 --> 00:25:26.076
customer has turned auto-renew

00:25:26.126 --> 00:25:26.976
on or off for.

00:25:31.416 --> 00:25:33.376
As we are trying to bill John

00:25:33.376 --> 00:25:34.546
for his subscription during the

00:25:34.546 --> 00:25:36.126
auto-renew period, we

00:25:36.126 --> 00:25:37.566
unfortunately encounter a

00:25:37.566 --> 00:25:38.196
billing error.

00:25:38.726 --> 00:25:40.176
In this case, we will send you a

00:25:40.176 --> 00:25:41.856
DID FAIL TO RENEW on our first

00:25:41.856 --> 00:25:43.506
attempt to renew for that

00:25:43.506 --> 00:25:44.406
subscription period.

00:25:45.326 --> 00:25:46.276
Upon receiving this

00:25:46.276 --> 00:25:48.256
notification, you can optionally

00:25:48.256 --> 00:25:50.066
choose to suspend service for

00:25:50.066 --> 00:25:50.716
your customer.

00:25:51.856 --> 00:25:53.446
You can also update the customer

00:25:53.446 --> 00:25:54.796
subscription status to something

00:25:54.796 --> 00:25:56.236
like "active" or "billing

00:25:56.236 --> 00:25:58.126
re-try," depending on the value

00:25:58.126 --> 00:25:59.296
of the fields you see in the

00:25:59.296 --> 00:25:59.926
JSON payload.

00:26:00.686 --> 00:26:01.666
So now, let's take a look at

00:26:01.666 --> 00:26:01.966
that.

00:26:02.696 --> 00:26:03.656
The first field you should be

00:26:03.656 --> 00:26:05.366
looking for here is is in

00:26:05.366 --> 00:26:06.746
billing retry period.

00:26:07.346 --> 00:26:09.556
This has a value of 0 or 1, and

00:26:09.556 --> 00:26:11.196
will tell you if we are actively

00:26:11.196 --> 00:26:12.546
trying to recover billing of

00:26:12.546 --> 00:26:13.666
this subscription for you.

00:26:14.466 --> 00:26:15.676
Should you see that this field

00:26:15.676 --> 00:26:17.696
has a value of 1, you can know

00:26:17.696 --> 00:26:19.156
that we are trying to recover

00:26:19.156 --> 00:26:20.676
billing of your subscription in

00:26:20.676 --> 00:26:21.926
the billing re-try period.

00:26:23.436 --> 00:26:24.866
You should still be checking for

00:26:24.866 --> 00:26:26.936
the original transaction id to

00:26:26.936 --> 00:26:28.096
link this back to the original

00:26:28.096 --> 00:26:30.606
subscription, as well as the

00:26:30.606 --> 00:26:31.446
expires date.

00:26:31.856 --> 00:26:33.266
This will tell you the exact

00:26:33.386 --> 00:26:35.476
date and time that we attempted

00:26:35.476 --> 00:26:37.496
to auto-renew your subscription,

00:26:37.636 --> 00:26:39.956
and it failed.

00:26:40.146 --> 00:26:41.736
Fortunately, during the billing

00:26:41.736 --> 00:26:44.166
re-try period, the billing issue

00:26:44.166 --> 00:26:45.686
with John's subscription was

00:26:45.686 --> 00:26:46.956
resolved, and we are able to

00:26:46.956 --> 00:26:47.976
recover billing of his

00:26:47.976 --> 00:26:48.566
subscription.

00:26:49.116 --> 00:26:50.956
In this case, we send you a DID

00:26:50.996 --> 00:26:52.606
RECOVER notification type.

00:26:52.606 --> 00:26:55.906
As a reminder, DID RECOVER is

00:26:55.906 --> 00:26:57.356
replacing our RENEWAL

00:26:57.356 --> 00:26:58.746
notification type, which we

00:26:58.746 --> 00:27:00.276
currently send at this time.

00:27:01.656 --> 00:27:03.266
Upon receiving this notification

00:27:03.266 --> 00:27:05.006
type, you can restore service

00:27:05.206 --> 00:27:06.396
for the recovered subscription,

00:27:06.396 --> 00:27:08.496
and update your customer's

00:27:08.496 --> 00:27:09.896
status to something like

00:27:09.896 --> 00:27:11.246
"active" or "subscribed," or

00:27:11.246 --> 00:27:12.986
whatever you use to denote an

00:27:13.056 --> 00:27:13.906
active subscriber.

00:27:15.036 --> 00:27:16.706
In this notification type, there

00:27:16.706 --> 00:27:17.906
are a few more fields that I

00:27:17.906 --> 00:27:18.846
want you to look for in the

00:27:18.886 --> 00:27:19.256
payload.

00:27:20.656 --> 00:27:21.646
You should first check for the

00:27:21.696 --> 00:27:22.416
purchase date.

00:27:22.416 --> 00:27:24.276
This will tell you exactly when

00:27:24.396 --> 00:27:25.926
we were able to recover billing

00:27:25.926 --> 00:27:26.826
of this subscription.

00:27:28.176 --> 00:27:29.626
You should again check for the

00:27:29.626 --> 00:27:32.106
original transaction id, as this

00:27:32.106 --> 00:27:33.876
will tell you exactly which

00:27:33.876 --> 00:27:35.146
subscription we recovered

00:27:35.146 --> 00:27:36.976
billing for, as it is the unique

00:27:36.976 --> 00:27:38.616
identifier for the subscription.

00:27:40.106 --> 00:27:41.826
Finally, look for the expires

00:27:41.856 --> 00:27:42.196
date.

00:27:42.576 --> 00:27:44.086
This will tell you the date and

00:27:44.126 --> 00:27:45.906
time that this new subscription

00:27:45.906 --> 00:27:47.106
period will expire.

00:27:47.466 --> 00:27:48.326
And, you can expect us to

00:27:48.326 --> 00:27:48.976
attempt to auto-renew again.

00:27:54.016 --> 00:27:56.126
Now, let's suppose that you, the

00:27:56.126 --> 00:27:57.946
developer, decide to increase

00:27:57.976 --> 00:27:59.296
the price of your subscription.

00:28:00.036 --> 00:28:01.076
When we check for a price

00:28:01.076 --> 00:28:03.006
increase for a subscription, 7

00:28:03.006 --> 00:28:04.066
days before a weekly

00:28:04.066 --> 00:28:05.856
subscription renewal, 10 days

00:28:05.896 --> 00:28:07.076
before a monthly subscription

00:28:07.076 --> 00:28:09.126
renewal, and 30 days before an

00:28:09.126 --> 00:28:10.936
annual subscription renewal, and

00:28:10.936 --> 00:28:12.166
we see that you wish to raise

00:28:12.166 --> 00:28:14.006
the price, we will send you a

00:28:14.106 --> 00:28:15.306
PRICE INCREASE CONSENT

00:28:15.626 --> 00:28:17.606
notification for your customer.

00:28:18.786 --> 00:28:19.766
Upon receiving this

00:28:19.766 --> 00:28:21.446
notification, you can update the

00:28:21.446 --> 00:28:23.146
user status on your end to

00:28:23.146 --> 00:28:24.466
something like "price increase."

00:28:25.316 --> 00:28:27.056
And, optionally, you can deploy

00:28:27.056 --> 00:28:28.656
in-app messaging to prompt your

00:28:28.656 --> 00:28:30.166
customer to consent to the price

00:28:30.166 --> 00:28:30.556
increase.

00:28:31.726 --> 00:28:34.116
Note that we will also email and

00:28:34.116 --> 00:28:35.526
send push notifications to the

00:28:35.526 --> 00:28:36.926
customer to prompt them to

00:28:36.926 --> 00:28:38.176
consent to this price increase.

00:28:38.816 --> 00:28:41.596
In this notification type, there

00:28:41.596 --> 00:28:42.576
are a few more fields that I

00:28:42.576 --> 00:28:43.266
want you to look for.

00:28:44.196 --> 00:28:45.296
First, you should look for the

00:28:45.336 --> 00:28:46.516
price consent status.

00:28:46.896 --> 00:28:47.936
This will tell you if your

00:28:47.936 --> 00:28:50.046
customer has already consented

00:28:50.046 --> 00:28:51.186
to your price increase.

00:28:51.846 --> 00:28:53.636
However, because we are sending

00:28:53.636 --> 00:28:55.816
this notification to you, almost

00:28:55.816 --> 00:28:57.546
as soon as we detect the price

00:28:57.546 --> 00:28:59.246
increase, you should expect in

00:28:59.246 --> 00:29:00.816
most cases that this value will

00:29:00.816 --> 00:29:02.766
be 0, or that the customer has

00:29:02.766 --> 00:29:03.586
not yet consented.

00:29:03.586 --> 00:29:06.606
You should again be checking for

00:29:06.656 --> 00:29:08.866
the original transaction id to

00:29:08.866 --> 00:29:10.716
link this notification back to

00:29:10.716 --> 00:29:11.776
the original subscription.

00:29:12.796 --> 00:29:14.336
Finally, I want you to look for

00:29:14.336 --> 00:29:15.226
the expires date.

00:29:15.746 --> 00:29:17.286
This will tell you the date and

00:29:17.356 --> 00:29:18.666
time that this subscription

00:29:18.666 --> 00:29:19.866
period will expire.

00:29:20.406 --> 00:29:22.346
And, by that time, your customer

00:29:22.516 --> 00:29:24.316
will have had to consented to

00:29:24.316 --> 00:29:24.976
the price increase.

00:29:29.536 --> 00:29:31.136
So, now that we've taken a look

00:29:31.136 --> 00:29:32.036
at what's new to

00:29:32.036 --> 00:29:33.446
Server-to-Server Notifications,

00:29:33.676 --> 00:29:34.956
and what you can do to handle

00:29:34.956 --> 00:29:36.526
these notifications, when you

00:29:36.526 --> 00:29:38.286
receive them, I'm going to

00:29:38.286 --> 00:29:40.396
invite Manjeet Chawla onstage to

00:29:40.396 --> 00:29:41.856
talk to you about subscription

00:29:41.856 --> 00:29:42.976
lifecycle, and reducing churn.

00:29:43.516 --> 00:29:49.500
[ Applause ]

00:29:54.946 --> 00:29:55.406
>> Good morning.

00:29:56.056 --> 00:29:57.836
My name is Manjeet Chawla, and

00:29:57.836 --> 00:29:59.246
I'm on the App Store commerce

00:29:59.356 --> 00:29:59.516
scene.

00:30:00.626 --> 00:30:02.146
I'm really excited to be here

00:30:02.146 --> 00:30:03.756
today, and talk to you guys

00:30:03.846 --> 00:30:06.586
about how you can use the new

00:30:06.586 --> 00:30:08.476
and improved Server-to-Server

00:30:08.476 --> 00:30:11.046
Notifications to identify

00:30:11.046 --> 00:30:13.416
billing events through a

00:30:13.576 --> 00:30:16.236
subscription lifecycle that may

00:30:16.236 --> 00:30:17.666
impact your customer's

00:30:17.666 --> 00:30:18.596
subscription status.

00:30:20.156 --> 00:30:21.866
So, what does the lifecycle of a

00:30:21.866 --> 00:30:25.146
subscription look like?

00:30:25.416 --> 00:30:27.616
Now, you may start acquiring new

00:30:27.616 --> 00:30:29.306
customers by offering them a

00:30:29.306 --> 00:30:31.396
free trial, or an introductory

00:30:31.396 --> 00:30:33.536
price to attract them to your

00:30:33.536 --> 00:30:35.526
service, and let the users try

00:30:35.526 --> 00:30:36.656
your service before paying the

00:30:36.656 --> 00:30:36.976
full price.

00:30:40.646 --> 00:30:42.806
Next, you keep them engaged to

00:30:42.806 --> 00:30:44.516
your service by providing them

00:30:44.516 --> 00:30:45.996
constant updates to your

00:30:45.996 --> 00:30:46.466
content.

00:30:46.996 --> 00:30:51.626
And, finally, you try to retain

00:30:51.626 --> 00:30:54.496
them as active subscribers by

00:30:54.496 --> 00:30:54.976
minimizing churn.

00:30:59.166 --> 00:31:01.426
Now, we all know that during

00:31:01.426 --> 00:31:03.476
this lifecycle, there's a number

00:31:03.476 --> 00:31:05.116
of different billing events that

00:31:05.116 --> 00:31:06.416
can occur for most of your

00:31:06.416 --> 00:31:07.116
subscribers.

00:31:07.716 --> 00:31:11.236
And, today, you're probably

00:31:11.236 --> 00:31:12.586
calling the verifyReceipt

00:31:12.586 --> 00:31:14.396
endpoint for all your

00:31:14.396 --> 00:31:16.996
subscribers to get these billing

00:31:16.996 --> 00:31:17.716
event changes.

00:31:18.336 --> 00:31:20.716
Now, we know that this is not

00:31:20.716 --> 00:31:22.566
efficient, and can be costly

00:31:22.566 --> 00:31:25.256
over time, as your subscription

00:31:25.256 --> 00:31:26.016
business grows.

00:31:26.506 --> 00:31:28.696
But, the improvements that we

00:31:28.696 --> 00:31:30.746
saw earlier to Server-to-Server

00:31:30.746 --> 00:31:32.456
Notifications, you no longer

00:31:32.456 --> 00:31:35.256
have to rely on the receipts to

00:31:35.256 --> 00:31:36.906
reflect these billing event

00:31:36.906 --> 00:31:37.336
changes.

00:31:38.566 --> 00:31:40.076
So, let's talk more about how

00:31:40.076 --> 00:31:41.356
you can use the new

00:31:41.356 --> 00:31:42.936
Server-to-Server Notifications

00:31:43.456 --> 00:31:45.146
to detect these billing events,

00:31:45.906 --> 00:31:47.226
and build the best subscription

00:31:47.226 --> 00:31:48.736
experience for your customers.

00:31:49.286 --> 00:31:53.136
So, let's start with the initial

00:31:53.136 --> 00:31:54.476
purchase of a subscription.

00:31:55.256 --> 00:31:56.886
Now, we all know that this

00:31:57.186 --> 00:31:59.386
initial purchase unlocks content

00:31:59.976 --> 00:32:03.886
over a set period of time.

00:32:04.076 --> 00:32:05.236
When the customer purchases

00:32:05.236 --> 00:32:06.976
their subscription in your app,

00:32:07.646 --> 00:32:09.336
you will receive a transaction

00:32:09.336 --> 00:32:11.396
through StoreKit on the device,

00:32:12.366 --> 00:32:13.916
and a receipt associated to that

00:32:13.916 --> 00:32:14.496
transaction.

00:32:15.096 --> 00:32:19.056
At the same time, you'll receive

00:32:20.076 --> 00:32:21.916
a new notification called

00:32:21.916 --> 00:32:23.956
INITIAL BUY for this newly

00:32:23.956 --> 00:32:25.046
purchased subscription.

00:32:25.696 --> 00:32:27.916
Using this notification, you can

00:32:27.916 --> 00:32:30.146
identify a newly purchased

00:32:30.176 --> 00:32:31.576
subscriber that has never

00:32:31.576 --> 00:32:32.666
purchased your subscription

00:32:32.666 --> 00:32:33.066
before.

00:32:35.816 --> 00:32:37.976
Now, you hang onto that initial

00:32:37.976 --> 00:32:40.276
buy notification JSON, and at

00:32:40.276 --> 00:32:41.926
the same time, you send your

00:32:41.926 --> 00:32:44.336
receipt from the device to your

00:32:44.336 --> 00:32:46.056
server over a secure connection.

00:32:46.376 --> 00:32:47.756
And then, to the verifyReceipt

00:32:47.756 --> 00:32:49.266
endpoint to validate the

00:32:49.266 --> 00:32:49.976
contents of the receipt.

00:32:54.046 --> 00:32:55.296
In the response that you get

00:32:55.296 --> 00:32:57.146
back from the App Store, you

00:32:57.146 --> 00:32:59.426
then check for the contents of

00:32:59.426 --> 00:33:01.836
the JSON, and you update your

00:33:01.836 --> 00:33:04.246
user database by looking for

00:33:04.246 --> 00:33:05.896
information for the latest

00:33:05.896 --> 00:33:07.966
purchase that the user made.

00:33:09.116 --> 00:33:11.316
Finally, that notification that

00:33:11.316 --> 00:33:13.166
you stored previously, you can

00:33:13.166 --> 00:33:15.256
link the response that you got

00:33:15.366 --> 00:33:16.856
from the App Store through this

00:33:16.856 --> 00:33:19.176
verifyReceipt, and link that to

00:33:19.176 --> 00:33:21.506
the initial buy notification by

00:33:21.506 --> 00:33:23.466
using original transaction id,

00:33:23.896 --> 00:33:24.976
and the web order line item id.

00:33:31.126 --> 00:33:32.706
Now, when the subscription is

00:33:32.706 --> 00:33:34.846
ready for renewal, the App Store

00:33:34.846 --> 00:33:36.126
will automatically renew the

00:33:36.126 --> 00:33:37.436
subscription for you in the

00:33:37.436 --> 00:33:37.976
background.

00:33:39.086 --> 00:33:40.336
And, the next time the user

00:33:40.336 --> 00:33:41.666
launches their app on the

00:33:41.666 --> 00:33:44.216
device, you'll receive a new

00:33:44.216 --> 00:33:45.646
transaction, and a receipt

00:33:46.036 --> 00:33:47.636
associated to that transaction.

00:33:48.236 --> 00:33:52.916
You, again, base64-encode that

00:33:52.916 --> 00:33:55.146
receipt, and send that securely

00:33:55.146 --> 00:33:56.106
to your server.

00:33:56.636 --> 00:33:59.736
And, let's say your user is

00:33:59.736 --> 00:34:01.426
consuming their service on a

00:34:01.426 --> 00:34:02.546
different platform, and you

00:34:02.546 --> 00:34:04.376
don't want to rely on the user

00:34:04.376 --> 00:34:06.386
launching the app to detect this

00:34:06.386 --> 00:34:06.816
renewal.

00:34:07.416 --> 00:34:09.746
You can also use the receipt

00:34:09.746 --> 00:34:11.266
data that you stored previously

00:34:11.266 --> 00:34:13.266
from the initial purchase, and

00:34:13.295 --> 00:34:13.976
send that to your server.

00:34:20.096 --> 00:34:21.585
Next, you send that to the

00:34:21.585 --> 00:34:23.376
verifyReceipt endpoint, and

00:34:23.376 --> 00:34:24.606
check for the renewal

00:34:24.606 --> 00:34:26.076
transaction in the JSON

00:34:26.076 --> 00:34:26.525
response.

00:34:27.156 --> 00:34:29.846
In the response, you can

00:34:29.846 --> 00:34:31.806
validate the latest renewal for

00:34:31.806 --> 00:34:33.525
that user, and you update the

00:34:33.525 --> 00:34:35.536
latest expires date, based on

00:34:35.536 --> 00:34:36.545
that subscription.

00:34:37.096 --> 00:34:40.916
And, finally, you keep service

00:34:40.916 --> 00:34:42.266
on for the customer as the

00:34:42.266 --> 00:34:43.396
subscription successfully

00:34:43.565 --> 00:34:43.896
renewed.

00:34:44.446 --> 00:34:47.626
Note that for this event, there

00:34:47.626 --> 00:34:48.786
is no server-to-server

00:34:48.786 --> 00:34:49.426
notification.

00:34:49.856 --> 00:34:51.326
So you have to call

00:34:51.326 --> 00:34:53.726
verifyReceipt based on the

00:34:53.726 --> 00:34:55.025
information that you have from

00:34:55.025 --> 00:34:57.566
the initial purchase to check

00:34:57.626 --> 00:34:58.726
for the renewal transaction.

00:35:01.796 --> 00:35:03.256
Now, let's say that the customer

00:35:03.256 --> 00:35:04.916
has been loving your service,

00:35:04.916 --> 00:35:07.176
and they enjoy their basic

00:35:07.436 --> 00:35:08.776
subscription service, and they

00:35:08.776 --> 00:35:10.976
decide to upgrade your service

00:35:11.016 --> 00:35:12.556
to your premium product, maybe a

00:35:12.556 --> 00:35:15.766
higher tier of service.

00:35:15.916 --> 00:35:17.636
Now, for this upgrade, you'll

00:35:17.636 --> 00:35:19.736
receive a CANCEL notification

00:35:20.156 --> 00:35:21.366
from the App Store on your

00:35:21.366 --> 00:35:21.786
server.

00:35:22.326 --> 00:35:27.146
And, in the content of the JSON,

00:35:27.596 --> 00:35:28.746
there will be a cancellation

00:35:28.746 --> 00:35:31.226
date notifying you that the App

00:35:31.226 --> 00:35:33.146
Store has canceled the previous

00:35:33.146 --> 00:35:34.396
subscription for the user.

00:35:34.866 --> 00:35:39.536
Followed by the CANCEL, you'll

00:35:39.536 --> 00:35:41.336
also receive an INTERACTIVE

00:35:41.336 --> 00:35:42.656
RENEWAL notification on your

00:35:42.656 --> 00:35:43.046
server.

00:35:43.546 --> 00:35:47.316
Use this notification to update

00:35:47.316 --> 00:35:50.156
your users' database with the

00:35:50.396 --> 00:35:51.426
date of the upgrade.

00:35:51.726 --> 00:35:53.096
So, now you know that this user

00:35:53.096 --> 00:35:55.596
has upgraded their subscription

00:35:55.836 --> 00:35:57.526
to a higher tier service, or a

00:35:57.526 --> 00:35:57.976
premium product.

00:36:02.636 --> 00:36:04.946
And, finally, you unlock the

00:36:04.946 --> 00:36:06.786
premium content for the user in

00:36:06.786 --> 00:36:06.976
the app.

00:36:11.806 --> 00:36:15.016
Now, at some point, the customer

00:36:15.016 --> 00:36:16.856
decides that this content isn't

00:36:16.856 --> 00:36:18.546
right for them, and they want to

00:36:18.546 --> 00:36:19.636
cancel their subscription.

00:36:20.656 --> 00:36:22.056
They do this by turning off

00:36:22.336 --> 00:36:24.536
auto-renew inside Manage

00:36:24.576 --> 00:36:27.206
Subscription settings on the

00:36:28.256 --> 00:36:28.416
device.

00:36:28.566 --> 00:36:31.246
Now, today, you might be relying

00:36:31.326 --> 00:36:33.886
on the receipt to reflect the

00:36:33.886 --> 00:36:34.966
latest renewal status.

00:36:36.136 --> 00:36:37.446
You may even be calling

00:36:37.446 --> 00:36:39.006
verifyReceipt for all your

00:36:39.006 --> 00:36:40.656
customers, just to get the

00:36:40.656 --> 00:36:42.376
renewal status of their latest

00:36:42.376 --> 00:36:42.916
subscription.

00:36:43.486 --> 00:36:46.696
Now, we talked about this

00:36:46.696 --> 00:36:47.236
earlier.

00:36:47.576 --> 00:36:49.066
Tori mentioned the new

00:36:49.066 --> 00:36:51.476
notification, by using that you

00:36:51.476 --> 00:36:53.296
no longer have to rely on

00:36:53.296 --> 00:36:55.106
verifyReceipt for that renewal

00:36:55.166 --> 00:36:55.866
status change.

00:36:56.426 --> 00:36:59.496
And now, you get the DID CHANGE

00:36:59.496 --> 00:37:01.936
RENEWAL STATUS notification any

00:37:01.936 --> 00:37:03.896
time a user turns off or on

00:37:04.166 --> 00:37:05.826
their auto-renew status from the

00:37:05.826 --> 00:37:06.966
Manage Subscriptions settings.

00:37:12.106 --> 00:37:14.396
You use this event to update the

00:37:14.396 --> 00:37:16.196
renewal status of the

00:37:16.196 --> 00:37:17.766
subscription to false, because

00:37:17.766 --> 00:37:19.246
in this case the user turned off

00:37:19.386 --> 00:37:19.946
auto-renew.

00:37:20.486 --> 00:37:22.876
And, you update their

00:37:22.876 --> 00:37:24.566
subscription status.

00:37:25.476 --> 00:37:27.886
Now, let's say that you don't

00:37:27.886 --> 00:37:29.676
receive any other notifications

00:37:29.676 --> 00:37:31.836
for this user until the end of

00:37:31.836 --> 00:37:32.806
their subscription period.

00:37:34.196 --> 00:37:36.366
You can safely assume that their

00:37:36.616 --> 00:37:38.036
subscription has now churned at

00:37:38.586 --> 00:37:39.676
the end of their current

00:37:39.676 --> 00:37:41.046
subscription period.

00:37:43.016 --> 00:37:44.246
So, you can update the

00:37:44.246 --> 00:37:45.846
subscription status for your

00:37:45.846 --> 00:37:51.516
user as "inactive" or "churned."

00:37:51.676 --> 00:37:54.396
Now, over time, as your

00:37:54.396 --> 00:37:56.526
subscribers will churn out, you

00:37:56.526 --> 00:37:58.166
want to try and win them back by

00:37:58.166 --> 00:38:00.266
giving them an attractive offer,

00:38:00.616 --> 00:38:02.586
either a discounted price, or

00:38:02.586 --> 00:38:06.146
maybe even a free trial.

00:38:06.266 --> 00:38:07.336
We launched a new feature

00:38:07.336 --> 00:38:09.186
recently called Subscription

00:38:09.186 --> 00:38:11.226
Offers that allows you to give

00:38:11.386 --> 00:38:13.386
that discounted price, or a free

00:38:13.386 --> 00:38:15.506
trial, to keep existing

00:38:15.506 --> 00:38:16.936
subscribers, or win back

00:38:17.466 --> 00:38:18.966
previously churned subscribers.

00:38:20.306 --> 00:38:21.236
We have a session on

00:38:21.236 --> 00:38:22.706
Subscription Offers later today,

00:38:22.816 --> 00:38:23.886
where my colleagues will go

00:38:23.886 --> 00:38:25.626
through best practices in

00:38:25.626 --> 00:38:26.646
implementing subscription

00:38:26.646 --> 00:38:27.006
offers.

00:38:27.596 --> 00:38:29.366
And, the different use cases on

00:38:29.366 --> 00:38:30.616
how you can use subscription

00:38:30.616 --> 00:38:31.756
offers to improve your retention

00:38:31.756 --> 00:38:31.976
numbers.

00:38:37.066 --> 00:38:37.986
Now, let's take a look at a

00:38:37.986 --> 00:38:39.026
slightly different case, where

00:38:39.026 --> 00:38:40.496
the user had no intention to

00:38:40.496 --> 00:38:42.336
cancel your subscription, but

00:38:42.336 --> 00:38:44.766
the App Store was unable to

00:38:44.766 --> 00:38:46.096
recover or renew the

00:38:46.096 --> 00:38:47.216
subscription on the user's

00:38:47.246 --> 00:38:47.536
behalf.

00:38:48.966 --> 00:38:50.356
Maybe the user's credit card was

00:38:50.356 --> 00:38:52.176
invalid, or maybe they did not

00:38:52.176 --> 00:38:53.636
have sufficient funds in their

00:38:53.636 --> 00:38:54.026
account.

00:38:54.606 --> 00:38:58.246
For this event, the App Store

00:38:58.246 --> 00:39:00.346
will now send you a DID FAIL TO

00:39:00.346 --> 00:39:01.326
RENEW notification.

00:39:02.366 --> 00:39:04.736
Using this notification, you

00:39:04.736 --> 00:39:05.886
know that the user's

00:39:05.886 --> 00:39:07.966
subscription failed to renew due

00:39:08.126 --> 00:39:09.126
to a billing issue.

00:39:10.226 --> 00:39:11.446
And, you can update your

00:39:11.646 --> 00:39:13.026
subscription status for that

00:39:13.026 --> 00:39:15.056
customer to "inactive" or

00:39:15.916 --> 00:39:16.046
"churned."

00:39:17.616 --> 00:39:20.106
You use this notification to

00:39:20.106 --> 00:39:21.676
show them a message inside the

00:39:21.676 --> 00:39:22.916
app, letting them know that

00:39:22.916 --> 00:39:23.976
their subscription has expired.

00:39:28.256 --> 00:39:30.186
Now, for billing-related issues,

00:39:31.116 --> 00:39:32.486
the App Store automatically

00:39:32.486 --> 00:39:34.886
makes several attempts to renew

00:39:34.886 --> 00:39:36.206
the user's subscription over

00:39:36.206 --> 00:39:36.506
time.

00:39:37.626 --> 00:39:39.546
If an attempt succeeds, and if

00:39:39.546 --> 00:39:40.856
you're able to charge the

00:39:40.856 --> 00:39:42.446
customer for that subscription,

00:39:43.656 --> 00:39:45.266
you'll now receive a DID RECOVER

00:39:45.266 --> 00:39:45.976
notification.

00:39:46.626 --> 00:39:48.996
So, using this notification, you

00:39:48.996 --> 00:39:50.446
update the user database for

00:39:50.446 --> 00:39:52.896
that customer to "subscribed,"

00:39:54.086 --> 00:39:55.826
and you note the new expires

00:39:55.896 --> 00:39:57.966
date for that newly renewed

00:40:00.606 --> 00:40:00.946
subscription.

00:40:01.126 --> 00:40:02.566
And, you re-enable service for

00:40:02.566 --> 00:40:02.976
that customer.

00:40:08.096 --> 00:40:09.426
So, now we saw in the last

00:40:09.426 --> 00:40:11.066
example, that the App Store

00:40:11.066 --> 00:40:13.276
makes several attempts to renew

00:40:13.276 --> 00:40:14.766
subscriptions over a period of

00:40:14.766 --> 00:40:15.046
time.

00:40:15.966 --> 00:40:17.626
Now, this happens automatically

00:40:18.266 --> 00:40:21.576
for you, but how can you as a

00:40:21.576 --> 00:40:24.176
developer respond to these

00:40:24.286 --> 00:40:26.486
attempts, and what can you do on

00:40:26.486 --> 00:40:27.846
your end to reduce involuntary

00:40:27.846 --> 00:40:27.976
churn?

00:40:32.566 --> 00:40:34.026
Last year, in Engineering

00:40:34.026 --> 00:40:36.006
Subscriptions, we talked about

00:40:36.006 --> 00:40:37.696
our extended billing re-try

00:40:37.696 --> 00:40:39.636
logic that attempts to renew the

00:40:39.636 --> 00:40:42.686
subscription over a period of

00:40:44.156 --> 00:40:44.266
time.

00:40:44.486 --> 00:40:45.816
This is deployed when a

00:40:45.816 --> 00:40:47.456
subscription fails to renew due

00:40:47.456 --> 00:40:48.256
to a billing issue.

00:40:48.786 --> 00:40:52.836
And, since launch, we have been

00:40:52.836 --> 00:40:54.506
making constant updates and

00:40:54.506 --> 00:40:56.496
tuning to our strategies to

00:40:56.496 --> 00:40:57.806
optimize recoveries.

00:40:59.156 --> 00:41:01.276
We're also looking at advanced

00:41:01.276 --> 00:41:03.066
machine learning models to

00:41:03.066 --> 00:41:04.666
improve how we recover

00:41:04.666 --> 00:41:06.176
subscriptions across the

00:41:06.176 --> 00:41:06.636
platform.

00:41:06.636 --> 00:41:10.876
Now, as we look at performance

00:41:10.966 --> 00:41:13.456
since launch, you can see that

00:41:13.456 --> 00:41:15.676
we're recovering more than 77%

00:41:15.676 --> 00:41:18.176
of subscriptions that failed due

00:41:18.176 --> 00:41:19.486
to a billing issue.

00:41:20.046 --> 00:41:22.416
And, by recovering these

00:41:22.416 --> 00:41:24.276
subscriptions, we have been able

00:41:24.276 --> 00:41:25.566
to reduce the overall

00:41:25.566 --> 00:41:27.336
involuntary churn to less than

00:41:27.336 --> 00:41:28.966
2% across the platform.

00:41:29.516 --> 00:41:36.656
[ Applause ]

00:41:37.156 --> 00:41:39.116
And, with all these updates and

00:41:39.116 --> 00:41:40.556
improvements that we've made to

00:41:40.556 --> 00:41:41.946
our billing re-try strategies,

00:41:42.596 --> 00:41:45.406
we have been able to recover

00:41:45.406 --> 00:41:47.316
over 46 million of your

00:41:47.426 --> 00:41:47.976
subscriptions.

00:41:48.516 --> 00:41:54.326
[ Applause ]

00:41:54.826 --> 00:41:56.246
Now, these subscriptions would

00:41:56.246 --> 00:41:58.276
have churned otherwise, and

00:41:58.276 --> 00:42:00.086
users had no intention to cancel

00:42:00.086 --> 00:42:00.796
their service.

00:42:01.006 --> 00:42:02.956
Users were renewing and enjoying

00:42:02.956 --> 00:42:04.236
their service, and they did not

00:42:04.236 --> 00:42:04.946
want to cancel their

00:42:04.946 --> 00:42:05.446
subscription.

00:42:06.336 --> 00:42:07.836
And, we see across the platform

00:42:07.966 --> 00:42:09.466
that more than half of these

00:42:09.466 --> 00:42:13.776
subscriptions are still active.

00:42:13.966 --> 00:42:15.536
Now, as we look at how we are

00:42:15.536 --> 00:42:17.016
recovering these subscriptions

00:42:17.016 --> 00:42:19.996
over time, over the period of 60

00:42:20.956 --> 00:42:22.046
days, you can see that we

00:42:22.046 --> 00:42:24.206
recover more than 77% of

00:42:24.206 --> 00:42:25.256
subscriptions that failed due to

00:42:25.256 --> 00:42:26.296
a billing issue over the period

00:42:26.296 --> 00:42:26.976
of 60 days.

00:42:31.056 --> 00:42:32.606
And, more than 80% of these

00:42:32.606 --> 00:42:34.416
recoveries happen in the first

00:42:34.696 --> 00:42:36.226
16 days.

00:42:37.916 --> 00:42:39.906
So, what happens when we recover

00:42:40.266 --> 00:42:40.976
these subscriptions?

00:42:43.286 --> 00:42:45.476
First, you reenable service, as

00:42:45.476 --> 00:42:46.806
Tori mentioned earlier, with the

00:42:46.806 --> 00:42:47.876
new notifications.

00:42:48.216 --> 00:42:49.626
You may re-enable service for

00:42:49.626 --> 00:42:51.246
the customers next time that

00:42:51.246 --> 00:42:52.856
they try to access their

00:42:53.466 --> 00:42:53.646
service.

00:42:54.696 --> 00:42:56.726
We start a new billing cycle for

00:42:56.726 --> 00:42:58.556
that subscription from the date

00:42:58.556 --> 00:42:58.976
of recovery.

00:43:02.506 --> 00:43:04.336
And, the days of paid service

00:43:04.336 --> 00:43:05.236
that the customers were

00:43:05.236 --> 00:43:07.026
accumulating toward that higher

00:43:07.026 --> 00:43:09.666
revenue share, 85/15, resumes

00:43:09.706 --> 00:43:11.036
from that day of recovery.

00:43:12.736 --> 00:43:15.736
So, if you were offering service

00:43:16.256 --> 00:43:17.766
to customers during this period

00:43:17.826 --> 00:43:19.926
from the day they started

00:43:20.146 --> 00:43:21.866
billing re-try to the day of

00:43:21.866 --> 00:43:23.686
recovery, you're probably

00:43:23.686 --> 00:43:25.406
missing out on revenue for those

00:43:25.406 --> 00:43:25.766
days.

00:43:26.316 --> 00:43:30.326
How can we improve that?

00:43:31.996 --> 00:43:34.056
So, this fall, I'm excited to

00:43:34.056 --> 00:43:35.096
announce that we're launching a

00:43:35.096 --> 00:43:37.226
new feature that will allow you

00:43:37.416 --> 00:43:38.756
to offer a grace period, a

00:43:38.756 --> 00:43:40.336
billing grace period, that

00:43:40.336 --> 00:43:42.086
allows additional time for

00:43:42.086 --> 00:43:44.906
customers while they're enjoying

00:43:44.906 --> 00:43:46.246
their service, they have access

00:43:46.316 --> 00:43:47.316
to that paid content.

00:43:48.416 --> 00:43:49.346
And, it allows you, the

00:43:49.346 --> 00:43:50.976
developer to get additional

00:43:50.976 --> 00:43:52.496
revenue for any service that you

00:43:52.496 --> 00:43:53.966
provide during those days.

00:43:54.516 --> 00:44:00.716
[ Applause ]

00:44:01.216 --> 00:44:02.236
Now, this creates a better

00:44:02.236 --> 00:44:03.866
experience for all your

00:44:03.866 --> 00:44:05.366
customers, who recovered

00:44:05.366 --> 00:44:07.516
naturally over a period of time,

00:44:08.216 --> 00:44:09.346
because they never expressed an

00:44:09.346 --> 00:44:10.126
intent to cancel.

00:44:11.466 --> 00:44:13.056
This also recovers customers who

00:44:13.056 --> 00:44:14.976
maybe had a temporary credit

00:44:14.976 --> 00:44:16.606
card hold on their account.

00:44:19.826 --> 00:44:21.066
Now, let's take a look at how

00:44:21.066 --> 00:44:22.436
you can implement this feature.

00:44:23.116 --> 00:44:24.336
Well, it's really easy.

00:44:24.756 --> 00:44:26.896
It takes three simple steps to

00:44:26.896 --> 00:44:29.006
implement a billing grace

00:44:29.556 --> 00:44:29.756
period.

00:44:29.866 --> 00:44:32.386
First, you opt-in via App Store

00:44:32.386 --> 00:44:34.536
Connect to offer pre-configured

00:44:34.536 --> 00:44:36.516
durations for grace period.

00:44:37.696 --> 00:44:39.086
Now, based on the recovery data

00:44:39.086 --> 00:44:41.126
that we saw earlier, we're going

00:44:41.126 --> 00:44:43.506
to start with 6 days for weekly

00:44:43.506 --> 00:44:45.996
subscriptions, and 16 days for

00:44:45.996 --> 00:44:47.006
all other durations.

00:44:49.956 --> 00:44:52.136
Next, you look for a new field

00:44:52.436 --> 00:44:54.046
in the verifyReceipt response,

00:44:54.426 --> 00:44:55.636
or in the notification.

00:44:56.056 --> 00:44:58.176
This will allow you to know the

00:44:58.176 --> 00:44:59.786
latest expiry date for your

00:44:59.786 --> 00:44:59.976
service.

00:45:04.046 --> 00:45:05.956
And, you keep service on for

00:45:05.956 --> 00:45:06.976
customers during the period.

00:45:13.146 --> 00:45:14.476
Now, you may be thinking, as a

00:45:15.496 --> 00:45:17.826
developer, why should you opt-in

00:45:18.086 --> 00:45:19.576
to offer a billing grace period?

00:45:22.396 --> 00:45:23.346
Well, there's a number of

00:45:23.346 --> 00:45:23.886
benefits.

00:45:24.156 --> 00:45:26.306
First, your customers never

00:45:26.306 --> 00:45:27.336
intended to cancel your

00:45:27.336 --> 00:45:29.716
subscription, so they enjoy

00:45:29.716 --> 00:45:31.556
accessing your service without

00:45:31.556 --> 00:45:32.306
any interruptions.

00:45:37.076 --> 00:45:37.806
This also allows you, or your

00:45:37.806 --> 00:45:39.466
customers to maintain their

00:45:39.466 --> 00:45:41.256
existing billing cycle, as we

00:45:41.256 --> 00:45:42.356
recover their subscription

00:45:42.356 --> 00:45:43.696
during this billing grace

00:45:43.696 --> 00:45:43.986
period.

00:45:44.506 --> 00:45:47.776
And it enables you, the

00:45:47.776 --> 00:45:51.566
developer, to earn additional

00:45:51.566 --> 00:45:53.476
revenue for the service that you

00:45:53.476 --> 00:45:54.526
provide during this billing

00:45:54.526 --> 00:45:54.976
grace period.

00:46:00.056 --> 00:46:01.916
And, as we saw earlier, it

00:46:01.916 --> 00:46:03.656
allows customers to accumulate

00:46:03.966 --> 00:46:06.746
those 85/15 higher revenue share

00:46:06.866 --> 00:46:08.626
days of paid service at a faster

00:46:09.206 --> 00:46:09.306
rate.

00:46:10.756 --> 00:46:12.786
I highly encourage you to look

00:46:12.786 --> 00:46:14.176
into grace period for your

00:46:14.176 --> 00:46:15.856
subscriptions when we launch

00:46:15.936 --> 00:46:19.306
this later this fall.

00:46:19.516 --> 00:46:21.676
Now, in addition to offering a

00:46:21.676 --> 00:46:22.766
grace period, what are some of

00:46:22.766 --> 00:46:24.056
the other things that you can do

00:46:24.356 --> 00:46:26.566
to reduce overall involuntary

00:46:26.566 --> 00:46:28.116
churn, and improve recoveries?

00:46:29.516 --> 00:46:31.466
Here we see an example, where

00:46:31.936 --> 00:46:33.646
inside the app, by showing

00:46:33.646 --> 00:46:35.596
contextual messaging to your

00:46:35.596 --> 00:46:37.916
customers who are in the billing

00:46:37.916 --> 00:46:39.616
re-try state, you can let them

00:46:39.616 --> 00:46:40.926
know that their subscription has

00:46:40.926 --> 00:46:41.826
failed to renew due to a billing

00:46:41.826 --> 00:46:41.916
issue.

00:46:48.446 --> 00:46:49.716
And, if you were offering a

00:46:49.716 --> 00:46:51.396
grace period, you can focus your

00:46:51.396 --> 00:46:54.116
messaging on any grace period

00:46:54.116 --> 00:46:55.206
service that you are providing

00:46:55.206 --> 00:46:55.996
to your customers.

00:46:56.666 --> 00:46:58.486
Now, you can be creative with

00:46:58.646 --> 00:47:00.646
how you devise this messaging.

00:47:01.326 --> 00:47:02.726
It can be towards the end of the

00:47:02.726 --> 00:47:03.276
grace period.

00:47:03.276 --> 00:47:04.746
Maybe you are providing premium

00:47:04.746 --> 00:47:06.076
content, and they will lose

00:47:06.106 --> 00:47:07.386
content at the end of that grace

00:47:07.426 --> 00:47:07.636
period.

00:47:07.636 --> 00:47:10.616
So, highlighting the premium

00:47:10.616 --> 00:47:11.886
content that they're going to

00:47:11.886 --> 00:47:13.506
lose at the end of the grace

00:47:13.506 --> 00:47:15.326
period will help you recover

00:47:15.326 --> 00:47:16.276
those subscriptions.

00:47:19.476 --> 00:47:21.946
Here we see an app, Foodvisor,

00:47:22.336 --> 00:47:23.886
showing a message to customers

00:47:24.076 --> 00:47:26.386
in billing re-try, and showing

00:47:26.386 --> 00:47:28.146
them the remaining duration for

00:47:28.146 --> 00:47:32.336
the premium content.

00:47:32.416 --> 00:47:34.936
Now, within this message, you

00:47:34.936 --> 00:47:37.246
can also embed a deep link to

00:47:37.246 --> 00:47:39.246
the payment details page, where

00:47:39.246 --> 00:47:40.806
the customers can then go and

00:47:40.806 --> 00:47:41.976
resolve any billing issues.

00:47:46.206 --> 00:47:48.086
As you can see, we've recently

00:47:48.086 --> 00:47:50.476
updated this Payment Details

00:47:50.566 --> 00:47:52.476
page to allow a customer to have

00:47:52.606 --> 00:47:53.996
up to 10 different payment

00:47:53.996 --> 00:47:55.806
methods on account.

00:47:56.356 --> 00:47:59.006
Now, in addition to providing

00:47:59.146 --> 00:48:00.576
easier payment management

00:48:00.576 --> 00:48:02.926
options to customers, this also

00:48:02.926 --> 00:48:06.256
helps the App Store to reduce

00:48:06.256 --> 00:48:08.976
overall involuntary churn by

00:48:08.976 --> 00:48:10.226
charging alternate payment

00:48:10.226 --> 00:48:10.976
methods on file.

00:48:18.236 --> 00:48:19.796
Now, we covered a lot of topics

00:48:19.826 --> 00:48:20.996
today in this session.

00:48:22.026 --> 00:48:23.806
But, just to summarize, we

00:48:24.436 --> 00:48:25.916
talked about Subscription

00:48:25.916 --> 00:48:28.086
Offers, our new feature that we

00:48:28.316 --> 00:48:30.616
launched recently that allows

00:48:30.616 --> 00:48:32.746
you to reduce voluntary churn by

00:48:32.746 --> 00:48:35.666
giving customers a discounted

00:48:35.666 --> 00:48:37.756
price, or a free trial to retain

00:48:37.756 --> 00:48:38.456
their subscription.

00:48:39.396 --> 00:48:41.406
Dana walked us through the code

00:48:41.406 --> 00:48:43.116
to implement a new API called

00:48:43.116 --> 00:48:45.226
SKStorefront which you can use

00:48:45.226 --> 00:48:47.106
to display the right content to

00:48:47.106 --> 00:48:49.326
your customers around the world.

00:48:52.256 --> 00:48:53.776
We talked about some receipt

00:48:53.776 --> 00:48:55.356
changes that are coming soon,

00:48:55.586 --> 00:48:57.566
that allow you to reward your

00:48:57.566 --> 00:48:58.916
loyal customers who pre-ordered

00:48:58.916 --> 00:49:00.496
the app, maybe by giving them a

00:49:00.496 --> 00:49:02.346
starting balance of a game.

00:49:02.866 --> 00:49:04.406
And, if you haven't already done

00:49:04.686 --> 00:49:06.456
this, check out the

00:49:06.456 --> 00:49:08.006
Server-to-Server Notifications,

00:49:08.986 --> 00:49:10.596
and add that URL in App Store

00:49:10.596 --> 00:49:12.756
Connect to get notified for the

00:49:12.756 --> 00:49:13.896
billing events from the App

00:49:13.896 --> 00:49:14.166
Store.

00:49:15.646 --> 00:49:17.096
We talked about grace period,

00:49:17.156 --> 00:49:18.376
and how you can provide a

00:49:18.376 --> 00:49:20.456
billing grace period to improve

00:49:20.616 --> 00:49:22.826
recoveries for customers that

00:49:22.826 --> 00:49:23.966
their subscriptions failed to

00:49:23.966 --> 00:49:25.006
renew because of a billing

00:49:25.006 --> 00:49:25.746
issue.

00:49:28.356 --> 00:49:29.596
And, we talked about contextual

00:49:29.596 --> 00:49:31.356
messaging, that you can display

00:49:31.356 --> 00:49:33.286
inside the app to recover more

00:49:33.406 --> 00:49:34.256
of your subscriptions.

00:49:34.866 --> 00:49:37.576
For more information on this

00:49:37.616 --> 00:49:39.736
session, and the video for this

00:49:39.736 --> 00:49:42.566
session, look up Session 302.

00:49:42.986 --> 00:49:44.816
And, later this afternoon, my

00:49:44.816 --> 00:49:46.276
colleagues will talk about

00:49:46.276 --> 00:49:47.506
subscription offers best

00:49:47.506 --> 00:49:48.246
practices.

00:49:48.246 --> 00:49:49.306
They'll tell you how to

00:49:49.306 --> 00:49:50.696
implement subscription offers,

00:49:50.696 --> 00:49:52.566
and the different use cases for

00:49:52.566 --> 00:49:54.246
using subscription offers to

00:49:54.246 --> 00:49:55.826
reduce voluntary churn.

00:49:56.356 --> 00:49:58.546
And, we'll be around in the lab

00:49:59.016 --> 00:50:00.696
to answer any questions you may

00:50:00.696 --> 00:50:01.976
have about these features.

00:50:04.576 --> 00:50:06.086
Thank you and have a great rest

00:50:06.166 --> 00:50:06.966
of your afternoon.

00:50:07.516 --> 00:50:10.506
[ Applause ]