WEBVTT

00:00:00.506 --> 00:00:06.436
[ Music ]

00:00:06.936 --> 00:00:08.616
>> Welcome to What's New in File

00:00:08.616 --> 00:00:09.616
Management and Quick Look.

00:00:09.956 --> 00:00:11.286
We have a lot of great new API

00:00:11.446 --> 00:00:12.946
for managing documents and file

00:00:12.946 --> 00:00:13.856
previews to share with you

00:00:13.856 --> 00:00:13.976
today.

00:00:16.046 --> 00:00:16.996
Here are the areas that we're

00:00:16.996 --> 00:00:18.166
going to cover in this session.

00:00:19.076 --> 00:00:21.126
First, we'll show how your app

00:00:21.126 --> 00:00:22.366
can use the document picker to

00:00:22.366 --> 00:00:23.756
access a directory and its

00:00:23.756 --> 00:00:24.256
content.

00:00:24.676 --> 00:00:27.056
We'll also show how your app can

00:00:27.056 --> 00:00:28.836
properly support files stored on

00:00:28.836 --> 00:00:30.596
external USB drives or SMB

00:00:30.596 --> 00:00:31.246
servers.

00:00:32.586 --> 00:00:34.176
Then also, see how your app can

00:00:34.176 --> 00:00:35.426
fetch and display rich

00:00:35.426 --> 00:00:36.086
thumbnails.

00:00:37.796 --> 00:00:39.356
And you'll see how your app can

00:00:39.356 --> 00:00:40.616
provide quick editing support

00:00:40.616 --> 00:00:42.676
for images, PDFs, and videos via

00:00:42.676 --> 00:00:43.146
Quick Look.

00:00:43.146 --> 00:00:46.586
We've made it easy to port your

00:00:46.706 --> 00:00:48.746
iOS app to macOS as the Quick

00:00:48.746 --> 00:00:50.306
Look Extension APIs are now

00:00:50.306 --> 00:00:51.306
cross platform.

00:00:51.736 --> 00:00:54.246
And finally, we'll talk about

00:00:54.246 --> 00:00:56.656
supporting iPad apps on Mac.

00:00:58.426 --> 00:00:59.986
So who is this session for?

00:01:00.256 --> 00:01:02.246
If you are writing a new app or

00:01:02.246 --> 00:01:03.216
already have an app that

00:01:03.216 --> 00:01:04.616
presents documents or performs

00:01:04.616 --> 00:01:06.056
file operations, you're in the

00:01:06.056 --> 00:01:06.706
right session.

00:01:06.846 --> 00:01:08.726
You want to learn the best

00:01:08.726 --> 00:01:10.226
practices to support files

00:01:10.226 --> 00:01:11.886
stored on removable drives, such

00:01:11.886 --> 00:01:13.416
as USB and SMB.

00:01:14.086 --> 00:01:15.446
You may also need your app to

00:01:15.446 --> 00:01:16.886
recursively access multiple

00:01:16.886 --> 00:01:18.286
documents within a folder and

00:01:18.286 --> 00:01:20.156
perform batch file operations.

00:01:21.546 --> 00:01:22.726
Stick around if you want to

00:01:22.726 --> 00:01:24.096
learn more about displaying file

00:01:24.096 --> 00:01:25.496
thumbnails or if you want to

00:01:25.496 --> 00:01:26.946
provide simple image and video

00:01:26.946 --> 00:01:28.566
editing in your app.

00:01:29.766 --> 00:01:31.126
By the way, if you haven't

00:01:31.126 --> 00:01:32.236
checked it out yet, you should

00:01:32.236 --> 00:01:33.076
definitely take a look at

00:01:33.076 --> 00:01:34.846
Managing Documents in Your iOS

00:01:34.846 --> 00:01:38.296
Apps session from WWDC 2018 in

00:01:38.296 --> 00:01:39.816
which we detailed step-by-step

00:01:40.176 --> 00:01:40.676
how to use the

00:01:40.676 --> 00:01:42.336
UIDocumentBrowserViewController

00:01:42.416 --> 00:01:42.626
and the

00:01:42.626 --> 00:01:44.086
UIDocumentPickerViewController.

00:01:45.216 --> 00:01:46.746
There's also a session, Quick

00:01:46.746 --> 00:01:48.296
Look Previews from the Ground Up

00:01:48.456 --> 00:01:50.866
from WWDC 2018, which we highly

00:01:50.866 --> 00:01:51.896
encourage you to watch if you're

00:01:52.206 --> 00:01:54.006
interested in presenting file

00:01:54.006 --> 00:01:56.286
previews on iOS and now macOS.

00:01:56.786 --> 00:02:00.526
One of the most requested

00:02:00.526 --> 00:02:01.906
features has been to access an

00:02:01.906 --> 00:02:03.046
entire directory and its

00:02:03.046 --> 00:02:03.716
contents.

00:02:04.126 --> 00:02:05.616
We're really excited that an iOS

00:02:05.616 --> 00:02:06.906
13 you now can.

00:02:07.846 --> 00:02:09.485
Features of your app may need to

00:02:09.485 --> 00:02:11.306
access content of a directory

00:02:11.306 --> 00:02:12.626
for reading, writing, or

00:02:12.626 --> 00:02:13.636
creating documents.

00:02:14.286 --> 00:02:15.626
For instance, an image editor

00:02:15.696 --> 00:02:16.836
that needs to apply the same

00:02:16.836 --> 00:02:18.396
change on a batch of images

00:02:18.396 --> 00:02:20.216
would read every image, apply

00:02:20.216 --> 00:02:21.926
modifications, and save a new

00:02:21.926 --> 00:02:23.016
image right next to the

00:02:23.016 --> 00:02:23.386
original.

00:02:23.826 --> 00:02:27.396
Prior to iOS 13, an app could

00:02:27.396 --> 00:02:28.736
access files outside of its

00:02:28.736 --> 00:02:30.216
application container via the

00:02:30.216 --> 00:02:31.886
UIDocumentPickerViewController

00:02:32.126 --> 00:02:33.396
but the user had to pick one

00:02:33.396 --> 00:02:34.166
file at a time.

00:02:34.956 --> 00:02:37.066
New in iOS 13, your app can

00:02:37.066 --> 00:02:37.426
present a

00:02:37.426 --> 00:02:38.976
UIDocumentPickerViewController

00:02:38.976 --> 00:02:40.386
to let the user pick a folder.

00:02:40.606 --> 00:02:42.836
After validation, your app will

00:02:42.836 --> 00:02:44.336
be granted recursive access to

00:02:44.336 --> 00:02:45.806
the directory as well as all of

00:02:45.806 --> 00:02:46.566
its contents.

00:02:47.376 --> 00:02:48.846
Additionally, you can now set

00:02:48.846 --> 00:02:50.196
the default directory that is

00:02:50.196 --> 00:02:51.236
shown on the document picker

00:02:51.236 --> 00:02:51.976
when presented.

00:02:55.176 --> 00:02:56.526
Now let's take a look at how you

00:02:56.526 --> 00:02:57.976
can do that now using a few

00:02:57.976 --> 00:02:59.236
examples of how to configure the

00:02:59.236 --> 00:03:00.836
UIDocumentPickerViewController.

00:03:01.496 --> 00:03:03.296
To allow folder selection,

00:03:03.596 --> 00:03:05.136
creating instance initialized

00:03:05.136 --> 00:03:07.126
with an array containing only

00:03:07.126 --> 00:03:09.076
the kUTTypeFolder type and then

00:03:09.076 --> 00:03:10.176
present it.

00:03:11.586 --> 00:03:13.316
To set the default directory of

00:03:13.316 --> 00:03:14.676
UIDocumentPickerViewController

00:03:14.676 --> 00:03:16.396
instance, set its directoryURL

00:03:16.396 --> 00:03:18.246
property and then present.

00:03:18.286 --> 00:03:21.596
Now let's take a look at this

00:03:21.596 --> 00:03:22.046
example.

00:03:22.326 --> 00:03:23.406
We show you how to enumerate the

00:03:23.406 --> 00:03:25.326
contents of a folder, but you

00:03:25.326 --> 00:03:26.586
can use the same example to

00:03:26.586 --> 00:03:28.036
write a file here using standard

00:03:28.036 --> 00:03:29.006
File Manager API.

00:03:30.466 --> 00:03:33.096
Also, make sure to use URL start

00:03:33.096 --> 00:03:34.126
and stopAccessing

00:03:34.126 --> 00:03:36.806
SecurityScopedResource calls and

00:03:36.996 --> 00:03:39.066
use NSFileCoordinator API for

00:03:39.066 --> 00:03:40.466
reading and writing operations

00:03:40.536 --> 00:03:41.786
as you can see in the example.

00:03:45.986 --> 00:03:48.526
In iOS 13, users are in control

00:03:48.526 --> 00:03:49.546
of which applications have

00:03:49.546 --> 00:03:50.676
access to folders.

00:03:51.276 --> 00:03:53.136
This access is listed and can be

00:03:53.136 --> 00:03:54.596
revoked in the privacy pane

00:03:54.596 --> 00:03:55.806
under the Files and Folder

00:03:55.806 --> 00:03:56.336
section.

00:03:57.306 --> 00:03:58.946
Be aware that because users can

00:03:58.946 --> 00:04:00.916
revoke access at any time, you

00:04:00.916 --> 00:04:01.976
need to make sure that your code

00:04:01.976 --> 00:04:03.466
gracefully handles errors when

00:04:03.466 --> 00:04:04.926
attempting to open documents or

00:04:04.926 --> 00:04:06.166
when enumerating folders.

00:04:06.606 --> 00:04:10.636
In this example, you can see how

00:04:10.636 --> 00:04:11.756
you can maintain persistent

00:04:11.756 --> 00:04:13.036
access to a folder across

00:04:13.036 --> 00:04:14.916
application launches by storing

00:04:15.456 --> 00:04:17.016
bookmark data and then

00:04:17.016 --> 00:04:19.755
recreating the URL using the URL

00:04:19.926 --> 00:04:21.776
resolvingBookmarkData options

00:04:21.776 --> 00:04:22.176
call.

00:04:26.676 --> 00:04:29.166
New in iOS 13, we've added

00:04:29.166 --> 00:04:30.936
support for external USB drives,

00:04:31.056 --> 00:04:33.016
thumb drives, and SMB servers.

00:04:34.756 --> 00:04:37.936
Drives formatted as APFS, HFS+,

00:04:38.006 --> 00:04:40.046
FAT and ExFAT are supported.

00:04:42.516 --> 00:04:44.306
Drives can be plugged in either

00:04:44.306 --> 00:04:45.686
on the USBC connector on the

00:04:45.736 --> 00:04:47.956
iPad Pro or via the SD card

00:04:47.956 --> 00:04:48.716
reader attachment.

00:04:49.976 --> 00:04:51.526
They are automatically listed in

00:04:51.526 --> 00:04:53.286
the sidebar of the files app or

00:04:53.436 --> 00:04:54.416
in your app with the

00:04:54.416 --> 00:04:55.996
UIDocumentPickerViewController

00:04:56.126 --> 00:04:57.256
or document browser.

00:05:00.046 --> 00:05:01.886
Users can also connect to SMB

00:05:01.886 --> 00:05:03.376
servers using the Connect to

00:05:03.376 --> 00:05:05.296
Server action using the same

00:05:05.296 --> 00:05:06.996
keyboard shortcut as finder or

00:05:07.046 --> 00:05:08.076
using the sidebar menu.

00:05:12.126 --> 00:05:13.206
Any client of

00:05:13.206 --> 00:05:14.716
UIDocumentBrowserViewController

00:05:14.716 --> 00:05:15.776
API or

00:05:15.836 --> 00:05:17.286
UIDocumentPickerViewController

00:05:17.286 --> 00:05:18.786
API get the same support for

00:05:18.786 --> 00:05:20.876
free as long as the app was

00:05:20.876 --> 00:05:23.166
built using the iOS 13 SDK or

00:05:23.166 --> 00:05:23.586
later.

00:05:24.586 --> 00:05:26.066
However, there are few things

00:05:26.066 --> 00:05:27.286
you need to check to make sure

00:05:27.286 --> 00:05:29.536
your app has great support for

00:05:29.536 --> 00:05:30.716
USB and SMB.

00:05:32.346 --> 00:05:33.796
There are few assumptions that

00:05:33.796 --> 00:05:34.616
are no longer true.

00:05:35.386 --> 00:05:36.996
File access is no longer on a

00:05:36.996 --> 00:05:38.386
single volume because they can

00:05:38.386 --> 00:05:39.466
now be stored on external

00:05:39.466 --> 00:05:41.466
volumes, such as USB drives or

00:05:41.466 --> 00:05:42.346
SMB servers.

00:05:43.396 --> 00:05:45.096
Volumes can disappear if the USB

00:05:45.096 --> 00:05:47.266
drive is unplugged or if the

00:05:47.266 --> 00:05:48.516
network connection to an SMB

00:05:48.516 --> 00:05:50.006
server volume is lost.

00:05:51.276 --> 00:05:52.826
Disk access can be slower than

00:05:52.826 --> 00:05:54.146
what you expected in the past.

00:05:55.136 --> 00:05:56.186
An operation that you would

00:05:56.186 --> 00:05:57.706
assume is instant can now take

00:05:57.706 --> 00:05:59.396
several seconds or even minutes

00:05:59.396 --> 00:06:00.296
depending on the network

00:06:00.296 --> 00:06:01.766
conditions or the speed of the

00:06:01.766 --> 00:06:02.546
USB device.

00:06:03.556 --> 00:06:05.356
Also, don't assume the

00:06:05.356 --> 00:06:07.176
underlying file system is always

00:06:07.176 --> 00:06:08.926
APFS or HFS+.

00:06:10.186 --> 00:06:11.386
So how does this affect your

00:06:12.096 --> 00:06:12.163
app?

00:06:14.456 --> 00:06:16.246
If you need to move a file from

00:06:16.246 --> 00:06:18.106
one location to another, use the

00:06:18.106 --> 00:06:20.866
FileManager.moveItem at API and

00:06:21.066 --> 00:06:22.256
this will take care of moving

00:06:22.256 --> 00:06:23.826
files across volumes for you.

00:06:25.026 --> 00:06:26.546
In the past, move and clone

00:06:26.546 --> 00:06:28.036
operations were always fast.

00:06:28.876 --> 00:06:30.336
When moving across volumes, the

00:06:30.336 --> 00:06:32.326
operation can become slower copy

00:06:32.326 --> 00:06:32.836
and delete.

00:06:33.296 --> 00:06:36.176
If you use NSTemporaryDirectory

00:06:36.346 --> 00:06:37.866
to save a temporary version of a

00:06:37.866 --> 00:06:39.906
file, you should update your

00:06:39.906 --> 00:06:41.626
code to choose the location of

00:06:41.626 --> 00:06:42.906
the temporary folder based on

00:06:42.906 --> 00:06:44.166
the ultimate destination of the

00:06:44.166 --> 00:06:45.136
files written in it.

00:06:46.446 --> 00:06:47.276
You can do this with the

00:06:47.276 --> 00:06:48.776
following File Manager call,

00:06:50.176 --> 00:06:52.156
File Manager URL for

00:06:52.156 --> 00:06:54.336
itemReplacementDirectory in

00:06:54.476 --> 00:06:56.816
userDomainMask appropriateFor

00:06:56.946 --> 00:06:57.456
URL.

00:06:58.426 --> 00:06:59.316
This will always give you the

00:06:59.316 --> 00:07:00.656
right temporary directory to

00:07:00.656 --> 00:07:01.516
write files, to.

00:07:02.076 --> 00:07:05.136
In the past, your app may have

00:07:05.136 --> 00:07:06.756
assumed that a file may never

00:07:06.756 --> 00:07:08.936
disappear while it is open and

00:07:08.936 --> 00:07:10.356
this is no longer true because

00:07:10.356 --> 00:07:12.106
USB drives can be unplugged and

00:07:12.106 --> 00:07:13.686
SMB server connections can be

00:07:13.686 --> 00:07:14.296
interrupted.

00:07:15.126 --> 00:07:16.516
This may cause your app to fail

00:07:16.516 --> 00:07:17.656
while reading or writing file

00:07:17.656 --> 00:07:18.276
contents.

00:07:19.216 --> 00:07:20.926
Your app should check for errors

00:07:20.926 --> 00:07:21.876
and fail gracefully.

00:07:22.876 --> 00:07:24.446
One suggestion is if your app

00:07:24.446 --> 00:07:26.096
fails to write a file, it could

00:07:26.096 --> 00:07:26.556
present a

00:07:26.556 --> 00:07:28.126
UIDocumentPickerViewController

00:07:28.256 --> 00:07:29.296
to let the user choose an

00:07:29.296 --> 00:07:31.596
alternate location to save the

00:07:32.406 --> 00:07:32.516
file.

00:07:32.726 --> 00:07:34.186
Reading or writing a file stored

00:07:34.186 --> 00:07:35.986
on a USB drive or on a distant

00:07:35.986 --> 00:07:38.496
SMB server can be slow so you

00:07:38.496 --> 00:07:39.546
need to make sure your app

00:07:39.546 --> 00:07:40.846
doesn't hang while performing a

00:07:40.846 --> 00:07:41.736
file operation.

00:07:42.196 --> 00:07:43.956
Always perform file system

00:07:43.956 --> 00:07:45.286
operations on a background

00:07:45.286 --> 00:07:45.526
queue.

00:07:46.736 --> 00:07:47.946
We also recommend that you add

00:07:47.946 --> 00:07:50.076
UI like an activity indicator to

00:07:50.076 --> 00:07:51.236
let the user know something is

00:07:51.236 --> 00:07:53.966
happening, and offering a way

00:07:54.046 --> 00:07:55.456
for your user to cancel the

00:07:55.456 --> 00:07:56.756
operation is a great idea.

00:07:57.876 --> 00:07:59.326
Otherwise the user might feel

00:07:59.326 --> 00:08:00.366
like the application is

00:08:00.366 --> 00:08:00.976
unresponsive.

00:08:01.426 --> 00:08:05.186
When a document is stored on a

00:08:05.186 --> 00:08:07.216
USB drive or remote SMB server,

00:08:07.616 --> 00:08:09.686
LIFS is reported instead of the

00:08:09.686 --> 00:08:10.936
file system the media is

00:08:10.936 --> 00:08:11.736
formatted as.

00:08:12.546 --> 00:08:13.606
It's likely that your app should

00:08:13.606 --> 00:08:14.696
not worry about the underlying

00:08:14.696 --> 00:08:15.406
file system.

00:08:16.046 --> 00:08:17.236
Instead you should check the

00:08:17.236 --> 00:08:18.766
file system capabilities to know

00:08:18.766 --> 00:08:20.396
which file system operations are

00:08:20.396 --> 00:08:20.906
supported.

00:08:21.916 --> 00:08:23.676
LIFS is a file system

00:08:23.676 --> 00:08:24.986
abstraction and it do not look

00:08:24.986 --> 00:08:26.196
for its presence directly.

00:08:27.076 --> 00:08:28.786
To know more about LIFS, we

00:08:28.786 --> 00:08:30.076
recommend that you look at the

00:08:30.076 --> 00:08:31.276
What's New in File Systems

00:08:31.276 --> 00:08:31.756
session.

00:08:36.116 --> 00:08:38.176
New in iOS 13, there's

00:08:38.176 --> 00:08:39.756
additional customization support

00:08:39.756 --> 00:08:39.823
in

00:08:39.823 --> 00:08:41.395
UIDocumentBrowserViewController.

00:08:41.556 --> 00:08:45.536
Let's take a look at this now.

00:08:45.536 --> 00:08:47.016
Now, you can choose to always

00:08:47.016 --> 00:08:48.486
show file extensions by setting

00:08:48.486 --> 00:08:49.896
the shouldShowFileExtensions

00:08:49.896 --> 00:08:50.716
property to true.

00:08:51.296 --> 00:08:54.066
The Create Document button can

00:08:54.066 --> 00:08:55.876
now also be customized to adjust

00:08:55.876 --> 00:08:57.146
the aspect ratio of the button

00:08:57.146 --> 00:08:58.356
icon by setting the

00:08:58.356 --> 00:09:00.126
defaultDocumentAspectRatio

00:09:00.126 --> 00:09:00.646
property.

00:09:01.626 --> 00:09:03.536
And the button titled Text can

00:09:03.536 --> 00:09:04.906
now be changed by setting the

00:09:04.906 --> 00:09:05.826
localizedCreate

00:09:05.826 --> 00:09:07.466
DocumentActionTitle property.

00:09:07.916 --> 00:09:10.206
And now Lyn will talk about

00:09:10.206 --> 00:09:11.786
What's New in Quick Look.

00:09:14.476 --> 00:09:16.076
>> Fetching File Thumbnails in

00:09:16.076 --> 00:09:17.116
Your App.

00:09:17.386 --> 00:09:18.626
This is for those of you who

00:09:18.626 --> 00:09:19.976
want to enhance the appearance

00:09:19.976 --> 00:09:21.166
of your application by

00:09:21.166 --> 00:09:22.886
displaying rich file thumbnails.

00:09:24.476 --> 00:09:26.186
So instead of something like

00:09:26.186 --> 00:09:29.106
this, you could have something

00:09:29.106 --> 00:09:29.786
like this.

00:09:31.556 --> 00:09:33.306
Quick Look thumbnailing is a new

00:09:33.306 --> 00:09:34.956
cross platform framework for

00:09:34.956 --> 00:09:36.666
retrieving thumbnail images for

00:09:36.666 --> 00:09:37.606
file URLs.

00:09:38.276 --> 00:09:40.196
This is new functionality on iOS

00:09:40.196 --> 00:09:42.106
and replaces the C API for

00:09:42.106 --> 00:09:43.856
QLThumbnail on macOS.

00:09:44.656 --> 00:09:45.766
It also replaces

00:09:45.766 --> 00:09:47.936
NSURLThumbnailDictionaryKey.

00:09:49.216 --> 00:09:51.326
iOS and macOS provide built-in

00:09:51.326 --> 00:09:52.846
support for several file types,

00:09:52.986 --> 00:09:54.986
such as images, PDFs, text

00:09:54.986 --> 00:09:56.486
files, videos, et cetera.

00:09:56.806 --> 00:09:59.246
You can also provide support for

00:09:59.246 --> 00:10:00.486
your own file types with

00:10:00.486 --> 00:10:01.626
thumbnail extensions.

00:10:04.356 --> 00:10:05.696
Quick Look thumbnailing is

00:10:05.696 --> 00:10:06.936
non-UI framework.

00:10:07.576 --> 00:10:09.526
We don't import UIKit or AppKit

00:10:09.526 --> 00:10:10.086
by default.

00:10:10.796 --> 00:10:12.526
We can get CGImages of your

00:10:12.526 --> 00:10:14.176
thumbnail without either but you

00:10:14.176 --> 00:10:16.476
can also obtain UIImages on iOS

00:10:16.476 --> 00:10:18.836
or NSImages on macOS by

00:10:18.836 --> 00:10:20.746
explicitly linking UIKit or

00:10:20.746 --> 00:10:22.016
AppKit respectively.

00:10:23.226 --> 00:10:25.286
It is asynchronous so it won't

00:10:25.286 --> 00:10:26.206
block while retrieving the

00:10:26.206 --> 00:10:28.706
thumbnail and it supports

00:10:28.706 --> 00:10:30.366
cancellation in case you decide

00:10:30.366 --> 00:10:31.366
you don't want that thumbnail

00:10:31.366 --> 00:10:31.896
after all.

00:10:34.996 --> 00:10:36.556
Let's start with a big picture

00:10:36.556 --> 00:10:37.086
overview.

00:10:37.536 --> 00:10:39.336
To get a thumbnail, you start by

00:10:39.336 --> 00:10:40.266
creating a

00:10:40.266 --> 00:10:42.626
QLThumbnailGenerator.Request and

00:10:42.626 --> 00:10:43.566
then pass it to a

00:10:43.566 --> 00:10:46.316
QLThumbnailGenerator specifying

00:10:46.316 --> 00:10:47.736
if you would like to be notified

00:10:47.736 --> 00:10:49.406
every time a new representation

00:10:49.406 --> 00:10:51.336
of the thumbnail is available or

00:10:51.336 --> 00:10:52.156
only when the best

00:10:52.156 --> 00:10:53.796
representation you requested is

00:10:53.796 --> 00:10:54.376
complete.

00:10:54.416 --> 00:10:58.366
You can request different

00:10:58.366 --> 00:10:59.806
representations of thumbnails

00:10:59.926 --> 00:11:01.066
which will have different

00:11:01.066 --> 00:11:02.636
quality and performance costs.

00:11:04.066 --> 00:11:05.506
Icon is the generic image

00:11:05.506 --> 00:11:06.986
associated with that file type.

00:11:07.586 --> 00:11:08.716
This will be the same for all

00:11:08.716 --> 00:11:10.016
files of a given type.

00:11:10.436 --> 00:11:13.306
Low quality thumbnail is a

00:11:13.306 --> 00:11:14.556
faster thumbnail that we were

00:11:14.556 --> 00:11:16.456
able to provide that may not be

00:11:16.456 --> 00:11:18.066
exactly the size you specified.

00:11:19.026 --> 00:11:20.166
This typically comes from a

00:11:20.166 --> 00:11:21.886
cached version of the thumbnail

00:11:21.956 --> 00:11:23.636
or possibly thumbnails embedded

00:11:23.636 --> 00:11:24.776
in the file itself.

00:11:26.176 --> 00:11:27.956
The last representation type

00:11:28.216 --> 00:11:29.796
thumbnail is a full quality

00:11:29.796 --> 00:11:30.836
version of the thumbnail,

00:11:31.316 --> 00:11:32.886
matching the request exactly.

00:11:33.436 --> 00:11:35.196
This will take the longest to

00:11:35.196 --> 00:11:35.676
generate.

00:11:37.426 --> 00:11:38.986
For convenience, you can also

00:11:38.986 --> 00:11:41.196
specify all to get any type of

00:11:41.196 --> 00:11:42.166
available thumbnail.

00:11:42.596 --> 00:11:46.426
When you create a QLThumbnail

00:11:46.426 --> 00:11:48.296
generation request, you specify

00:11:48.296 --> 00:11:50.486
size, scale and representation

00:11:50.486 --> 00:11:51.376
types you would like.

00:11:51.866 --> 00:11:53.926
You may only care about the full

00:11:53.926 --> 00:11:55.986
quality thumbnail or you may be

00:11:55.986 --> 00:11:58.176
OK with an icon or lower quality

00:11:58.176 --> 00:11:58.726
version.

00:11:58.986 --> 00:12:00.886
It's best to specify all

00:12:00.916 --> 00:12:02.476
representation types that will

00:12:02.476 --> 00:12:04.496
work for you as not all three

00:12:04.586 --> 00:12:06.086
types may be available for a

00:12:06.086 --> 00:12:06.876
given thumbnail.

00:12:09.786 --> 00:12:10.576
You will get a

00:12:10.576 --> 00:12:12.386
QLThumbnailRepresentation back

00:12:13.096 --> 00:12:14.386
which will specify the type of

00:12:14.386 --> 00:12:16.346
thumbnail it is, icon, low

00:12:16.346 --> 00:12:18.546
quality or thumbnail and an

00:12:18.546 --> 00:12:20.296
image which can either be

00:12:20.296 --> 00:12:22.716
accessed as a CGImage, or if

00:12:22.716 --> 00:12:24.096
you've linked UIKit on iOS or

00:12:24.096 --> 00:12:26.876
AppKit on macOS, you can get a

00:12:26.876 --> 00:12:28.466
UIImage or NS Image

00:12:28.566 --> 00:12:29.186
respectively.

00:12:29.546 --> 00:12:32.246
To get that

00:12:32.246 --> 00:12:34.396
QLThumbnailRepresentation, you

00:12:34.396 --> 00:12:35.926
pass your thumbnail request to a

00:12:35.926 --> 00:12:37.326
QLThumbnailGenerator.

00:12:37.676 --> 00:12:39.646
If you just want the best

00:12:39.646 --> 00:12:41.696
quality thumbnail available, use

00:12:41.696 --> 00:12:43.296
generateBestRepresentation.

00:12:43.916 --> 00:12:45.116
This will call your completion

00:12:45.116 --> 00:12:46.626
handler with the best version of

00:12:46.626 --> 00:12:47.716
your thumbnail request that

00:12:47.716 --> 00:12:50.796
could be created.

00:12:50.796 --> 00:12:52.296
Or you may prefer to get

00:12:52.296 --> 00:12:54.336
incremental updates by providing

00:12:54.336 --> 00:12:55.896
an updateHandler to generate

00:12:55.896 --> 00:12:57.396
representations that will be

00:12:57.396 --> 00:12:59.326
called as each representation

00:12:59.326 --> 00:13:00.206
becomes available.

00:13:00.676 --> 00:13:02.566
You can use this, for example,

00:13:02.566 --> 00:13:04.436
to update your UI quickly and

00:13:04.506 --> 00:13:05.946
then improve the quality of what

00:13:05.946 --> 00:13:07.636
is shown as better thumbnails

00:13:07.916 --> 00:13:08.256
arrive.

00:13:08.826 --> 00:13:12.446
So that's enough about thumbnail

00:13:12.446 --> 00:13:13.026
retrieval.

00:13:13.146 --> 00:13:14.486
Let's talk about using Quick

00:13:14.486 --> 00:13:16.496
Look to edit images, PDFs and

00:13:16.496 --> 00:13:17.136
videos.

00:13:20.146 --> 00:13:21.886
Quick Look provides API to

00:13:21.886 --> 00:13:23.336
preview documents of various

00:13:23.336 --> 00:13:24.606
types of files on iOS.

00:13:25.406 --> 00:13:26.616
It also allows you to provide

00:13:26.616 --> 00:13:28.156
custom previews for your own

00:13:28.156 --> 00:13:29.646
documents via extensions.

00:13:31.116 --> 00:13:33.386
Now in iOS 13, we've also added

00:13:33.386 --> 00:13:35.186
support to quickly edit images,

00:13:35.346 --> 00:13:36.906
PDFs and videos with the

00:13:36.906 --> 00:13:38.236
QLPreviewController.

00:13:38.616 --> 00:13:42.516
The QLPreviewController is what

00:13:42.516 --> 00:13:43.956
you use to preview a file.

00:13:44.316 --> 00:13:46.366
To make use if it simply

00:13:46.366 --> 00:13:47.526
allocate an instance of

00:13:47.526 --> 00:13:49.246
QLPreviewController and set a

00:13:49.246 --> 00:13:50.846
data source and delegate before

00:13:50.846 --> 00:13:51.486
presenting it.

00:13:52.416 --> 00:13:53.686
To learn more about Quick Look

00:13:53.686 --> 00:13:55.386
and the QLPreviewController, we

00:13:55.386 --> 00:13:56.586
highly encourage you to check

00:13:56.586 --> 00:13:59.036
out our WWDC presentation from

00:13:59.036 --> 00:14:01.296
2018 Quick Look Previews from

00:14:01.296 --> 00:14:01.906
the Ground Up.

00:14:02.486 --> 00:14:05.886
New to iOS 13, the

00:14:05.886 --> 00:14:07.376
QLPreviewController also

00:14:07.376 --> 00:14:09.016
provides access to Markup, the

00:14:09.426 --> 00:14:11.046
editing tools available when you

00:14:11.046 --> 00:14:13.376
preview a document and files or

00:14:13.666 --> 00:14:14.916
edit an attachment in mail.

00:14:15.426 --> 00:14:18.416
This is available for images and

00:14:21.016 --> 00:14:21.146
PDFs.

00:14:21.336 --> 00:14:22.746
QLPreviewController also

00:14:22.746 --> 00:14:24.146
provides support for trimming

00:14:24.146 --> 00:14:25.186
and rotating videos.

00:14:25.596 --> 00:14:28.086
To use these features, you just

00:14:28.086 --> 00:14:29.406
have to enable editing mode.

00:14:29.806 --> 00:14:33.836
All you have to do is implement

00:14:33.836 --> 00:14:35.216
an optional delegate method

00:14:35.686 --> 00:14:37.416
editing mode for preview item.

00:14:37.866 --> 00:14:40.336
By default, editing is disabled

00:14:40.716 --> 00:14:43.046
but it is possible to enable it

00:14:43.046 --> 00:14:44.646
on a per item basis.

00:14:45.166 --> 00:14:46.536
This delegate method allows you

00:14:46.536 --> 00:14:48.516
to specify both if you want

00:14:48.516 --> 00:14:50.556
editing capabilities and how you

00:14:50.556 --> 00:14:51.776
want to handle the resulting

00:14:51.776 --> 00:14:52.286
file.

00:14:52.816 --> 00:14:56.146
You can have the

00:14:56.146 --> 00:14:57.886
QLPreviewController overwrite

00:14:57.886 --> 00:14:59.036
the original file with the

00:14:59.036 --> 00:15:00.486
user's edited version.

00:15:00.706 --> 00:15:03.426
To do so, return updateContents

00:15:03.426 --> 00:15:05.206
from editing mode for preview

00:15:05.206 --> 00:15:05.666
item.

00:15:07.556 --> 00:15:09.246
If you need to react to edits

00:15:09.246 --> 00:15:11.156
being successfully saved, you

00:15:11.156 --> 00:15:12.796
can also implement the optional

00:15:12.796 --> 00:15:15.266
didUpdateContentsof previewItem

00:15:17.806 --> 00:15:18.026
method.

00:15:18.116 --> 00:15:19.816
Or you may prefer to use

00:15:19.816 --> 00:15:21.556
QLPreviewController to create

00:15:21.556 --> 00:15:23.336
edited copies of the files being

00:15:23.336 --> 00:15:24.716
previewed and manage them

00:15:24.716 --> 00:15:25.226
yourself.

00:15:25.826 --> 00:15:28.526
To do so return createCopy from

00:15:28.526 --> 00:15:30.306
editing mode for preview item

00:15:30.846 --> 00:15:32.796
and implement the delegate

00:15:32.796 --> 00:15:35.226
method that saved edited copy of

00:15:35.316 --> 00:15:36.786
preview item at modified

00:15:36.786 --> 00:15:37.906
contents URL.

00:15:42.316 --> 00:15:44.456
Quick Look Extension APIs on

00:15:44.456 --> 00:15:45.056
macOS.

00:15:46.556 --> 00:15:47.716
So we've just talked about

00:15:47.716 --> 00:15:49.476
getting and using thumbnails and

00:15:49.476 --> 00:15:50.476
previews for files.

00:15:51.476 --> 00:15:52.466
Now let's talk about how to

00:15:52.466 --> 00:15:54.046
provide thumbnails and previews

00:15:54.046 --> 00:15:55.316
for your own file types.

00:15:55.646 --> 00:15:58.406
Already on iOS, an app can

00:15:58.406 --> 00:15:59.936
implement a Quick Look thumbnail

00:15:59.936 --> 00:16:01.626
and preview extension to provide

00:16:01.626 --> 00:16:03.416
systemwide thumbnail and preview

00:16:03.416 --> 00:16:05.086
support for its own documents.

00:16:05.716 --> 00:16:06.626
Now the same Quick Look

00:16:06.626 --> 00:16:08.536
extension API is available on

00:16:08.536 --> 00:16:09.286
macOS.

00:16:11.116 --> 00:16:12.806
Thumbnails are used throughout

00:16:12.806 --> 00:16:14.946
macOS and iOS to allow users to

00:16:14.946 --> 00:16:16.356
identify files quickly.

00:16:17.176 --> 00:16:18.626
For instance, you can see on the

00:16:18.626 --> 00:16:20.306
screenshot how macOS makes use

00:16:20.306 --> 00:16:21.246
of them in Finder.

00:16:21.506 --> 00:16:23.686
MacOS can generate thumbnails

00:16:23.686 --> 00:16:26.176
for many common file types, but

00:16:26.176 --> 00:16:27.276
implementing a thumbnail

00:16:27.276 --> 00:16:28.766
extension allows you to also

00:16:28.766 --> 00:16:30.126
provide thumbnails for your own

00:16:30.126 --> 00:16:31.996
file types so that they can have

00:16:31.996 --> 00:16:33.826
a rich representation in Finder

00:16:33.826 --> 00:16:35.026
and elsewhere a thumbnail might

00:16:35.026 --> 00:16:35.386
show.

00:16:35.946 --> 00:16:38.546
The extension API replaces the

00:16:38.546 --> 00:16:40.446
old CF plug-in based generator

00:16:40.446 --> 00:16:40.976
system.

00:16:41.116 --> 00:16:42.566
If you have a Quick Look

00:16:42.566 --> 00:16:44.506
generator, consider migrating

00:16:44.506 --> 00:16:44.876
soon.

00:16:45.206 --> 00:16:47.866
I say Quick Look extension in a

00:16:47.866 --> 00:16:49.176
general sense here as the

00:16:49.176 --> 00:16:50.756
thumbnail extension point comes

00:16:50.756 --> 00:16:51.936
from Quick Look thumbnailing.

00:16:52.566 --> 00:16:53.996
This was previously vended from

00:16:53.996 --> 00:16:55.466
the Quick Look framework on iOS

00:16:56.276 --> 00:16:57.516
but you might want to consider

00:16:57.516 --> 00:16:58.896
importing it from the Quick Look

00:16:58.896 --> 00:17:00.126
thumbnailing instead if you do

00:17:00.126 --> 00:17:02.406
not need UIKit as this will make

00:17:02.406 --> 00:17:03.626
your extension leaner.

00:17:06.116 --> 00:17:07.915
To create a thumbnail extension,

00:17:07.996 --> 00:17:09.816
add a new target in your Xcode

00:17:09.816 --> 00:17:11.156
project using the thumbnail

00:17:11.156 --> 00:17:12.246
extension template.

00:17:13.976 --> 00:17:15.586
After setting up your extension

00:17:15.586 --> 00:17:17.146
target, you will be able to

00:17:17.146 --> 00:17:18.516
start implementing your

00:17:18.516 --> 00:17:21.026
QLThumbnailProvider subclass.

00:17:21.126 --> 00:17:22.316
You can draw your thumbnail

00:17:22.316 --> 00:17:24.316
using either a CG context, an

00:17:24.316 --> 00:17:26.106
AppKit context, or you can

00:17:26.106 --> 00:17:28.415
provide a file URL to an image.

00:17:31.116 --> 00:17:32.846
Here's a quick example where we

00:17:32.846 --> 00:17:34.316
overwrite the provide thumbnail

00:17:34.316 --> 00:17:35.776
for request handler method.

00:17:36.206 --> 00:17:37.986
We extensively cover this part

00:17:37.986 --> 00:17:39.466
of the Quick Look API in our

00:17:39.466 --> 00:17:43.016
session from WWDC 2017 "Building

00:17:43.016 --> 00:17:44.996
Great Document-based Apps in iOS

00:17:44.996 --> 00:17:45.496
11".

00:17:46.016 --> 00:17:47.336
We highly encourage you to check

00:17:47.336 --> 00:17:47.666
it out.

00:17:47.996 --> 00:17:50.106
In a nutshell, you will get a

00:17:50.106 --> 00:17:52.006
QLFileThumbnailRequest which

00:17:52.006 --> 00:17:54.146
will have the URL of the file,

00:17:54.356 --> 00:17:56.596
the maximum and minimum sizes of

00:17:56.596 --> 00:17:58.226
the thumbnail, and its scale.

00:17:58.766 --> 00:18:00.896
Use these to create a thumbnail

00:18:00.896 --> 00:18:02.466
matching those specifications.

00:18:04.306 --> 00:18:06.216
For each thumbnail request, the

00:18:06.216 --> 00:18:07.846
API expects you to create a

00:18:07.846 --> 00:18:10.006
QLThumbnailReply which will be

00:18:10.006 --> 00:18:11.286
used to generate the thumbnail.

00:18:11.526 --> 00:18:13.476
Pass the QLThumbnailReply to the

00:18:13.476 --> 00:18:14.716
completion handler above.

00:18:18.346 --> 00:18:19.536
To debug your thumbnail

00:18:19.536 --> 00:18:21.616
extension on macOS, you can use

00:18:21.616 --> 00:18:22.436
QLManage.

00:18:22.466 --> 00:18:24.506
If you have written Quick Look

00:18:24.506 --> 00:18:26.096
generators in the past, you may

00:18:26.096 --> 00:18:27.036
recognize this tool.

00:18:27.036 --> 00:18:29.066
Build and run your extension

00:18:29.066 --> 00:18:30.746
target in Xcode to register your

00:18:30.746 --> 00:18:32.106
extension with the system.

00:18:32.856 --> 00:18:34.606
Then use QLManage to generate a

00:18:34.606 --> 00:18:36.176
thumbnail of your file type and

00:18:36.176 --> 00:18:37.536
attach to your extension in

00:18:37.566 --> 00:18:37.976
Xcode.

00:18:40.096 --> 00:18:41.866
Preview Extensions for Files.

00:18:42.196 --> 00:18:44.266
New this year, Quick Look on

00:18:44.266 --> 00:18:46.286
macOS also allows you to provide

00:18:46.286 --> 00:18:48.276
previews for your own file types

00:18:48.276 --> 00:18:49.896
by implementing a preview

00:18:49.896 --> 00:18:50.646
extension.

00:18:51.956 --> 00:18:53.406
Quick Look preview extensions

00:18:53.406 --> 00:18:54.946
already existed to support Core

00:18:54.946 --> 00:18:55.966
Spotlight previews.

00:18:56.326 --> 00:18:59.306
See WWDC 2017's What's New in

00:18:59.306 --> 00:19:00.846
Core Spotlight for iOS and

00:19:00.846 --> 00:19:01.456
macOS.

00:19:02.406 --> 00:19:03.596
This year we've also added

00:19:03.596 --> 00:19:04.826
support for file previews.

00:19:05.236 --> 00:19:07.906
With the extension, you can now

00:19:07.906 --> 00:19:09.136
directly provide a view to

00:19:09.136 --> 00:19:10.196
display your preview.

00:19:11.146 --> 00:19:12.236
This is different from the old

00:19:12.236 --> 00:19:13.686
Quick Look generators in which

00:19:13.686 --> 00:19:15.596
you provided data or a URL for

00:19:15.596 --> 00:19:16.766
the system to present.

00:19:17.146 --> 00:19:19.436
The new extension API allows you

00:19:19.436 --> 00:19:20.556
greater control over the

00:19:20.556 --> 00:19:21.846
appearance of your preview.

00:19:22.546 --> 00:19:23.966
We recommend you migrate off the

00:19:23.966 --> 00:19:25.336
old Quick Look generators as

00:19:25.336 --> 00:19:26.776
they will be deprecated in a

00:19:26.776 --> 00:19:27.606
future release.

00:19:30.436 --> 00:19:32.206
To create a Preview Extension,

00:19:32.206 --> 00:19:33.826
add a new target in your project

00:19:33.826 --> 00:19:35.636
and select the Preview Extension

00:19:35.636 --> 00:19:36.186
template.

00:19:38.756 --> 00:19:41.066
The API is identical to iOS

00:19:41.066 --> 00:19:41.996
Preview extensions.

00:19:41.996 --> 00:19:44.886
See WWDC 2018's Quick Look

00:19:44.886 --> 00:19:46.036
Previews from the Ground Up.

00:19:46.436 --> 00:19:48.646
As a quick summary, you will

00:19:48.646 --> 00:19:49.766
want to declare the list of

00:19:49.766 --> 00:19:51.006
supported UTIs in

00:19:51.006 --> 00:19:53.036
QLSupportedContentTypes in your

00:19:53.036 --> 00:19:53.826
Info.plist.

00:19:54.966 --> 00:19:57.026
This must exactly match the UTIs

00:19:57.026 --> 00:19:58.706
of the files you want previewed.

00:19:59.216 --> 00:20:01.186
Matching by parent UTI is not

00:20:01.186 --> 00:20:01.726
supported.

00:20:02.136 --> 00:20:03.986
The template will provide a view

00:20:03.986 --> 00:20:05.246
controller which will be what

00:20:05.246 --> 00:20:06.756
you prepare your preview in.

00:20:07.216 --> 00:20:10.366
Here's a quick example of the

00:20:10.366 --> 00:20:11.466
view controller template.

00:20:12.176 --> 00:20:14.156
Implement, preparePreviewofFile

00:20:14.156 --> 00:20:16.126
at URL to prepare your view

00:20:16.126 --> 00:20:16.696
controller.

00:20:16.996 --> 00:20:18.356
And once you're ready, call the

00:20:18.356 --> 00:20:19.256
completion handler.

00:20:20.026 --> 00:20:21.556
The QLPreviewView presenting you

00:20:21.556 --> 00:20:23.096
preview will show a spinning

00:20:23.096 --> 00:20:24.476
wheel until this completion

00:20:24.476 --> 00:20:25.406
handler is called.

00:20:25.816 --> 00:20:27.046
So get your preview ready as

00:20:27.046 --> 00:20:28.166
quickly as possible.

00:20:30.276 --> 00:20:32.176
Keep in mind, your preview can

00:20:32.176 --> 00:20:34.036
be shown in any QLPreviewView

00:20:34.726 --> 00:20:36.166
which may be the Preview panel,

00:20:36.336 --> 00:20:37.636
the Column View sidebar,

00:20:37.876 --> 00:20:39.556
Spotlight or any client of the

00:20:39.556 --> 00:20:41.236
QLPreviewView at all.

00:20:45.716 --> 00:20:47.546
To debug, launch your extension

00:20:47.546 --> 00:20:48.486
target with Xcode.

00:20:48.756 --> 00:20:51.146
Note that Xcode will lunch the

00:20:51.146 --> 00:20:52.616
Quick Look simulator by default.

00:20:53.076 --> 00:20:54.586
This is to aid in debugging Core

00:20:54.586 --> 00:20:55.966
Spotlight previews which are

00:20:55.966 --> 00:20:57.386
extension can also provide

00:20:57.386 --> 00:20:57.966
support for.

00:20:58.516 --> 00:21:00.796
To debug regular file previews,

00:21:00.796 --> 00:21:02.136
you can ignore the simulator and

00:21:02.136 --> 00:21:03.616
invoke your preview with finder

00:21:03.616 --> 00:21:04.496
or QLManage.

00:21:04.746 --> 00:21:05.976
As long as your preview

00:21:05.976 --> 00:21:07.066
extension is launched through

00:21:07.066 --> 00:21:09.016
Xcode, Xcode will automatically

00:21:09.016 --> 00:21:10.306
attach to it.

00:21:14.416 --> 00:21:16.036
Let's talk about supporting iPad

00:21:16.176 --> 00:21:17.936
apps on Mac.

00:21:17.936 --> 00:21:19.586
Our document handling APIs are

00:21:19.586 --> 00:21:22.066
supported in iPad apps on Mac so

00:21:22.066 --> 00:21:22.646
you can bring your

00:21:22.646 --> 00:21:24.616
document-based iOS apps to

00:21:24.616 --> 00:21:25.236
macOS.

00:21:28.036 --> 00:21:28.486
For

00:21:28.486 --> 00:21:30.316
UIDocumentPickerViewController

00:21:30.456 --> 00:21:32.216
use it as you would on iOS and

00:21:32.216 --> 00:21:33.946
users will automatically get and

00:21:33.946 --> 00:21:35.846
experience that feels native to

00:21:36.266 --> 00:21:37.196
macOS.

00:21:37.196 --> 00:21:38.786
Specifically, the .import and

00:21:38.786 --> 00:21:41.066
.open modes show an NSOpenPanel

00:21:41.326 --> 00:21:43.736
and the .exportToService and

00:21:43.736 --> 00:21:45.306
.moveToService modes show an

00:21:45.306 --> 00:21:46.426
NSSavePanel.

00:21:48.296 --> 00:21:49.816
Similarly, for

00:21:49.816 --> 00:21:51.676
UIDocumentBrowserViewController,

00:21:52.176 --> 00:21:53.706
users will get an experience

00:21:53.706 --> 00:21:54.656
that feels native for a

00:21:54.656 --> 00:21:56.456
document-based app on macOS.

00:21:56.826 --> 00:21:59.336
The user will get an NSOpenPanel

00:21:59.336 --> 00:22:00.716
in a separate window just like

00:22:00.716 --> 00:22:01.666
they do in TextEdit.

00:22:02.176 --> 00:22:04.406
There are a few minor runtime

00:22:04.406 --> 00:22:06.456
differences due to differences

00:22:06.456 --> 00:22:08.146
between the interfaces on iOS

00:22:08.146 --> 00:22:08.926
and macOS.

00:22:09.606 --> 00:22:11.016
A good example of this is the

00:22:11.016 --> 00:22:12.916
UIDocumentBrowserViewControllers

00:22:12.916 --> 00:22:14.876
navigation bar which doesn't

00:22:14.876 --> 00:22:15.996
exist on macOS.

00:22:16.596 --> 00:22:17.776
Check the documentation for

00:22:17.776 --> 00:22:19.286
details on what to do for these

00:22:19.286 --> 00:22:20.376
particular cases.

00:22:21.296 --> 00:22:23.106
In some cases, you can use new

00:22:23.106 --> 00:22:25.206
APIs, such as the menu bar API,

00:22:25.356 --> 00:22:26.736
to help you address these UI

00:22:26.806 --> 00:22:27.576
differences.

00:22:30.196 --> 00:22:32.226
Quick Look is also available on

00:22:32.226 --> 00:22:34.186
iPad apps on Mac.

00:22:34.356 --> 00:22:36.186
Presenting a QLPreviewController

00:22:36.186 --> 00:22:38.216
will launch a QLPreviewPanel on

00:22:38.216 --> 00:22:40.476
macOS to provide a more native

00:22:40.476 --> 00:22:41.466
Mac experience.

00:22:42.436 --> 00:22:44.316
Since the QLPreviewPanel is a

00:22:44.316 --> 00:22:45.306
separate window, you're

00:22:45.306 --> 00:22:46.536
presenting view controllers

00:22:46.536 --> 00:22:48.656
content will be visible but it

00:22:48.656 --> 00:22:49.696
will be great out and

00:22:49.696 --> 00:22:50.596
non-interactive.

00:22:52.436 --> 00:22:54.376
Test your iPad apps on Mac to

00:22:54.376 --> 00:22:55.406
make sure it looks great.

00:22:58.096 --> 00:22:59.716
One limitation to note of

00:22:59.716 --> 00:23:01.946
QLPreviewController in iPad apps

00:23:01.946 --> 00:23:03.706
on Mac is that embedding the

00:23:03.706 --> 00:23:05.326
QLPreviewController's view is

00:23:05.326 --> 00:23:07.336
not fully supported and we will

00:23:07.336 --> 00:23:08.896
provide a thumbnail instead of a

00:23:08.896 --> 00:23:09.976
live preview in this case.

00:23:13.046 --> 00:23:14.076
So what have we learned today?

00:23:14.926 --> 00:23:16.046
First, we've shown you how to

00:23:16.046 --> 00:23:18.076
leverage new features of iOS 13

00:23:18.076 --> 00:23:20.066
in your app, such as accessing

00:23:20.066 --> 00:23:21.826
multiple files in a directory,

00:23:22.116 --> 00:23:24.356
supporting USB drives and SMB

00:23:24.356 --> 00:23:24.866
servers.

00:23:25.806 --> 00:23:27.526
Then we've taken a look at using

00:23:27.526 --> 00:23:29.136
Quick Look to display the same

00:23:29.136 --> 00:23:31.196
rich thumbnails as in the files

00:23:31.196 --> 00:23:33.116
app, provide Quick Look editing

00:23:33.116 --> 00:23:34.866
support for images and videos,

00:23:34.906 --> 00:23:36.396
and provide previews and

00:23:36.396 --> 00:23:37.856
thumbnails with modern extension

00:23:37.856 --> 00:23:40.266
API on the Mac.

00:23:40.456 --> 00:23:41.386
Thank you for watching.